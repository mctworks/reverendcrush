/*! For license information please see main.ffa232eb.js.LICENSE.txt */
(()=>{var e={1967:e=>{"use strict";var t,r=Object.create,n=Object.defineProperty,i=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,a=Object.getPrototypeOf,o=Object.prototype.hasOwnProperty,l=(e,t)=>function(){return t||(0,e[s(e)[0]])((t={exports:{}}).exports,t),t.exports},c=(e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})},u=(e,t,r,a)=>{if(t&&"object"===typeof t||"function"===typeof t)for(let l of s(t))o.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(a=i(t,l))||a.enumerable});return e},d=(e,t,i)=>(i=null!=e?r(a(e)):{},u(!t&&e&&e.__esModule?i:n(i,"default",{value:e,enumerable:!0}),e)),f=l({"../../node_modules/.pnpm/graphemer@1.4.0/node_modules/graphemer/lib/boundaries.js"(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.EXTENDED_PICTOGRAPHIC=e.CLUSTER_BREAK=void 0,(t=e.CLUSTER_BREAK||(e.CLUSTER_BREAK={}))[t.CR=0]="CR",t[t.LF=1]="LF",t[t.CONTROL=2]="CONTROL",t[t.EXTEND=3]="EXTEND",t[t.REGIONAL_INDICATOR=4]="REGIONAL_INDICATOR",t[t.SPACINGMARK=5]="SPACINGMARK",t[t.L=6]="L",t[t.V=7]="V",t[t.T=8]="T",t[t.LV=9]="LV",t[t.LVT=10]="LVT",t[t.OTHER=11]="OTHER",t[t.PREPEND=12]="PREPEND",t[t.E_BASE=13]="E_BASE",t[t.E_MODIFIER=14]="E_MODIFIER",t[t.ZWJ=15]="ZWJ",t[t.GLUE_AFTER_ZWJ=16]="GLUE_AFTER_ZWJ",t[t.E_BASE_GAZ=17]="E_BASE_GAZ",e.EXTENDED_PICTOGRAPHIC=101}}),p=l({"../../node_modules/.pnpm/graphemer@1.4.0/node_modules/graphemer/lib/GraphemerHelper.js"(e){Object.defineProperty(e,"__esModule",{value:!0});var t=f();e.default=class{static isSurrogate(e,t){return 55296<=e.charCodeAt(t)&&e.charCodeAt(t)<=56319&&56320<=e.charCodeAt(t+1)&&e.charCodeAt(t+1)<=57343}static codePointAt(e,t){void 0===t&&(t=0);const r=e.charCodeAt(t);if(55296<=r&&r<=56319&&t<e.length-1){const n=r,i=e.charCodeAt(t+1);return 56320<=i&&i<=57343?1024*(n-55296)+(i-56320)+65536:n}if(56320<=r&&r<=57343&&t>=1){const n=e.charCodeAt(t-1);return 55296<=n&&n<=56319?1024*(n-55296)+(r-56320)+65536:r}return r}static shouldBreak(e,r,n,i,s,a){const o=[e].concat(r).concat([n]),l=[i].concat(s).concat([a]),c=o[o.length-2],u=n,d=a,f=o.lastIndexOf(t.CLUSTER_BREAK.REGIONAL_INDICATOR);if(f>0&&o.slice(1,f).every((function(e){return e===t.CLUSTER_BREAK.REGIONAL_INDICATOR}))&&-1===[t.CLUSTER_BREAK.PREPEND,t.CLUSTER_BREAK.REGIONAL_INDICATOR].indexOf(c))return o.filter((function(e){return e===t.CLUSTER_BREAK.REGIONAL_INDICATOR})).length%2===1?3:4;if(c===t.CLUSTER_BREAK.CR&&u===t.CLUSTER_BREAK.LF)return 0;if(c===t.CLUSTER_BREAK.CONTROL||c===t.CLUSTER_BREAK.CR||c===t.CLUSTER_BREAK.LF)return 1;if(u===t.CLUSTER_BREAK.CONTROL||u===t.CLUSTER_BREAK.CR||u===t.CLUSTER_BREAK.LF)return 1;if(c===t.CLUSTER_BREAK.L&&(u===t.CLUSTER_BREAK.L||u===t.CLUSTER_BREAK.V||u===t.CLUSTER_BREAK.LV||u===t.CLUSTER_BREAK.LVT))return 0;if(!(c!==t.CLUSTER_BREAK.LV&&c!==t.CLUSTER_BREAK.V||u!==t.CLUSTER_BREAK.V&&u!==t.CLUSTER_BREAK.T))return 0;if((c===t.CLUSTER_BREAK.LVT||c===t.CLUSTER_BREAK.T)&&u===t.CLUSTER_BREAK.T)return 0;if(u===t.CLUSTER_BREAK.EXTEND||u===t.CLUSTER_BREAK.ZWJ)return 0;if(u===t.CLUSTER_BREAK.SPACINGMARK)return 0;if(c===t.CLUSTER_BREAK.PREPEND)return 0;const p=l.slice(0,-1).lastIndexOf(t.EXTENDED_PICTOGRAPHIC);return-1!==p&&l[p]===t.EXTENDED_PICTOGRAPHIC&&o.slice(p+1,-2).every((function(e){return e===t.CLUSTER_BREAK.EXTEND}))&&c===t.CLUSTER_BREAK.ZWJ&&d===t.EXTENDED_PICTOGRAPHIC?0:-1!==r.indexOf(t.CLUSTER_BREAK.REGIONAL_INDICATOR)?2:c===t.CLUSTER_BREAK.REGIONAL_INDICATOR&&u===t.CLUSTER_BREAK.REGIONAL_INDICATOR?0:1}}}}),h=l({"../../node_modules/.pnpm/graphemer@1.4.0/node_modules/graphemer/lib/GraphemerIterator.js"(e){Object.defineProperty(e,"__esModule",{value:!0});var t=class{constructor(e,t){this._index=0,this._str=e,this._nextBreak=t}[Symbol.iterator](){return this}next(){let e;if((e=this._nextBreak(this._str,this._index))<this._str.length){const t=this._str.slice(this._index,e);return this._index=e,{value:t,done:!1}}if(this._index<this._str.length){const e=this._str.slice(this._index);return this._index=this._str.length,{value:e,done:!1}}return{value:void 0,done:!0}}};e.default=t}}),m=l({"../../node_modules/.pnpm/graphemer@1.4.0/node_modules/graphemer/lib/Graphemer.js"(e){var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0});var r=f(),n=t(p()),i=t(h()),s=class{static nextBreak(e,t){if(void 0===t&&(t=0),t<0)return 0;if(t>=e.length-1)return e.length;const r=n.default.codePointAt(e,t),i=s.getGraphemeBreakProperty(r),a=s.getEmojiProperty(r),o=[],l=[];for(let c=t+1;c<e.length;c++){if(n.default.isSurrogate(e,c-1))continue;const t=n.default.codePointAt(e,c),r=s.getGraphemeBreakProperty(t),u=s.getEmojiProperty(t);if(n.default.shouldBreak(i,o,r,a,l,u))return c;o.push(r),l.push(u)}return e.length}splitGraphemes(e){const t=[];let r,n=0;for(;(r=s.nextBreak(e,n))<e.length;)t.push(e.slice(n,r)),n=r;return n<e.length&&t.push(e.slice(n)),t}iterateGraphemes(e){return new i.default(e,s.nextBreak)}countGraphemes(e){let t,r=0,n=0;for(;(t=s.nextBreak(e,n))<e.length;)n=t,r++;return n<e.length&&r++,r}static getGraphemeBreakProperty(e){if(e<48905){if(e<44116){if(e<4141){if(e<2818){if(e<2363)if(e<1759){if(e<1471){if(e<127){if(e<11){if(e<10){if(0<=e&&e<=9)return r.CLUSTER_BREAK.CONTROL}else if(10===e)return r.CLUSTER_BREAK.LF}else if(e<13){if(11<=e&&e<=12)return r.CLUSTER_BREAK.CONTROL}else if(e<14){if(13===e)return r.CLUSTER_BREAK.CR}else if(14<=e&&e<=31)return r.CLUSTER_BREAK.CONTROL}else if(e<768){if(e<173){if(127<=e&&e<=159)return r.CLUSTER_BREAK.CONTROL}else if(173===e)return r.CLUSTER_BREAK.CONTROL}else if(e<1155){if(768<=e&&e<=879)return r.CLUSTER_BREAK.EXTEND}else if(e<1425){if(1155<=e&&e<=1161)return r.CLUSTER_BREAK.EXTEND}else if(1425<=e&&e<=1469)return r.CLUSTER_BREAK.EXTEND}else if(e<1552){if(e<1476){if(e<1473){if(1471===e)return r.CLUSTER_BREAK.EXTEND}else if(1473<=e&&e<=1474)return r.CLUSTER_BREAK.EXTEND}else if(e<1479){if(1476<=e&&e<=1477)return r.CLUSTER_BREAK.EXTEND}else if(e<1536){if(1479===e)return r.CLUSTER_BREAK.EXTEND}else if(1536<=e&&e<=1541)return r.CLUSTER_BREAK.PREPEND}else if(e<1648){if(e<1564){if(1552<=e&&e<=1562)return r.CLUSTER_BREAK.EXTEND}else if(e<1611){if(1564===e)return r.CLUSTER_BREAK.CONTROL}else if(1611<=e&&e<=1631)return r.CLUSTER_BREAK.EXTEND}else if(e<1750){if(1648===e)return r.CLUSTER_BREAK.EXTEND}else if(e<1757){if(1750<=e&&e<=1756)return r.CLUSTER_BREAK.EXTEND}else if(1757===e)return r.CLUSTER_BREAK.PREPEND}else if(e<2075){if(e<1840)if(e<1770){if(e<1767){if(1759<=e&&e<=1764)return r.CLUSTER_BREAK.EXTEND}else if(1767<=e&&e<=1768)return r.CLUSTER_BREAK.EXTEND}else if(e<1807){if(1770<=e&&e<=1773)return r.CLUSTER_BREAK.EXTEND}else{if(1807===e)return r.CLUSTER_BREAK.PREPEND;if(1809===e)return r.CLUSTER_BREAK.EXTEND}else if(e<2027){if(e<1958){if(1840<=e&&e<=1866)return r.CLUSTER_BREAK.EXTEND}else if(1958<=e&&e<=1968)return r.CLUSTER_BREAK.EXTEND}else if(e<2045){if(2027<=e&&e<=2035)return r.CLUSTER_BREAK.EXTEND}else if(e<2070){if(2045===e)return r.CLUSTER_BREAK.EXTEND}else if(2070<=e&&e<=2073)return r.CLUSTER_BREAK.EXTEND}else if(e<2200){if(e<2089){if(e<2085){if(2075<=e&&e<=2083)return r.CLUSTER_BREAK.EXTEND}else if(2085<=e&&e<=2087)return r.CLUSTER_BREAK.EXTEND}else if(e<2137){if(2089<=e&&e<=2093)return r.CLUSTER_BREAK.EXTEND}else if(e<2192){if(2137<=e&&e<=2139)return r.CLUSTER_BREAK.EXTEND}else if(2192<=e&&e<=2193)return r.CLUSTER_BREAK.PREPEND}else if(e<2275){if(e<2250){if(2200<=e&&e<=2207)return r.CLUSTER_BREAK.EXTEND}else if(e<2274){if(2250<=e&&e<=2273)return r.CLUSTER_BREAK.EXTEND}else if(2274===e)return r.CLUSTER_BREAK.PREPEND}else if(e<2307){if(2275<=e&&e<=2306)return r.CLUSTER_BREAK.EXTEND}else{if(2307===e)return r.CLUSTER_BREAK.SPACINGMARK;if(2362===e)return r.CLUSTER_BREAK.EXTEND}else if(e<2561){if(e<2434){if(e<2381){if(e<2366){if(2363===e)return r.CLUSTER_BREAK.SPACINGMARK;if(2364===e)return r.CLUSTER_BREAK.EXTEND}else if(e<2369){if(2366<=e&&e<=2368)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<2377){if(2369<=e&&e<=2376)return r.CLUSTER_BREAK.EXTEND}else if(2377<=e&&e<=2380)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<2385){if(e<2382){if(2381===e)return r.CLUSTER_BREAK.EXTEND}else if(2382<=e&&e<=2383)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<2402){if(2385<=e&&e<=2391)return r.CLUSTER_BREAK.EXTEND}else if(e<2433){if(2402<=e&&e<=2403)return r.CLUSTER_BREAK.EXTEND}else if(2433===e)return r.CLUSTER_BREAK.EXTEND}else if(e<2503){if(e<2494){if(e<2492){if(2434<=e&&e<=2435)return r.CLUSTER_BREAK.SPACINGMARK}else if(2492===e)return r.CLUSTER_BREAK.EXTEND}else if(e<2495){if(2494===e)return r.CLUSTER_BREAK.EXTEND}else if(e<2497){if(2495<=e&&e<=2496)return r.CLUSTER_BREAK.SPACINGMARK}else if(2497<=e&&e<=2500)return r.CLUSTER_BREAK.EXTEND}else if(e<2519){if(e<2507){if(2503<=e&&e<=2504)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<2509){if(2507<=e&&e<=2508)return r.CLUSTER_BREAK.SPACINGMARK}else if(2509===e)return r.CLUSTER_BREAK.EXTEND}else if(e<2530){if(2519===e)return r.CLUSTER_BREAK.EXTEND}else if(e<2558){if(2530<=e&&e<=2531)return r.CLUSTER_BREAK.EXTEND}else if(2558===e)return r.CLUSTER_BREAK.EXTEND}else if(e<2691){if(e<2631){if(e<2620){if(e<2563){if(2561<=e&&e<=2562)return r.CLUSTER_BREAK.EXTEND}else if(2563===e)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<2622){if(2620===e)return r.CLUSTER_BREAK.EXTEND}else if(e<2625){if(2622<=e&&e<=2624)return r.CLUSTER_BREAK.SPACINGMARK}else if(2625<=e&&e<=2626)return r.CLUSTER_BREAK.EXTEND}else if(e<2672){if(e<2635){if(2631<=e&&e<=2632)return r.CLUSTER_BREAK.EXTEND}else if(e<2641){if(2635<=e&&e<=2637)return r.CLUSTER_BREAK.EXTEND}else if(2641===e)return r.CLUSTER_BREAK.EXTEND}else if(e<2677){if(2672<=e&&e<=2673)return r.CLUSTER_BREAK.EXTEND}else if(e<2689){if(2677===e)return r.CLUSTER_BREAK.EXTEND}else if(2689<=e&&e<=2690)return r.CLUSTER_BREAK.EXTEND}else if(e<2761){if(e<2750){if(2691===e)return r.CLUSTER_BREAK.SPACINGMARK;if(2748===e)return r.CLUSTER_BREAK.EXTEND}else if(e<2753){if(2750<=e&&e<=2752)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<2759){if(2753<=e&&e<=2757)return r.CLUSTER_BREAK.EXTEND}else if(2759<=e&&e<=2760)return r.CLUSTER_BREAK.EXTEND}else if(e<2786){if(e<2763){if(2761===e)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<2765){if(2763<=e&&e<=2764)return r.CLUSTER_BREAK.SPACINGMARK}else if(2765===e)return r.CLUSTER_BREAK.EXTEND}else if(e<2810){if(2786<=e&&e<=2787)return r.CLUSTER_BREAK.EXTEND}else if(e<2817){if(2810<=e&&e<=2815)return r.CLUSTER_BREAK.EXTEND}else if(2817===e)return r.CLUSTER_BREAK.EXTEND}else if(e<3315){if(e<3076){if(e<2946){if(e<2887){if(e<2878){if(e<2876){if(2818<=e&&e<=2819)return r.CLUSTER_BREAK.SPACINGMARK}else if(2876===e)return r.CLUSTER_BREAK.EXTEND}else if(e<2880){if(2878<=e&&e<=2879)return r.CLUSTER_BREAK.EXTEND}else if(e<2881){if(2880===e)return r.CLUSTER_BREAK.SPACINGMARK}else if(2881<=e&&e<=2884)return r.CLUSTER_BREAK.EXTEND}else if(e<2893){if(e<2891){if(2887<=e&&e<=2888)return r.CLUSTER_BREAK.SPACINGMARK}else if(2891<=e&&e<=2892)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<2901){if(2893===e)return r.CLUSTER_BREAK.EXTEND}else if(e<2914){if(2901<=e&&e<=2903)return r.CLUSTER_BREAK.EXTEND}else if(2914<=e&&e<=2915)return r.CLUSTER_BREAK.EXTEND}else if(e<3014){if(e<3007){if(2946===e)return r.CLUSTER_BREAK.EXTEND;if(3006===e)return r.CLUSTER_BREAK.EXTEND}else if(e<3008){if(3007===e)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<3009){if(3008===e)return r.CLUSTER_BREAK.EXTEND}else if(3009<=e&&e<=3010)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<3031){if(e<3018){if(3014<=e&&e<=3016)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<3021){if(3018<=e&&e<=3020)return r.CLUSTER_BREAK.SPACINGMARK}else if(3021===e)return r.CLUSTER_BREAK.EXTEND}else if(e<3072){if(3031===e)return r.CLUSTER_BREAK.EXTEND}else if(e<3073){if(3072===e)return r.CLUSTER_BREAK.EXTEND}else if(3073<=e&&e<=3075)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<3262){if(e<3146){if(e<3134){if(3076===e)return r.CLUSTER_BREAK.EXTEND;if(3132===e)return r.CLUSTER_BREAK.EXTEND}else if(e<3137){if(3134<=e&&e<=3136)return r.CLUSTER_BREAK.EXTEND}else if(e<3142){if(3137<=e&&e<=3140)return r.CLUSTER_BREAK.SPACINGMARK}else if(3142<=e&&e<=3144)return r.CLUSTER_BREAK.EXTEND}else if(e<3201){if(e<3157){if(3146<=e&&e<=3149)return r.CLUSTER_BREAK.EXTEND}else if(e<3170){if(3157<=e&&e<=3158)return r.CLUSTER_BREAK.EXTEND}else if(3170<=e&&e<=3171)return r.CLUSTER_BREAK.EXTEND}else if(e<3202){if(3201===e)return r.CLUSTER_BREAK.EXTEND}else if(e<3260){if(3202<=e&&e<=3203)return r.CLUSTER_BREAK.SPACINGMARK}else if(3260===e)return r.CLUSTER_BREAK.EXTEND}else if(e<3270){if(e<3264){if(3262===e)return r.CLUSTER_BREAK.SPACINGMARK;if(3263===e)return r.CLUSTER_BREAK.EXTEND}else if(e<3266){if(3264<=e&&e<=3265)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<3267){if(3266===e)return r.CLUSTER_BREAK.EXTEND}else if(3267<=e&&e<=3268)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<3276){if(e<3271){if(3270===e)return r.CLUSTER_BREAK.EXTEND}else if(e<3274){if(3271<=e&&e<=3272)return r.CLUSTER_BREAK.SPACINGMARK}else if(3274<=e&&e<=3275)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<3285){if(3276<=e&&e<=3277)return r.CLUSTER_BREAK.EXTEND}else if(e<3298){if(3285<=e&&e<=3286)return r.CLUSTER_BREAK.EXTEND}else if(3298<=e&&e<=3299)return r.CLUSTER_BREAK.EXTEND}else if(e<3551){if(e<3406){if(e<3391){if(e<3330){if(e<3328){if(3315===e)return r.CLUSTER_BREAK.SPACINGMARK}else if(3328<=e&&e<=3329)return r.CLUSTER_BREAK.EXTEND}else if(e<3387){if(3330<=e&&e<=3331)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<3390){if(3387<=e&&e<=3388)return r.CLUSTER_BREAK.EXTEND}else if(3390===e)return r.CLUSTER_BREAK.EXTEND}else if(e<3398){if(e<3393){if(3391<=e&&e<=3392)return r.CLUSTER_BREAK.SPACINGMARK}else if(3393<=e&&e<=3396)return r.CLUSTER_BREAK.EXTEND}else if(e<3402){if(3398<=e&&e<=3400)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<3405){if(3402<=e&&e<=3404)return r.CLUSTER_BREAK.SPACINGMARK}else if(3405===e)return r.CLUSTER_BREAK.EXTEND}else if(e<3530){if(e<3426){if(3406===e)return r.CLUSTER_BREAK.PREPEND;if(3415===e)return r.CLUSTER_BREAK.EXTEND}else if(e<3457){if(3426<=e&&e<=3427)return r.CLUSTER_BREAK.EXTEND}else if(e<3458){if(3457===e)return r.CLUSTER_BREAK.EXTEND}else if(3458<=e&&e<=3459)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<3538){if(e<3535){if(3530===e)return r.CLUSTER_BREAK.EXTEND}else if(e<3536){if(3535===e)return r.CLUSTER_BREAK.EXTEND}else if(3536<=e&&e<=3537)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<3542){if(3538<=e&&e<=3540)return r.CLUSTER_BREAK.EXTEND}else if(e<3544){if(3542===e)return r.CLUSTER_BREAK.EXTEND}else if(3544<=e&&e<=3550)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<3893){if(e<3655){if(e<3633){if(e<3570){if(3551===e)return r.CLUSTER_BREAK.EXTEND}else if(3570<=e&&e<=3571)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<3635){if(3633===e)return r.CLUSTER_BREAK.EXTEND}else if(e<3636){if(3635===e)return r.CLUSTER_BREAK.SPACINGMARK}else if(3636<=e&&e<=3642)return r.CLUSTER_BREAK.EXTEND}else if(e<3764)if(e<3761){if(3655<=e&&e<=3662)return r.CLUSTER_BREAK.EXTEND}else{if(3761===e)return r.CLUSTER_BREAK.EXTEND;if(3763===e)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<3784){if(3764<=e&&e<=3772)return r.CLUSTER_BREAK.EXTEND}else if(e<3864){if(3784<=e&&e<=3790)return r.CLUSTER_BREAK.EXTEND}else if(3864<=e&&e<=3865)return r.CLUSTER_BREAK.EXTEND}else if(e<3967){if(e<3897){if(3893===e)return r.CLUSTER_BREAK.EXTEND;if(3895===e)return r.CLUSTER_BREAK.EXTEND}else if(e<3902){if(3897===e)return r.CLUSTER_BREAK.EXTEND}else if(e<3953){if(3902<=e&&e<=3903)return r.CLUSTER_BREAK.SPACINGMARK}else if(3953<=e&&e<=3966)return r.CLUSTER_BREAK.EXTEND}else if(e<3981){if(e<3968){if(3967===e)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<3974){if(3968<=e&&e<=3972)return r.CLUSTER_BREAK.EXTEND}else if(3974<=e&&e<=3975)return r.CLUSTER_BREAK.EXTEND}else if(e<3993){if(3981<=e&&e<=3991)return r.CLUSTER_BREAK.EXTEND}else if(e<4038){if(3993<=e&&e<=4028)return r.CLUSTER_BREAK.EXTEND}else if(4038===e)return r.CLUSTER_BREAK.EXTEND}else if(e<7204){if(e<6448){if(e<5938){if(e<4226){if(e<4157){if(e<4146){if(e<4145){if(4141<=e&&e<=4144)return r.CLUSTER_BREAK.EXTEND}else if(4145===e)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<4153){if(4146<=e&&e<=4151)return r.CLUSTER_BREAK.EXTEND}else if(e<4155){if(4153<=e&&e<=4154)return r.CLUSTER_BREAK.EXTEND}else if(4155<=e&&e<=4156)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<4184){if(e<4182){if(4157<=e&&e<=4158)return r.CLUSTER_BREAK.EXTEND}else if(4182<=e&&e<=4183)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<4190){if(4184<=e&&e<=4185)return r.CLUSTER_BREAK.EXTEND}else if(e<4209){if(4190<=e&&e<=4192)return r.CLUSTER_BREAK.EXTEND}else if(4209<=e&&e<=4212)return r.CLUSTER_BREAK.EXTEND}else if(e<4352)if(e<4229){if(4226===e)return r.CLUSTER_BREAK.EXTEND;if(4228===e)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<4237){if(4229<=e&&e<=4230)return r.CLUSTER_BREAK.EXTEND}else{if(4237===e)return r.CLUSTER_BREAK.EXTEND;if(4253===e)return r.CLUSTER_BREAK.EXTEND}else if(e<4957){if(e<4448){if(4352<=e&&e<=4447)return r.CLUSTER_BREAK.L}else if(e<4520){if(4448<=e&&e<=4519)return r.CLUSTER_BREAK.V}else if(4520<=e&&e<=4607)return r.CLUSTER_BREAK.T}else if(e<5906){if(4957<=e&&e<=4959)return r.CLUSTER_BREAK.EXTEND}else if(e<5909){if(5906<=e&&e<=5908)return r.CLUSTER_BREAK.EXTEND}else if(5909===e)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<6089){if(e<6070){if(e<5970){if(e<5940){if(5938<=e&&e<=5939)return r.CLUSTER_BREAK.EXTEND}else if(5940===e)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<6002){if(5970<=e&&e<=5971)return r.CLUSTER_BREAK.EXTEND}else if(e<6068){if(6002<=e&&e<=6003)return r.CLUSTER_BREAK.EXTEND}else if(6068<=e&&e<=6069)return r.CLUSTER_BREAK.EXTEND}else if(e<6078){if(e<6071){if(6070===e)return r.CLUSTER_BREAK.SPACINGMARK}else if(6071<=e&&e<=6077)return r.CLUSTER_BREAK.EXTEND}else if(e<6086){if(6078<=e&&e<=6085)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<6087){if(6086===e)return r.CLUSTER_BREAK.EXTEND}else if(6087<=e&&e<=6088)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<6277)if(e<6155){if(e<6109){if(6089<=e&&e<=6099)return r.CLUSTER_BREAK.EXTEND}else if(6109===e)return r.CLUSTER_BREAK.EXTEND}else if(e<6158){if(6155<=e&&e<=6157)return r.CLUSTER_BREAK.EXTEND}else{if(6158===e)return r.CLUSTER_BREAK.CONTROL;if(6159===e)return r.CLUSTER_BREAK.EXTEND}else if(e<6435){if(e<6313){if(6277<=e&&e<=6278)return r.CLUSTER_BREAK.EXTEND}else if(e<6432){if(6313===e)return r.CLUSTER_BREAK.EXTEND}else if(6432<=e&&e<=6434)return r.CLUSTER_BREAK.EXTEND}else if(e<6439){if(6435<=e&&e<=6438)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<6441){if(6439<=e&&e<=6440)return r.CLUSTER_BREAK.EXTEND}else if(6441<=e&&e<=6443)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<6971){if(e<6744)if(e<6681){if(e<6451){if(e<6450){if(6448<=e&&e<=6449)return r.CLUSTER_BREAK.SPACINGMARK}else if(6450===e)return r.CLUSTER_BREAK.EXTEND}else if(e<6457){if(6451<=e&&e<=6456)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<6679){if(6457<=e&&e<=6459)return r.CLUSTER_BREAK.EXTEND}else if(6679<=e&&e<=6680)return r.CLUSTER_BREAK.EXTEND}else if(e<6741){if(e<6683){if(6681<=e&&e<=6682)return r.CLUSTER_BREAK.SPACINGMARK}else if(6683===e)return r.CLUSTER_BREAK.EXTEND}else if(e<6742){if(6741===e)return r.CLUSTER_BREAK.SPACINGMARK}else{if(6742===e)return r.CLUSTER_BREAK.EXTEND;if(6743===e)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<6771){if(e<6754){if(e<6752){if(6744<=e&&e<=6750)return r.CLUSTER_BREAK.EXTEND}else if(6752===e)return r.CLUSTER_BREAK.EXTEND}else if(e<6757){if(6754===e)return r.CLUSTER_BREAK.EXTEND}else if(e<6765){if(6757<=e&&e<=6764)return r.CLUSTER_BREAK.EXTEND}else if(6765<=e&&e<=6770)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<6912){if(e<6783){if(6771<=e&&e<=6780)return r.CLUSTER_BREAK.EXTEND}else if(e<6832){if(6783===e)return r.CLUSTER_BREAK.EXTEND}else if(6832<=e&&e<=6862)return r.CLUSTER_BREAK.EXTEND}else if(e<6916){if(6912<=e&&e<=6915)return r.CLUSTER_BREAK.EXTEND}else if(e<6964){if(6916===e)return r.CLUSTER_BREAK.SPACINGMARK}else if(6964<=e&&e<=6970)return r.CLUSTER_BREAK.EXTEND}else if(e<7080){if(e<7019){if(e<6973){if(6971===e)return r.CLUSTER_BREAK.SPACINGMARK;if(6972===e)return r.CLUSTER_BREAK.EXTEND}else if(e<6978){if(6973<=e&&e<=6977)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<6979){if(6978===e)return r.CLUSTER_BREAK.EXTEND}else if(6979<=e&&e<=6980)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<7073){if(e<7040){if(7019<=e&&e<=7027)return r.CLUSTER_BREAK.EXTEND}else if(e<7042){if(7040<=e&&e<=7041)return r.CLUSTER_BREAK.EXTEND}else if(7042===e)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<7074){if(7073===e)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<7078){if(7074<=e&&e<=7077)return r.CLUSTER_BREAK.EXTEND}else if(7078<=e&&e<=7079)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<7144)if(e<7083){if(e<7082){if(7080<=e&&e<=7081)return r.CLUSTER_BREAK.EXTEND}else if(7082===e)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<7142){if(7083<=e&&e<=7085)return r.CLUSTER_BREAK.EXTEND}else{if(7142===e)return r.CLUSTER_BREAK.EXTEND;if(7143===e)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<7150){if(e<7146){if(7144<=e&&e<=7145)return r.CLUSTER_BREAK.EXTEND}else if(e<7149){if(7146<=e&&e<=7148)return r.CLUSTER_BREAK.SPACINGMARK}else if(7149===e)return r.CLUSTER_BREAK.EXTEND}else if(e<7151){if(7150===e)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<7154){if(7151<=e&&e<=7153)return r.CLUSTER_BREAK.EXTEND}else if(7154<=e&&e<=7155)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<43346){if(e<11647){if(e<7415)if(e<7380){if(e<7220){if(e<7212){if(7204<=e&&e<=7211)return r.CLUSTER_BREAK.SPACINGMARK}else if(7212<=e&&e<=7219)return r.CLUSTER_BREAK.EXTEND}else if(e<7222){if(7220<=e&&e<=7221)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<7376){if(7222<=e&&e<=7223)return r.CLUSTER_BREAK.EXTEND}else if(7376<=e&&e<=7378)return r.CLUSTER_BREAK.EXTEND}else if(e<7394){if(e<7393){if(7380<=e&&e<=7392)return r.CLUSTER_BREAK.EXTEND}else if(7393===e)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<7405){if(7394<=e&&e<=7400)return r.CLUSTER_BREAK.EXTEND}else{if(7405===e)return r.CLUSTER_BREAK.EXTEND;if(7412===e)return r.CLUSTER_BREAK.EXTEND}else if(e<8205)if(e<7616){if(e<7416){if(7415===e)return r.CLUSTER_BREAK.SPACINGMARK}else if(7416<=e&&e<=7417)return r.CLUSTER_BREAK.EXTEND}else if(e<8203){if(7616<=e&&e<=7679)return r.CLUSTER_BREAK.EXTEND}else{if(8203===e)return r.CLUSTER_BREAK.CONTROL;if(8204===e)return r.CLUSTER_BREAK.EXTEND}else if(e<8288){if(e<8206){if(8205===e)return r.CLUSTER_BREAK.ZWJ}else if(e<8232){if(8206<=e&&e<=8207)return r.CLUSTER_BREAK.CONTROL}else if(8232<=e&&e<=8238)return r.CLUSTER_BREAK.CONTROL}else if(e<8400){if(8288<=e&&e<=8303)return r.CLUSTER_BREAK.CONTROL}else if(e<11503){if(8400<=e&&e<=8432)return r.CLUSTER_BREAK.EXTEND}else if(11503<=e&&e<=11505)return r.CLUSTER_BREAK.EXTEND}else if(e<43043)if(e<42612){if(e<12330){if(e<11744){if(11647===e)return r.CLUSTER_BREAK.EXTEND}else if(11744<=e&&e<=11775)return r.CLUSTER_BREAK.EXTEND}else if(e<12441){if(12330<=e&&e<=12335)return r.CLUSTER_BREAK.EXTEND}else if(e<42607){if(12441<=e&&e<=12442)return r.CLUSTER_BREAK.EXTEND}else if(42607<=e&&e<=42610)return r.CLUSTER_BREAK.EXTEND}else if(e<43010){if(e<42654){if(42612<=e&&e<=42621)return r.CLUSTER_BREAK.EXTEND}else if(e<42736){if(42654<=e&&e<=42655)return r.CLUSTER_BREAK.EXTEND}else if(42736<=e&&e<=42737)return r.CLUSTER_BREAK.EXTEND}else if(e<43014){if(43010===e)return r.CLUSTER_BREAK.EXTEND}else{if(43014===e)return r.CLUSTER_BREAK.EXTEND;if(43019===e)return r.CLUSTER_BREAK.EXTEND}else if(e<43188){if(e<43047){if(e<43045){if(43043<=e&&e<=43044)return r.CLUSTER_BREAK.SPACINGMARK}else if(43045<=e&&e<=43046)return r.CLUSTER_BREAK.EXTEND}else if(e<43052){if(43047===e)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<43136){if(43052===e)return r.CLUSTER_BREAK.EXTEND}else if(43136<=e&&e<=43137)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<43263){if(e<43204){if(43188<=e&&e<=43203)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<43232){if(43204<=e&&e<=43205)return r.CLUSTER_BREAK.EXTEND}else if(43232<=e&&e<=43249)return r.CLUSTER_BREAK.EXTEND}else if(e<43302){if(43263===e)return r.CLUSTER_BREAK.EXTEND}else if(e<43335){if(43302<=e&&e<=43309)return r.CLUSTER_BREAK.EXTEND}else if(43335<=e&&e<=43345)return r.CLUSTER_BREAK.EXTEND}else if(e<43698)if(e<43493){if(e<43444)if(e<43392){if(e<43360){if(43346<=e&&e<=43347)return r.CLUSTER_BREAK.SPACINGMARK}else if(43360<=e&&e<=43388)return r.CLUSTER_BREAK.L}else if(e<43395){if(43392<=e&&e<=43394)return r.CLUSTER_BREAK.EXTEND}else{if(43395===e)return r.CLUSTER_BREAK.SPACINGMARK;if(43443===e)return r.CLUSTER_BREAK.EXTEND}else if(e<43450){if(e<43446){if(43444<=e&&e<=43445)return r.CLUSTER_BREAK.SPACINGMARK}else if(43446<=e&&e<=43449)return r.CLUSTER_BREAK.EXTEND}else if(e<43452){if(43450<=e&&e<=43451)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<43454){if(43452<=e&&e<=43453)return r.CLUSTER_BREAK.EXTEND}else if(43454<=e&&e<=43456)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<43573){if(e<43567){if(e<43561){if(43493===e)return r.CLUSTER_BREAK.EXTEND}else if(43561<=e&&e<=43566)return r.CLUSTER_BREAK.EXTEND}else if(e<43569){if(43567<=e&&e<=43568)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<43571){if(43569<=e&&e<=43570)return r.CLUSTER_BREAK.EXTEND}else if(43571<=e&&e<=43572)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<43597)if(e<43587){if(43573<=e&&e<=43574)return r.CLUSTER_BREAK.EXTEND}else{if(43587===e)return r.CLUSTER_BREAK.EXTEND;if(43596===e)return r.CLUSTER_BREAK.EXTEND}else if(e<43644){if(43597===e)return r.CLUSTER_BREAK.SPACINGMARK}else{if(43644===e)return r.CLUSTER_BREAK.EXTEND;if(43696===e)return r.CLUSTER_BREAK.EXTEND}else if(e<44006){if(e<43756)if(e<43710){if(e<43703){if(43698<=e&&e<=43700)return r.CLUSTER_BREAK.EXTEND}else if(43703<=e&&e<=43704)return r.CLUSTER_BREAK.EXTEND}else if(e<43713){if(43710<=e&&e<=43711)return r.CLUSTER_BREAK.EXTEND}else{if(43713===e)return r.CLUSTER_BREAK.EXTEND;if(43755===e)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<43766){if(e<43758){if(43756<=e&&e<=43757)return r.CLUSTER_BREAK.EXTEND}else if(e<43765){if(43758<=e&&e<=43759)return r.CLUSTER_BREAK.SPACINGMARK}else if(43765===e)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<44003){if(43766===e)return r.CLUSTER_BREAK.EXTEND}else if(e<44005){if(44003<=e&&e<=44004)return r.CLUSTER_BREAK.SPACINGMARK}else if(44005===e)return r.CLUSTER_BREAK.EXTEND}else if(e<44032)if(e<44009){if(e<44008){if(44006<=e&&e<=44007)return r.CLUSTER_BREAK.SPACINGMARK}else if(44008===e)return r.CLUSTER_BREAK.EXTEND}else if(e<44012){if(44009<=e&&e<=44010)return r.CLUSTER_BREAK.SPACINGMARK}else{if(44012===e)return r.CLUSTER_BREAK.SPACINGMARK;if(44013===e)return r.CLUSTER_BREAK.EXTEND}else if(e<44061){if(e<44033){if(44032===e)return r.CLUSTER_BREAK.LV}else if(e<44060){if(44033<=e&&e<=44059)return r.CLUSTER_BREAK.LVT}else if(44060===e)return r.CLUSTER_BREAK.LV}else if(e<44088){if(44061<=e&&e<=44087)return r.CLUSTER_BREAK.LVT}else if(e<44089){if(44088===e)return r.CLUSTER_BREAK.LV}else if(44089<=e&&e<=44115)return r.CLUSTER_BREAK.LVT}else if(e<46497){if(e<45293){if(e<44704){if(e<44397){if(e<44256){if(e<44173){if(e<44144){if(e<44117){if(44116===e)return r.CLUSTER_BREAK.LV}else if(44117<=e&&e<=44143)return r.CLUSTER_BREAK.LVT}else if(e<44145){if(44144===e)return r.CLUSTER_BREAK.LV}else if(e<44172){if(44145<=e&&e<=44171)return r.CLUSTER_BREAK.LVT}else if(44172===e)return r.CLUSTER_BREAK.LV}else if(e<44201){if(e<44200){if(44173<=e&&e<=44199)return r.CLUSTER_BREAK.LVT}else if(44200===e)return r.CLUSTER_BREAK.LV}else if(e<44228){if(44201<=e&&e<=44227)return r.CLUSTER_BREAK.LVT}else if(e<44229){if(44228===e)return r.CLUSTER_BREAK.LV}else if(44229<=e&&e<=44255)return r.CLUSTER_BREAK.LVT}else if(e<44313){if(e<44284){if(e<44257){if(44256===e)return r.CLUSTER_BREAK.LV}else if(44257<=e&&e<=44283)return r.CLUSTER_BREAK.LVT}else if(e<44285){if(44284===e)return r.CLUSTER_BREAK.LV}else if(e<44312){if(44285<=e&&e<=44311)return r.CLUSTER_BREAK.LVT}else if(44312===e)return r.CLUSTER_BREAK.LV}else if(e<44368){if(e<44340){if(44313<=e&&e<=44339)return r.CLUSTER_BREAK.LVT}else if(e<44341){if(44340===e)return r.CLUSTER_BREAK.LV}else if(44341<=e&&e<=44367)return r.CLUSTER_BREAK.LVT}else if(e<44369){if(44368===e)return r.CLUSTER_BREAK.LV}else if(e<44396){if(44369<=e&&e<=44395)return r.CLUSTER_BREAK.LVT}else if(44396===e)return r.CLUSTER_BREAK.LV}else if(e<44537){if(e<44480){if(e<44425){if(e<44424){if(44397<=e&&e<=44423)return r.CLUSTER_BREAK.LVT}else if(44424===e)return r.CLUSTER_BREAK.LV}else if(e<44452){if(44425<=e&&e<=44451)return r.CLUSTER_BREAK.LVT}else if(e<44453){if(44452===e)return r.CLUSTER_BREAK.LV}else if(44453<=e&&e<=44479)return r.CLUSTER_BREAK.LVT}else if(e<44508){if(e<44481){if(44480===e)return r.CLUSTER_BREAK.LV}else if(44481<=e&&e<=44507)return r.CLUSTER_BREAK.LVT}else if(e<44509){if(44508===e)return r.CLUSTER_BREAK.LV}else if(e<44536){if(44509<=e&&e<=44535)return r.CLUSTER_BREAK.LVT}else if(44536===e)return r.CLUSTER_BREAK.LV}else if(e<44620){if(e<44565){if(e<44564){if(44537<=e&&e<=44563)return r.CLUSTER_BREAK.LVT}else if(44564===e)return r.CLUSTER_BREAK.LV}else if(e<44592){if(44565<=e&&e<=44591)return r.CLUSTER_BREAK.LVT}else if(e<44593){if(44592===e)return r.CLUSTER_BREAK.LV}else if(44593<=e&&e<=44619)return r.CLUSTER_BREAK.LVT}else if(e<44649){if(e<44621){if(44620===e)return r.CLUSTER_BREAK.LV}else if(e<44648){if(44621<=e&&e<=44647)return r.CLUSTER_BREAK.LVT}else if(44648===e)return r.CLUSTER_BREAK.LV}else if(e<44676){if(44649<=e&&e<=44675)return r.CLUSTER_BREAK.LVT}else if(e<44677){if(44676===e)return r.CLUSTER_BREAK.LV}else if(44677<=e&&e<=44703)return r.CLUSTER_BREAK.LVT}else if(e<44985){if(e<44844){if(e<44761){if(e<44732){if(e<44705){if(44704===e)return r.CLUSTER_BREAK.LV}else if(44705<=e&&e<=44731)return r.CLUSTER_BREAK.LVT}else if(e<44733){if(44732===e)return r.CLUSTER_BREAK.LV}else if(e<44760){if(44733<=e&&e<=44759)return r.CLUSTER_BREAK.LVT}else if(44760===e)return r.CLUSTER_BREAK.LV}else if(e<44789){if(e<44788){if(44761<=e&&e<=44787)return r.CLUSTER_BREAK.LVT}else if(44788===e)return r.CLUSTER_BREAK.LV}else if(e<44816){if(44789<=e&&e<=44815)return r.CLUSTER_BREAK.LVT}else if(e<44817){if(44816===e)return r.CLUSTER_BREAK.LV}else if(44817<=e&&e<=44843)return r.CLUSTER_BREAK.LVT}else if(e<44901){if(e<44872){if(e<44845){if(44844===e)return r.CLUSTER_BREAK.LV}else if(44845<=e&&e<=44871)return r.CLUSTER_BREAK.LVT}else if(e<44873){if(44872===e)return r.CLUSTER_BREAK.LV}else if(e<44900){if(44873<=e&&e<=44899)return r.CLUSTER_BREAK.LVT}else if(44900===e)return r.CLUSTER_BREAK.LV}else if(e<44956){if(e<44928){if(44901<=e&&e<=44927)return r.CLUSTER_BREAK.LVT}else if(e<44929){if(44928===e)return r.CLUSTER_BREAK.LV}else if(44929<=e&&e<=44955)return r.CLUSTER_BREAK.LVT}else if(e<44957){if(44956===e)return r.CLUSTER_BREAK.LV}else if(e<44984){if(44957<=e&&e<=44983)return r.CLUSTER_BREAK.LVT}else if(44984===e)return r.CLUSTER_BREAK.LV}else if(e<45152){if(e<45068){if(e<45013){if(e<45012){if(44985<=e&&e<=45011)return r.CLUSTER_BREAK.LVT}else if(45012===e)return r.CLUSTER_BREAK.LV}else if(e<45040){if(45013<=e&&e<=45039)return r.CLUSTER_BREAK.LVT}else if(e<45041){if(45040===e)return r.CLUSTER_BREAK.LV}else if(45041<=e&&e<=45067)return r.CLUSTER_BREAK.LVT}else if(e<45097){if(e<45069){if(45068===e)return r.CLUSTER_BREAK.LV}else if(e<45096){if(45069<=e&&e<=45095)return r.CLUSTER_BREAK.LVT}else if(45096===e)return r.CLUSTER_BREAK.LV}else if(e<45124){if(45097<=e&&e<=45123)return r.CLUSTER_BREAK.LVT}else if(e<45125){if(45124===e)return r.CLUSTER_BREAK.LV}else if(45125<=e&&e<=45151)return r.CLUSTER_BREAK.LVT}else if(e<45209){if(e<45180){if(e<45153){if(45152===e)return r.CLUSTER_BREAK.LV}else if(45153<=e&&e<=45179)return r.CLUSTER_BREAK.LVT}else if(e<45181){if(45180===e)return r.CLUSTER_BREAK.LV}else if(e<45208){if(45181<=e&&e<=45207)return r.CLUSTER_BREAK.LVT}else if(45208===e)return r.CLUSTER_BREAK.LV}else if(e<45264){if(e<45236){if(45209<=e&&e<=45235)return r.CLUSTER_BREAK.LVT}else if(e<45237){if(45236===e)return r.CLUSTER_BREAK.LV}else if(45237<=e&&e<=45263)return r.CLUSTER_BREAK.LVT}else if(e<45265){if(45264===e)return r.CLUSTER_BREAK.LV}else if(e<45292){if(45265<=e&&e<=45291)return r.CLUSTER_BREAK.LVT}else if(45292===e)return r.CLUSTER_BREAK.LV}else if(e<45908){if(e<45600){if(e<45433){if(e<45376){if(e<45321){if(e<45320){if(45293<=e&&e<=45319)return r.CLUSTER_BREAK.LVT}else if(45320===e)return r.CLUSTER_BREAK.LV}else if(e<45348){if(45321<=e&&e<=45347)return r.CLUSTER_BREAK.LVT}else if(e<45349){if(45348===e)return r.CLUSTER_BREAK.LV}else if(45349<=e&&e<=45375)return r.CLUSTER_BREAK.LVT}else if(e<45404){if(e<45377){if(45376===e)return r.CLUSTER_BREAK.LV}else if(45377<=e&&e<=45403)return r.CLUSTER_BREAK.LVT}else if(e<45405){if(45404===e)return r.CLUSTER_BREAK.LV}else if(e<45432){if(45405<=e&&e<=45431)return r.CLUSTER_BREAK.LVT}else if(45432===e)return r.CLUSTER_BREAK.LV}else if(e<45516){if(e<45461){if(e<45460){if(45433<=e&&e<=45459)return r.CLUSTER_BREAK.LVT}else if(45460===e)return r.CLUSTER_BREAK.LV}else if(e<45488){if(45461<=e&&e<=45487)return r.CLUSTER_BREAK.LVT}else if(e<45489){if(45488===e)return r.CLUSTER_BREAK.LV}else if(45489<=e&&e<=45515)return r.CLUSTER_BREAK.LVT}else if(e<45545){if(e<45517){if(45516===e)return r.CLUSTER_BREAK.LV}else if(e<45544){if(45517<=e&&e<=45543)return r.CLUSTER_BREAK.LVT}else if(45544===e)return r.CLUSTER_BREAK.LV}else if(e<45572){if(45545<=e&&e<=45571)return r.CLUSTER_BREAK.LVT}else if(e<45573){if(45572===e)return r.CLUSTER_BREAK.LV}else if(45573<=e&&e<=45599)return r.CLUSTER_BREAK.LVT}else if(e<45741){if(e<45657){if(e<45628){if(e<45601){if(45600===e)return r.CLUSTER_BREAK.LV}else if(45601<=e&&e<=45627)return r.CLUSTER_BREAK.LVT}else if(e<45629){if(45628===e)return r.CLUSTER_BREAK.LV}else if(e<45656){if(45629<=e&&e<=45655)return r.CLUSTER_BREAK.LVT}else if(45656===e)return r.CLUSTER_BREAK.LV}else if(e<45712){if(e<45684){if(45657<=e&&e<=45683)return r.CLUSTER_BREAK.LVT}else if(e<45685){if(45684===e)return r.CLUSTER_BREAK.LV}else if(45685<=e&&e<=45711)return r.CLUSTER_BREAK.LVT}else if(e<45713){if(45712===e)return r.CLUSTER_BREAK.LV}else if(e<45740){if(45713<=e&&e<=45739)return r.CLUSTER_BREAK.LVT}else if(45740===e)return r.CLUSTER_BREAK.LV}else if(e<45824){if(e<45769){if(e<45768){if(45741<=e&&e<=45767)return r.CLUSTER_BREAK.LVT}else if(45768===e)return r.CLUSTER_BREAK.LV}else if(e<45796){if(45769<=e&&e<=45795)return r.CLUSTER_BREAK.LVT}else if(e<45797){if(45796===e)return r.CLUSTER_BREAK.LV}else if(45797<=e&&e<=45823)return r.CLUSTER_BREAK.LVT}else if(e<45853){if(e<45825){if(45824===e)return r.CLUSTER_BREAK.LV}else if(e<45852){if(45825<=e&&e<=45851)return r.CLUSTER_BREAK.LVT}else if(45852===e)return r.CLUSTER_BREAK.LV}else if(e<45880){if(45853<=e&&e<=45879)return r.CLUSTER_BREAK.LVT}else if(e<45881){if(45880===e)return r.CLUSTER_BREAK.LV}else if(45881<=e&&e<=45907)return r.CLUSTER_BREAK.LVT}else if(e<46189){if(e<46048){if(e<45965){if(e<45936){if(e<45909){if(45908===e)return r.CLUSTER_BREAK.LV}else if(45909<=e&&e<=45935)return r.CLUSTER_BREAK.LVT}else if(e<45937){if(45936===e)return r.CLUSTER_BREAK.LV}else if(e<45964){if(45937<=e&&e<=45963)return r.CLUSTER_BREAK.LVT}else if(45964===e)return r.CLUSTER_BREAK.LV}else if(e<45993){if(e<45992){if(45965<=e&&e<=45991)return r.CLUSTER_BREAK.LVT}else if(45992===e)return r.CLUSTER_BREAK.LV}else if(e<46020){if(45993<=e&&e<=46019)return r.CLUSTER_BREAK.LVT}else if(e<46021){if(46020===e)return r.CLUSTER_BREAK.LV}else if(46021<=e&&e<=46047)return r.CLUSTER_BREAK.LVT}else if(e<46105){if(e<46076){if(e<46049){if(46048===e)return r.CLUSTER_BREAK.LV}else if(46049<=e&&e<=46075)return r.CLUSTER_BREAK.LVT}else if(e<46077){if(46076===e)return r.CLUSTER_BREAK.LV}else if(e<46104){if(46077<=e&&e<=46103)return r.CLUSTER_BREAK.LVT}else if(46104===e)return r.CLUSTER_BREAK.LV}else if(e<46160){if(e<46132){if(46105<=e&&e<=46131)return r.CLUSTER_BREAK.LVT}else if(e<46133){if(46132===e)return r.CLUSTER_BREAK.LV}else if(46133<=e&&e<=46159)return r.CLUSTER_BREAK.LVT}else if(e<46161){if(46160===e)return r.CLUSTER_BREAK.LV}else if(e<46188){if(46161<=e&&e<=46187)return r.CLUSTER_BREAK.LVT}else if(46188===e)return r.CLUSTER_BREAK.LV}else if(e<46356){if(e<46272){if(e<46217){if(e<46216){if(46189<=e&&e<=46215)return r.CLUSTER_BREAK.LVT}else if(46216===e)return r.CLUSTER_BREAK.LV}else if(e<46244){if(46217<=e&&e<=46243)return r.CLUSTER_BREAK.LVT}else if(e<46245){if(46244===e)return r.CLUSTER_BREAK.LV}else if(46245<=e&&e<=46271)return r.CLUSTER_BREAK.LVT}else if(e<46301){if(e<46273){if(46272===e)return r.CLUSTER_BREAK.LV}else if(e<46300){if(46273<=e&&e<=46299)return r.CLUSTER_BREAK.LVT}else if(46300===e)return r.CLUSTER_BREAK.LV}else if(e<46328){if(46301<=e&&e<=46327)return r.CLUSTER_BREAK.LVT}else if(e<46329){if(46328===e)return r.CLUSTER_BREAK.LV}else if(46329<=e&&e<=46355)return r.CLUSTER_BREAK.LVT}else if(e<46413){if(e<46384){if(e<46357){if(46356===e)return r.CLUSTER_BREAK.LV}else if(46357<=e&&e<=46383)return r.CLUSTER_BREAK.LVT}else if(e<46385){if(46384===e)return r.CLUSTER_BREAK.LV}else if(e<46412){if(46385<=e&&e<=46411)return r.CLUSTER_BREAK.LVT}else if(46412===e)return r.CLUSTER_BREAK.LV}else if(e<46468){if(e<46440){if(46413<=e&&e<=46439)return r.CLUSTER_BREAK.LVT}else if(e<46441){if(46440===e)return r.CLUSTER_BREAK.LV}else if(46441<=e&&e<=46467)return r.CLUSTER_BREAK.LVT}else if(e<46469){if(46468===e)return r.CLUSTER_BREAK.LV}else if(e<46496){if(46469<=e&&e<=46495)return r.CLUSTER_BREAK.LVT}else if(46496===e)return r.CLUSTER_BREAK.LV}else if(e<47701){if(e<47112){if(e<46804){if(e<46637){if(e<46580){if(e<46525){if(e<46524){if(46497<=e&&e<=46523)return r.CLUSTER_BREAK.LVT}else if(46524===e)return r.CLUSTER_BREAK.LV}else if(e<46552){if(46525<=e&&e<=46551)return r.CLUSTER_BREAK.LVT}else if(e<46553){if(46552===e)return r.CLUSTER_BREAK.LV}else if(46553<=e&&e<=46579)return r.CLUSTER_BREAK.LVT}else if(e<46608){if(e<46581){if(46580===e)return r.CLUSTER_BREAK.LV}else if(46581<=e&&e<=46607)return r.CLUSTER_BREAK.LVT}else if(e<46609){if(46608===e)return r.CLUSTER_BREAK.LV}else if(e<46636){if(46609<=e&&e<=46635)return r.CLUSTER_BREAK.LVT}else if(46636===e)return r.CLUSTER_BREAK.LV}else if(e<46720){if(e<46665){if(e<46664){if(46637<=e&&e<=46663)return r.CLUSTER_BREAK.LVT}else if(46664===e)return r.CLUSTER_BREAK.LV}else if(e<46692){if(46665<=e&&e<=46691)return r.CLUSTER_BREAK.LVT}else if(e<46693){if(46692===e)return r.CLUSTER_BREAK.LV}else if(46693<=e&&e<=46719)return r.CLUSTER_BREAK.LVT}else if(e<46749){if(e<46721){if(46720===e)return r.CLUSTER_BREAK.LV}else if(e<46748){if(46721<=e&&e<=46747)return r.CLUSTER_BREAK.LVT}else if(46748===e)return r.CLUSTER_BREAK.LV}else if(e<46776){if(46749<=e&&e<=46775)return r.CLUSTER_BREAK.LVT}else if(e<46777){if(46776===e)return r.CLUSTER_BREAK.LV}else if(46777<=e&&e<=46803)return r.CLUSTER_BREAK.LVT}else if(e<46945){if(e<46861){if(e<46832){if(e<46805){if(46804===e)return r.CLUSTER_BREAK.LV}else if(46805<=e&&e<=46831)return r.CLUSTER_BREAK.LVT}else if(e<46833){if(46832===e)return r.CLUSTER_BREAK.LV}else if(e<46860){if(46833<=e&&e<=46859)return r.CLUSTER_BREAK.LVT}else if(46860===e)return r.CLUSTER_BREAK.LV}else if(e<46916){if(e<46888){if(46861<=e&&e<=46887)return r.CLUSTER_BREAK.LVT}else if(e<46889){if(46888===e)return r.CLUSTER_BREAK.LV}else if(46889<=e&&e<=46915)return r.CLUSTER_BREAK.LVT}else if(e<46917){if(46916===e)return r.CLUSTER_BREAK.LV}else if(e<46944){if(46917<=e&&e<=46943)return r.CLUSTER_BREAK.LVT}else if(46944===e)return r.CLUSTER_BREAK.LV}else if(e<47028){if(e<46973){if(e<46972){if(46945<=e&&e<=46971)return r.CLUSTER_BREAK.LVT}else if(46972===e)return r.CLUSTER_BREAK.LV}else if(e<47e3){if(46973<=e&&e<=46999)return r.CLUSTER_BREAK.LVT}else if(e<47001){if(47e3===e)return r.CLUSTER_BREAK.LV}else if(47001<=e&&e<=47027)return r.CLUSTER_BREAK.LVT}else if(e<47057){if(e<47029){if(47028===e)return r.CLUSTER_BREAK.LV}else if(e<47056){if(47029<=e&&e<=47055)return r.CLUSTER_BREAK.LVT}else if(47056===e)return r.CLUSTER_BREAK.LV}else if(e<47084){if(47057<=e&&e<=47083)return r.CLUSTER_BREAK.LVT}else if(e<47085){if(47084===e)return r.CLUSTER_BREAK.LV}else if(47085<=e&&e<=47111)return r.CLUSTER_BREAK.LVT}else if(e<47393){if(e<47252){if(e<47169){if(e<47140){if(e<47113){if(47112===e)return r.CLUSTER_BREAK.LV}else if(47113<=e&&e<=47139)return r.CLUSTER_BREAK.LVT}else if(e<47141){if(47140===e)return r.CLUSTER_BREAK.LV}else if(e<47168){if(47141<=e&&e<=47167)return r.CLUSTER_BREAK.LVT}else if(47168===e)return r.CLUSTER_BREAK.LV}else if(e<47197){if(e<47196){if(47169<=e&&e<=47195)return r.CLUSTER_BREAK.LVT}else if(47196===e)return r.CLUSTER_BREAK.LV}else if(e<47224){if(47197<=e&&e<=47223)return r.CLUSTER_BREAK.LVT}else if(e<47225){if(47224===e)return r.CLUSTER_BREAK.LV}else if(47225<=e&&e<=47251)return r.CLUSTER_BREAK.LVT}else if(e<47309){if(e<47280){if(e<47253){if(47252===e)return r.CLUSTER_BREAK.LV}else if(47253<=e&&e<=47279)return r.CLUSTER_BREAK.LVT}else if(e<47281){if(47280===e)return r.CLUSTER_BREAK.LV}else if(e<47308){if(47281<=e&&e<=47307)return r.CLUSTER_BREAK.LVT}else if(47308===e)return r.CLUSTER_BREAK.LV}else if(e<47364){if(e<47336){if(47309<=e&&e<=47335)return r.CLUSTER_BREAK.LVT}else if(e<47337){if(47336===e)return r.CLUSTER_BREAK.LV}else if(47337<=e&&e<=47363)return r.CLUSTER_BREAK.LVT}else if(e<47365){if(47364===e)return r.CLUSTER_BREAK.LV}else if(e<47392){if(47365<=e&&e<=47391)return r.CLUSTER_BREAK.LVT}else if(47392===e)return r.CLUSTER_BREAK.LV}else if(e<47560){if(e<47476){if(e<47421){if(e<47420){if(47393<=e&&e<=47419)return r.CLUSTER_BREAK.LVT}else if(47420===e)return r.CLUSTER_BREAK.LV}else if(e<47448){if(47421<=e&&e<=47447)return r.CLUSTER_BREAK.LVT}else if(e<47449){if(47448===e)return r.CLUSTER_BREAK.LV}else if(47449<=e&&e<=47475)return r.CLUSTER_BREAK.LVT}else if(e<47505){if(e<47477){if(47476===e)return r.CLUSTER_BREAK.LV}else if(e<47504){if(47477<=e&&e<=47503)return r.CLUSTER_BREAK.LVT}else if(47504===e)return r.CLUSTER_BREAK.LV}else if(e<47532){if(47505<=e&&e<=47531)return r.CLUSTER_BREAK.LVT}else if(e<47533){if(47532===e)return r.CLUSTER_BREAK.LV}else if(47533<=e&&e<=47559)return r.CLUSTER_BREAK.LVT}else if(e<47617){if(e<47588){if(e<47561){if(47560===e)return r.CLUSTER_BREAK.LV}else if(47561<=e&&e<=47587)return r.CLUSTER_BREAK.LVT}else if(e<47589){if(47588===e)return r.CLUSTER_BREAK.LV}else if(e<47616){if(47589<=e&&e<=47615)return r.CLUSTER_BREAK.LVT}else if(47616===e)return r.CLUSTER_BREAK.LV}else if(e<47672){if(e<47644){if(47617<=e&&e<=47643)return r.CLUSTER_BREAK.LVT}else if(e<47645){if(47644===e)return r.CLUSTER_BREAK.LV}else if(47645<=e&&e<=47671)return r.CLUSTER_BREAK.LVT}else if(e<47673){if(47672===e)return r.CLUSTER_BREAK.LV}else if(e<47700){if(47673<=e&&e<=47699)return r.CLUSTER_BREAK.LVT}else if(47700===e)return r.CLUSTER_BREAK.LV}else if(e<48316){if(e<48008){if(e<47841){if(e<47784){if(e<47729){if(e<47728){if(47701<=e&&e<=47727)return r.CLUSTER_BREAK.LVT}else if(47728===e)return r.CLUSTER_BREAK.LV}else if(e<47756){if(47729<=e&&e<=47755)return r.CLUSTER_BREAK.LVT}else if(e<47757){if(47756===e)return r.CLUSTER_BREAK.LV}else if(47757<=e&&e<=47783)return r.CLUSTER_BREAK.LVT}else if(e<47812){if(e<47785){if(47784===e)return r.CLUSTER_BREAK.LV}else if(47785<=e&&e<=47811)return r.CLUSTER_BREAK.LVT}else if(e<47813){if(47812===e)return r.CLUSTER_BREAK.LV}else if(e<47840){if(47813<=e&&e<=47839)return r.CLUSTER_BREAK.LVT}else if(47840===e)return r.CLUSTER_BREAK.LV}else if(e<47924){if(e<47869){if(e<47868){if(47841<=e&&e<=47867)return r.CLUSTER_BREAK.LVT}else if(47868===e)return r.CLUSTER_BREAK.LV}else if(e<47896){if(47869<=e&&e<=47895)return r.CLUSTER_BREAK.LVT}else if(e<47897){if(47896===e)return r.CLUSTER_BREAK.LV}else if(47897<=e&&e<=47923)return r.CLUSTER_BREAK.LVT}else if(e<47953){if(e<47925){if(47924===e)return r.CLUSTER_BREAK.LV}else if(e<47952){if(47925<=e&&e<=47951)return r.CLUSTER_BREAK.LVT}else if(47952===e)return r.CLUSTER_BREAK.LV}else if(e<47980){if(47953<=e&&e<=47979)return r.CLUSTER_BREAK.LVT}else if(e<47981){if(47980===e)return r.CLUSTER_BREAK.LV}else if(47981<=e&&e<=48007)return r.CLUSTER_BREAK.LVT}else if(e<48149){if(e<48065){if(e<48036){if(e<48009){if(48008===e)return r.CLUSTER_BREAK.LV}else if(48009<=e&&e<=48035)return r.CLUSTER_BREAK.LVT}else if(e<48037){if(48036===e)return r.CLUSTER_BREAK.LV}else if(e<48064){if(48037<=e&&e<=48063)return r.CLUSTER_BREAK.LVT}else if(48064===e)return r.CLUSTER_BREAK.LV}else if(e<48120){if(e<48092){if(48065<=e&&e<=48091)return r.CLUSTER_BREAK.LVT}else if(e<48093){if(48092===e)return r.CLUSTER_BREAK.LV}else if(48093<=e&&e<=48119)return r.CLUSTER_BREAK.LVT}else if(e<48121){if(48120===e)return r.CLUSTER_BREAK.LV}else if(e<48148){if(48121<=e&&e<=48147)return r.CLUSTER_BREAK.LVT}else if(48148===e)return r.CLUSTER_BREAK.LV}else if(e<48232){if(e<48177){if(e<48176){if(48149<=e&&e<=48175)return r.CLUSTER_BREAK.LVT}else if(48176===e)return r.CLUSTER_BREAK.LV}else if(e<48204){if(48177<=e&&e<=48203)return r.CLUSTER_BREAK.LVT}else if(e<48205){if(48204===e)return r.CLUSTER_BREAK.LV}else if(48205<=e&&e<=48231)return r.CLUSTER_BREAK.LVT}else if(e<48261){if(e<48233){if(48232===e)return r.CLUSTER_BREAK.LV}else if(e<48260){if(48233<=e&&e<=48259)return r.CLUSTER_BREAK.LVT}else if(48260===e)return r.CLUSTER_BREAK.LV}else if(e<48288){if(48261<=e&&e<=48287)return r.CLUSTER_BREAK.LVT}else if(e<48289){if(48288===e)return r.CLUSTER_BREAK.LV}else if(48289<=e&&e<=48315)return r.CLUSTER_BREAK.LVT}else if(e<48597){if(e<48456){if(e<48373){if(e<48344){if(e<48317){if(48316===e)return r.CLUSTER_BREAK.LV}else if(48317<=e&&e<=48343)return r.CLUSTER_BREAK.LVT}else if(e<48345){if(48344===e)return r.CLUSTER_BREAK.LV}else if(e<48372){if(48345<=e&&e<=48371)return r.CLUSTER_BREAK.LVT}else if(48372===e)return r.CLUSTER_BREAK.LV}else if(e<48401){if(e<48400){if(48373<=e&&e<=48399)return r.CLUSTER_BREAK.LVT}else if(48400===e)return r.CLUSTER_BREAK.LV}else if(e<48428){if(48401<=e&&e<=48427)return r.CLUSTER_BREAK.LVT}else if(e<48429){if(48428===e)return r.CLUSTER_BREAK.LV}else if(48429<=e&&e<=48455)return r.CLUSTER_BREAK.LVT}else if(e<48513){if(e<48484){if(e<48457){if(48456===e)return r.CLUSTER_BREAK.LV}else if(48457<=e&&e<=48483)return r.CLUSTER_BREAK.LVT}else if(e<48485){if(48484===e)return r.CLUSTER_BREAK.LV}else if(e<48512){if(48485<=e&&e<=48511)return r.CLUSTER_BREAK.LVT}else if(48512===e)return r.CLUSTER_BREAK.LV}else if(e<48568){if(e<48540){if(48513<=e&&e<=48539)return r.CLUSTER_BREAK.LVT}else if(e<48541){if(48540===e)return r.CLUSTER_BREAK.LV}else if(48541<=e&&e<=48567)return r.CLUSTER_BREAK.LVT}else if(e<48569){if(48568===e)return r.CLUSTER_BREAK.LV}else if(e<48596){if(48569<=e&&e<=48595)return r.CLUSTER_BREAK.LVT}else if(48596===e)return r.CLUSTER_BREAK.LV}else if(e<48764){if(e<48680){if(e<48625){if(e<48624){if(48597<=e&&e<=48623)return r.CLUSTER_BREAK.LVT}else if(48624===e)return r.CLUSTER_BREAK.LV}else if(e<48652){if(48625<=e&&e<=48651)return r.CLUSTER_BREAK.LVT}else if(e<48653){if(48652===e)return r.CLUSTER_BREAK.LV}else if(48653<=e&&e<=48679)return r.CLUSTER_BREAK.LVT}else if(e<48709){if(e<48681){if(48680===e)return r.CLUSTER_BREAK.LV}else if(e<48708){if(48681<=e&&e<=48707)return r.CLUSTER_BREAK.LVT}else if(48708===e)return r.CLUSTER_BREAK.LV}else if(e<48736){if(48709<=e&&e<=48735)return r.CLUSTER_BREAK.LVT}else if(e<48737){if(48736===e)return r.CLUSTER_BREAK.LV}else if(48737<=e&&e<=48763)return r.CLUSTER_BREAK.LVT}else if(e<48821){if(e<48792){if(e<48765){if(48764===e)return r.CLUSTER_BREAK.LV}else if(48765<=e&&e<=48791)return r.CLUSTER_BREAK.LVT}else if(e<48793){if(48792===e)return r.CLUSTER_BREAK.LV}else if(e<48820){if(48793<=e&&e<=48819)return r.CLUSTER_BREAK.LVT}else if(48820===e)return r.CLUSTER_BREAK.LV}else if(e<48876){if(e<48848){if(48821<=e&&e<=48847)return r.CLUSTER_BREAK.LVT}else if(e<48849){if(48848===e)return r.CLUSTER_BREAK.LV}else if(48849<=e&&e<=48875)return r.CLUSTER_BREAK.LVT}else if(e<48877){if(48876===e)return r.CLUSTER_BREAK.LV}else if(e<48904){if(48877<=e&&e<=48903)return r.CLUSTER_BREAK.LVT}else if(48904===e)return r.CLUSTER_BREAK.LV}else if(e<53720){if(e<51312){if(e<50108){if(e<49493){if(e<49212){if(e<49045){if(e<48988){if(e<48933){if(e<48932){if(48905<=e&&e<=48931)return r.CLUSTER_BREAK.LVT}else if(48932===e)return r.CLUSTER_BREAK.LV}else if(e<48960){if(48933<=e&&e<=48959)return r.CLUSTER_BREAK.LVT}else if(e<48961){if(48960===e)return r.CLUSTER_BREAK.LV}else if(48961<=e&&e<=48987)return r.CLUSTER_BREAK.LVT}else if(e<49016){if(e<48989){if(48988===e)return r.CLUSTER_BREAK.LV}else if(48989<=e&&e<=49015)return r.CLUSTER_BREAK.LVT}else if(e<49017){if(49016===e)return r.CLUSTER_BREAK.LV}else if(e<49044){if(49017<=e&&e<=49043)return r.CLUSTER_BREAK.LVT}else if(49044===e)return r.CLUSTER_BREAK.LV}else if(e<49128){if(e<49073){if(e<49072){if(49045<=e&&e<=49071)return r.CLUSTER_BREAK.LVT}else if(49072===e)return r.CLUSTER_BREAK.LV}else if(e<49100){if(49073<=e&&e<=49099)return r.CLUSTER_BREAK.LVT}else if(e<49101){if(49100===e)return r.CLUSTER_BREAK.LV}else if(49101<=e&&e<=49127)return r.CLUSTER_BREAK.LVT}else if(e<49157){if(e<49129){if(49128===e)return r.CLUSTER_BREAK.LV}else if(e<49156){if(49129<=e&&e<=49155)return r.CLUSTER_BREAK.LVT}else if(49156===e)return r.CLUSTER_BREAK.LV}else if(e<49184){if(49157<=e&&e<=49183)return r.CLUSTER_BREAK.LVT}else if(e<49185){if(49184===e)return r.CLUSTER_BREAK.LV}else if(49185<=e&&e<=49211)return r.CLUSTER_BREAK.LVT}else if(e<49352){if(e<49269){if(e<49240){if(e<49213){if(49212===e)return r.CLUSTER_BREAK.LV}else if(49213<=e&&e<=49239)return r.CLUSTER_BREAK.LVT}else if(e<49241){if(49240===e)return r.CLUSTER_BREAK.LV}else if(e<49268){if(49241<=e&&e<=49267)return r.CLUSTER_BREAK.LVT}else if(49268===e)return r.CLUSTER_BREAK.LV}else if(e<49297){if(e<49296){if(49269<=e&&e<=49295)return r.CLUSTER_BREAK.LVT}else if(49296===e)return r.CLUSTER_BREAK.LV}else if(e<49324){if(49297<=e&&e<=49323)return r.CLUSTER_BREAK.LVT}else if(e<49325){if(49324===e)return r.CLUSTER_BREAK.LV}else if(49325<=e&&e<=49351)return r.CLUSTER_BREAK.LVT}else if(e<49409){if(e<49380){if(e<49353){if(49352===e)return r.CLUSTER_BREAK.LV}else if(49353<=e&&e<=49379)return r.CLUSTER_BREAK.LVT}else if(e<49381){if(49380===e)return r.CLUSTER_BREAK.LV}else if(e<49408){if(49381<=e&&e<=49407)return r.CLUSTER_BREAK.LVT}else if(49408===e)return r.CLUSTER_BREAK.LV}else if(e<49464){if(e<49436){if(49409<=e&&e<=49435)return r.CLUSTER_BREAK.LVT}else if(e<49437){if(49436===e)return r.CLUSTER_BREAK.LV}else if(49437<=e&&e<=49463)return r.CLUSTER_BREAK.LVT}else if(e<49465){if(49464===e)return r.CLUSTER_BREAK.LV}else if(e<49492){if(49465<=e&&e<=49491)return r.CLUSTER_BREAK.LVT}else if(49492===e)return r.CLUSTER_BREAK.LV}else if(e<49800){if(e<49633){if(e<49576){if(e<49521){if(e<49520){if(49493<=e&&e<=49519)return r.CLUSTER_BREAK.LVT}else if(49520===e)return r.CLUSTER_BREAK.LV}else if(e<49548){if(49521<=e&&e<=49547)return r.CLUSTER_BREAK.LVT}else if(e<49549){if(49548===e)return r.CLUSTER_BREAK.LV}else if(49549<=e&&e<=49575)return r.CLUSTER_BREAK.LVT}else if(e<49604){if(e<49577){if(49576===e)return r.CLUSTER_BREAK.LV}else if(49577<=e&&e<=49603)return r.CLUSTER_BREAK.LVT}else if(e<49605){if(49604===e)return r.CLUSTER_BREAK.LV}else if(e<49632){if(49605<=e&&e<=49631)return r.CLUSTER_BREAK.LVT}else if(49632===e)return r.CLUSTER_BREAK.LV}else if(e<49716){if(e<49661){if(e<49660){if(49633<=e&&e<=49659)return r.CLUSTER_BREAK.LVT}else if(49660===e)return r.CLUSTER_BREAK.LV}else if(e<49688){if(49661<=e&&e<=49687)return r.CLUSTER_BREAK.LVT}else if(e<49689){if(49688===e)return r.CLUSTER_BREAK.LV}else if(49689<=e&&e<=49715)return r.CLUSTER_BREAK.LVT}else if(e<49745){if(e<49717){if(49716===e)return r.CLUSTER_BREAK.LV}else if(e<49744){if(49717<=e&&e<=49743)return r.CLUSTER_BREAK.LVT}else if(49744===e)return r.CLUSTER_BREAK.LV}else if(e<49772){if(49745<=e&&e<=49771)return r.CLUSTER_BREAK.LVT}else if(e<49773){if(49772===e)return r.CLUSTER_BREAK.LV}else if(49773<=e&&e<=49799)return r.CLUSTER_BREAK.LVT}else if(e<49941){if(e<49857){if(e<49828){if(e<49801){if(49800===e)return r.CLUSTER_BREAK.LV}else if(49801<=e&&e<=49827)return r.CLUSTER_BREAK.LVT}else if(e<49829){if(49828===e)return r.CLUSTER_BREAK.LV}else if(e<49856){if(49829<=e&&e<=49855)return r.CLUSTER_BREAK.LVT}else if(49856===e)return r.CLUSTER_BREAK.LV}else if(e<49912){if(e<49884){if(49857<=e&&e<=49883)return r.CLUSTER_BREAK.LVT}else if(e<49885){if(49884===e)return r.CLUSTER_BREAK.LV}else if(49885<=e&&e<=49911)return r.CLUSTER_BREAK.LVT}else if(e<49913){if(49912===e)return r.CLUSTER_BREAK.LV}else if(e<49940){if(49913<=e&&e<=49939)return r.CLUSTER_BREAK.LVT}else if(49940===e)return r.CLUSTER_BREAK.LV}else if(e<50024){if(e<49969){if(e<49968){if(49941<=e&&e<=49967)return r.CLUSTER_BREAK.LVT}else if(49968===e)return r.CLUSTER_BREAK.LV}else if(e<49996){if(49969<=e&&e<=49995)return r.CLUSTER_BREAK.LVT}else if(e<49997){if(49996===e)return r.CLUSTER_BREAK.LV}else if(49997<=e&&e<=50023)return r.CLUSTER_BREAK.LVT}else if(e<50053){if(e<50025){if(50024===e)return r.CLUSTER_BREAK.LV}else if(e<50052){if(50025<=e&&e<=50051)return r.CLUSTER_BREAK.LVT}else if(50052===e)return r.CLUSTER_BREAK.LV}else if(e<50080){if(50053<=e&&e<=50079)return r.CLUSTER_BREAK.LVT}else if(e<50081){if(50080===e)return r.CLUSTER_BREAK.LV}else if(50081<=e&&e<=50107)return r.CLUSTER_BREAK.LVT}else if(e<50697){if(e<50389){if(e<50248){if(e<50165){if(e<50136){if(e<50109){if(50108===e)return r.CLUSTER_BREAK.LV}else if(50109<=e&&e<=50135)return r.CLUSTER_BREAK.LVT}else if(e<50137){if(50136===e)return r.CLUSTER_BREAK.LV}else if(e<50164){if(50137<=e&&e<=50163)return r.CLUSTER_BREAK.LVT}else if(50164===e)return r.CLUSTER_BREAK.LV}else if(e<50193){if(e<50192){if(50165<=e&&e<=50191)return r.CLUSTER_BREAK.LVT}else if(50192===e)return r.CLUSTER_BREAK.LV}else if(e<50220){if(50193<=e&&e<=50219)return r.CLUSTER_BREAK.LVT}else if(e<50221){if(50220===e)return r.CLUSTER_BREAK.LV}else if(50221<=e&&e<=50247)return r.CLUSTER_BREAK.LVT}else if(e<50305){if(e<50276){if(e<50249){if(50248===e)return r.CLUSTER_BREAK.LV}else if(50249<=e&&e<=50275)return r.CLUSTER_BREAK.LVT}else if(e<50277){if(50276===e)return r.CLUSTER_BREAK.LV}else if(e<50304){if(50277<=e&&e<=50303)return r.CLUSTER_BREAK.LVT}else if(50304===e)return r.CLUSTER_BREAK.LV}else if(e<50360){if(e<50332){if(50305<=e&&e<=50331)return r.CLUSTER_BREAK.LVT}else if(e<50333){if(50332===e)return r.CLUSTER_BREAK.LV}else if(50333<=e&&e<=50359)return r.CLUSTER_BREAK.LVT}else if(e<50361){if(50360===e)return r.CLUSTER_BREAK.LV}else if(e<50388){if(50361<=e&&e<=50387)return r.CLUSTER_BREAK.LVT}else if(50388===e)return r.CLUSTER_BREAK.LV}else if(e<50556){if(e<50472){if(e<50417){if(e<50416){if(50389<=e&&e<=50415)return r.CLUSTER_BREAK.LVT}else if(50416===e)return r.CLUSTER_BREAK.LV}else if(e<50444){if(50417<=e&&e<=50443)return r.CLUSTER_BREAK.LVT}else if(e<50445){if(50444===e)return r.CLUSTER_BREAK.LV}else if(50445<=e&&e<=50471)return r.CLUSTER_BREAK.LVT}else if(e<50501){if(e<50473){if(50472===e)return r.CLUSTER_BREAK.LV}else if(e<50500){if(50473<=e&&e<=50499)return r.CLUSTER_BREAK.LVT}else if(50500===e)return r.CLUSTER_BREAK.LV}else if(e<50528){if(50501<=e&&e<=50527)return r.CLUSTER_BREAK.LVT}else if(e<50529){if(50528===e)return r.CLUSTER_BREAK.LV}else if(50529<=e&&e<=50555)return r.CLUSTER_BREAK.LVT}else if(e<50613){if(e<50584){if(e<50557){if(50556===e)return r.CLUSTER_BREAK.LV}else if(50557<=e&&e<=50583)return r.CLUSTER_BREAK.LVT}else if(e<50585){if(50584===e)return r.CLUSTER_BREAK.LV}else if(e<50612){if(50585<=e&&e<=50611)return r.CLUSTER_BREAK.LVT}else if(50612===e)return r.CLUSTER_BREAK.LV}else if(e<50668){if(e<50640){if(50613<=e&&e<=50639)return r.CLUSTER_BREAK.LVT}else if(e<50641){if(50640===e)return r.CLUSTER_BREAK.LV}else if(50641<=e&&e<=50667)return r.CLUSTER_BREAK.LVT}else if(e<50669){if(50668===e)return r.CLUSTER_BREAK.LV}else if(e<50696){if(50669<=e&&e<=50695)return r.CLUSTER_BREAK.LVT}else if(50696===e)return r.CLUSTER_BREAK.LV}else if(e<51004){if(e<50837){if(e<50780){if(e<50725){if(e<50724){if(50697<=e&&e<=50723)return r.CLUSTER_BREAK.LVT}else if(50724===e)return r.CLUSTER_BREAK.LV}else if(e<50752){if(50725<=e&&e<=50751)return r.CLUSTER_BREAK.LVT}else if(e<50753){if(50752===e)return r.CLUSTER_BREAK.LV}else if(50753<=e&&e<=50779)return r.CLUSTER_BREAK.LVT}else if(e<50808){if(e<50781){if(50780===e)return r.CLUSTER_BREAK.LV}else if(50781<=e&&e<=50807)return r.CLUSTER_BREAK.LVT}else if(e<50809){if(50808===e)return r.CLUSTER_BREAK.LV}else if(e<50836){if(50809<=e&&e<=50835)return r.CLUSTER_BREAK.LVT}else if(50836===e)return r.CLUSTER_BREAK.LV}else if(e<50920){if(e<50865){if(e<50864){if(50837<=e&&e<=50863)return r.CLUSTER_BREAK.LVT}else if(50864===e)return r.CLUSTER_BREAK.LV}else if(e<50892){if(50865<=e&&e<=50891)return r.CLUSTER_BREAK.LVT}else if(e<50893){if(50892===e)return r.CLUSTER_BREAK.LV}else if(50893<=e&&e<=50919)return r.CLUSTER_BREAK.LVT}else if(e<50949){if(e<50921){if(50920===e)return r.CLUSTER_BREAK.LV}else if(e<50948){if(50921<=e&&e<=50947)return r.CLUSTER_BREAK.LVT}else if(50948===e)return r.CLUSTER_BREAK.LV}else if(e<50976){if(50949<=e&&e<=50975)return r.CLUSTER_BREAK.LVT}else if(e<50977){if(50976===e)return r.CLUSTER_BREAK.LV}else if(50977<=e&&e<=51003)return r.CLUSTER_BREAK.LVT}else if(e<51145){if(e<51061){if(e<51032){if(e<51005){if(51004===e)return r.CLUSTER_BREAK.LV}else if(51005<=e&&e<=51031)return r.CLUSTER_BREAK.LVT}else if(e<51033){if(51032===e)return r.CLUSTER_BREAK.LV}else if(e<51060){if(51033<=e&&e<=51059)return r.CLUSTER_BREAK.LVT}else if(51060===e)return r.CLUSTER_BREAK.LV}else if(e<51116){if(e<51088){if(51061<=e&&e<=51087)return r.CLUSTER_BREAK.LVT}else if(e<51089){if(51088===e)return r.CLUSTER_BREAK.LV}else if(51089<=e&&e<=51115)return r.CLUSTER_BREAK.LVT}else if(e<51117){if(51116===e)return r.CLUSTER_BREAK.LV}else if(e<51144){if(51117<=e&&e<=51143)return r.CLUSTER_BREAK.LVT}else if(51144===e)return r.CLUSTER_BREAK.LV}else if(e<51228){if(e<51173){if(e<51172){if(51145<=e&&e<=51171)return r.CLUSTER_BREAK.LVT}else if(51172===e)return r.CLUSTER_BREAK.LV}else if(e<51200){if(51173<=e&&e<=51199)return r.CLUSTER_BREAK.LVT}else if(e<51201){if(51200===e)return r.CLUSTER_BREAK.LV}else if(51201<=e&&e<=51227)return r.CLUSTER_BREAK.LVT}else if(e<51257){if(e<51229){if(51228===e)return r.CLUSTER_BREAK.LV}else if(e<51256){if(51229<=e&&e<=51255)return r.CLUSTER_BREAK.LVT}else if(51256===e)return r.CLUSTER_BREAK.LV}else if(e<51284){if(51257<=e&&e<=51283)return r.CLUSTER_BREAK.LVT}else if(e<51285){if(51284===e)return r.CLUSTER_BREAK.LV}else if(51285<=e&&e<=51311)return r.CLUSTER_BREAK.LVT}else if(e<52516){if(e<51901){if(e<51593){if(e<51452){if(e<51369){if(e<51340){if(e<51313){if(51312===e)return r.CLUSTER_BREAK.LV}else if(51313<=e&&e<=51339)return r.CLUSTER_BREAK.LVT}else if(e<51341){if(51340===e)return r.CLUSTER_BREAK.LV}else if(e<51368){if(51341<=e&&e<=51367)return r.CLUSTER_BREAK.LVT}else if(51368===e)return r.CLUSTER_BREAK.LV}else if(e<51397){if(e<51396){if(51369<=e&&e<=51395)return r.CLUSTER_BREAK.LVT}else if(51396===e)return r.CLUSTER_BREAK.LV}else if(e<51424){if(51397<=e&&e<=51423)return r.CLUSTER_BREAK.LVT}else if(e<51425){if(51424===e)return r.CLUSTER_BREAK.LV}else if(51425<=e&&e<=51451)return r.CLUSTER_BREAK.LVT}else if(e<51509){if(e<51480){if(e<51453){if(51452===e)return r.CLUSTER_BREAK.LV}else if(51453<=e&&e<=51479)return r.CLUSTER_BREAK.LVT}else if(e<51481){if(51480===e)return r.CLUSTER_BREAK.LV}else if(e<51508){if(51481<=e&&e<=51507)return r.CLUSTER_BREAK.LVT}else if(51508===e)return r.CLUSTER_BREAK.LV}else if(e<51564){if(e<51536){if(51509<=e&&e<=51535)return r.CLUSTER_BREAK.LVT}else if(e<51537){if(51536===e)return r.CLUSTER_BREAK.LV}else if(51537<=e&&e<=51563)return r.CLUSTER_BREAK.LVT}else if(e<51565){if(51564===e)return r.CLUSTER_BREAK.LV}else if(e<51592){if(51565<=e&&e<=51591)return r.CLUSTER_BREAK.LVT}else if(51592===e)return r.CLUSTER_BREAK.LV}else if(e<51760){if(e<51676){if(e<51621){if(e<51620){if(51593<=e&&e<=51619)return r.CLUSTER_BREAK.LVT}else if(51620===e)return r.CLUSTER_BREAK.LV}else if(e<51648){if(51621<=e&&e<=51647)return r.CLUSTER_BREAK.LVT}else if(e<51649){if(51648===e)return r.CLUSTER_BREAK.LV}else if(51649<=e&&e<=51675)return r.CLUSTER_BREAK.LVT}else if(e<51705){if(e<51677){if(51676===e)return r.CLUSTER_BREAK.LV}else if(e<51704){if(51677<=e&&e<=51703)return r.CLUSTER_BREAK.LVT}else if(51704===e)return r.CLUSTER_BREAK.LV}else if(e<51732){if(51705<=e&&e<=51731)return r.CLUSTER_BREAK.LVT}else if(e<51733){if(51732===e)return r.CLUSTER_BREAK.LV}else if(51733<=e&&e<=51759)return r.CLUSTER_BREAK.LVT}else if(e<51817){if(e<51788){if(e<51761){if(51760===e)return r.CLUSTER_BREAK.LV}else if(51761<=e&&e<=51787)return r.CLUSTER_BREAK.LVT}else if(e<51789){if(51788===e)return r.CLUSTER_BREAK.LV}else if(e<51816){if(51789<=e&&e<=51815)return r.CLUSTER_BREAK.LVT}else if(51816===e)return r.CLUSTER_BREAK.LV}else if(e<51872){if(e<51844){if(51817<=e&&e<=51843)return r.CLUSTER_BREAK.LVT}else if(e<51845){if(51844===e)return r.CLUSTER_BREAK.LV}else if(51845<=e&&e<=51871)return r.CLUSTER_BREAK.LVT}else if(e<51873){if(51872===e)return r.CLUSTER_BREAK.LV}else if(e<51900){if(51873<=e&&e<=51899)return r.CLUSTER_BREAK.LVT}else if(51900===e)return r.CLUSTER_BREAK.LV}else if(e<52208){if(e<52041){if(e<51984){if(e<51929){if(e<51928){if(51901<=e&&e<=51927)return r.CLUSTER_BREAK.LVT}else if(51928===e)return r.CLUSTER_BREAK.LV}else if(e<51956){if(51929<=e&&e<=51955)return r.CLUSTER_BREAK.LVT}else if(e<51957){if(51956===e)return r.CLUSTER_BREAK.LV}else if(51957<=e&&e<=51983)return r.CLUSTER_BREAK.LVT}else if(e<52012){if(e<51985){if(51984===e)return r.CLUSTER_BREAK.LV}else if(51985<=e&&e<=52011)return r.CLUSTER_BREAK.LVT}else if(e<52013){if(52012===e)return r.CLUSTER_BREAK.LV}else if(e<52040){if(52013<=e&&e<=52039)return r.CLUSTER_BREAK.LVT}else if(52040===e)return r.CLUSTER_BREAK.LV}else if(e<52124){if(e<52069){if(e<52068){if(52041<=e&&e<=52067)return r.CLUSTER_BREAK.LVT}else if(52068===e)return r.CLUSTER_BREAK.LV}else if(e<52096){if(52069<=e&&e<=52095)return r.CLUSTER_BREAK.LVT}else if(e<52097){if(52096===e)return r.CLUSTER_BREAK.LV}else if(52097<=e&&e<=52123)return r.CLUSTER_BREAK.LVT}else if(e<52153){if(e<52125){if(52124===e)return r.CLUSTER_BREAK.LV}else if(e<52152){if(52125<=e&&e<=52151)return r.CLUSTER_BREAK.LVT}else if(52152===e)return r.CLUSTER_BREAK.LV}else if(e<52180){if(52153<=e&&e<=52179)return r.CLUSTER_BREAK.LVT}else if(e<52181){if(52180===e)return r.CLUSTER_BREAK.LV}else if(52181<=e&&e<=52207)return r.CLUSTER_BREAK.LVT}else if(e<52349){if(e<52265){if(e<52236){if(e<52209){if(52208===e)return r.CLUSTER_BREAK.LV}else if(52209<=e&&e<=52235)return r.CLUSTER_BREAK.LVT}else if(e<52237){if(52236===e)return r.CLUSTER_BREAK.LV}else if(e<52264){if(52237<=e&&e<=52263)return r.CLUSTER_BREAK.LVT}else if(52264===e)return r.CLUSTER_BREAK.LV}else if(e<52320){if(e<52292){if(52265<=e&&e<=52291)return r.CLUSTER_BREAK.LVT}else if(e<52293){if(52292===e)return r.CLUSTER_BREAK.LV}else if(52293<=e&&e<=52319)return r.CLUSTER_BREAK.LVT}else if(e<52321){if(52320===e)return r.CLUSTER_BREAK.LV}else if(e<52348){if(52321<=e&&e<=52347)return r.CLUSTER_BREAK.LVT}else if(52348===e)return r.CLUSTER_BREAK.LV}else if(e<52432){if(e<52377){if(e<52376){if(52349<=e&&e<=52375)return r.CLUSTER_BREAK.LVT}else if(52376===e)return r.CLUSTER_BREAK.LV}else if(e<52404){if(52377<=e&&e<=52403)return r.CLUSTER_BREAK.LVT}else if(e<52405){if(52404===e)return r.CLUSTER_BREAK.LV}else if(52405<=e&&e<=52431)return r.CLUSTER_BREAK.LVT}else if(e<52461){if(e<52433){if(52432===e)return r.CLUSTER_BREAK.LV}else if(e<52460){if(52433<=e&&e<=52459)return r.CLUSTER_BREAK.LVT}else if(52460===e)return r.CLUSTER_BREAK.LV}else if(e<52488){if(52461<=e&&e<=52487)return r.CLUSTER_BREAK.LVT}else if(e<52489){if(52488===e)return r.CLUSTER_BREAK.LV}else if(52489<=e&&e<=52515)return r.CLUSTER_BREAK.LVT}else if(e<53105){if(e<52797){if(e<52656){if(e<52573){if(e<52544){if(e<52517){if(52516===e)return r.CLUSTER_BREAK.LV}else if(52517<=e&&e<=52543)return r.CLUSTER_BREAK.LVT}else if(e<52545){if(52544===e)return r.CLUSTER_BREAK.LV}else if(e<52572){if(52545<=e&&e<=52571)return r.CLUSTER_BREAK.LVT}else if(52572===e)return r.CLUSTER_BREAK.LV}else if(e<52601){if(e<52600){if(52573<=e&&e<=52599)return r.CLUSTER_BREAK.LVT}else if(52600===e)return r.CLUSTER_BREAK.LV}else if(e<52628){if(52601<=e&&e<=52627)return r.CLUSTER_BREAK.LVT}else if(e<52629){if(52628===e)return r.CLUSTER_BREAK.LV}else if(52629<=e&&e<=52655)return r.CLUSTER_BREAK.LVT}else if(e<52713){if(e<52684){if(e<52657){if(52656===e)return r.CLUSTER_BREAK.LV}else if(52657<=e&&e<=52683)return r.CLUSTER_BREAK.LVT}else if(e<52685){if(52684===e)return r.CLUSTER_BREAK.LV}else if(e<52712){if(52685<=e&&e<=52711)return r.CLUSTER_BREAK.LVT}else if(52712===e)return r.CLUSTER_BREAK.LV}else if(e<52768){if(e<52740){if(52713<=e&&e<=52739)return r.CLUSTER_BREAK.LVT}else if(e<52741){if(52740===e)return r.CLUSTER_BREAK.LV}else if(52741<=e&&e<=52767)return r.CLUSTER_BREAK.LVT}else if(e<52769){if(52768===e)return r.CLUSTER_BREAK.LV}else if(e<52796){if(52769<=e&&e<=52795)return r.CLUSTER_BREAK.LVT}else if(52796===e)return r.CLUSTER_BREAK.LV}else if(e<52964){if(e<52880){if(e<52825){if(e<52824){if(52797<=e&&e<=52823)return r.CLUSTER_BREAK.LVT}else if(52824===e)return r.CLUSTER_BREAK.LV}else if(e<52852){if(52825<=e&&e<=52851)return r.CLUSTER_BREAK.LVT}else if(e<52853){if(52852===e)return r.CLUSTER_BREAK.LV}else if(52853<=e&&e<=52879)return r.CLUSTER_BREAK.LVT}else if(e<52909){if(e<52881){if(52880===e)return r.CLUSTER_BREAK.LV}else if(e<52908){if(52881<=e&&e<=52907)return r.CLUSTER_BREAK.LVT}else if(52908===e)return r.CLUSTER_BREAK.LV}else if(e<52936){if(52909<=e&&e<=52935)return r.CLUSTER_BREAK.LVT}else if(e<52937){if(52936===e)return r.CLUSTER_BREAK.LV}else if(52937<=e&&e<=52963)return r.CLUSTER_BREAK.LVT}else if(e<53021){if(e<52992){if(e<52965){if(52964===e)return r.CLUSTER_BREAK.LV}else if(52965<=e&&e<=52991)return r.CLUSTER_BREAK.LVT}else if(e<52993){if(52992===e)return r.CLUSTER_BREAK.LV}else if(e<53020){if(52993<=e&&e<=53019)return r.CLUSTER_BREAK.LVT}else if(53020===e)return r.CLUSTER_BREAK.LV}else if(e<53076){if(e<53048){if(53021<=e&&e<=53047)return r.CLUSTER_BREAK.LVT}else if(e<53049){if(53048===e)return r.CLUSTER_BREAK.LV}else if(53049<=e&&e<=53075)return r.CLUSTER_BREAK.LVT}else if(e<53077){if(53076===e)return r.CLUSTER_BREAK.LV}else if(e<53104){if(53077<=e&&e<=53103)return r.CLUSTER_BREAK.LVT}else if(53104===e)return r.CLUSTER_BREAK.LV}else if(e<53412){if(e<53245){if(e<53188){if(e<53133){if(e<53132){if(53105<=e&&e<=53131)return r.CLUSTER_BREAK.LVT}else if(53132===e)return r.CLUSTER_BREAK.LV}else if(e<53160){if(53133<=e&&e<=53159)return r.CLUSTER_BREAK.LVT}else if(e<53161){if(53160===e)return r.CLUSTER_BREAK.LV}else if(53161<=e&&e<=53187)return r.CLUSTER_BREAK.LVT}else if(e<53216){if(e<53189){if(53188===e)return r.CLUSTER_BREAK.LV}else if(53189<=e&&e<=53215)return r.CLUSTER_BREAK.LVT}else if(e<53217){if(53216===e)return r.CLUSTER_BREAK.LV}else if(e<53244){if(53217<=e&&e<=53243)return r.CLUSTER_BREAK.LVT}else if(53244===e)return r.CLUSTER_BREAK.LV}else if(e<53328){if(e<53273){if(e<53272){if(53245<=e&&e<=53271)return r.CLUSTER_BREAK.LVT}else if(53272===e)return r.CLUSTER_BREAK.LV}else if(e<53300){if(53273<=e&&e<=53299)return r.CLUSTER_BREAK.LVT}else if(e<53301){if(53300===e)return r.CLUSTER_BREAK.LV}else if(53301<=e&&e<=53327)return r.CLUSTER_BREAK.LVT}else if(e<53357){if(e<53329){if(53328===e)return r.CLUSTER_BREAK.LV}else if(e<53356){if(53329<=e&&e<=53355)return r.CLUSTER_BREAK.LVT}else if(53356===e)return r.CLUSTER_BREAK.LV}else if(e<53384){if(53357<=e&&e<=53383)return r.CLUSTER_BREAK.LVT}else if(e<53385){if(53384===e)return r.CLUSTER_BREAK.LV}else if(53385<=e&&e<=53411)return r.CLUSTER_BREAK.LVT}else if(e<53553){if(e<53469){if(e<53440){if(e<53413){if(53412===e)return r.CLUSTER_BREAK.LV}else if(53413<=e&&e<=53439)return r.CLUSTER_BREAK.LVT}else if(e<53441){if(53440===e)return r.CLUSTER_BREAK.LV}else if(e<53468){if(53441<=e&&e<=53467)return r.CLUSTER_BREAK.LVT}else if(53468===e)return r.CLUSTER_BREAK.LV}else if(e<53524){if(e<53496){if(53469<=e&&e<=53495)return r.CLUSTER_BREAK.LVT}else if(e<53497){if(53496===e)return r.CLUSTER_BREAK.LV}else if(53497<=e&&e<=53523)return r.CLUSTER_BREAK.LVT}else if(e<53525){if(53524===e)return r.CLUSTER_BREAK.LV}else if(e<53552){if(53525<=e&&e<=53551)return r.CLUSTER_BREAK.LVT}else if(53552===e)return r.CLUSTER_BREAK.LV}else if(e<53636){if(e<53581){if(e<53580){if(53553<=e&&e<=53579)return r.CLUSTER_BREAK.LVT}else if(53580===e)return r.CLUSTER_BREAK.LV}else if(e<53608){if(53581<=e&&e<=53607)return r.CLUSTER_BREAK.LVT}else if(e<53609){if(53608===e)return r.CLUSTER_BREAK.LV}else if(53609<=e&&e<=53635)return r.CLUSTER_BREAK.LVT}else if(e<53665){if(e<53637){if(53636===e)return r.CLUSTER_BREAK.LV}else if(e<53664){if(53637<=e&&e<=53663)return r.CLUSTER_BREAK.LVT}else if(53664===e)return r.CLUSTER_BREAK.LV}else if(e<53692){if(53665<=e&&e<=53691)return r.CLUSTER_BREAK.LVT}else if(e<53693){if(53692===e)return r.CLUSTER_BREAK.LV}else if(53693<=e&&e<=53719)return r.CLUSTER_BREAK.LVT}else if(e<70459){if(e<54897){if(e<54308){if(e<54001){if(e<53860){if(e<53777){if(e<53748){if(e<53721){if(53720===e)return r.CLUSTER_BREAK.LV}else if(53721<=e&&e<=53747)return r.CLUSTER_BREAK.LVT}else if(e<53749){if(53748===e)return r.CLUSTER_BREAK.LV}else if(e<53776){if(53749<=e&&e<=53775)return r.CLUSTER_BREAK.LVT}else if(53776===e)return r.CLUSTER_BREAK.LV}else if(e<53805){if(e<53804){if(53777<=e&&e<=53803)return r.CLUSTER_BREAK.LVT}else if(53804===e)return r.CLUSTER_BREAK.LV}else if(e<53832){if(53805<=e&&e<=53831)return r.CLUSTER_BREAK.LVT}else if(e<53833){if(53832===e)return r.CLUSTER_BREAK.LV}else if(53833<=e&&e<=53859)return r.CLUSTER_BREAK.LVT}else if(e<53917){if(e<53888){if(e<53861){if(53860===e)return r.CLUSTER_BREAK.LV}else if(53861<=e&&e<=53887)return r.CLUSTER_BREAK.LVT}else if(e<53889){if(53888===e)return r.CLUSTER_BREAK.LV}else if(e<53916){if(53889<=e&&e<=53915)return r.CLUSTER_BREAK.LVT}else if(53916===e)return r.CLUSTER_BREAK.LV}else if(e<53972){if(e<53944){if(53917<=e&&e<=53943)return r.CLUSTER_BREAK.LVT}else if(e<53945){if(53944===e)return r.CLUSTER_BREAK.LV}else if(53945<=e&&e<=53971)return r.CLUSTER_BREAK.LVT}else if(e<53973){if(53972===e)return r.CLUSTER_BREAK.LV}else if(e<54e3){if(53973<=e&&e<=53999)return r.CLUSTER_BREAK.LVT}else if(54e3===e)return r.CLUSTER_BREAK.LV}else if(e<54141){if(e<54084){if(e<54029){if(e<54028){if(54001<=e&&e<=54027)return r.CLUSTER_BREAK.LVT}else if(54028===e)return r.CLUSTER_BREAK.LV}else if(e<54056){if(54029<=e&&e<=54055)return r.CLUSTER_BREAK.LVT}else if(e<54057){if(54056===e)return r.CLUSTER_BREAK.LV}else if(54057<=e&&e<=54083)return r.CLUSTER_BREAK.LVT}else if(e<54112){if(e<54085){if(54084===e)return r.CLUSTER_BREAK.LV}else if(54085<=e&&e<=54111)return r.CLUSTER_BREAK.LVT}else if(e<54113){if(54112===e)return r.CLUSTER_BREAK.LV}else if(e<54140){if(54113<=e&&e<=54139)return r.CLUSTER_BREAK.LVT}else if(54140===e)return r.CLUSTER_BREAK.LV}else if(e<54224){if(e<54169){if(e<54168){if(54141<=e&&e<=54167)return r.CLUSTER_BREAK.LVT}else if(54168===e)return r.CLUSTER_BREAK.LV}else if(e<54196){if(54169<=e&&e<=54195)return r.CLUSTER_BREAK.LVT}else if(e<54197){if(54196===e)return r.CLUSTER_BREAK.LV}else if(54197<=e&&e<=54223)return r.CLUSTER_BREAK.LVT}else if(e<54253){if(e<54225){if(54224===e)return r.CLUSTER_BREAK.LV}else if(e<54252){if(54225<=e&&e<=54251)return r.CLUSTER_BREAK.LVT}else if(54252===e)return r.CLUSTER_BREAK.LV}else if(e<54280){if(54253<=e&&e<=54279)return r.CLUSTER_BREAK.LVT}else if(e<54281){if(54280===e)return r.CLUSTER_BREAK.LV}else if(54281<=e&&e<=54307)return r.CLUSTER_BREAK.LVT}else if(e<54589){if(e<54448){if(e<54365){if(e<54336){if(e<54309){if(54308===e)return r.CLUSTER_BREAK.LV}else if(54309<=e&&e<=54335)return r.CLUSTER_BREAK.LVT}else if(e<54337){if(54336===e)return r.CLUSTER_BREAK.LV}else if(e<54364){if(54337<=e&&e<=54363)return r.CLUSTER_BREAK.LVT}else if(54364===e)return r.CLUSTER_BREAK.LV}else if(e<54393){if(e<54392){if(54365<=e&&e<=54391)return r.CLUSTER_BREAK.LVT}else if(54392===e)return r.CLUSTER_BREAK.LV}else if(e<54420){if(54393<=e&&e<=54419)return r.CLUSTER_BREAK.LVT}else if(e<54421){if(54420===e)return r.CLUSTER_BREAK.LV}else if(54421<=e&&e<=54447)return r.CLUSTER_BREAK.LVT}else if(e<54505){if(e<54476){if(e<54449){if(54448===e)return r.CLUSTER_BREAK.LV}else if(54449<=e&&e<=54475)return r.CLUSTER_BREAK.LVT}else if(e<54477){if(54476===e)return r.CLUSTER_BREAK.LV}else if(e<54504){if(54477<=e&&e<=54503)return r.CLUSTER_BREAK.LVT}else if(54504===e)return r.CLUSTER_BREAK.LV}else if(e<54560){if(e<54532){if(54505<=e&&e<=54531)return r.CLUSTER_BREAK.LVT}else if(e<54533){if(54532===e)return r.CLUSTER_BREAK.LV}else if(54533<=e&&e<=54559)return r.CLUSTER_BREAK.LVT}else if(e<54561){if(54560===e)return r.CLUSTER_BREAK.LV}else if(e<54588){if(54561<=e&&e<=54587)return r.CLUSTER_BREAK.LVT}else if(54588===e)return r.CLUSTER_BREAK.LV}else if(e<54756){if(e<54672){if(e<54617){if(e<54616){if(54589<=e&&e<=54615)return r.CLUSTER_BREAK.LVT}else if(54616===e)return r.CLUSTER_BREAK.LV}else if(e<54644){if(54617<=e&&e<=54643)return r.CLUSTER_BREAK.LVT}else if(e<54645){if(54644===e)return r.CLUSTER_BREAK.LV}else if(54645<=e&&e<=54671)return r.CLUSTER_BREAK.LVT}else if(e<54701){if(e<54673){if(54672===e)return r.CLUSTER_BREAK.LV}else if(e<54700){if(54673<=e&&e<=54699)return r.CLUSTER_BREAK.LVT}else if(54700===e)return r.CLUSTER_BREAK.LV}else if(e<54728){if(54701<=e&&e<=54727)return r.CLUSTER_BREAK.LVT}else if(e<54729){if(54728===e)return r.CLUSTER_BREAK.LV}else if(54729<=e&&e<=54755)return r.CLUSTER_BREAK.LVT}else if(e<54813){if(e<54784){if(e<54757){if(54756===e)return r.CLUSTER_BREAK.LV}else if(54757<=e&&e<=54783)return r.CLUSTER_BREAK.LVT}else if(e<54785){if(54784===e)return r.CLUSTER_BREAK.LV}else if(e<54812){if(54785<=e&&e<=54811)return r.CLUSTER_BREAK.LVT}else if(54812===e)return r.CLUSTER_BREAK.LV}else if(e<54868){if(e<54840){if(54813<=e&&e<=54839)return r.CLUSTER_BREAK.LVT}else if(e<54841){if(54840===e)return r.CLUSTER_BREAK.LV}else if(54841<=e&&e<=54867)return r.CLUSTER_BREAK.LVT}else if(e<54869){if(54868===e)return r.CLUSTER_BREAK.LV}else if(e<54896){if(54869<=e&&e<=54895)return r.CLUSTER_BREAK.LVT}else if(54896===e)return r.CLUSTER_BREAK.LV}else if(e<69632){if(e<55216){if(e<55037){if(e<54980){if(e<54925){if(e<54924){if(54897<=e&&e<=54923)return r.CLUSTER_BREAK.LVT}else if(54924===e)return r.CLUSTER_BREAK.LV}else if(e<54952){if(54925<=e&&e<=54951)return r.CLUSTER_BREAK.LVT}else if(e<54953){if(54952===e)return r.CLUSTER_BREAK.LV}else if(54953<=e&&e<=54979)return r.CLUSTER_BREAK.LVT}else if(e<55008){if(e<54981){if(54980===e)return r.CLUSTER_BREAK.LV}else if(54981<=e&&e<=55007)return r.CLUSTER_BREAK.LVT}else if(e<55009){if(55008===e)return r.CLUSTER_BREAK.LV}else if(e<55036){if(55009<=e&&e<=55035)return r.CLUSTER_BREAK.LVT}else if(55036===e)return r.CLUSTER_BREAK.LV}else if(e<55120){if(e<55065){if(e<55064){if(55037<=e&&e<=55063)return r.CLUSTER_BREAK.LVT}else if(55064===e)return r.CLUSTER_BREAK.LV}else if(e<55092){if(55065<=e&&e<=55091)return r.CLUSTER_BREAK.LVT}else if(e<55093){if(55092===e)return r.CLUSTER_BREAK.LV}else if(55093<=e&&e<=55119)return r.CLUSTER_BREAK.LVT}else if(e<55149){if(e<55121){if(55120===e)return r.CLUSTER_BREAK.LV}else if(e<55148){if(55121<=e&&e<=55147)return r.CLUSTER_BREAK.LVT}else if(55148===e)return r.CLUSTER_BREAK.LV}else if(e<55176){if(55149<=e&&e<=55175)return r.CLUSTER_BREAK.LVT}else if(e<55177){if(55176===e)return r.CLUSTER_BREAK.LV}else if(55177<=e&&e<=55203)return r.CLUSTER_BREAK.LVT}else if(e<68097){if(e<65279){if(e<64286){if(e<55243){if(55216<=e&&e<=55238)return r.CLUSTER_BREAK.V}else if(55243<=e&&e<=55291)return r.CLUSTER_BREAK.T}else if(e<65024){if(64286===e)return r.CLUSTER_BREAK.EXTEND}else if(e<65056){if(65024<=e&&e<=65039)return r.CLUSTER_BREAK.EXTEND}else if(65056<=e&&e<=65071)return r.CLUSTER_BREAK.EXTEND}else if(e<66045){if(e<65438){if(65279===e)return r.CLUSTER_BREAK.CONTROL}else if(e<65520){if(65438<=e&&e<=65439)return r.CLUSTER_BREAK.EXTEND}else if(65520<=e&&e<=65531)return r.CLUSTER_BREAK.CONTROL}else if(e<66272){if(66045===e)return r.CLUSTER_BREAK.EXTEND}else if(e<66422){if(66272===e)return r.CLUSTER_BREAK.EXTEND}else if(66422<=e&&e<=66426)return r.CLUSTER_BREAK.EXTEND}else if(e<68325){if(e<68108){if(e<68101){if(68097<=e&&e<=68099)return r.CLUSTER_BREAK.EXTEND}else if(68101<=e&&e<=68102)return r.CLUSTER_BREAK.EXTEND}else if(e<68152){if(68108<=e&&e<=68111)return r.CLUSTER_BREAK.EXTEND}else if(e<68159){if(68152<=e&&e<=68154)return r.CLUSTER_BREAK.EXTEND}else if(68159===e)return r.CLUSTER_BREAK.EXTEND}else if(e<69373){if(e<68900){if(68325<=e&&e<=68326)return r.CLUSTER_BREAK.EXTEND}else if(e<69291){if(68900<=e&&e<=68903)return r.CLUSTER_BREAK.EXTEND}else if(69291<=e&&e<=69292)return r.CLUSTER_BREAK.EXTEND}else if(e<69446){if(69373<=e&&e<=69375)return r.CLUSTER_BREAK.EXTEND}else if(e<69506){if(69446<=e&&e<=69456)return r.CLUSTER_BREAK.EXTEND}else if(69506<=e&&e<=69509)return r.CLUSTER_BREAK.EXTEND}else if(e<70016){if(e<69815){if(e<69747){if(e<69634){if(69632===e)return r.CLUSTER_BREAK.SPACINGMARK;if(69633===e)return r.CLUSTER_BREAK.EXTEND}else if(e<69688){if(69634===e)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<69744){if(69688<=e&&e<=69702)return r.CLUSTER_BREAK.EXTEND}else if(69744===e)return r.CLUSTER_BREAK.EXTEND}else if(e<69762){if(e<69759){if(69747<=e&&e<=69748)return r.CLUSTER_BREAK.EXTEND}else if(69759<=e&&e<=69761)return r.CLUSTER_BREAK.EXTEND}else if(e<69808){if(69762===e)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<69811){if(69808<=e&&e<=69810)return r.CLUSTER_BREAK.SPACINGMARK}else if(69811<=e&&e<=69814)return r.CLUSTER_BREAK.EXTEND}else if(e<69888)if(e<69821){if(e<69817){if(69815<=e&&e<=69816)return r.CLUSTER_BREAK.SPACINGMARK}else if(69817<=e&&e<=69818)return r.CLUSTER_BREAK.EXTEND}else if(e<69826){if(69821===e)return r.CLUSTER_BREAK.PREPEND}else{if(69826===e)return r.CLUSTER_BREAK.EXTEND;if(69837===e)return r.CLUSTER_BREAK.PREPEND}else if(e<69933){if(e<69927){if(69888<=e&&e<=69890)return r.CLUSTER_BREAK.EXTEND}else if(e<69932){if(69927<=e&&e<=69931)return r.CLUSTER_BREAK.EXTEND}else if(69932===e)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<69957){if(69933<=e&&e<=69940)return r.CLUSTER_BREAK.EXTEND}else if(e<70003){if(69957<=e&&e<=69958)return r.CLUSTER_BREAK.SPACINGMARK}else if(70003===e)return r.CLUSTER_BREAK.EXTEND}else if(e<70194){if(e<70082){if(e<70067){if(e<70018){if(70016<=e&&e<=70017)return r.CLUSTER_BREAK.EXTEND}else if(70018===e)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<70070){if(70067<=e&&e<=70069)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<70079){if(70070<=e&&e<=70078)return r.CLUSTER_BREAK.EXTEND}else if(70079<=e&&e<=70080)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<70095){if(e<70089){if(70082<=e&&e<=70083)return r.CLUSTER_BREAK.PREPEND}else if(e<70094){if(70089<=e&&e<=70092)return r.CLUSTER_BREAK.EXTEND}else if(70094===e)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<70188){if(70095===e)return r.CLUSTER_BREAK.EXTEND}else if(e<70191){if(70188<=e&&e<=70190)return r.CLUSTER_BREAK.SPACINGMARK}else if(70191<=e&&e<=70193)return r.CLUSTER_BREAK.EXTEND}else if(e<70209){if(e<70197){if(e<70196){if(70194<=e&&e<=70195)return r.CLUSTER_BREAK.SPACINGMARK}else if(70196===e)return r.CLUSTER_BREAK.EXTEND}else if(e<70198){if(70197===e)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<70206){if(70198<=e&&e<=70199)return r.CLUSTER_BREAK.EXTEND}else if(70206===e)return r.CLUSTER_BREAK.EXTEND}else if(e<70371){if(e<70367){if(70209===e)return r.CLUSTER_BREAK.EXTEND}else if(e<70368){if(70367===e)return r.CLUSTER_BREAK.EXTEND}else if(70368<=e&&e<=70370)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<70400){if(70371<=e&&e<=70378)return r.CLUSTER_BREAK.EXTEND}else if(e<70402){if(70400<=e&&e<=70401)return r.CLUSTER_BREAK.EXTEND}else if(70402<=e&&e<=70403)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<72343){if(e<71339){if(e<70841){if(e<70512){if(e<70471){if(e<70463){if(e<70462){if(70459<=e&&e<=70460)return r.CLUSTER_BREAK.EXTEND}else if(70462===e)return r.CLUSTER_BREAK.EXTEND}else if(e<70464){if(70463===e)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<70465){if(70464===e)return r.CLUSTER_BREAK.EXTEND}else if(70465<=e&&e<=70468)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<70487){if(e<70475){if(70471<=e&&e<=70472)return r.CLUSTER_BREAK.SPACINGMARK}else if(70475<=e&&e<=70477)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<70498){if(70487===e)return r.CLUSTER_BREAK.EXTEND}else if(e<70502){if(70498<=e&&e<=70499)return r.CLUSTER_BREAK.SPACINGMARK}else if(70502<=e&&e<=70508)return r.CLUSTER_BREAK.EXTEND}else if(e<70725){if(e<70712){if(e<70709){if(70512<=e&&e<=70516)return r.CLUSTER_BREAK.EXTEND}else if(70709<=e&&e<=70711)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<70720){if(70712<=e&&e<=70719)return r.CLUSTER_BREAK.EXTEND}else if(e<70722){if(70720<=e&&e<=70721)return r.CLUSTER_BREAK.SPACINGMARK}else if(70722<=e&&e<=70724)return r.CLUSTER_BREAK.EXTEND}else if(e<70832)if(e<70726){if(70725===e)return r.CLUSTER_BREAK.SPACINGMARK}else{if(70726===e)return r.CLUSTER_BREAK.EXTEND;if(70750===e)return r.CLUSTER_BREAK.EXTEND}else if(e<70833){if(70832===e)return r.CLUSTER_BREAK.EXTEND}else if(e<70835){if(70833<=e&&e<=70834)return r.CLUSTER_BREAK.SPACINGMARK}else if(70835<=e&&e<=70840)return r.CLUSTER_BREAK.EXTEND}else if(e<71096){if(e<70847)if(e<70843){if(70841===e)return r.CLUSTER_BREAK.SPACINGMARK;if(70842===e)return r.CLUSTER_BREAK.EXTEND}else if(e<70845){if(70843<=e&&e<=70844)return r.CLUSTER_BREAK.SPACINGMARK}else{if(70845===e)return r.CLUSTER_BREAK.EXTEND;if(70846===e)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<71087){if(e<70849){if(70847<=e&&e<=70848)return r.CLUSTER_BREAK.EXTEND}else if(e<70850){if(70849===e)return r.CLUSTER_BREAK.SPACINGMARK}else if(70850<=e&&e<=70851)return r.CLUSTER_BREAK.EXTEND}else if(e<71088){if(71087===e)return r.CLUSTER_BREAK.EXTEND}else if(e<71090){if(71088<=e&&e<=71089)return r.CLUSTER_BREAK.SPACINGMARK}else if(71090<=e&&e<=71093)return r.CLUSTER_BREAK.EXTEND}else if(e<71216){if(e<71102){if(e<71100){if(71096<=e&&e<=71099)return r.CLUSTER_BREAK.SPACINGMARK}else if(71100<=e&&e<=71101)return r.CLUSTER_BREAK.EXTEND}else if(e<71103){if(71102===e)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<71132){if(71103<=e&&e<=71104)return r.CLUSTER_BREAK.EXTEND}else if(71132<=e&&e<=71133)return r.CLUSTER_BREAK.EXTEND}else if(e<71229){if(e<71219){if(71216<=e&&e<=71218)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<71227){if(71219<=e&&e<=71226)return r.CLUSTER_BREAK.EXTEND}else if(71227<=e&&e<=71228)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<71230){if(71229===e)return r.CLUSTER_BREAK.EXTEND}else if(e<71231){if(71230===e)return r.CLUSTER_BREAK.SPACINGMARK}else if(71231<=e&&e<=71232)return r.CLUSTER_BREAK.EXTEND}else if(e<71999)if(e<71463){if(e<71350){if(e<71341){if(71339===e)return r.CLUSTER_BREAK.EXTEND;if(71340===e)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<71342){if(71341===e)return r.CLUSTER_BREAK.EXTEND}else if(e<71344){if(71342<=e&&e<=71343)return r.CLUSTER_BREAK.SPACINGMARK}else if(71344<=e&&e<=71349)return r.CLUSTER_BREAK.EXTEND}else if(e<71453){if(71350===e)return r.CLUSTER_BREAK.SPACINGMARK;if(71351===e)return r.CLUSTER_BREAK.EXTEND}else if(e<71458){if(71453<=e&&e<=71455)return r.CLUSTER_BREAK.EXTEND}else if(e<71462){if(71458<=e&&e<=71461)return r.CLUSTER_BREAK.EXTEND}else if(71462===e)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<71984){if(e<71727){if(e<71724){if(71463<=e&&e<=71467)return r.CLUSTER_BREAK.EXTEND}else if(71724<=e&&e<=71726)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<71736){if(71727<=e&&e<=71735)return r.CLUSTER_BREAK.EXTEND}else if(e<71737){if(71736===e)return r.CLUSTER_BREAK.SPACINGMARK}else if(71737<=e&&e<=71738)return r.CLUSTER_BREAK.EXTEND}else if(e<71995){if(e<71985){if(71984===e)return r.CLUSTER_BREAK.EXTEND}else if(e<71991){if(71985<=e&&e<=71989)return r.CLUSTER_BREAK.SPACINGMARK}else if(71991<=e&&e<=71992)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<71997){if(71995<=e&&e<=71996)return r.CLUSTER_BREAK.EXTEND}else{if(71997===e)return r.CLUSTER_BREAK.SPACINGMARK;if(71998===e)return r.CLUSTER_BREAK.EXTEND}else if(e<72193)if(e<72145)if(e<72001){if(71999===e)return r.CLUSTER_BREAK.PREPEND;if(72e3===e)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<72002){if(72001===e)return r.CLUSTER_BREAK.PREPEND}else{if(72002===e)return r.CLUSTER_BREAK.SPACINGMARK;if(72003===e)return r.CLUSTER_BREAK.EXTEND}else if(e<72156){if(e<72148){if(72145<=e&&e<=72147)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<72154){if(72148<=e&&e<=72151)return r.CLUSTER_BREAK.EXTEND}else if(72154<=e&&e<=72155)return r.CLUSTER_BREAK.EXTEND}else if(e<72160){if(72156<=e&&e<=72159)return r.CLUSTER_BREAK.SPACINGMARK}else{if(72160===e)return r.CLUSTER_BREAK.EXTEND;if(72164===e)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<72263){if(e<72249){if(e<72243){if(72193<=e&&e<=72202)return r.CLUSTER_BREAK.EXTEND}else if(72243<=e&&e<=72248)return r.CLUSTER_BREAK.EXTEND}else if(e<72250){if(72249===e)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<72251){if(72250===e)return r.CLUSTER_BREAK.PREPEND}else if(72251<=e&&e<=72254)return r.CLUSTER_BREAK.EXTEND}else if(e<72281){if(e<72273){if(72263===e)return r.CLUSTER_BREAK.EXTEND}else if(e<72279){if(72273<=e&&e<=72278)return r.CLUSTER_BREAK.EXTEND}else if(72279<=e&&e<=72280)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<72324){if(72281<=e&&e<=72283)return r.CLUSTER_BREAK.EXTEND}else if(e<72330){if(72324<=e&&e<=72329)return r.CLUSTER_BREAK.PREPEND}else if(72330<=e&&e<=72342)return r.CLUSTER_BREAK.EXTEND}else if(e<94033){if(e<73104){if(e<72881){if(e<72766){if(e<72751){if(e<72344){if(72343===e)return r.CLUSTER_BREAK.SPACINGMARK}else if(72344<=e&&e<=72345)return r.CLUSTER_BREAK.EXTEND}else if(e<72752){if(72751===e)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<72760){if(72752<=e&&e<=72758)return r.CLUSTER_BREAK.EXTEND}else if(72760<=e&&e<=72765)return r.CLUSTER_BREAK.EXTEND}else if(e<72850){if(72766===e)return r.CLUSTER_BREAK.SPACINGMARK;if(72767===e)return r.CLUSTER_BREAK.EXTEND}else if(e<72873){if(72850<=e&&e<=72871)return r.CLUSTER_BREAK.EXTEND}else if(e<72874){if(72873===e)return r.CLUSTER_BREAK.SPACINGMARK}else if(72874<=e&&e<=72880)return r.CLUSTER_BREAK.EXTEND}else if(e<73018){if(e<72884){if(e<72882){if(72881===e)return r.CLUSTER_BREAK.SPACINGMARK}else if(72882<=e&&e<=72883)return r.CLUSTER_BREAK.EXTEND}else if(e<72885){if(72884===e)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<73009){if(72885<=e&&e<=72886)return r.CLUSTER_BREAK.EXTEND}else if(73009<=e&&e<=73014)return r.CLUSTER_BREAK.EXTEND}else if(e<73030){if(e<73020){if(73018===e)return r.CLUSTER_BREAK.EXTEND}else if(e<73023){if(73020<=e&&e<=73021)return r.CLUSTER_BREAK.EXTEND}else if(73023<=e&&e<=73029)return r.CLUSTER_BREAK.EXTEND}else if(e<73031){if(73030===e)return r.CLUSTER_BREAK.PREPEND}else if(e<73098){if(73031===e)return r.CLUSTER_BREAK.EXTEND}else if(73098<=e&&e<=73102)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<73526){if(e<73459)if(e<73109){if(e<73107){if(73104<=e&&e<=73105)return r.CLUSTER_BREAK.EXTEND}else if(73107<=e&&e<=73108)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<73110){if(73109===e)return r.CLUSTER_BREAK.EXTEND}else{if(73110===e)return r.CLUSTER_BREAK.SPACINGMARK;if(73111===e)return r.CLUSTER_BREAK.EXTEND}else if(e<73474){if(e<73461){if(73459<=e&&e<=73460)return r.CLUSTER_BREAK.EXTEND}else if(e<73472){if(73461<=e&&e<=73462)return r.CLUSTER_BREAK.SPACINGMARK}else if(73472<=e&&e<=73473)return r.CLUSTER_BREAK.EXTEND}else if(e<73475){if(73474===e)return r.CLUSTER_BREAK.PREPEND}else if(e<73524){if(73475===e)return r.CLUSTER_BREAK.SPACINGMARK}else if(73524<=e&&e<=73525)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<78896)if(e<73536){if(e<73534){if(73526<=e&&e<=73530)return r.CLUSTER_BREAK.EXTEND}else if(73534<=e&&e<=73535)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<73537){if(73536===e)return r.CLUSTER_BREAK.EXTEND}else{if(73537===e)return r.CLUSTER_BREAK.SPACINGMARK;if(73538===e)return r.CLUSTER_BREAK.EXTEND}else if(e<92912){if(e<78912){if(78896<=e&&e<=78911)return r.CLUSTER_BREAK.CONTROL}else if(e<78919){if(78912===e)return r.CLUSTER_BREAK.EXTEND}else if(78919<=e&&e<=78933)return r.CLUSTER_BREAK.EXTEND}else if(e<92976){if(92912<=e&&e<=92916)return r.CLUSTER_BREAK.EXTEND}else if(e<94031){if(92976<=e&&e<=92982)return r.CLUSTER_BREAK.EXTEND}else if(94031===e)return r.CLUSTER_BREAK.EXTEND}else if(e<121476){if(e<119143)if(e<113824){if(e<94180){if(e<94095){if(94033<=e&&e<=94087)return r.CLUSTER_BREAK.SPACINGMARK}else if(94095<=e&&e<=94098)return r.CLUSTER_BREAK.EXTEND}else if(e<94192){if(94180===e)return r.CLUSTER_BREAK.EXTEND}else if(e<113821){if(94192<=e&&e<=94193)return r.CLUSTER_BREAK.SPACINGMARK}else if(113821<=e&&e<=113822)return r.CLUSTER_BREAK.EXTEND}else if(e<118576){if(e<118528){if(113824<=e&&e<=113827)return r.CLUSTER_BREAK.CONTROL}else if(118528<=e&&e<=118573)return r.CLUSTER_BREAK.EXTEND}else if(e<119141){if(118576<=e&&e<=118598)return r.CLUSTER_BREAK.EXTEND}else{if(119141===e)return r.CLUSTER_BREAK.EXTEND;if(119142===e)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<119173){if(e<119150){if(e<119149){if(119143<=e&&e<=119145)return r.CLUSTER_BREAK.EXTEND}else if(119149===e)return r.CLUSTER_BREAK.SPACINGMARK}else if(e<119155){if(119150<=e&&e<=119154)return r.CLUSTER_BREAK.EXTEND}else if(e<119163){if(119155<=e&&e<=119162)return r.CLUSTER_BREAK.CONTROL}else if(119163<=e&&e<=119170)return r.CLUSTER_BREAK.EXTEND}else if(e<121344){if(e<119210){if(119173<=e&&e<=119179)return r.CLUSTER_BREAK.EXTEND}else if(e<119362){if(119210<=e&&e<=119213)return r.CLUSTER_BREAK.EXTEND}else if(119362<=e&&e<=119364)return r.CLUSTER_BREAK.EXTEND}else if(e<121403){if(121344<=e&&e<=121398)return r.CLUSTER_BREAK.EXTEND}else if(e<121461){if(121403<=e&&e<=121452)return r.CLUSTER_BREAK.EXTEND}else if(121461===e)return r.CLUSTER_BREAK.EXTEND}else if(e<123628){if(e<122907){if(e<121505){if(e<121499){if(121476===e)return r.CLUSTER_BREAK.EXTEND}else if(121499<=e&&e<=121503)return r.CLUSTER_BREAK.EXTEND}else if(e<122880){if(121505<=e&&e<=121519)return r.CLUSTER_BREAK.EXTEND}else if(e<122888){if(122880<=e&&e<=122886)return r.CLUSTER_BREAK.EXTEND}else if(122888<=e&&e<=122904)return r.CLUSTER_BREAK.EXTEND}else if(e<123023){if(e<122915){if(122907<=e&&e<=122913)return r.CLUSTER_BREAK.EXTEND}else if(e<122918){if(122915<=e&&e<=122916)return r.CLUSTER_BREAK.EXTEND}else if(122918<=e&&e<=122922)return r.CLUSTER_BREAK.EXTEND}else if(e<123184){if(123023===e)return r.CLUSTER_BREAK.EXTEND}else if(e<123566){if(123184<=e&&e<=123190)return r.CLUSTER_BREAK.EXTEND}else if(123566===e)return r.CLUSTER_BREAK.EXTEND}else if(e<127995){if(e<125136){if(e<124140){if(123628<=e&&e<=123631)return r.CLUSTER_BREAK.EXTEND}else if(124140<=e&&e<=124143)return r.CLUSTER_BREAK.EXTEND}else if(e<125252){if(125136<=e&&e<=125142)return r.CLUSTER_BREAK.EXTEND}else if(e<127462){if(125252<=e&&e<=125258)return r.CLUSTER_BREAK.EXTEND}else if(127462<=e&&e<=127487)return r.CLUSTER_BREAK.REGIONAL_INDICATOR}else if(e<917632){if(e<917504){if(127995<=e&&e<=127999)return r.CLUSTER_BREAK.EXTEND}else if(e<917536){if(917504<=e&&e<=917535)return r.CLUSTER_BREAK.CONTROL}else if(917536<=e&&e<=917631)return r.CLUSTER_BREAK.EXTEND}else if(e<917760){if(917632<=e&&e<=917759)return r.CLUSTER_BREAK.CONTROL}else if(e<918e3){if(917760<=e&&e<=917999)return r.CLUSTER_BREAK.EXTEND}else if(918e3<=e&&e<=921599)return r.CLUSTER_BREAK.CONTROL;return r.CLUSTER_BREAK.OTHER}static getEmojiProperty(e){if(e<10160){if(e<9728){if(e<9e3){if(e<8482)if(e<8252){if(169===e)return r.EXTENDED_PICTOGRAPHIC;if(174===e)return r.EXTENDED_PICTOGRAPHIC}else{if(8252===e)return r.EXTENDED_PICTOGRAPHIC;if(8265===e)return r.EXTENDED_PICTOGRAPHIC}else if(e<8596){if(8482===e)return r.EXTENDED_PICTOGRAPHIC;if(8505===e)return r.EXTENDED_PICTOGRAPHIC}else if(e<8617){if(8596<=e&&e<=8601)return r.EXTENDED_PICTOGRAPHIC}else if(e<8986){if(8617<=e&&e<=8618)return r.EXTENDED_PICTOGRAPHIC}else if(8986<=e&&e<=8987)return r.EXTENDED_PICTOGRAPHIC}else if(e<9410){if(e<9167){if(9e3===e)return r.EXTENDED_PICTOGRAPHIC;if(9096===e)return r.EXTENDED_PICTOGRAPHIC}else if(e<9193){if(9167===e)return r.EXTENDED_PICTOGRAPHIC}else if(e<9208){if(9193<=e&&e<=9203)return r.EXTENDED_PICTOGRAPHIC}else if(9208<=e&&e<=9210)return r.EXTENDED_PICTOGRAPHIC}else if(e<9654){if(e<9642){if(9410===e)return r.EXTENDED_PICTOGRAPHIC}else if(9642<=e&&e<=9643)return r.EXTENDED_PICTOGRAPHIC}else if(e<9664){if(9654===e)return r.EXTENDED_PICTOGRAPHIC}else if(e<9723){if(9664===e)return r.EXTENDED_PICTOGRAPHIC}else if(9723<=e&&e<=9726)return r.EXTENDED_PICTOGRAPHIC}else if(e<10035)if(e<10004){if(e<9748){if(e<9735){if(9728<=e&&e<=9733)return r.EXTENDED_PICTOGRAPHIC}else if(9735<=e&&e<=9746)return r.EXTENDED_PICTOGRAPHIC}else if(e<9872){if(9748<=e&&e<=9861)return r.EXTENDED_PICTOGRAPHIC}else if(e<9992){if(9872<=e&&e<=9989)return r.EXTENDED_PICTOGRAPHIC}else if(9992<=e&&e<=10002)return r.EXTENDED_PICTOGRAPHIC}else if(e<10013){if(10004===e)return r.EXTENDED_PICTOGRAPHIC;if(10006===e)return r.EXTENDED_PICTOGRAPHIC}else if(e<10017){if(10013===e)return r.EXTENDED_PICTOGRAPHIC}else{if(10017===e)return r.EXTENDED_PICTOGRAPHIC;if(10024===e)return r.EXTENDED_PICTOGRAPHIC}else if(e<10067)if(e<10055){if(e<10052){if(10035<=e&&e<=10036)return r.EXTENDED_PICTOGRAPHIC}else if(10052===e)return r.EXTENDED_PICTOGRAPHIC}else if(e<10060){if(10055===e)return r.EXTENDED_PICTOGRAPHIC}else{if(10060===e)return r.EXTENDED_PICTOGRAPHIC;if(10062===e)return r.EXTENDED_PICTOGRAPHIC}else if(e<10083){if(e<10071){if(10067<=e&&e<=10069)return r.EXTENDED_PICTOGRAPHIC}else if(10071===e)return r.EXTENDED_PICTOGRAPHIC}else if(e<10133){if(10083<=e&&e<=10087)return r.EXTENDED_PICTOGRAPHIC}else if(e<10145){if(10133<=e&&e<=10135)return r.EXTENDED_PICTOGRAPHIC}else if(10145===e)return r.EXTENDED_PICTOGRAPHIC}else if(e<127489){if(e<12951)if(e<11035){if(e<10548){if(10160===e)return r.EXTENDED_PICTOGRAPHIC;if(10175===e)return r.EXTENDED_PICTOGRAPHIC}else if(e<11013){if(10548<=e&&e<=10549)return r.EXTENDED_PICTOGRAPHIC}else if(11013<=e&&e<=11015)return r.EXTENDED_PICTOGRAPHIC}else if(e<11093){if(e<11088){if(11035<=e&&e<=11036)return r.EXTENDED_PICTOGRAPHIC}else if(11088===e)return r.EXTENDED_PICTOGRAPHIC}else if(e<12336){if(11093===e)return r.EXTENDED_PICTOGRAPHIC}else{if(12336===e)return r.EXTENDED_PICTOGRAPHIC;if(12349===e)return r.EXTENDED_PICTOGRAPHIC}else if(e<127340){if(e<126976){if(12951===e)return r.EXTENDED_PICTOGRAPHIC;if(12953===e)return r.EXTENDED_PICTOGRAPHIC}else if(e<127245){if(126976<=e&&e<=127231)return r.EXTENDED_PICTOGRAPHIC}else if(e<127279){if(127245<=e&&e<=127247)return r.EXTENDED_PICTOGRAPHIC}else if(127279===e)return r.EXTENDED_PICTOGRAPHIC}else if(e<127374){if(e<127358){if(127340<=e&&e<=127345)return r.EXTENDED_PICTOGRAPHIC}else if(127358<=e&&e<=127359)return r.EXTENDED_PICTOGRAPHIC}else if(e<127377){if(127374===e)return r.EXTENDED_PICTOGRAPHIC}else if(e<127405){if(127377<=e&&e<=127386)return r.EXTENDED_PICTOGRAPHIC}else if(127405<=e&&e<=127461)return r.EXTENDED_PICTOGRAPHIC}else if(e<128981){if(e<127561){if(e<127535){if(e<127514){if(127489<=e&&e<=127503)return r.EXTENDED_PICTOGRAPHIC}else if(127514===e)return r.EXTENDED_PICTOGRAPHIC}else if(e<127538){if(127535===e)return r.EXTENDED_PICTOGRAPHIC}else if(e<127548){if(127538<=e&&e<=127546)return r.EXTENDED_PICTOGRAPHIC}else if(127548<=e&&e<=127551)return r.EXTENDED_PICTOGRAPHIC}else if(e<128326){if(e<128e3){if(127561<=e&&e<=127994)return r.EXTENDED_PICTOGRAPHIC}else if(128e3<=e&&e<=128317)return r.EXTENDED_PICTOGRAPHIC}else if(e<128640){if(128326<=e&&e<=128591)return r.EXTENDED_PICTOGRAPHIC}else if(e<128884){if(128640<=e&&e<=128767)return r.EXTENDED_PICTOGRAPHIC}else if(128884<=e&&e<=128895)return r.EXTENDED_PICTOGRAPHIC}else if(e<129198){if(e<129096){if(e<129036){if(128981<=e&&e<=129023)return r.EXTENDED_PICTOGRAPHIC}else if(129036<=e&&e<=129039)return r.EXTENDED_PICTOGRAPHIC}else if(e<129114){if(129096<=e&&e<=129103)return r.EXTENDED_PICTOGRAPHIC}else if(e<129160){if(129114<=e&&e<=129119)return r.EXTENDED_PICTOGRAPHIC}else if(129160<=e&&e<=129167)return r.EXTENDED_PICTOGRAPHIC}else if(e<129340){if(e<129292){if(129198<=e&&e<=129279)return r.EXTENDED_PICTOGRAPHIC}else if(129292<=e&&e<=129338)return r.EXTENDED_PICTOGRAPHIC}else if(e<129351){if(129340<=e&&e<=129349)return r.EXTENDED_PICTOGRAPHIC}else if(e<130048){if(129351<=e&&e<=129791)return r.EXTENDED_PICTOGRAPHIC}else if(130048<=e&&e<=131069)return r.EXTENDED_PICTOGRAPHIC;return r.CLUSTER_BREAK.OTHER}};e.default=s}}),g=l({"../../node_modules/.pnpm/graphemer@1.4.0/node_modules/graphemer/lib/index.js"(e){var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0});var r=t(m());e.default=r.default}}),y=l({"../../node_modules/.pnpm/iso-datestring-validator@2.2.2/node_modules/iso-datestring-validator/dist/index.js"(e){(()=>{var t={d:(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},r={};function n(e,t){return void 0===t&&(t="-"),new RegExp("^(?!0{4}"+t+"0{2}"+t+"0{2})((?=[0-9]{4}"+t+"(((0[^2])|1[0-2])|02(?="+t+"(([0-1][0-9])|2[0-8])))"+t+"[0-9]{2})|(?=((([13579][26])|([2468][048])|(0[48]))0{2})|([0-9]{2}((((0|[2468])[48])|[2468][048])|([13579][26])))"+t+"02"+t+"29))([0-9]{4})"+t+"(?!((0[469])|11)"+t+"31)((0[1,3-9]|1[0-2])|(02(?!"+t+"3)))"+t+"(0[1-9]|[1-2][0-9]|3[0-1])$").test(e)}function i(e){var t=/\D/.exec(e);return t?t[0]:""}function s(e,t,r){void 0===t&&(t=":"),void 0===r&&(r=!1);var n=new RegExp("^([0-1]|2(?=([0-3])|4"+t+"00))[0-9]"+t+"[0-5][0-9]("+t+"([0-5]|6(?=0))[0-9])?(.[0-9]{1,9})?$");if(!r||!/[Z+\-]/.test(e))return n.test(e);if(/Z$/.test(e))return n.test(e.replace("Z",""));var s,a,o,l=e.includes("+"),c=e.split(/[+-]/),u=c[0],d=c[1];return n.test(u)&&(s=d,a=l,void 0===(o=i(d))&&(o=":"),new RegExp(a?"^(0(?!(2"+o+"4)|0"+o+"3)|1(?=([0-1]|2(?="+o+"[04])|[34](?="+o+"0))))([03469](?="+o+"[03])|[17](?="+o+"0)|2(?="+o+"[04])|5(?="+o+"[034])|8(?="+o+"[04]))"+o+"([03](?=0)|4(?=5))[05]$":"^(0(?=[^0])|1(?=[0-2]))([39](?="+o+"[03])|[0-24-8](?="+o+"00))"+o+"[03]0$").test(s))}function a(e){var t=e.split("T"),r=t[0],a=t[1],o=n(r,i(r));if(!a)return!1;var l,c=(l=a.match(/([^Z+\-\d])(?=\d+\1)/),Array.isArray(l)?l[0]:"");return o&&s(a,c,!0)}function o(e,t){return void 0===t&&(t="-"),new RegExp("^[0-9]{4}"+t+"(0(?=[^0])|1(?=[0-2]))[0-9]$").test(e)}t.r(r),t.d(r,{isValidDate:()=>n,isValidISODateString:()=>a,isValidTime:()=>s,isValidYearMonth:()=>o});var l=e;for(var c in r)l[c]=r[c];r.__esModule&&Object.defineProperty(l,"__esModule",{value:!0})})()}}),v={};c(v,{APP_BSKY_GRAPH:()=>yg,AppBskyActorDefs:()=>pp,AppBskyActorGetPreferences:()=>oc,AppBskyActorGetProfile:()=>cc,AppBskyActorGetProfiles:()=>dc,AppBskyActorGetSuggestions:()=>pc,AppBskyActorNS:()=>Ig,AppBskyActorProfile:()=>Np,AppBskyActorPutPreferences:()=>mc,AppBskyActorSearchActors:()=>yc,AppBskyActorSearchActorsTypeahead:()=>Ec,AppBskyEmbedExternal:()=>Fp,AppBskyEmbedImages:()=>$p,AppBskyEmbedNS:()=>Pg,AppBskyEmbedRecord:()=>sh,AppBskyEmbedRecordWithMedia:()=>gh,AppBskyFeedDefs:()=>Th,AppBskyFeedDescribeFeedGenerator:()=>Tc,AppBskyFeedGenerator:()=>Yh,AppBskyFeedGetActorFeeds:()=>Cc,AppBskyFeedGetActorLikes:()=>xc,AppBskyFeedGetAuthorFeed:()=>Bc,AppBskyFeedGetFeed:()=>Oc,AppBskyFeedGetFeedGenerator:()=>Mc,AppBskyFeedGetFeedGenerators:()=>jc,AppBskyFeedGetFeedSkeleton:()=>qc,AppBskyFeedGetLikes:()=>zc,AppBskyFeedGetListFeed:()=>Zc,AppBskyFeedGetPostThread:()=>eu,AppBskyFeedGetPosts:()=>nu,AppBskyFeedGetRepostedBy:()=>su,AppBskyFeedGetSuggestedFeeds:()=>ou,AppBskyFeedGetTimeline:()=>cu,AppBskyFeedLike:()=>Jh,AppBskyFeedNS:()=>Ug,AppBskyFeedPost:()=>rm,AppBskyFeedRepost:()=>dm,AppBskyFeedSearchPosts:()=>du,AppBskyFeedThreadgate:()=>hm,AppBskyGraphBlock:()=>Sm,AppBskyGraphDefs:()=>wm,AppBskyGraphFollow:()=>Vm,AppBskyGraphGetBlocks:()=>hu,AppBskyGraphGetFollowers:()=>gu,AppBskyGraphGetFollows:()=>vu,AppBskyGraphGetList:()=>bu,AppBskyGraphGetListBlocks:()=>Ru,AppBskyGraphGetListMutes:()=>Au,AppBskyGraphGetLists:()=>wu,AppBskyGraphGetMutes:()=>ku,AppBskyGraphGetRelationships:()=>_u,AppBskyGraphGetSuggestedFollowsByActor:()=>Bu,AppBskyGraphList:()=>qm,AppBskyGraphListblock:()=>zm,AppBskyGraphListitem:()=>Ym,AppBskyGraphMuteActor:()=>Uu,AppBskyGraphMuteActorList:()=>Ou,AppBskyGraphNS:()=>Vg,AppBskyGraphUnmuteActor:()=>Fu,AppBskyGraphUnmuteActorList:()=>Vu,AppBskyNS:()=>Dg,AppBskyNotificationGetUnreadCount:()=>Gu,AppBskyNotificationListNotifications:()=>Hu,AppBskyNotificationNS:()=>zg,AppBskyNotificationRegisterPush:()=>Wu,AppBskyNotificationUpdateSeen:()=>Zu,AppBskyRichtextFacet:()=>Jm,AppBskyRichtextNS:()=>$g,AppBskyUnspeccedDefs:()=>ug,AppBskyUnspeccedGetPopularFeedGenerators:()=>Ju,AppBskyUnspeccedGetTaggedSuggestions:()=>td,AppBskyUnspeccedNS:()=>Wg,AppBskyUnspeccedSearchActorsSkeleton:()=>sd,AppBskyUnspeccedSearchPostsSkeleton:()=>ld,AppNS:()=>_g,AtUri:()=>I,AtpAgent:()=>Zg,AtpBaseClient:()=>vg,AtpServiceClient:()=>Eg,BlobRef:()=>si,BlockRecord:()=>jg,BskyAgent:()=>ky,COM_ATPROTO_ADMIN:()=>mg,COM_ATPROTO_MODERATION:()=>gg,ComAtprotoAdminCreateCommunicationTemplate:()=>ys,ComAtprotoAdminDefs:()=>dd,ComAtprotoAdminDeleteAccount:()=>Es,ComAtprotoAdminDeleteCommunicationTemplate:()=>Ts,ComAtprotoAdminDisableAccountInvites:()=>Ss,ComAtprotoAdminDisableInviteCodes:()=>Ls,ComAtprotoAdminEmitModerationEvent:()=>Cs,ComAtprotoAdminEnableAccountInvites:()=>_s,ComAtprotoAdminGetAccountInfo:()=>Is,ComAtprotoAdminGetAccountInfos:()=>Ps,ComAtprotoAdminGetInviteCodes:()=>Ns,ComAtprotoAdminGetModerationEvent:()=>Ks,ComAtprotoAdminGetRecord:()=>Ms,ComAtprotoAdminGetRepo:()=>Gs,ComAtprotoAdminGetSubjectStatus:()=>Xs,ComAtprotoAdminListCommunicationTemplates:()=>$s,ComAtprotoAdminNS:()=>Rg,ComAtprotoAdminQueryModerationEvents:()=>Ys,ComAtprotoAdminQueryModerationStatuses:()=>Qs,ComAtprotoAdminSearchRepos:()=>ea,ComAtprotoAdminSendEmail:()=>ra,ComAtprotoAdminUpdateAccountEmail:()=>ia,ComAtprotoAdminUpdateAccountHandle:()=>aa,ComAtprotoAdminUpdateCommunicationTemplate:()=>la,ComAtprotoAdminUpdateSubjectStatus:()=>ua,ComAtprotoIdentityNS:()=>Sg,ComAtprotoIdentityResolveHandle:()=>fa,ComAtprotoIdentityUpdateHandle:()=>ha,ComAtprotoLabelDefs:()=>wf,ComAtprotoLabelNS:()=>Ag,ComAtprotoLabelQueryLabels:()=>ga,ComAtprotoLabelSubscribeLabels:()=>Bf,ComAtprotoModerationCreateReport:()=>va,ComAtprotoModerationDefs:()=>Kf,ComAtprotoModerationNS:()=>Lg,ComAtprotoNS:()=>Tg,ComAtprotoRepoApplyWrites:()=>ba,ComAtprotoRepoCreateRecord:()=>Da,ComAtprotoRepoDeleteRecord:()=>Pa,ComAtprotoRepoDescribeRepo:()=>Oa,ComAtprotoRepoGetRecord:()=>Fa,ComAtprotoRepoListRecords:()=>Va,ComAtprotoRepoNS:()=>wg,ComAtprotoRepoPutRecord:()=>Ha,ComAtprotoRepoStrongRef:()=>Xf,ComAtprotoRepoUploadBlob:()=>$a,ComAtprotoServerConfirmEmail:()=>Ya,ComAtprotoServerCreateAccount:()=>ro,ComAtprotoServerCreateAppPassword:()=>fo,ComAtprotoServerCreateInviteCode:()=>yo,ComAtprotoServerCreateInviteCodes:()=>Eo,ComAtprotoServerCreateSession:()=>So,ComAtprotoServerDefs:()=>Wf,ComAtprotoServerDeleteAccount:()=>wo,ComAtprotoServerDeleteSession:()=>_o,ComAtprotoServerDescribeServer:()=>Io,ComAtprotoServerGetAccountInviteCodes:()=>No,ComAtprotoServerGetSession:()=>Fo,ComAtprotoServerListAppPasswords:()=>Vo,ComAtprotoServerNS:()=>Cg,ComAtprotoServerRefreshSession:()=>Xo,ComAtprotoServerRequestAccountDelete:()=>Wo,ComAtprotoServerRequestEmailConfirmation:()=>Zo,ComAtprotoServerRequestEmailUpdate:()=>Jo,ComAtprotoServerRequestPasswordReset:()=>tl,ComAtprotoServerReserveSigningKey:()=>nl,ComAtprotoServerResetPassword:()=>sl,ComAtprotoServerRevokeAppPassword:()=>cl,ComAtprotoServerUpdateEmail:()=>dl,ComAtprotoSyncGetBlob:()=>gl,ComAtprotoSyncGetBlocks:()=>vl,ComAtprotoSyncGetCheckout:()=>bl,ComAtprotoSyncGetHead:()=>Rl,ComAtprotoSyncGetLatestCommit:()=>Ll,ComAtprotoSyncGetRecord:()=>kl,ComAtprotoSyncGetRepo:()=>_l,ComAtprotoSyncListBlobs:()=>Il,ComAtprotoSyncListRepos:()=>Pl,ComAtprotoSyncNS:()=>kg,ComAtprotoSyncNotifyOfUpdate:()=>Kl,ComAtprotoSyncRequestCrawl:()=>Ml,ComAtprotoSyncSubscribeRepos:()=>ep,ComAtprotoTempCheckSignupQueue:()=>jl,ComAtprotoTempFetchLabels:()=>ql,ComAtprotoTempImportRepo:()=>Xl,ComAtprotoTempNS:()=>xg,ComAtprotoTempPushBlob:()=>$l,ComAtprotoTempRequestPhoneVerification:()=>Yl,ComAtprotoTempTransferAccount:()=>Ql,ComNS:()=>bg,FollowRecord:()=>Gg,GeneratorRecord:()=>Ng,LABELS:()=>py,LABEL_GROUPS:()=>Ly,LikeRecord:()=>Og,ListRecord:()=>qg,ListblockRecord:()=>Hg,ListitemRecord:()=>Xg,ModerationDecision:()=>fy,PostRecord:()=>Kg,ProfileRecord:()=>Bg,RepostRecord:()=>Fg,RichText:()=>cy,RichTextSegment:()=>ly,ThreadgateRecord:()=>Mg,UnicodeString:()=>ty,default:()=>Zg,jsonStringToLex:()=>ts,jsonToLex:()=>es,lexToJson:()=>Qi,moderateFeedGenerator:()=>Sy,moderatePost:()=>Ry,moderateProfile:()=>Ty,moderateUserList:()=>Ay,parseLanguage:()=>Kn,sanitizeRichText:()=>iy,stringifyLex:()=>Ji}),e.exports=(t=v,u(n({},"__esModule",{value:!0}),t));var E,b,T,R=e=>{if(!/^[a-zA-Z0-9.-]*$/.test(e))throw new S("Disallowed characters in handle (ASCII letters, digits, dashes, periods only)");if(e.length>253)throw new S("Handle is too long (253 chars max)");const t=e.split(".");if(t.length<2)throw new S("Handle domain needs at least two parts");for(let r=0;r<t.length;r++){const e=t[r];if(e.length<1)throw new S("Handle parts can not be empty");if(e.length>63)throw new S("Handle part too long (max 63 chars)");if(e.endsWith("-")||e.startsWith("-"))throw new S("Handle parts can not start or end with hyphens");if(r+1==t.length&&!/^[a-zA-Z]/.test(e))throw new S("Handle final component (TLD) must start with ASCII letter")}},S=class extends Error{},A=e=>{if(!/^[a-zA-Z0-9._:%-]*$/.test(e))throw new L("Disallowed characters in DID (ASCII letters, digits, and a couple other characters only)");const t=e.split(":");if(t.length<3)throw new L("DID requires prefix, method, and method-specific content");if("did"!=t[0])throw new L('DID requires "did:" prefix');if(!/^[a-z]+$/.test(t[1]))throw new L("DID method must be lower-case letters");if(e.endsWith(":")||e.endsWith("%"))throw new L('DID can not end with ":" or "%"');if(e.length>2048)throw new L("DID is too long (2048 chars max)")},L=class extends Error{},w=class{constructor(e){this.segments=[],C(e),this.segments=e.split(".")}static parse(e){return new w(e)}static create(e,t){const r=[...e.split(".").reverse(),t].join(".");return new w(r)}static isValid(e){try{return w.parse(e),!0}catch(t){return!1}}get authority(){return this.segments.slice(0,this.segments.length-1).reverse().join(".")}get name(){return this.segments.at(this.segments.length-1)}toString(){return this.segments.join(".")}},C=e=>{const t=e;if(!/^[a-zA-Z0-9.-]*$/.test(t))throw new k("Disallowed characters in NSID (ASCII letters, digits, dashes, periods only)");if(t.length>317)throw new k("NSID is too long (317 chars max)");const r=t.split(".");if(r.length<3)throw new k("NSID needs at least three parts");for(let n=0;n<r.length;n++){const e=r[n];if(e.length<1)throw new k("NSID parts can not be empty");if(e.length>63)throw new k("NSID part too long (max 63 chars)");if(e.endsWith("-")||e.startsWith("-"))throw new k("NSID parts can not start or end with hyphen");if(/^[0-9]/.test(e)&&0==n)throw new k("NSID first part may not start with a digit");if(!/^[a-zA-Z]+$/.test(e)&&n+1==r.length)throw new k("NSID name part must be only letters")}},k=class extends Error{},x=e=>{const t=e.split("#");if(t.length>2)throw new Error('ATURI can have at most one "#", separating fragment out');const r=t[1]||null;if(e=t[0],!/^[a-zA-Z0-9._~:@!$&')(*+,;=%/-]*$/.test(e))throw new Error("Disallowed characters in ATURI (ASCII)");const n=e.split("/");if(n.length>=3&&("at:"!=n[0]||0!=n[1].length))throw new Error('ATURI must start with "at://"');if(n.length<3)throw new Error("ATURI requires at least method and authority sections");try{n[2].startsWith("did:")?A(n[2]):R(n[2])}catch{throw new Error("ATURI authority must be a valid handle or DID")}if(n.length>=4){if(0==n[3].length)throw new Error("ATURI can not have a slash after authority without a path segment");try{C(n[3])}catch{throw new Error("ATURI requires first path segment (if supplied) to be valid NSID")}}if(n.length>=5&&0==n[4].length)throw new Error("ATURI can not have a slash after collection, unless record key is provided");if(n.length>=6)throw new Error("ATURI path can have at most two parts, and no trailing slash");if(t.length>=2&&null==r)throw new Error("ATURI fragment must be non-empty and start with slash");if(null!=r){if(0==r.length||"/"!=r[0])throw new Error("ATURI fragment must be non-empty and start with slash");if(!/^\/[a-zA-Z0-9._~:@!$&')(*+,;=%[\]/-]*$/.test(r))throw new Error("Disallowed characters in ATURI fragment (ASCII)")}if(e.length>8192)throw new Error("ATURI is far too long")},_=/^(at:\/\/)?((?:did:[a-z0-9:%-]+)|(?:[a-z0-9][a-z0-9.:-]*))(\/[^?#\s]*)?(\?[^#\s]+)?(#[^\s]+)?$/i,D=/^(\/[^?#\s]*)?(\?[^#\s]+)?(#[^\s]+)?$/i,I=class{constructor(e,t){let r;if(t){if(r=B(t),!r)throw new Error("Invalid at uri: ".concat(t));const n=function(e){const t=D.exec(e);if(t)return{hash:t[3]||"",pathname:t[1]||"",searchParams:new URLSearchParams(t[2]||"")};return}(e);if(!n)throw new Error("Invalid path: ".concat(e));Object.assign(r,n)}else if(r=B(e),!r)throw new Error("Invalid at uri: ".concat(e));this.hash=r.hash,this.host=r.host,this.pathname=r.pathname,this.searchParams=r.searchParams}static make(e,t,r){let n=e;return t&&(n+="/"+t),r&&(n+="/"+r),new I(n)}get protocol(){return"at:"}get origin(){return"at://".concat(this.host)}get hostname(){return this.host}set hostname(e){this.host=e}get search(){return this.searchParams.toString()}set search(e){this.searchParams=new URLSearchParams(e)}get collection(){return this.pathname.split("/").filter(Boolean)[0]||""}set collection(e){const t=this.pathname.split("/").filter(Boolean);t[0]=e,this.pathname=t.join("/")}get rkey(){return this.pathname.split("/").filter(Boolean)[1]||""}set rkey(e){const t=this.pathname.split("/").filter(Boolean);t[0]||(t[0]="undefined"),t[1]=e,this.pathname=t.join("/")}get href(){return this.toString()}toString(){let e=this.pathname||"/";e.startsWith("/")||(e="/".concat(e));let t=this.searchParams.toString();t&&!t.startsWith("?")&&(t="?".concat(t));let r=this.hash;return r&&!r.startsWith("#")&&(r="#".concat(r)),"at://".concat(this.host).concat(e).concat(t).concat(r)}};function B(e){const t=_.exec(e);if(t)return{hash:t[5]||"",host:t[2]||"",pathname:t[3]||"",searchParams:new URLSearchParams(t[4]||"")}}(b=E||(E={})).assertEqual=e=>e,b.assertIs=function(e){},b.assertNever=function(e){throw new Error},b.arrayToEnum=e=>{const t={};for(const r of e)t[r]=r;return t},b.getValidEnumValues=e=>{const t=b.objectKeys(e).filter((t=>"number"!==typeof e[e[t]])),r={};for(const n of t)r[n]=e[n];return b.objectValues(r)},b.objectValues=e=>b.objectKeys(e).map((function(t){return e[t]})),b.objectKeys="function"===typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},b.find=(e,t)=>{for(const r of e)if(t(r))return r},b.isInteger="function"===typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"===typeof e&&isFinite(e)&&Math.floor(e)===e,b.joinValues=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" | ";return e.map((e=>"string"===typeof e?"'".concat(e,"'"):e)).join(t)},b.jsonStringifyReplacer=(e,t)=>"bigint"===typeof t?t.toString():t,(T||(T={})).mergeShapes=(e,t)=>({...e,...t});var P=E.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),U=e=>{switch(typeof e){case"undefined":return P.undefined;case"string":return P.string;case"number":return isNaN(e)?P.nan:P.number;case"boolean":return P.boolean;case"function":return P.function;case"bigint":return P.bigint;case"symbol":return P.symbol;case"object":return Array.isArray(e)?P.array:null===e?P.null:e.then&&"function"===typeof e.then&&e.catch&&"function"===typeof e.catch?P.promise:"undefined"!==typeof Map&&e instanceof Map?P.map:"undefined"!==typeof Set&&e instanceof Set?P.set:"undefined"!==typeof Date&&e instanceof Date?P.date:P.object;default:return P.unknown}},N=E.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),O=class extends Error{constructor(e){var t;super(),t=this,this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.issues=[...t.issues,...e]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(e){return e.message},r={_errors:[]},n=e=>{for(const i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(n);else if("invalid_return_type"===i.code)n(i.returnTypeError);else if("invalid_arguments"===i.code)n(i.argumentsError);else if(0===i.path.length)r._errors.push(t(i));else{let e=r,n=0;for(;n<i.path.length;){const r=i.path[n];n===i.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(i))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,E.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e=>e.message;const t={},r=[];for(const n of this.issues)n.path.length>0?(t[n.path[0]]=t[n.path[0]]||[],t[n.path[0]].push(e(n))):r.push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}};O.create=e=>new O(e);var K=(e,t)=>{let r;switch(e.code){case N.invalid_type:r=e.received===P.undefined?"Required":"Expected ".concat(e.expected,", received ").concat(e.received);break;case N.invalid_literal:r="Invalid literal value, expected ".concat(JSON.stringify(e.expected,E.jsonStringifyReplacer));break;case N.unrecognized_keys:r="Unrecognized key(s) in object: ".concat(E.joinValues(e.keys,", "));break;case N.invalid_union:r="Invalid input";break;case N.invalid_union_discriminator:r="Invalid discriminator value. Expected ".concat(E.joinValues(e.options));break;case N.invalid_enum_value:r="Invalid enum value. Expected ".concat(E.joinValues(e.options),", received '").concat(e.received,"'");break;case N.invalid_arguments:r="Invalid function arguments";break;case N.invalid_return_type:r="Invalid function return type";break;case N.invalid_date:r="Invalid date";break;case N.invalid_string:"object"===typeof e.validation?"includes"in e.validation?(r='Invalid input: must include "'.concat(e.validation.includes,'"'),"number"===typeof e.validation.position&&(r="".concat(r," at one or more positions greater than or equal to ").concat(e.validation.position))):"startsWith"in e.validation?r='Invalid input: must start with "'.concat(e.validation.startsWith,'"'):"endsWith"in e.validation?r='Invalid input: must end with "'.concat(e.validation.endsWith,'"'):E.assertNever(e.validation):r="regex"!==e.validation?"Invalid ".concat(e.validation):"Invalid";break;case N.too_small:r="array"===e.type?"Array must contain ".concat(e.exact?"exactly":e.inclusive?"at least":"more than"," ").concat(e.minimum," element(s)"):"string"===e.type?"String must contain ".concat(e.exact?"exactly":e.inclusive?"at least":"over"," ").concat(e.minimum," character(s)"):"number"===e.type?"Number must be ".concat(e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than ").concat(e.minimum):"date"===e.type?"Date must be ".concat(e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than ").concat(new Date(Number(e.minimum))):"Invalid input";break;case N.too_big:r="array"===e.type?"Array must contain ".concat(e.exact?"exactly":e.inclusive?"at most":"less than"," ").concat(e.maximum," element(s)"):"string"===e.type?"String must contain ".concat(e.exact?"exactly":e.inclusive?"at most":"under"," ").concat(e.maximum," character(s)"):"number"===e.type?"Number must be ".concat(e.exact?"exactly":e.inclusive?"less than or equal to":"less than"," ").concat(e.maximum):"bigint"===e.type?"BigInt must be ".concat(e.exact?"exactly":e.inclusive?"less than or equal to":"less than"," ").concat(e.maximum):"date"===e.type?"Date must be ".concat(e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"," ").concat(new Date(Number(e.maximum))):"Invalid input";break;case N.custom:r="Invalid input";break;case N.invalid_intersection_types:r="Intersection results could not be merged";break;case N.not_multiple_of:r="Number must be a multiple of ".concat(e.multipleOf);break;case N.not_finite:r="Number must be finite";break;default:r=t.defaultError,E.assertNever(e)}return{message:r}},F=K;function M(){return F}var V=e=>{const{data:t,path:r,errorMaps:n,issueData:i}=e,s=[...r,...i.path||[]],a={...i,path:s};let o="";const l=n.filter((e=>!!e)).slice().reverse();for(const c of l)o=c(a,{data:t,defaultError:o}).message;return{...i,path:s,message:i.message||o}};function j(e,t){const r=V({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,M(),K].filter((e=>!!e))});e.common.issues.push(r)}var G,q,H=class{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const n of t){if("aborted"===n.status)return X;"dirty"===n.status&&e.dirty(),r.push(n.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const n of t)r.push({key:await n.key,value:await n.value});return H.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const n of t){const{key:t,value:i}=n;if("aborted"===t.status)return X;if("aborted"===i.status)return X;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),("undefined"!==typeof i.value||n.alwaysSet)&&(r[t.value]=i.value)}return{status:e.value,value:r}}},X=Object.freeze({status:"aborted"}),z=e=>({status:"dirty",value:e}),$=e=>({status:"valid",value:e}),W=e=>"aborted"===e.status,Y=e=>"dirty"===e.status,Z=e=>"valid"===e.status,Q=e=>"undefined"!==typeof Promise&&e instanceof Promise;(q=G||(G={})).errToObj=e=>"string"===typeof e?{message:e}:e||{},q.toString=e=>"string"===typeof e?e:null===e||void 0===e?void 0:e.message;var J=class{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},ee=(e,t)=>{if(Z(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new O(e.common.issues);return this._error=t,this._error}}};function te(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:i}=e;if(t&&(r||n))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:i};return{errorMap:(e,t)=>"invalid_type"!==e.code?{message:t.defaultError}:"undefined"===typeof t.data?{message:null!==n&&void 0!==n?n:t.defaultError}:{message:null!==r&&void 0!==r?r:t.defaultError},description:i}}var re=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return U(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:U(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new H,ctx:{common:e.parent.common,data:e.data,parsedType:U(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Q(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;const n={common:{issues:[],async:null!==(r=null===t||void 0===t?void 0:t.async)&&void 0!==r&&r,contextualErrorMap:null===t||void 0===t?void 0:t.errorMap},path:(null===t||void 0===t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:U(e)},i=this._parseSync({data:e,path:n.path,parent:n});return ee(n,i)}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:null===t||void 0===t?void 0:t.errorMap,async:!0},path:(null===t||void 0===t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:U(e)},n=this._parse({data:e,path:r.path,parent:r}),i=await(Q(n)?n:Promise.resolve(n));return ee(r,i)}refine(e,t){const r=e=>"string"===typeof t||"undefined"===typeof t?{message:t}:"function"===typeof t?t(e):t;return this._refinement(((t,n)=>{const i=e(t),s=()=>n.addIssue({code:N.custom,...r(t)});return"undefined"!==typeof Promise&&i instanceof Promise?i.then((e=>!!e||(s(),!1))):!!i||(s(),!1)}))}refinement(e,t){return this._refinement(((r,n)=>!!e(r)||(n.addIssue("function"===typeof t?t(r,n):t),!1)))}_refinement(e){return new Ge({schema:this,typeName:We.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return qe.create(this,this._def)}nullable(){return He.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ae.create(this,this._def)}promise(){return je.create(this,this._def)}or(e){return Ce.create([this,e],this._def)}and(e){return De.create(this,e,this._def)}transform(e){return new Ge({...te(this._def),schema:this,typeName:We.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"===typeof e?e:()=>e;return new Xe({...te(this._def),innerType:this,defaultValue:t,typeName:We.ZodDefault})}brand(){return new Qe({typeName:We.ZodBranded,type:this,...te(this._def)})}catch(e){const t="function"===typeof e?e:()=>e;return new ze({...te(this._def),innerType:this,catchValue:t,typeName:We.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return Je.create(this,e)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},ne=/^c[^\s-]{8,}$/i,ie=/^[a-z][a-z0-9]*$/,se=/[0-9A-HJKMNP-TV-Z]{26}/,ae=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,oe=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\])|(\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\.[A-Za-z]{2,})+))$/,le=/^(\p{Extended_Pictographic}|\p{Emoji_Component})+$/u,ce=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,ue=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/;var de=class extends re{constructor(){super(...arguments),this._regex=(e,t,r)=>this.refinement((t=>e.test(t)),{validation:t,code:N.invalid_string,...G.errToObj(r)}),this.nonempty=e=>this.min(1,G.errToObj(e)),this.trim=()=>new de({...this._def,checks:[...this._def.checks,{kind:"trim"}]}),this.toLowerCase=()=>new de({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]}),this.toUpperCase=()=>new de({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==P.string){const t=this._getOrReturnCtx(e);return j(t,{code:N.invalid_type,expected:P.string,received:t.parsedType}),X}const t=new H;let r;for(const o of this._def.checks)if("min"===o.kind)e.data.length<o.value&&(r=this._getOrReturnCtx(e,r),j(r,{code:N.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),t.dirty());else if("max"===o.kind)e.data.length>o.value&&(r=this._getOrReturnCtx(e,r),j(r,{code:N.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),t.dirty());else if("length"===o.kind){const n=e.data.length>o.value,i=e.data.length<o.value;(n||i)&&(r=this._getOrReturnCtx(e,r),n?j(r,{code:N.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):i&&j(r,{code:N.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),t.dirty())}else if("email"===o.kind)oe.test(e.data)||(r=this._getOrReturnCtx(e,r),j(r,{validation:"email",code:N.invalid_string,message:o.message}),t.dirty());else if("emoji"===o.kind)le.test(e.data)||(r=this._getOrReturnCtx(e,r),j(r,{validation:"emoji",code:N.invalid_string,message:o.message}),t.dirty());else if("uuid"===o.kind)ae.test(e.data)||(r=this._getOrReturnCtx(e,r),j(r,{validation:"uuid",code:N.invalid_string,message:o.message}),t.dirty());else if("cuid"===o.kind)ne.test(e.data)||(r=this._getOrReturnCtx(e,r),j(r,{validation:"cuid",code:N.invalid_string,message:o.message}),t.dirty());else if("cuid2"===o.kind)ie.test(e.data)||(r=this._getOrReturnCtx(e,r),j(r,{validation:"cuid2",code:N.invalid_string,message:o.message}),t.dirty());else if("ulid"===o.kind)se.test(e.data)||(r=this._getOrReturnCtx(e,r),j(r,{validation:"ulid",code:N.invalid_string,message:o.message}),t.dirty());else if("url"===o.kind)try{new URL(e.data)}catch(a){r=this._getOrReturnCtx(e,r),j(r,{validation:"url",code:N.invalid_string,message:o.message}),t.dirty()}else if("regex"===o.kind){o.regex.lastIndex=0;o.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),j(r,{validation:"regex",code:N.invalid_string,message:o.message}),t.dirty())}else if("trim"===o.kind)e.data=e.data.trim();else if("includes"===o.kind)e.data.includes(o.value,o.position)||(r=this._getOrReturnCtx(e,r),j(r,{code:N.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),t.dirty());else if("toLowerCase"===o.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===o.kind)e.data=e.data.toUpperCase();else if("startsWith"===o.kind)e.data.startsWith(o.value)||(r=this._getOrReturnCtx(e,r),j(r,{code:N.invalid_string,validation:{startsWith:o.value},message:o.message}),t.dirty());else if("endsWith"===o.kind)e.data.endsWith(o.value)||(r=this._getOrReturnCtx(e,r),j(r,{code:N.invalid_string,validation:{endsWith:o.value},message:o.message}),t.dirty());else if("datetime"===o.kind){((s=o).precision?s.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{".concat(s.precision,"}(([+-]\\d{2}(:?\\d{2})?)|Z)$")):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{".concat(s.precision,"}Z$")):0===s.precision?s.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):s.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$")).test(e.data)||(r=this._getOrReturnCtx(e,r),j(r,{code:N.invalid_string,validation:"datetime",message:o.message}),t.dirty())}else"ip"===o.kind?(n=e.data,("v4"!==(i=o.version)&&i||!ce.test(n))&&("v6"!==i&&i||!ue.test(n))&&(r=this._getOrReturnCtx(e,r),j(r,{validation:"ip",code:N.invalid_string,message:o.message}),t.dirty())):E.assertNever(o);var n,i,s;return{status:t.value,value:e.data}}_addCheck(e){return new de({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...G.errToObj(e)})}url(e){return this._addCheck({kind:"url",...G.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...G.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...G.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...G.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...G.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...G.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...G.errToObj(e)})}datetime(e){var t;return"string"===typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:"undefined"===typeof(null===e||void 0===e?void 0:e.precision)?null:null===e||void 0===e?void 0:e.precision,offset:null!==(t=null===e||void 0===e?void 0:e.offset)&&void 0!==t&&t,...G.errToObj(null===e||void 0===e?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...G.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null===t||void 0===t?void 0:t.position,...G.errToObj(null===t||void 0===t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...G.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...G.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...G.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...G.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...G.errToObj(t)})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}};function fe(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,i=r>n?r:n;return parseInt(e.toFixed(i).replace(".",""))%parseInt(t.toFixed(i).replace(".",""))/Math.pow(10,i)}de.create=e=>{var t;return new de({checks:[],typeName:We.ZodString,coerce:null!==(t=null===e||void 0===e?void 0:e.coerce)&&void 0!==t&&t,...te(e)})};var pe=class extends re{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==P.number){const t=this._getOrReturnCtx(e);return j(t,{code:N.invalid_type,expected:P.number,received:t.parsedType}),X}let t;const r=new H;for(const n of this._def.checks)if("int"===n.kind)E.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),j(t,{code:N.invalid_type,expected:"integer",received:"float",message:n.message}),r.dirty());else if("min"===n.kind){(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),j(t,{code:N.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty())}else if("max"===n.kind){(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),j(t,{code:N.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty())}else"multipleOf"===n.kind?0!==fe(e.data,n.value)&&(t=this._getOrReturnCtx(e,t),j(t,{code:N.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):"finite"===n.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),j(t,{code:N.not_finite,message:n.message}),r.dirty()):E.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,G.toString(t))}gt(e,t){return this.setLimit("min",e,!1,G.toString(t))}lte(e,t){return this.setLimit("max",e,!0,G.toString(t))}lt(e,t){return this.setLimit("max",e,!1,G.toString(t))}setLimit(e,t,r,n){return new pe({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:G.toString(n)}]})}_addCheck(e){return new pe({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:G.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:G.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:G.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:G.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:G.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:G.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:G.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:G.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:G.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&E.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}};pe.create=e=>new pe({checks:[],typeName:We.ZodNumber,coerce:(null===e||void 0===e?void 0:e.coerce)||!1,...te(e)});var he=class extends re{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){this._def.coerce&&(e.data=BigInt(e.data));if(this._getType(e)!==P.bigint){const t=this._getOrReturnCtx(e);return j(t,{code:N.invalid_type,expected:P.bigint,received:t.parsedType}),X}let t;const r=new H;for(const n of this._def.checks)if("min"===n.kind){(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),j(t,{code:N.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty())}else if("max"===n.kind){(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),j(t,{code:N.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty())}else"multipleOf"===n.kind?e.data%n.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),j(t,{code:N.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):E.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,G.toString(t))}gt(e,t){return this.setLimit("min",e,!1,G.toString(t))}lte(e,t){return this.setLimit("max",e,!0,G.toString(t))}lt(e,t){return this.setLimit("max",e,!1,G.toString(t))}setLimit(e,t,r,n){return new he({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:G.toString(n)}]})}_addCheck(e){return new he({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:G.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:G.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:G.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:G.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:G.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}};he.create=e=>{var t;return new he({checks:[],typeName:We.ZodBigInt,coerce:null!==(t=null===e||void 0===e?void 0:e.coerce)&&void 0!==t&&t,...te(e)})};var me=class extends re{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==P.boolean){const t=this._getOrReturnCtx(e);return j(t,{code:N.invalid_type,expected:P.boolean,received:t.parsedType}),X}return $(e.data)}};me.create=e=>new me({typeName:We.ZodBoolean,coerce:(null===e||void 0===e?void 0:e.coerce)||!1,...te(e)});var ge=class extends re{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==P.date){const t=this._getOrReturnCtx(e);return j(t,{code:N.invalid_type,expected:P.date,received:t.parsedType}),X}if(isNaN(e.data.getTime())){return j(this._getOrReturnCtx(e),{code:N.invalid_date}),X}const t=new H;let r;for(const n of this._def.checks)"min"===n.kind?e.data.getTime()<n.value&&(r=this._getOrReturnCtx(e,r),j(r,{code:N.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),t.dirty()):"max"===n.kind?e.data.getTime()>n.value&&(r=this._getOrReturnCtx(e,r),j(r,{code:N.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),t.dirty()):E.assertNever(n);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ge({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:G.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:G.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}};ge.create=e=>new ge({checks:[],coerce:(null===e||void 0===e?void 0:e.coerce)||!1,typeName:We.ZodDate,...te(e)});var ye=class extends re{_parse(e){if(this._getType(e)!==P.symbol){const t=this._getOrReturnCtx(e);return j(t,{code:N.invalid_type,expected:P.symbol,received:t.parsedType}),X}return $(e.data)}};ye.create=e=>new ye({typeName:We.ZodSymbol,...te(e)});var ve=class extends re{_parse(e){if(this._getType(e)!==P.undefined){const t=this._getOrReturnCtx(e);return j(t,{code:N.invalid_type,expected:P.undefined,received:t.parsedType}),X}return $(e.data)}};ve.create=e=>new ve({typeName:We.ZodUndefined,...te(e)});var Ee=class extends re{_parse(e){if(this._getType(e)!==P.null){const t=this._getOrReturnCtx(e);return j(t,{code:N.invalid_type,expected:P.null,received:t.parsedType}),X}return $(e.data)}};Ee.create=e=>new Ee({typeName:We.ZodNull,...te(e)});var be=class extends re{constructor(){super(...arguments),this._any=!0}_parse(e){return $(e.data)}};be.create=e=>new be({typeName:We.ZodAny,...te(e)});var Te=class extends re{constructor(){super(...arguments),this._unknown=!0}_parse(e){return $(e.data)}};Te.create=e=>new Te({typeName:We.ZodUnknown,...te(e)});var Re=class extends re{_parse(e){const t=this._getOrReturnCtx(e);return j(t,{code:N.invalid_type,expected:P.never,received:t.parsedType}),X}};Re.create=e=>new Re({typeName:We.ZodNever,...te(e)});var Se=class extends re{_parse(e){if(this._getType(e)!==P.undefined){const t=this._getOrReturnCtx(e);return j(t,{code:N.invalid_type,expected:P.void,received:t.parsedType}),X}return $(e.data)}};Se.create=e=>new Se({typeName:We.ZodVoid,...te(e)});var Ae=class extends re{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),n=this._def;if(t.parsedType!==P.array)return j(t,{code:N.invalid_type,expected:P.array,received:t.parsedType}),X;if(null!==n.exactLength){const e=t.data.length>n.exactLength.value,i=t.data.length<n.exactLength.value;(e||i)&&(j(t,{code:e?N.too_big:N.too_small,minimum:i?n.exactLength.value:void 0,maximum:e?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(null!==n.minLength&&t.data.length<n.minLength.value&&(j(t,{code:N.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),null!==n.maxLength&&t.data.length>n.maxLength.value&&(j(t,{code:N.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map(((e,r)=>n.type._parseAsync(new J(t,e,t.path,r))))).then((e=>H.mergeArray(r,e)));const i=[...t.data].map(((e,r)=>n.type._parseSync(new J(t,e,t.path,r))));return H.mergeArray(r,i)}get element(){return this._def.type}min(e,t){return new Ae({...this._def,minLength:{value:e,message:G.toString(t)}})}max(e,t){return new Ae({...this._def,maxLength:{value:e,message:G.toString(t)}})}length(e,t){return new Ae({...this._def,exactLength:{value:e,message:G.toString(t)}})}nonempty(e){return this.min(1,e)}};function Le(e){if(e instanceof we){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=qe.create(Le(n))}return new we({...e._def,shape:()=>t})}return e instanceof Ae?new Ae({...e._def,type:Le(e.element)}):e instanceof qe?qe.create(Le(e.unwrap())):e instanceof He?He.create(Le(e.unwrap())):e instanceof Ie?Ie.create(e.items.map((e=>Le(e)))):e}Ae.create=(e,t)=>new Ae({type:e,minLength:null,maxLength:null,exactLength:null,typeName:We.ZodArray,...te(t)});var we=class extends re{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=E.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==P.object){const t=this._getOrReturnCtx(e);return j(t,{code:N.invalid_type,expected:P.object,received:t.parsedType}),X}const{status:t,ctx:r}=this._processInputParams(e),{shape:n,keys:i}=this._getCached(),s=[];if(!(this._def.catchall instanceof Re&&"strip"===this._def.unknownKeys))for(const o in r.data)i.includes(o)||s.push(o);const a=[];for(const o of i){const e=n[o],t=r.data[o];a.push({key:{status:"valid",value:o},value:e._parse(new J(r,t,r.path,o)),alwaysSet:o in r.data})}if(this._def.catchall instanceof Re){const e=this._def.unknownKeys;if("passthrough"===e)for(const t of s)a.push({key:{status:"valid",value:t},value:{status:"valid",value:r.data[t]}});else if("strict"===e)s.length>0&&(j(r,{code:N.unrecognized_keys,keys:s}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of s){const n=r.data[t];a.push({key:{status:"valid",value:t},value:e._parse(new J(r,n,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of a){const r=await t.key;e.push({key:r,value:await t.value,alwaysSet:t.alwaysSet})}return e})).then((e=>H.mergeObjectSync(t,e))):H.mergeObjectSync(t,a)}get shape(){return this._def.shape()}strict(e){return G.errToObj,new we({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{var n,i,s,a;const o=null!==(s=null===(i=(n=this._def).errorMap)||void 0===i?void 0:i.call(n,t,r).message)&&void 0!==s?s:r.defaultError;return"unrecognized_keys"===t.code?{message:null!==(a=G.errToObj(e).message)&&void 0!==a?a:o}:{message:o}}}:{}})}strip(){return new we({...this._def,unknownKeys:"strip"})}passthrough(){return new we({...this._def,unknownKeys:"passthrough"})}extend(e){return new we({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new we({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:We.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new we({...this._def,catchall:e})}pick(e){const t={};return E.objectKeys(e).forEach((r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])})),new we({...this._def,shape:()=>t})}omit(e){const t={};return E.objectKeys(this.shape).forEach((r=>{e[r]||(t[r]=this.shape[r])})),new we({...this._def,shape:()=>t})}deepPartial(){return Le(this)}partial(e){const t={};return E.objectKeys(this.shape).forEach((r=>{const n=this.shape[r];e&&!e[r]?t[r]=n:t[r]=n.optional()})),new we({...this._def,shape:()=>t})}required(e){const t={};return E.objectKeys(this.shape).forEach((r=>{if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof qe;)e=e._def.innerType;t[r]=e}})),new we({...this._def,shape:()=>t})}keyof(){return Fe(E.objectKeys(this.shape))}};we.create=(e,t)=>new we({shape:()=>e,unknownKeys:"strip",catchall:Re.create(),typeName:We.ZodObject,...te(t)}),we.strictCreate=(e,t)=>new we({shape:()=>e,unknownKeys:"strict",catchall:Re.create(),typeName:We.ZodObject,...te(t)}),we.lazycreate=(e,t)=>new we({shape:e,unknownKeys:"strip",catchall:Re.create(),typeName:We.ZodObject,...te(t)});var Ce=class extends re{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map((async e=>{const r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const n of e)if("dirty"===n.result.status)return t.common.issues.push(...n.ctx.common.issues),n.result;const r=e.map((e=>new O(e.ctx.common.issues)));return j(t,{code:N.invalid_union,unionErrors:r}),X}));{let e;const n=[];for(const s of r){const r={...t,common:{...t.common,issues:[]},parent:null},i=s._parseSync({data:t.data,path:t.path,parent:r});if("valid"===i.status)return i;"dirty"!==i.status||e||(e={result:i,ctx:r}),r.common.issues.length&&n.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const i=n.map((e=>new O(e)));return j(t,{code:N.invalid_union,unionErrors:i}),X}}get options(){return this._def.options}};Ce.create=(e,t)=>new Ce({options:e,typeName:We.ZodUnion,...te(t)});var ke=e=>e instanceof Oe?ke(e.schema):e instanceof Ge?ke(e.innerType()):e instanceof Ke?[e.value]:e instanceof Me?e.options:e instanceof Ve?Object.keys(e.enum):e instanceof Xe?ke(e._def.innerType):e instanceof ve?[void 0]:e instanceof Ee?[null]:null,xe=class extends re{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==P.object)return j(t,{code:N.invalid_type,expected:P.object,received:t.parsedType}),X;const r=this.discriminator,n=t.data[r],i=this.optionsMap.get(n);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(j(t,{code:N.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),X)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const n=new Map;for(const i of t){const t=ke(i.shape[e]);if(!t)throw new Error("A discriminator value for key `".concat(e,"` could not be extracted from all schema options"));for(const r of t){if(n.has(r))throw new Error("Discriminator property ".concat(String(e)," has duplicate value ").concat(String(r)));n.set(r,i)}}return new xe({typeName:We.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...te(r)})}};function _e(e,t){const r=U(e),n=U(t);if(e===t)return{valid:!0,data:e};if(r===P.object&&n===P.object){const r=E.objectKeys(t),n=E.objectKeys(e).filter((e=>-1!==r.indexOf(e))),i={...e,...t};for(const s of n){const r=_e(e[s],t[s]);if(!r.valid)return{valid:!1};i[s]=r.data}return{valid:!0,data:i}}if(r===P.array&&n===P.array){if(e.length!==t.length)return{valid:!1};const r=[];for(let n=0;n<e.length;n++){const i=_e(e[n],t[n]);if(!i.valid)return{valid:!1};r.push(i.data)}return{valid:!0,data:r}}return r===P.date&&n===P.date&&+e===+t?{valid:!0,data:e}:{valid:!1}}var De=class extends re{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),n=(e,n)=>{if(W(e)||W(n))return X;const i=_e(e.value,n.value);return i.valid?((Y(e)||Y(n))&&t.dirty(),{status:t.value,value:i.data}):(j(r,{code:N.invalid_intersection_types}),X)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then((e=>{let[t,r]=e;return n(t,r)})):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}};De.create=(e,t,r)=>new De({left:e,right:t,typeName:We.ZodIntersection,...te(r)});var Ie=class extends re{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==P.array)return j(r,{code:N.invalid_type,expected:P.array,received:r.parsedType}),X;if(r.data.length<this._def.items.length)return j(r,{code:N.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),X;!this._def.rest&&r.data.length>this._def.items.length&&(j(r,{code:N.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const n=[...r.data].map(((e,t)=>{const n=this._def.items[t]||this._def.rest;return n?n._parse(new J(r,e,r.path,t)):null})).filter((e=>!!e));return r.common.async?Promise.all(n).then((e=>H.mergeArray(t,e))):H.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new Ie({...this._def,rest:e})}};Ie.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ie({items:e,typeName:We.ZodTuple,rest:null,...te(t)})};var Be=class extends re{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==P.object)return j(r,{code:N.invalid_type,expected:P.object,received:r.parsedType}),X;const n=[],i=this._def.keyType,s=this._def.valueType;for(const a in r.data)n.push({key:i._parse(new J(r,a,r.path,a)),value:s._parse(new J(r,r.data[a],r.path,a))});return r.common.async?H.mergeObjectAsync(t,n):H.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,r){return new Be(t instanceof re?{keyType:e,valueType:t,typeName:We.ZodRecord,...te(r)}:{keyType:de.create(),valueType:e,typeName:We.ZodRecord,...te(t)})}},Pe=class extends re{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==P.map)return j(r,{code:N.invalid_type,expected:P.map,received:r.parsedType}),X;const n=this._def.keyType,i=this._def.valueType,s=[...r.data.entries()].map(((e,t)=>{let[s,a]=e;return{key:n._parse(new J(r,s,r.path,[t,"key"])),value:i._parse(new J(r,a,r.path,[t,"value"]))}}));if(r.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const r of s){const n=await r.key,i=await r.value;if("aborted"===n.status||"aborted"===i.status)return X;"dirty"!==n.status&&"dirty"!==i.status||t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const r of s){const n=r.key,i=r.value;if("aborted"===n.status||"aborted"===i.status)return X;"dirty"!==n.status&&"dirty"!==i.status||t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}}}};Pe.create=(e,t,r)=>new Pe({valueType:t,keyType:e,typeName:We.ZodMap,...te(r)});var Ue=class extends re{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==P.set)return j(r,{code:N.invalid_type,expected:P.set,received:r.parsedType}),X;const n=this._def;null!==n.minSize&&r.data.size<n.minSize.value&&(j(r,{code:N.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),null!==n.maxSize&&r.data.size>n.maxSize.value&&(j(r,{code:N.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());const i=this._def.valueType;function s(e){const r=new Set;for(const n of e){if("aborted"===n.status)return X;"dirty"===n.status&&t.dirty(),r.add(n.value)}return{status:t.value,value:r}}const a=[...r.data.values()].map(((e,t)=>i._parse(new J(r,e,r.path,t))));return r.common.async?Promise.all(a).then((e=>s(e))):s(a)}min(e,t){return new Ue({...this._def,minSize:{value:e,message:G.toString(t)}})}max(e,t){return new Ue({...this._def,maxSize:{value:e,message:G.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}};Ue.create=(e,t)=>new Ue({valueType:e,minSize:null,maxSize:null,typeName:We.ZodSet,...te(t)});var Ne=class extends re{constructor(){super(...arguments),this.validate=this.implement}_parse(e){var t=this;const{ctx:r}=this._processInputParams(e);if(r.parsedType!==P.function)return j(r,{code:N.invalid_type,expected:P.function,received:r.parsedType}),X;function n(e,t){return V({data:e,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,M(),K].filter((e=>!!e)),issueData:{code:N.invalid_arguments,argumentsError:t}})}function i(e,t){return V({data:e,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,M(),K].filter((e=>!!e)),issueData:{code:N.invalid_return_type,returnTypeError:t}})}const s={errorMap:r.common.contextualErrorMap},a=r.data;return this._def.returns instanceof je?$((async function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];const l=new O([]),c=await t._def.args.parseAsync(r,s).catch((e=>{throw l.addIssue(n(r,e)),l})),u=await a(...c);return await t._def.returns._def.type.parseAsync(u,s).catch((e=>{throw l.addIssue(i(u,e)),l}))})):$((function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];const l=t._def.args.safeParse(r,s);if(!l.success)throw new O([n(r,l.error)]);const c=a(...l.data),u=t._def.returns.safeParse(c,s);if(!u.success)throw new O([i(c,u.error)]);return u.data}))}parameters(){return this._def.args}returnType(){return this._def.returns}args(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return new Ne({...this._def,args:Ie.create(t).rest(Te.create())})}returns(e){return new Ne({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new Ne({args:e||Ie.create([]).rest(Te.create()),returns:t||Te.create(),typeName:We.ZodFunction,...te(r)})}},Oe=class extends re{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}};Oe.create=(e,t)=>new Oe({getter:e,typeName:We.ZodLazy,...te(t)});var Ke=class extends re{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return j(t,{received:t.data,code:N.invalid_literal,expected:this._def.value}),X}return{status:"valid",value:e.data}}get value(){return this._def.value}};function Fe(e,t){return new Me({values:e,typeName:We.ZodEnum,...te(t)})}Ke.create=(e,t)=>new Ke({value:e,typeName:We.ZodLiteral,...te(t)});var Me=class extends re{_parse(e){if("string"!==typeof e.data){const t=this._getOrReturnCtx(e),r=this._def.values;return j(t,{expected:E.joinValues(r),received:t.parsedType,code:N.invalid_type}),X}if(-1===this._def.values.indexOf(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return j(t,{received:t.data,code:N.invalid_enum_value,options:r}),X}return $(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e){return Me.create(e)}exclude(e){return Me.create(this.options.filter((t=>!e.includes(t))))}};Me.create=Fe;var Ve=class extends re{_parse(e){const t=E.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==P.string&&r.parsedType!==P.number){const e=E.objectValues(t);return j(r,{expected:E.joinValues(e),received:r.parsedType,code:N.invalid_type}),X}if(-1===t.indexOf(e.data)){const e=E.objectValues(t);return j(r,{received:r.data,code:N.invalid_enum_value,options:e}),X}return $(e.data)}get enum(){return this._def.values}};Ve.create=(e,t)=>new Ve({values:e,typeName:We.ZodNativeEnum,...te(t)});var je=class extends re{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==P.promise&&!1===t.common.async)return j(t,{code:N.invalid_type,expected:P.promise,received:t.parsedType}),X;const r=t.parsedType===P.promise?t.data:Promise.resolve(t.data);return $(r.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}};je.create=(e,t)=>new je({type:e,typeName:We.ZodPromise,...te(t)});var Ge=class extends re{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===We.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),n=this._def.effect||null;if("preprocess"===n.type){const e=n.transform(r.data);return r.common.async?Promise.resolve(e).then((e=>this._def.schema._parseAsync({data:e,path:r.path,parent:r}))):this._def.schema._parseSync({data:e,path:r.path,parent:r})}const i={addIssue:e=>{j(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),"refinement"===n.type){const e=e=>{const t=n.refinement(e,i);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===r.common.async){const n=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===n.status?X:("dirty"===n.status&&t.dirty(),e(n.value),{status:t.value,value:n.value})}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then((r=>"aborted"===r.status?X:("dirty"===r.status&&t.dirty(),e(r.value).then((()=>({status:t.value,value:r.value}))))))}if("transform"===n.type){if(!1===r.common.async){const e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Z(e))return e;const s=n.transform(e.value,i);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:s}}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then((e=>Z(e)?Promise.resolve(n.transform(e.value,i)).then((e=>({status:t.value,value:e}))):e))}E.assertNever(n)}};Ge.create=(e,t,r)=>new Ge({schema:e,typeName:We.ZodEffects,effect:t,...te(r)}),Ge.createWithPreprocess=(e,t,r)=>new Ge({schema:t,effect:{type:"preprocess",transform:e},typeName:We.ZodEffects,...te(r)});var qe=class extends re{_parse(e){return this._getType(e)===P.undefined?$(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};qe.create=(e,t)=>new qe({innerType:e,typeName:We.ZodOptional,...te(t)});var He=class extends re{_parse(e){return this._getType(e)===P.null?$(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};He.create=(e,t)=>new He({innerType:e,typeName:We.ZodNullable,...te(t)});var Xe=class extends re{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===P.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}};Xe.create=(e,t)=>new Xe({innerType:e,typeName:We.ZodDefault,defaultValue:"function"===typeof t.default?t.default:()=>t.default,...te(t)});var ze=class extends re{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Q(n)?n.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new O(r.common.issues)},input:r.data})}))):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new O(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}};ze.create=(e,t)=>new ze({innerType:e,typeName:We.ZodCatch,catchValue:"function"===typeof t.catch?t.catch:()=>t.catch,...te(t)});var $e=class extends re{_parse(e){if(this._getType(e)!==P.nan){const t=this._getOrReturnCtx(e);return j(t,{code:N.invalid_type,expected:P.nan,received:t.parsedType}),X}return{status:"valid",value:e.data}}};$e.create=e=>new $e({typeName:We.ZodNaN,...te(e)});var We,Ye,Ze=Symbol("zod_brand"),Qe=class extends re{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}},Je=class extends re{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?X:"dirty"===e.status?(t.dirty(),z(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})()}{const e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?X:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new Je({in:e,out:t,typeName:We.ZodPipeline})}},et=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return e?be.create().superRefine(((n,i)=>{var s,a;if(!e(n)){const e="function"===typeof t?t(n):"string"===typeof t?{message:t}:t,o=null===(a=null!==(s=e.fatal)&&void 0!==s?s:r)||void 0===a||a,l="string"===typeof e?{message:e}:e;i.addIssue({code:"custom",...l,fatal:o})}})):be.create()},tt={object:we.lazycreate};(Ye=We||(We={})).ZodString="ZodString",Ye.ZodNumber="ZodNumber",Ye.ZodNaN="ZodNaN",Ye.ZodBigInt="ZodBigInt",Ye.ZodBoolean="ZodBoolean",Ye.ZodDate="ZodDate",Ye.ZodSymbol="ZodSymbol",Ye.ZodUndefined="ZodUndefined",Ye.ZodNull="ZodNull",Ye.ZodAny="ZodAny",Ye.ZodUnknown="ZodUnknown",Ye.ZodNever="ZodNever",Ye.ZodVoid="ZodVoid",Ye.ZodArray="ZodArray",Ye.ZodObject="ZodObject",Ye.ZodUnion="ZodUnion",Ye.ZodDiscriminatedUnion="ZodDiscriminatedUnion",Ye.ZodIntersection="ZodIntersection",Ye.ZodTuple="ZodTuple",Ye.ZodRecord="ZodRecord",Ye.ZodMap="ZodMap",Ye.ZodSet="ZodSet",Ye.ZodFunction="ZodFunction",Ye.ZodLazy="ZodLazy",Ye.ZodLiteral="ZodLiteral",Ye.ZodEnum="ZodEnum",Ye.ZodEffects="ZodEffects",Ye.ZodNativeEnum="ZodNativeEnum",Ye.ZodOptional="ZodOptional",Ye.ZodNullable="ZodNullable",Ye.ZodDefault="ZodDefault",Ye.ZodCatch="ZodCatch",Ye.ZodPromise="ZodPromise",Ye.ZodBranded="ZodBranded",Ye.ZodPipeline="ZodPipeline";var rt=de.create,nt=pe.create,it=$e.create,st=he.create,at=me.create,ot=ge.create,lt=ye.create,ct=ve.create,ut=Ee.create,dt=be.create,ft=Te.create,pt=Re.create,ht=Se.create,mt=Ae.create,gt=we.create,yt=we.strictCreate,vt=Ce.create,Et=xe.create,bt=De.create,Tt=Ie.create,Rt=Be.create,St=Pe.create,At=Ue.create,Lt=Ne.create,wt=Oe.create,Ct=Ke.create,kt=Me.create,xt=Ve.create,_t=je.create,Dt=Ge.create,It=qe.create,Bt=He.create,Pt=Ge.createWithPreprocess,Ut=Je.create,Nt={string:e=>de.create({...e,coerce:!0}),number:e=>pe.create({...e,coerce:!0}),boolean:e=>me.create({...e,coerce:!0}),bigint:e=>he.create({...e,coerce:!0}),date:e=>ge.create({...e,coerce:!0})},Ot=X,Kt=Object.freeze({__proto__:null,defaultErrorMap:K,setErrorMap:function(e){F=e},getErrorMap:M,makeIssue:V,EMPTY_PATH:[],addIssueToContext:j,ParseStatus:H,INVALID:X,DIRTY:z,OK:$,isAborted:W,isDirty:Y,isValid:Z,isAsync:Q,get util(){return E},get objectUtil(){return T},ZodParsedType:P,getParsedType:U,ZodType:re,ZodString:de,ZodNumber:pe,ZodBigInt:he,ZodBoolean:me,ZodDate:ge,ZodSymbol:ye,ZodUndefined:ve,ZodNull:Ee,ZodAny:be,ZodUnknown:Te,ZodNever:Re,ZodVoid:Se,ZodArray:Ae,ZodObject:we,ZodUnion:Ce,ZodDiscriminatedUnion:xe,ZodIntersection:De,ZodTuple:Ie,ZodRecord:Be,ZodMap:Pe,ZodSet:Ue,ZodFunction:Ne,ZodLazy:Oe,ZodLiteral:Ke,ZodEnum:Me,ZodNativeEnum:Ve,ZodPromise:je,ZodEffects:Ge,ZodTransformer:Ge,ZodOptional:qe,ZodNullable:He,ZodDefault:Xe,ZodCatch:ze,ZodNaN:$e,BRAND:Ze,ZodBranded:Qe,ZodPipeline:Je,custom:et,Schema:re,ZodSchema:re,late:tt,get ZodFirstPartyTypeKind(){return We},coerce:Nt,any:dt,array:mt,bigint:st,boolean:at,date:ot,discriminatedUnion:Et,effect:Dt,enum:kt,function:Lt,instanceof:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{message:"Input not instance of ".concat(e.name)};return et((t=>t instanceof e),t)},intersection:bt,lazy:wt,literal:Ct,map:St,nan:it,nativeEnum:xt,never:pt,null:ut,nullable:Bt,number:nt,object:gt,oboolean:()=>at().optional(),onumber:()=>nt().optional(),optional:It,ostring:()=>rt().optional(),pipeline:Ut,preprocess:Pt,promise:_t,record:Rt,set:At,strictObject:yt,string:rt,symbol:lt,transformer:Dt,tuple:Tt,undefined:ct,union:vt,unknown:ft,void:ht,NEVER:Ot,ZodIssueCode:N,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:O}),Ft={};c(Ft,{assure:()=>Vt,is:()=>Mt,isObject:()=>jt});var Mt=(e,t)=>t.safeParse(e).success,Vt=(e,t)=>e.parse(t),jt=e=>"object"===typeof e&&null!==e,Gt=function e(t,r,n){r=r||[];var i=n=n||0;for(;t>=Xt;)r[n++]=255&t|qt,t/=128;for(;t&Ht;)r[n++]=255&t|qt,t>>>=7;return r[n]=0|t,e.bytes=n-i+1,r},qt=128,Ht=-128,Xt=Math.pow(2,31);var zt=function e(t,r){var n,i=0,s=0,a=r=r||0,o=t.length;do{if(a>=o)throw e.bytes=0,new RangeError("Could not decode varint");n=t[a++],i+=s<28?(n&Wt)<<s:(n&Wt)*Math.pow(2,s),s+=7}while(n>=$t);return e.bytes=a-r,i},$t=128,Wt=127;var Yt=Math.pow(2,7),Zt=Math.pow(2,14),Qt=Math.pow(2,21),Jt=Math.pow(2,28),er=Math.pow(2,35),tr=Math.pow(2,42),rr=Math.pow(2,49),nr=Math.pow(2,56),ir=Math.pow(2,63),sr={encode:Gt,decode:zt,encodingLength:function(e){return e<Yt?1:e<Zt?2:e<Qt?3:e<Jt?4:e<er?5:e<tr?6:e<rr?7:e<nr?8:e<ir?9:10}},ar=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return[sr.decode(e,t),sr.decode.bytes]},or=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return sr.encode(e,t,r),t},lr=e=>sr.encodingLength(e),cr=(new Uint8Array(0),e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),ur=(e,t)=>{const r=t.byteLength,n=lr(e),i=n+lr(r),s=new Uint8Array(i+r);return or(e,s,0),or(r,s,n),s.set(t,i),new dr(e,r,t,s)},dr=class{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}},fr={};c(fr,{base58btc:()=>Rr,base58flickr:()=>Sr});var pr=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),a=s.charCodeAt(0);if(255!==r[a])throw new TypeError(s+" is ambiguous");r[a]=i}var o=e.length,l=e.charAt(0),c=Math.log(o)/Math.log(256),u=Math.log(256)/Math.log(o);function d(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,i=0;e[t]===l;)n++,t++;for(var s=(e.length-t)*c+1>>>0,a=new Uint8Array(s);e[t];){var u=r[e.charCodeAt(t)];if(255===u)return;for(var d=0,f=s-1;(0!==u||d<i)&&-1!==f;f--,d++)u+=o*a[f]>>>0,a[f]=u%256>>>0,u=u/256>>>0;if(0!==u)throw new Error("Non-zero carry");i=d,t++}if(" "!==e[t]){for(var p=s-i;p!==s&&0===a[p];)p++;for(var h=new Uint8Array(n+(s-p)),m=n;p!==s;)h[m++]=a[p++];return h}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,s=t.length;i!==s&&0===t[i];)i++,r++;for(var a=(s-i)*u+1>>>0,c=new Uint8Array(a);i!==s;){for(var d=t[i],f=0,p=a-1;(0!==d||f<n)&&-1!==p;p--,f++)d+=256*c[p]>>>0,c[p]=d%o>>>0,d=d/o>>>0;if(0!==d)throw new Error("Non-zero carry");n=f,i++}for(var h=a-n;h!==a&&0===c[h];)h++;for(var m=l.repeat(r);h<a;++h)m+=e.charAt(c[h]);return m},decodeUnsafe:d,decode:function(e){var r=d(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}},hr=class{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}},mr=class{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return yr(this,e)}},gr=class{constructor(e){this.decoders=e}or(e){return yr(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}},yr=(e,t)=>new gr({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}}),vr=class{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new hr(e,t,r),this.decoder=new mr(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Er=e=>{let{name:t,prefix:r,encode:n,decode:i}=e;return new vr(t,r,n,i)},br=e=>{let{prefix:t,name:r,alphabet:n}=e;const{encode:i,decode:s}=pr(n,r);return Er({prefix:t,name:r,encode:i,decode:e=>cr(s(e))})},Tr=e=>{let{name:t,prefix:r,bitsPerChar:n,alphabet:i}=e;return Er({prefix:r,name:t,encode:e=>((e,t,r)=>{const n="="===t[t.length-1],i=(1<<r)-1;let s="",a=0,o=0;for(let l=0;l<e.length;++l)for(o=o<<8|e[l],a+=8;a>r;)a-=r,s+=t[i&o>>a];if(a&&(s+=t[i&o<<r-a]),n)for(;s.length*r&7;)s+="=";return s})(e,i,n),decode:e=>((e,t,r,n)=>{const i={};for(let u=0;u<t.length;++u)i[t[u]]=u;let s=e.length;for(;"="===e[s-1];)--s;const a=new Uint8Array(s*r/8|0);let o=0,l=0,c=0;for(let u=0;u<s;++u){const t=i[e[u]];if(void 0===t)throw new SyntaxError("Non-".concat(n," character"));l=l<<r|t,o+=r,o>=8&&(o-=8,a[c++]=255&l>>o)}if(o>=r||255&l<<8-o)throw new SyntaxError("Unexpected end of data");return a})(e,i,n,t)})},Rr=br({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Sr=br({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Ar={};c(Ar,{base32:()=>Lr,base32hex:()=>xr,base32hexpad:()=>Dr,base32hexpadupper:()=>Ir,base32hexupper:()=>_r,base32pad:()=>Cr,base32padupper:()=>kr,base32upper:()=>wr,base32z:()=>Br});var Lr=Tr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),wr=Tr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Cr=Tr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),kr=Tr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),xr=Tr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),_r=Tr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Dr=Tr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Ir=Tr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Br=Tr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Pr=class{constructor(e,t,r,n){this.code=t,this.version=e,this.multihash=r,this.bytes=n,this.byteOffset=n.byteOffset,this.byteLength=n.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:Gr,byteLength:Gr,code:jr,version:jr,multihash:jr,bytes:jr,_baseCache:Gr,asCID:Gr})}toV0(){if(0===this.version)return this;{const{code:e,multihash:t}=this;if(e!==Kr)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==Fr)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Pr.createV0(t)}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,r=ur(e,t);return Pr.createV1(this.code,r)}case 1:return this;default:throw Error("Can not convert CID version ".concat(this.version," to version 0. This is a bug please report"))}}equals(e){return e&&this.code===e.code&&this.version===e.version&&(t=this.multihash,r=e.multihash,t===r||t.code===r.code&&t.size===r.size&&((e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0})(t.bytes,r.bytes));var t,r}toString(e){const{bytes:t,version:r,_baseCache:n}=this;return 0===r?Nr(t,n,e||Rr.encoder):Or(t,n,e||Lr.encoder)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return qr(/^0\.0/,Hr),!(!e||!e[Vr]&&e.asCID!==e)}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof Pr)return e;if(null!=e&&e.asCID===e){const{version:t,code:r,multihash:n,bytes:i}=e;return new Pr(t,r,n,i||Mr(t,r,n.bytes))}if(null!=e&&!0===e[Vr]){const{version:t,multihash:r,code:n}=e,i=(e=>{const t=cr(e),[r,n]=ar(t),[i,s]=ar(t.subarray(n)),a=t.subarray(n+s);if(a.byteLength!==i)throw new Error("Incorrect length");return new dr(r,i,a,t)})(r);return Pr.create(t,n,i)}return null}static create(e,t,r){if("number"!==typeof t)throw new Error("String codecs are no longer supported");switch(e){case 0:if(t!==Kr)throw new Error("Version 0 CID must use dag-pb (code: ".concat(Kr,") block encoding"));return new Pr(e,t,r,r.bytes);case 1:{const n=Mr(e,t,r.bytes);return new Pr(e,t,r,n)}default:throw new Error("Invalid version")}}static createV0(e){return Pr.create(0,Kr,e)}static createV1(e,t){return Pr.create(1,e,t)}static decode(e){const[t,r]=Pr.decodeFirst(e);if(r.length)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=Pr.inspectBytes(e),r=t.size-t.multihashSize,n=cr(e.subarray(r,r+t.multihashSize));if(n.byteLength!==t.multihashSize)throw new Error("Incorrect length");const i=n.subarray(t.multihashSize-t.digestSize),s=new dr(t.multihashCode,t.digestSize,i,n);return[0===t.version?Pr.createV0(s):Pr.createV1(t.codec,s),e.subarray(t.size)]}static inspectBytes(e){let t=0;const r=()=>{const[r,n]=ar(e.subarray(t));return t+=n,r};let n=r(),i=Kr;if(18===n?(n=0,t=0):1===n&&(i=r()),0!==n&&1!==n)throw new RangeError("Invalid CID version ".concat(n));const s=t,a=r(),o=r(),l=t+o;return{version:n,codec:i,multihashCode:a,digestSize:o,multihashSize:l-s,size:l}}static parse(e,t){const[r,n]=Ur(e,t),i=Pr.decode(n);return i._baseCache.set(r,e),i}},Ur=(e,t)=>{switch(e[0]){case"Q":{const r=t||Rr;return[Rr.prefix,r.decode("".concat(Rr.prefix).concat(e))]}case Rr.prefix:{const r=t||Rr;return[Rr.prefix,r.decode(e)]}case Lr.prefix:{const r=t||Lr;return[Lr.prefix,r.decode(e)]}default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},Nr=(e,t,r)=>{const{prefix:n}=r;if(n!==Rr.prefix)throw Error("Cannot string encode V0 in ".concat(r.name," encoding"));const i=t.get(n);if(null==i){const i=r.encode(e).slice(1);return t.set(n,i),i}return i},Or=(e,t,r)=>{const{prefix:n}=r,i=t.get(n);if(null==i){const i=r.encode(e);return t.set(n,i),i}return i},Kr=112,Fr=18,Mr=(e,t,r)=>{const n=lr(e),i=n+lr(t),s=new Uint8Array(i+r.byteLength);return or(e,s,0),or(t,s,n),s.set(r,i),s},Vr=Symbol.for("@ipld/js-cid/CID"),jr={writable:!1,configurable:!1,enumerable:!0},Gr={writable:!1,enumerable:!1,configurable:!1},qr=(e,t)=>{if(!e.test("0.0.0-dev"))throw new Error(t);console.warn(t)},Hr="CID.isCID(v) is deprecated and will be removed in the next major release.\nFollowing code pattern:\n\nif (CID.isCID(value)) {\n  doSomethingWithCID(value)\n}\n\nIs replaced with:\n\nconst cid = CID.asCID(value)\nif (cid) {\n  // Make sure to use cid instead of value\n  doSomethingWithCID(cid)\n}\n",Xr={};c(Xr,{identity:()=>zr});var zr=Er({prefix:"\0",name:"identity",encode:e=>{return t=e,(new TextDecoder).decode(t);var t},decode:e=>(e=>(new TextEncoder).encode(e))(e)}),$r={};c($r,{base2:()=>Wr});var Wr=Tr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Yr={};c(Yr,{base8:()=>Zr});var Zr=Tr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Qr={};c(Qr,{base10:()=>Jr});var Jr=br({prefix:"9",name:"base10",alphabet:"0123456789"}),en={};c(en,{base16:()=>tn,base16upper:()=>rn});var tn=Tr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),rn=Tr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),nn={};c(nn,{base36:()=>sn,base36upper:()=>an});var sn=br({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),an=br({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),on={};c(on,{base64:()=>ln,base64pad:()=>cn,base64url:()=>un,base64urlpad:()=>dn});var ln=Tr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),cn=Tr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),un=Tr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),dn=Tr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),fn={};c(fn,{base256emoji:()=>gn});var pn=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),hn=pn.reduce(((e,t,r)=>(e[r]=t,e)),[]),mn=pn.reduce(((e,t,r)=>(e[t.codePointAt(0)]=r,e)),[]);var gn=Er({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+=hn[t]),"")},decode:function(e){const t=[];for(const r of e){const e=mn[r.codePointAt(0)];if(void 0===e)throw new Error("Non-base256emoji character: ".concat(r));t.push(e)}return new Uint8Array(t)}}),yn={};c(yn,{sha256:()=>Tn,sha512:()=>Rn});var vn=e=>{let{name:t,code:r,encode:n}=e;return new En(t,r,n)},En=class{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?ur(this.code,t):t.then((e=>ur(this.code,e)))}throw Error("Unknown type, must be binary type")}},bn=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),Tn=vn({name:"sha2-256",code:18,encode:bn("SHA-256")}),Rn=vn({name:"sha2-512",code:19,encode:bn("SHA-512")}),Sn={};c(Sn,{identity:()=>Ln});var An=cr,Ln={code:0,name:"identity",encode:An,digest:e=>ur(0,An(e))},wn=(new TextEncoder,new TextDecoder,{...Xr,...$r,...Yr,...Qr,...en,...Ar,...nn,...fr,...on,...fn});function Cn(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}var kn=Cn("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),xn=Cn("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{e=e.substring(1);const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),_n={utf8:kn,"utf-8":kn,hex:wn.base16,latin1:xn,ascii:xn,binary:xn,...wn};function Dn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";const r=_n[t];if(!r)throw new Error('Unsupported encoding "'.concat(t,'"'));return r.encoder.encode(e).substring(1)}var In=e=>{if(Array.isArray(e))return e.map((e=>In(e)));if(e&&"object"===typeof e){if("string"===typeof e.$link&&1===Object.keys(e).length)return Pr.parse(e.$link);if("string"===typeof e.$bytes&&1===Object.keys(e).length)return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";const r=_n[t];if(!r)throw new Error('Unsupported encoding "'.concat(t,'"'));return r.decoder.decode("".concat(r.prefix).concat(e))}(e.$bytes,"base64");const t={};for(const r of Object.keys(e))t[r]=In(e[r]);return t}return e},Bn=e=>{if(Array.isArray(e))return e.map((e=>Bn(e)));if(e&&"object"===typeof e){if(e instanceof Uint8Array)return{$bytes:Dn(e,"base64")};if(Pr.asCID(e))return{$link:e.toString()};const t={};for(const r of Object.keys(e))t[r]=Bn(e[r]);return t}return e},Pn={cid:Kt.any().refine((e=>null!==Pr.asCID(e)),{message:"Not a CID"}).transform((e=>Pr.asCID(e))),bytes:Kt.instanceof(Uint8Array),string:Kt.string(),array:Kt.array(Kt.unknown()),map:Kt.record(Kt.string(),Kt.unknown()),unknown:Kt.unknown()},Un=d(g()),Nn=e=>(new TextEncoder).encode(e).byteLength,On=e=>(new Un.default).countGraphemes(e),Kn=e=>{const t=e.match(Mn);if(null===t||void 0===t||!t.groups)return null;const r=t.groups;return{grandfathered:r.grandfathered,language:r.language,extlang:r.extlang,script:r.script,region:r.region,variant:r.variant,extension:r.extension,privateUse:r.privateUseA||r.privateUseB}},Fn=e=>Mn.test(e),Mn=/^((?<grandfathered>(en-GB-oed|i-ami|i-bnn|i-default|i-enochian|i-hak|i-klingon|i-lux|i-mingo|i-navajo|i-pwn|i-tao|i-tay|i-tsu|sgn-BE-FR|sgn-BE-NL|sgn-CH-DE)|(art-lojban|cel-gaulish|no-bok|no-nyn|zh-guoyu|zh-hakka|zh-min|zh-min-nan|zh-xiang))|((?<language>([A-Za-z]{2,3}(-(?<extlang>[A-Za-z]{3}(-[A-Za-z]{3}){0,2}))?)|[A-Za-z]{4}|[A-Za-z]{5,8})(-(?<script>[A-Za-z]{4}))?(-(?<region>[A-Za-z]{2}|[0-9]{3}))?(-(?<variant>[A-Za-z0-9]{5,8}|[0-9][A-Za-z0-9]{3}))*(-(?<extension>[0-9A-WY-Za-wy-z](-[A-Za-z0-9]{2,8})+))*(-(?<privateUseA>x(-[A-Za-z0-9]{1,8})+))?)|(?<privateUseB>x(-[A-Za-z0-9]{1,8})+))$/,Vn=(e,t)=>{const r=(e=>{const t=e.id;if("string"!==typeof t)throw new Error("No `id` on document");return t})(e);let n=e.service;if(!n)return;if("object"!==typeof n)return;Array.isArray(n)||(n=[n]);const i=n.find((e=>e.id===t.id||e.id==="".concat(r).concat(t.id)));return i&&i.type===t.type&&"string"===typeof i.serviceEndpoint?jn(i.serviceEndpoint):void 0},jn=e=>{let t;try{t=new URL(e)}catch{return}return["http:","https:"].includes(t.protocol)&&t.hostname?e:void 0},Gn=Kt.object({id:Kt.string(),type:Kt.string(),controller:Kt.string(),publicKeyMultibase:Kt.string().optional()}),qn=Kt.object({id:Kt.string(),type:Kt.string(),serviceEndpoint:Kt.union([Kt.string(),Kt.record(Kt.unknown())])}),Hn=Kt.object({id:Kt.string(),alsoKnownAs:Kt.array(Kt.string()).optional(),verificationMethod:Kt.array(Gn).optional(),service:Kt.array(qn).optional()}),Xn=d(y());function zn(e,t){try{A(t)}catch{return{success:!1,error:new Gi("".concat(e," must be a valid did"))}}return{success:!0,value:t}}function $n(e,t){try{R(t)}catch{return{success:!1,error:new Gi("".concat(e," must be a valid handle"))}}return{success:!0,value:t}}function Wn(e,t,r,n){switch(r.type){case"boolean":return Yn(e,t,r,n);case"integer":return Zn(e,t,r,n);case"string":return Qn(e,t,r,n);case"bytes":return Jn(e,t,r,n);case"cid-link":return ei(e,t,r,n);case"unknown":return ti(e,t,r,n);default:return{success:!1,error:new Gi("Unexpected lexicon type: ".concat(r.type))}}}function Yn(e,t,r,n){const i=typeof n;return"undefined"===i?"boolean"===typeof r.default?{success:!0,value:r.default}:{success:!1,error:new Gi("".concat(t," must be a boolean"))}:"boolean"!==i?{success:!1,error:new Gi("".concat(t," must be a boolean"))}:"boolean"===typeof r.const&&n!==r.const?{success:!1,error:new Gi("".concat(t," must be ").concat(r.const))}:{success:!0,value:n}}function Zn(e,t,r,n){return"undefined"===typeof n?"number"===typeof r.default?{success:!0,value:r.default}:{success:!1,error:new Gi("".concat(t," must be an integer"))}:Number.isInteger(n)?"number"===typeof r.const&&n!==r.const?{success:!1,error:new Gi("".concat(t," must be ").concat(r.const))}:Array.isArray(r.enum)&&!r.enum.includes(n)?{success:!1,error:new Gi("".concat(t," must be one of (").concat(r.enum.join("|"),")"))}:"number"===typeof r.maximum&&n>r.maximum?{success:!1,error:new Gi("".concat(t," can not be greater than ").concat(r.maximum))}:"number"===typeof r.minimum&&n<r.minimum?{success:!1,error:new Gi("".concat(t," can not be less than ").concat(r.minimum))}:{success:!0,value:n}:{success:!1,error:new Gi("".concat(t," must be an integer"))}}function Qn(e,t,r,n){if("undefined"===typeof n)return"string"===typeof r.default?{success:!0,value:r.default}:{success:!1,error:new Gi("".concat(t," must be a string"))};if("string"!==typeof n)return{success:!1,error:new Gi("".concat(t," must be a string"))};if("string"===typeof r.const&&n!==r.const)return{success:!1,error:new Gi("".concat(t," must be ").concat(r.const))};if(Array.isArray(r.enum)&&!r.enum.includes(n))return{success:!1,error:new Gi("".concat(t," must be one of (").concat(r.enum.join("|"),")"))};if("number"===typeof r.maxLength&&Nn(n)>r.maxLength)return{success:!1,error:new Gi("".concat(t," must not be longer than ").concat(r.maxLength," characters"))};if("number"===typeof r.minLength&&Nn(n)<r.minLength)return{success:!1,error:new Gi("".concat(t," must not be shorter than ").concat(r.minLength," characters"))};if("number"===typeof r.maxGraphemes&&On(n)>r.maxGraphemes)return{success:!1,error:new Gi("".concat(t," must not be longer than ").concat(r.maxGraphemes," graphemes"))};if("number"===typeof r.minGraphemes&&On(n)<r.minGraphemes)return{success:!1,error:new Gi("".concat(t," must not be shorter than ").concat(r.minGraphemes," graphemes"))};if("string"===typeof r.format)switch(r.format){case"datetime":return function(e,t){try{if(!(0,Xn.isValidISODateString)(t))throw new Error}catch{return{success:!1,error:new Gi("".concat(e," must be an valid atproto datetime (both RFC-3339 and ISO-8601)"))}}return{success:!0,value:t}}(t,n);case"uri":return function(e,t){return null!==t.match(/^\w+:(?:\/\/)?[^\s/][^\s]*$/)?{success:!0,value:t}:{success:!1,error:new Gi("".concat(e," must be a uri"))}}(t,n);case"at-uri":return function(e,t){try{x(t)}catch{return{success:!1,error:new Gi("".concat(e," must be a valid at-uri"))}}return{success:!0,value:t}}(t,n);case"did":return zn(t,n);case"handle":return $n(t,n);case"at-identifier":return function(e,t){if(!zn(e,t).success&&!$n(e,t).success)return{success:!1,error:new Gi("".concat(e," must be a valid did or a handle"))};return{success:!0,value:t}}(t,n);case"nsid":return function(e,t){try{C(t)}catch{return{success:!1,error:new Gi("".concat(e," must be a valid nsid"))}}return{success:!0,value:t}}(t,n);case"cid":return function(e,t){try{Pr.parse(t)}catch{return{success:!1,error:new Gi("".concat(e," must be a cid string"))}}return{success:!0,value:t}}(t,n);case"language":return function(e,t){return Fn(t)?{success:!0,value:t}:{success:!1,error:new Gi("".concat(e," must be a well-formed BCP 47 language tag"))}}(t,n)}return{success:!0,value:n}}function Jn(e,t,r,n){return n&&n instanceof Uint8Array?"number"===typeof r.maxLength&&n.byteLength>r.maxLength?{success:!1,error:new Gi("".concat(t," must not be larger than ").concat(r.maxLength," bytes"))}:"number"===typeof r.minLength&&n.byteLength<r.minLength?{success:!1,error:new Gi("".concat(t," must not be smaller than ").concat(r.minLength," bytes"))}:{success:!0,value:n}:{success:!1,error:new Gi("".concat(t," must be a byte array"))}}function ei(e,t,r,n){return null===Pr.asCID(n)?{success:!1,error:new Gi("".concat(t," must be a CID"))}:{success:!0,value:n}}function ti(e,t,r,n){return n&&"object"===typeof n?{success:!0,value:n}:{success:!1,error:new Gi("".concat(t," must be an object"))}}var ri=Kt.object({$type:Kt.literal("blob"),ref:Pn.cid,mimeType:Kt.string(),size:Kt.number()}).strict(),ni=Kt.object({cid:Kt.string(),mimeType:Kt.string()}).strict(),ii=Kt.union([ri,ni]),si=class{constructor(e,t,r,n){this.ref=e,this.mimeType=t,this.size=r,this.original=null!==n&&void 0!==n?n:{$type:"blob",ref:e,mimeType:t,size:r}}static asBlobRef(e){return Ft.is(e,ii)?si.fromJsonRef(e):null}static fromJsonRef(e){return Ft.is(e,ri)?new si(e.ref,e.mimeType,e.size):new si(Pr.parse(e.cid),e.mimeType,-1,e)}ipld(){return{$type:"blob",ref:this.ref,mimeType:this.mimeType,size:this.size}}toJSON(){return Bn(this.ipld())}};function ai(e,t,r,n){switch(r.type){case"boolean":return Yn(0,t,r,n);case"integer":return Zn(0,t,r,n);case"string":return Qn(0,t,r,n);case"bytes":return Jn(0,t,r,n);case"cid-link":return ei(0,t,0,n);case"unknown":return ti(0,t,0,n);case"object":return li(e,t,r,n);case"array":return oi(e,t,r,n);case"blob":return function(e,t,r,n){return n&&n instanceof si?{success:!0,value:n}:{success:!1,error:new Gi("".concat(t," should be a blob ref"))}}(0,t,0,n);default:return{success:!1,error:new Gi("Unexpected lexicon type: ".concat(r.type))}}}function oi(e,t,r,n){if(!Array.isArray(n))return{success:!1,error:new Gi("".concat(t," must be an array"))};if("number"===typeof r.maxLength&&n.length>r.maxLength)return{success:!1,error:new Gi("".concat(t," must not have more than ").concat(r.maxLength," elements"))};if("number"===typeof r.minLength&&n.length<r.minLength)return{success:!1,error:new Gi("".concat(t," must not have fewer than ").concat(r.minLength," elements"))};const i=r.items;for(let s=0;s<n.length;s++){const r=n[s],a=ui(e,"".concat(t,"/").concat(s),i,r);if(!a.success)return a}return{success:!0,value:n}}function li(e,t,r,n){if(!n||"object"!==typeof n)return{success:!1,error:new Gi("".concat(t," must be an object"))};const i=new Set(r.required),s=new Set(r.nullable);let a=n;if("object"===typeof r.properties)for(const o in r.properties){if(null===n[o]&&s.has(o))continue;const l=r.properties[o],c=ui(e,"".concat(t,"/").concat(o),l,n[o]),u=c.success?c.value:n[o],d="undefined"===typeof u;if(d&&i.has(o))return{success:!1,error:new Gi("".concat(t,' must have the property "').concat(o,'"'))};if(!d&&!c.success)return c;u!==n[o]&&(a===n&&(a={...n}),a[o]=u)}return{success:!0,value:a}}function ci(e,t){if(e.split("#").length>2)throw new Error("Uri can only have one hash segment");if(e.startsWith("lex:"))return e;if(e.startsWith("#")){if(!t)throw new Error("Unable to resolve uri without anchor: ".concat(e));return"".concat(t).concat(e)}return"lex:".concat(e)}function ui(e,t,r,n){let i,s,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("union"===r.type){if(!function(e){return ji.safeParse(e).success}(n))return{success:!1,error:new Gi("".concat(t,' must be an object which includes the "$type" property'))};if(!hi(r.refs,n.$type))return r.closed?{success:!1,error:new Gi("".concat(t," $type must be one of ").concat(r.refs.join(", ")))}:{success:!0,value:n};s=fi(e,{type:"ref",ref:n.$type})}else s=fi(e,r);for(const l of s){var o;const r=a?li(e,t,l,n):ai(e,t,l,n);if(r.success)return r;null!==(o=i)&&void 0!==o||(i=r.error)}return s.length>1?{success:!1,error:new Gi("".concat(t," did not match any of the expected definitions"))}:{success:!1,error:i}}function di(e,t,r,n){const i=ui(e,t,r,n,arguments.length>4&&void 0!==arguments[4]&&arguments[4]);if(!i.success)throw i.error;return i.value}function fi(e,t){return"ref"===t.type?[e.getDefOrThrow(t.ref)]:"union"===t.type?t.refs.map((t=>e.getDefOrThrow(t))).flat():[t]}function pi(e,t){if(void 0!==e.required)if(Array.isArray(e.required))if(void 0!==e.properties)for(const r of e.required)void 0===e.properties[r]&&t.addIssue({code:Kt.ZodIssueCode.custom,message:'Required field "'.concat(r,'" not defined')});else e.required.length>0&&t.addIssue({code:Kt.ZodIssueCode.custom,message:"Required fields defined but no properties defined"});else t.addIssue({code:Kt.ZodIssueCode.invalid_type,received:typeof e.required,expected:"array"})}var hi=(e,t)=>{const r=ci(t);return!!e.includes(r)||(r.endsWith("#main")?e.includes(r.replace("#main","")):e.includes(r+"#main"))},mi=Kt.object({type:Kt.literal("boolean"),description:Kt.string().optional(),default:Kt.boolean().optional(),const:Kt.boolean().optional()}).strict(),gi=Kt.object({type:Kt.literal("integer"),description:Kt.string().optional(),default:Kt.number().int().optional(),minimum:Kt.number().int().optional(),maximum:Kt.number().int().optional(),enum:Kt.number().int().array().optional(),const:Kt.number().int().optional()}).strict(),yi=Kt.enum(["datetime","uri","at-uri","did","handle","at-identifier","nsid","cid","language"]),vi=Kt.object({type:Kt.literal("string"),format:yi.optional(),description:Kt.string().optional(),default:Kt.string().optional(),minLength:Kt.number().int().optional(),maxLength:Kt.number().int().optional(),minGraphemes:Kt.number().int().optional(),maxGraphemes:Kt.number().int().optional(),enum:Kt.string().array().optional(),const:Kt.string().optional(),knownValues:Kt.string().array().optional()}).strict(),Ei=Kt.object({type:Kt.literal("unknown"),description:Kt.string().optional()}).strict(),bi=Kt.discriminatedUnion("type",[mi,gi,vi,Ei]),Ti=Kt.object({type:Kt.literal("bytes"),description:Kt.string().optional(),maxLength:Kt.number().optional(),minLength:Kt.number().optional()}).strict(),Ri=Kt.object({type:Kt.literal("cid-link"),description:Kt.string().optional()}).strict(),Si=Kt.discriminatedUnion("type",[Ti,Ri]),Ai=Kt.object({type:Kt.literal("ref"),description:Kt.string().optional(),ref:Kt.string()}).strict(),Li=Kt.object({type:Kt.literal("union"),description:Kt.string().optional(),refs:Kt.string().array(),closed:Kt.boolean().optional()}).strict(),wi=Kt.discriminatedUnion("type",[Ai,Li]),Ci=Kt.object({type:Kt.literal("blob"),description:Kt.string().optional(),accept:Kt.string().array().optional(),maxSize:Kt.number().optional()}).strict(),ki=Kt.object({type:Kt.literal("array"),description:Kt.string().optional(),items:Kt.union([bi,Si,Ci,wi]),minLength:Kt.number().int().optional(),maxLength:Kt.number().int().optional()}).strict(),xi=ki.merge(Kt.object({items:bi}).strict()),_i=Kt.object({type:Kt.literal("token"),description:Kt.string().optional()}).strict(),Di=Kt.object({type:Kt.literal("object"),description:Kt.string().optional(),required:Kt.string().array().optional(),nullable:Kt.string().array().optional(),properties:Kt.record(Kt.union([wi,Si,ki,Ci,bi]))}).strict().superRefine(pi),Ii=Kt.object({type:Kt.literal("params"),description:Kt.string().optional(),required:Kt.string().array().optional(),properties:Kt.record(Kt.union([bi,xi]))}).strict().superRefine(pi),Bi=Kt.object({description:Kt.string().optional(),encoding:Kt.string(),schema:Kt.union([wi,Di]).optional()}).strict(),Pi=Kt.object({description:Kt.string().optional(),schema:Kt.union([wi,Di]).optional()}).strict(),Ui=Kt.object({name:Kt.string(),description:Kt.string().optional()}).strict(),Ni=Kt.object({type:Kt.literal("query"),description:Kt.string().optional(),parameters:Ii.optional(),output:Bi.optional(),errors:Ui.array().optional()}).strict(),Oi=Kt.object({type:Kt.literal("procedure"),description:Kt.string().optional(),parameters:Ii.optional(),input:Bi.optional(),output:Bi.optional(),errors:Ui.array().optional()}).strict(),Ki=Kt.object({type:Kt.literal("subscription"),description:Kt.string().optional(),parameters:Ii.optional(),message:Pi.optional(),errors:Ui.array().optional()}).strict(),Fi=Kt.object({type:Kt.literal("record"),description:Kt.string().optional(),key:Kt.string().optional(),record:Di}).strict(),Mi=Kt.custom((e=>{if(e&&"object"===typeof e&&void 0!==e.type)switch(e.type){case"record":return Fi.parse(e);case"query":return Ni.parse(e);case"procedure":return Oi.parse(e);case"subscription":return Ki.parse(e);case"blob":return Ci.parse(e);case"array":return ki.parse(e);case"token":return _i.parse(e);case"object":return Di.parse(e);case"boolean":return mi.parse(e);case"integer":return gi.parse(e);case"string":return vi.parse(e);case"bytes":return Ti.parse(e);case"cid-link":return Ri.parse(e);case"unknown":return Ei.parse(e)}}),(e=>e&&"object"===typeof e?void 0===e.type?{message:"Must have a type",fatal:!0}:{message:"Invalid type: ".concat(e.type," must be one of: record, query, procedure, subscription, blob, array, token, object, boolean, integer, string, bytes, cid-link, unknown"),fatal:!0}:{message:"Must be an object",fatal:!0}));Kt.object({lexicon:Kt.literal(1),id:Kt.string().refine((e=>w.isValid(e)),{message:"Must be a valid NSID"}),revision:Kt.number().optional(),description:Kt.string().optional(),defs:Kt.record(Mi)}).strict().superRefine(((e,t)=>{for(const r in e.defs){const n=e.defs[r];"main"===r||"record"!==n.type&&"procedure"!==n.type&&"query"!==n.type&&"subscription"!==n.type||t.addIssue({code:Kt.ZodIssueCode.custom,message:"Records, procedures, queries, and subscriptions must be the main definition."})}}));function Vi(e){return null!==e&&"object"===typeof e}var ji=Kt.object({$type:Kt.string()});var Gi=class extends Error{},qi=class extends Error{},Hi=class extends Error{};function Xi(e,t,r){if(t.parameters){const n=function(e,t,r,n){var i;const s=n&&"object"===typeof n?n:{},a=new Set(null!==(i=r.required)&&void 0!==i?i:[]);let o=s;if("object"===typeof r.properties)for(const l in r.properties){const n=r.properties[l],i="array"===n.type?oi(e,l,n,s[l]):Wn(e,l,n,s[l]),c=i.success?i.value:s[l],u="undefined"===typeof c;if(u&&a.has(l))return{success:!1,error:new Gi("".concat(t,' must have the property "').concat(l,'"'))};if(!u&&!i.success)return i;c!==s[l]&&(o===s&&(o={...s}),o[l]=c)}return{success:!0,value:o}}(e,"Params",t.parameters,r);if(!n.success)throw n.error;return n.value}}var zi=class{constructor(e){if(this.docs=new Map,this.defs=new Map,null!==e&&void 0!==e&&e.length)for(const t of e)this.add(t)}add(e){const t=ci(e.id);if(this.docs.has(t))throw new Error("".concat(t," has already been registered"));Wi(e,t),this.docs.set(t,e);for(const[r,n]of $i(e))this.defs.set(r,n)}remove(e){e=ci(e);const t=this.docs.get(e);if(!t)throw new Error('Unable to remove "'.concat(e,'": does not exist'));for(const[r,n]of $i(t))this.defs.delete(r);this.docs.delete(e)}get(e){return e=ci(e),this.docs.get(e)}getDef(e){return e=ci(e),this.defs.get(e)}getDefOrThrow(e,t){const r=this.getDef(e);if(!r)throw new Hi("Lexicon not found: ".concat(e));if(t&&!t.includes(r.type))throw new qi("Not a ".concat(t.join(" or ")," lexicon: ").concat(e));return r}validate(e,t){e=ci(e);const r=this.getDefOrThrow(e,["record","object"]);if(!Vi(t))throw new Gi("Value must be an object");if("record"===r.type)return li(this,"Record",r.record,t);if("object"===r.type)return li(this,"Object",r,t);throw new qi("Definition must be a record or object")}assertValidRecord(e,t){e=ci(e);const r=this.getDefOrThrow(e,["record"]);if(!Vi(t))throw new Gi("Record must be an object");if(!("$type"in t)||"string"!==typeof t.$type)throw new Gi("Record/$type must be a string");const n=t.$type||"";if(ci(n)!==e)throw new Gi("Invalid $type: must be ".concat(e,", got ").concat(n));return function(e,t,r){const n=li(e,"Record",t.record,r);if(!n.success)throw n.error;return n.value}(this,r,t)}assertValidXrpcParams(e,t){e=ci(e);return Xi(this,this.getDefOrThrow(e,["query","procedure","subscription"]),t)}assertValidXrpcInput(e,t){e=ci(e);return function(e,t,r){var n;if(null!==(n=t.input)&&void 0!==n&&n.schema)return di(e,"Input",t.input.schema,r,!0)}(this,this.getDefOrThrow(e,["procedure"]),t)}assertValidXrpcOutput(e,t){e=ci(e);return function(e,t,r){var n;if(null!==(n=t.output)&&void 0!==n&&n.schema)return di(e,"Output",t.output.schema,r,!0)}(this,this.getDefOrThrow(e,["query","procedure"]),t)}assertValidXrpcMessage(e,t){e=ci(e);return function(e,t,r){var n;if(null!==(n=t.message)&&void 0!==n&&n.schema)return di(e,"Message",t.message.schema,r,!0)}(this,this.getDefOrThrow(e,["subscription"]),t)}resolveLexUri(e,t){return e=ci(e),ci(t,e)}};function*$i(e){for(const t in e.defs)yield["lex:".concat(e.id,"#").concat(t),e.defs[t]],"main"===t&&(yield["lex:".concat(e.id),e.defs[t]])}function Wi(e,t){for(const r in e)"ref"===e.type?e.ref=ci(e.ref,t):"union"===e.type?e.refs=e.refs.map((e=>ci(e,t))):Array.isArray(e[r])?e[r]=e[r].map((e=>"string"===typeof e?e.startsWith("#")?ci(e,t):e:e&&"object"===typeof e?Wi(e,t):e)):e[r]&&"object"===typeof e[r]&&(e[r]=Wi(e[r],t));return e}var Yi=e=>{if(Array.isArray(e))return e.map((e=>Yi(e)));if(e&&"object"===typeof e){if(e instanceof si)return e.original;if(Pr.asCID(e)||e instanceof Uint8Array)return e;const t={};for(const r of Object.keys(e))t[r]=Yi(e[r]);return t}return e},Zi=e=>{if(Array.isArray(e))return e.map((e=>Zi(e)));if(e&&"object"===typeof e){if(("blob"===e.$type||"string"===typeof e.cid&&"string"===typeof e.mimeType)&&Ft.is(e,ii))return si.fromJsonRef(e);if(Pr.asCID(e)||e instanceof Uint8Array)return e;const t={};for(const r of Object.keys(e))t[r]=Zi(e[r]);return t}return e},Qi=e=>Bn(Yi(e)),Ji=e=>JSON.stringify(Qi(e)),es=e=>Zi(In(e)),ts=e=>es(JSON.parse(e)),rs=Kt.object({error:Kt.string().optional(),message:Kt.string().optional()}),ns=(e=>(e[e.Unknown=1]="Unknown",e[e.InvalidResponse=2]="InvalidResponse",e[e.Success=200]="Success",e[e.InvalidRequest=400]="InvalidRequest",e[e.AuthRequired=401]="AuthRequired",e[e.Forbidden=403]="Forbidden",e[e.XRPCNotSupported=404]="XRPCNotSupported",e[e.PayloadTooLarge=413]="PayloadTooLarge",e[e.RateLimitExceeded=429]="RateLimitExceeded",e[e.InternalServerError=500]="InternalServerError",e[e.MethodNotImplemented=501]="MethodNotImplemented",e[e.UpstreamFailure=502]="UpstreamFailure",e[e.NotEnoughResources=503]="NotEnoughResources",e[e.UpstreamTimeout=504]="UpstreamTimeout",e))(ns||{}),is={2:"InvalidResponse",200:"Success",400:"InvalidRequest",401:"AuthenticationRequired",403:"Forbidden",404:"XRPCNotSupported",413:"PayloadTooLarge",429:"RateLimitExceeded",500:"InternalServerError",501:"MethodNotImplemented",502:"UpstreamFailure",503:"NotEnoughResources",504:"UpstreamTimeout"},ss={2:"Invalid Response",200:"Success",400:"Invalid Request",401:"Authentication Required",403:"Forbidden",404:"XRPC Not Supported",413:"Payload Too Large",429:"Rate Limit Exceeded",500:"Internal Server Error",501:"Method Not Implemented",502:"Upstream Failure",503:"Not Enough Resources",504:"Upstream Timeout"},as=class{constructor(e,t){this.data=e,this.headers=t,this.success=!0}},os=class extends Error{constructor(e,t,r,n){super(r||t||ss[e]),this.status=e,this.error=t,this.success=!1,this.error||(this.error=is[e]),this.headers=n}},ls=class extends os{constructor(e,t,r){super(2,ss[2],"The server gave an invalid response and may be out of date."),this.lexiconNsid=e,this.validationError=t,this.responseBody=r}};function cs(e,t){if("string"===e||"unknown"===e)return String(t);if("float"===e)return String(Number(t));if("integer"===e)return String(0|Number(t));if("boolean"===e)return t?"true":"false";if("datetime"===e)return t instanceof Date?t.toISOString():String(t);throw new Error("Unsupported query param type: ".concat(e))}function us(e,t){if(e["content-type"]&&"undefined"!==typeof t)return t instanceof ArrayBuffer?t:e["content-type"].startsWith("text/")?(new TextEncoder).encode(t.toString()):e["content-type"].startsWith("application/json")?(new TextEncoder).encode(Ji(t)):t}function ds(e,t){if(e){if(e.includes("application/json")&&null!==t&&void 0!==t&&t.byteLength)try{const e=(new TextDecoder).decode(t);return ts(e)}catch(r){throw new os(2,"Failed to parse response body: ".concat(String(r)))}if(e.startsWith("text/")&&null!==t&&void 0!==t&&t.byteLength)try{return(new TextDecoder).decode(t)}catch(r){throw new os(2,"Failed to parse response body: ".concat(String(r)))}}return t instanceof ArrayBuffer?new Uint8Array(t):t}var fs=class{constructor(){this.fetch=hs,this.lex=new zi}async call(e,t,r,n,i){return this.service(e).call(t,r,n,i)}service(e){return new ps(this,e)}addLexicon(e){this.lex.add(e)}addLexicons(e){for(const t of e)this.addLexicon(t)}removeLexicon(e){this.lex.remove(e)}},ps=class{constructor(e,t){this.headers={},this.baseClient=e,this.uri="string"===typeof t?new URL(t):t}setHeader(e,t){this.headers[e]=t}unsetHeader(e){delete this.headers[e]}async call(e,t,r,n){const i=this.baseClient.lex.getDefOrThrow(e);if(!i||"query"!==i.type&&"procedure"!==i.type)throw new Error("Invalid lexicon: ".concat(e,". Must be a query or procedure."));const s="procedure"===i.type?"post":"get";const a=function(e,t,r,n){const i=new URL(r);if(i.pathname="/xrpc/".concat(e),n)for(const[a,o]of Object.entries(n)){var s;const e=null===(s=t.parameters)||void 0===s||null===(s=s.properties)||void 0===s?void 0:s[a];if(!e)throw new Error("Invalid query parameter: ".concat(a));void 0!==o&&("array"===e.type?[].concat(o).forEach((t=>{i.searchParams.append(a,cs(e.items.type,t))})):i.searchParams.set(a,cs(e.type,o)))}return i.toString()}(e,i,this.uri,t),o=function(e,t,r){const n=(null===r||void 0===r?void 0:r.headers)||{};return"procedure"===e.type&&(null!==r&&void 0!==r&&r.encoding&&(n["Content-Type"]=r.encoding),t&&"object"===typeof t&&(n["Content-Type"]||(n["Content-Type"]="application/json"))),n}(i,r,{headers:{...this.headers,...null===n||void 0===n?void 0:n.headers},encoding:null===n||void 0===n?void 0:n.encoding}),l=await this.baseClient.fetch(a,s,o,r),c=function(e){let t;return t=e in ns?e:e>=100&&e<200?404:e>=200&&e<300?200:e>=300&&e<400?404:e>=400&&e<500?400:500,t}(l.status);if(200===c){try{this.baseClient.lex.assertValidXrpcOutput(e,l.body)}catch(d){throw d instanceof Gi?new ls(e,d,l.body):d}return new as(l.body,l.headers)}throw l.body&&(u=l.body,rs.safeParse(u).success)?new os(c,l.body.error,l.body.message,l.headers):new os(c);var u}};async function hs(e,t,r,n){try{const i=function(e){const t={};for(const[r,n]of Object.entries(e))t[r.toLowerCase()]=n;return t}(r),s={method:t,headers:i,body:us(i,n),duplex:"half"},a=await fetch(e,s),o=await a.arrayBuffer();return{status:a.status,headers:Object.fromEntries(a.headers.entries()),body:ds(a.headers.get("content-type"),o)}}catch(i){throw new os(1,String(i))}}new fs;var ms=Object.values({ComAtprotoAdminCreateCommunicationTemplate:{lexicon:1,id:"com.atproto.admin.createCommunicationTemplate",defs:{main:{type:"procedure",description:"Administrative action to create a new, re-usable communication (email for now) template.",input:{encoding:"application/json",schema:{type:"object",required:["subject","contentMarkdown","name"],properties:{name:{type:"string",description:"Name of the template."},contentMarkdown:{type:"string",description:"Content of the template, markdown supported, can contain variable placeholders."},subject:{type:"string",description:"Subject of the message, used in emails."},createdBy:{type:"string",format:"did",description:"DID of the user who is creating the template."}}}},output:{encoding:"application/json",schema:{type:"ref",ref:"lex:com.atproto.admin.defs#communicationTemplateView"}}}}},ComAtprotoAdminDefs:{lexicon:1,id:"com.atproto.admin.defs",defs:{statusAttr:{type:"object",required:["applied"],properties:{applied:{type:"boolean"},ref:{type:"string"}}},modEventView:{type:"object",required:["id","event","subject","subjectBlobCids","createdBy","createdAt"],properties:{id:{type:"integer"},event:{type:"union",refs:["lex:com.atproto.admin.defs#modEventTakedown","lex:com.atproto.admin.defs#modEventReverseTakedown","lex:com.atproto.admin.defs#modEventComment","lex:com.atproto.admin.defs#modEventReport","lex:com.atproto.admin.defs#modEventLabel","lex:com.atproto.admin.defs#modEventAcknowledge","lex:com.atproto.admin.defs#modEventEscalate","lex:com.atproto.admin.defs#modEventMute","lex:com.atproto.admin.defs#modEventEmail","lex:com.atproto.admin.defs#modEventResolveAppeal"]},subject:{type:"union",refs:["lex:com.atproto.admin.defs#repoRef","lex:com.atproto.repo.strongRef"]},subjectBlobCids:{type:"array",items:{type:"string"}},createdBy:{type:"string",format:"did"},createdAt:{type:"string",format:"datetime"},creatorHandle:{type:"string"},subjectHandle:{type:"string"}}},modEventViewDetail:{type:"object",required:["id","event","subject","subjectBlobs","createdBy","createdAt"],properties:{id:{type:"integer"},event:{type:"union",refs:["lex:com.atproto.admin.defs#modEventTakedown","lex:com.atproto.admin.defs#modEventReverseTakedown","lex:com.atproto.admin.defs#modEventComment","lex:com.atproto.admin.defs#modEventReport","lex:com.atproto.admin.defs#modEventLabel","lex:com.atproto.admin.defs#modEventAcknowledge","lex:com.atproto.admin.defs#modEventEscalate","lex:com.atproto.admin.defs#modEventMute","lex:com.atproto.admin.defs#modEventEmail","lex:com.atproto.admin.defs#modEventResolveAppeal"]},subject:{type:"union",refs:["lex:com.atproto.admin.defs#repoView","lex:com.atproto.admin.defs#repoViewNotFound","lex:com.atproto.admin.defs#recordView","lex:com.atproto.admin.defs#recordViewNotFound"]},subjectBlobs:{type:"array",items:{type:"ref",ref:"lex:com.atproto.admin.defs#blobView"}},createdBy:{type:"string",format:"did"},createdAt:{type:"string",format:"datetime"}}},reportView:{type:"object",required:["id","reasonType","subject","reportedBy","createdAt","resolvedByActionIds"],properties:{id:{type:"integer"},reasonType:{type:"ref",ref:"lex:com.atproto.moderation.defs#reasonType"},comment:{type:"string"},subjectRepoHandle:{type:"string"},subject:{type:"union",refs:["lex:com.atproto.admin.defs#repoRef","lex:com.atproto.repo.strongRef"]},reportedBy:{type:"string",format:"did"},createdAt:{type:"string",format:"datetime"},resolvedByActionIds:{type:"array",items:{type:"integer"}}}},subjectStatusView:{type:"object",required:["id","subject","createdAt","updatedAt","reviewState"],properties:{id:{type:"integer"},subject:{type:"union",refs:["lex:com.atproto.admin.defs#repoRef","lex:com.atproto.repo.strongRef"]},subjectBlobCids:{type:"array",items:{type:"string",format:"cid"}},subjectRepoHandle:{type:"string"},updatedAt:{type:"string",format:"datetime",description:"Timestamp referencing when the last update was made to the moderation status of the subject"},createdAt:{type:"string",format:"datetime",description:"Timestamp referencing the first moderation status impacting event was emitted on the subject"},reviewState:{type:"ref",ref:"lex:com.atproto.admin.defs#subjectReviewState"},comment:{type:"string",description:"Sticky comment on the subject."},muteUntil:{type:"string",format:"datetime"},lastReviewedBy:{type:"string",format:"did"},lastReviewedAt:{type:"string",format:"datetime"},lastReportedAt:{type:"string",format:"datetime"},lastAppealedAt:{type:"string",format:"datetime",description:"Timestamp referencing when the author of the subject appealed a moderation action"},takendown:{type:"boolean"},appealed:{type:"boolean",description:"True indicates that the a previously taken moderator action was appealed against, by the author of the content. False indicates last appeal was resolved by moderators."},suspendUntil:{type:"string",format:"datetime"}}},reportViewDetail:{type:"object",required:["id","reasonType","subject","reportedBy","createdAt","resolvedByActions"],properties:{id:{type:"integer"},reasonType:{type:"ref",ref:"lex:com.atproto.moderation.defs#reasonType"},comment:{type:"string"},subject:{type:"union",refs:["lex:com.atproto.admin.defs#repoView","lex:com.atproto.admin.defs#repoViewNotFound","lex:com.atproto.admin.defs#recordView","lex:com.atproto.admin.defs#recordViewNotFound"]},subjectStatus:{type:"ref",ref:"lex:com.atproto.admin.defs#subjectStatusView"},reportedBy:{type:"string",format:"did"},createdAt:{type:"string",format:"datetime"},resolvedByActions:{type:"array",items:{type:"ref",ref:"lex:com.atproto.admin.defs#modEventView"}}}},repoView:{type:"object",required:["did","handle","relatedRecords","indexedAt","moderation"],properties:{did:{type:"string",format:"did"},handle:{type:"string",format:"handle"},email:{type:"string"},relatedRecords:{type:"array",items:{type:"unknown"}},indexedAt:{type:"string",format:"datetime"},moderation:{type:"ref",ref:"lex:com.atproto.admin.defs#moderation"},invitedBy:{type:"ref",ref:"lex:com.atproto.server.defs#inviteCode"},invitesDisabled:{type:"boolean"},inviteNote:{type:"string"}}},repoViewDetail:{type:"object",required:["did","handle","relatedRecords","indexedAt","moderation"],properties:{did:{type:"string",format:"did"},handle:{type:"string",format:"handle"},email:{type:"string"},relatedRecords:{type:"array",items:{type:"unknown"}},indexedAt:{type:"string",format:"datetime"},moderation:{type:"ref",ref:"lex:com.atproto.admin.defs#moderationDetail"},labels:{type:"array",items:{type:"ref",ref:"lex:com.atproto.label.defs#label"}},invitedBy:{type:"ref",ref:"lex:com.atproto.server.defs#inviteCode"},invites:{type:"array",items:{type:"ref",ref:"lex:com.atproto.server.defs#inviteCode"}},invitesDisabled:{type:"boolean"},inviteNote:{type:"string"},emailConfirmedAt:{type:"string",format:"datetime"}}},accountView:{type:"object",required:["did","handle","indexedAt"],properties:{did:{type:"string",format:"did"},handle:{type:"string",format:"handle"},email:{type:"string"},relatedRecords:{type:"array",items:{type:"unknown"}},indexedAt:{type:"string",format:"datetime"},invitedBy:{type:"ref",ref:"lex:com.atproto.server.defs#inviteCode"},invites:{type:"array",items:{type:"ref",ref:"lex:com.atproto.server.defs#inviteCode"}},invitesDisabled:{type:"boolean"},emailConfirmedAt:{type:"string",format:"datetime"},inviteNote:{type:"string"}}},repoViewNotFound:{type:"object",required:["did"],properties:{did:{type:"string",format:"did"}}},repoRef:{type:"object",required:["did"],properties:{did:{type:"string",format:"did"}}},repoBlobRef:{type:"object",required:["did","cid"],properties:{did:{type:"string",format:"did"},cid:{type:"string",format:"cid"},recordUri:{type:"string",format:"at-uri"}}},recordView:{type:"object",required:["uri","cid","value","blobCids","indexedAt","moderation","repo"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"},value:{type:"unknown"},blobCids:{type:"array",items:{type:"string",format:"cid"}},indexedAt:{type:"string",format:"datetime"},moderation:{type:"ref",ref:"lex:com.atproto.admin.defs#moderation"},repo:{type:"ref",ref:"lex:com.atproto.admin.defs#repoView"}}},recordViewDetail:{type:"object",required:["uri","cid","value","blobs","indexedAt","moderation","repo"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"},value:{type:"unknown"},blobs:{type:"array",items:{type:"ref",ref:"lex:com.atproto.admin.defs#blobView"}},labels:{type:"array",items:{type:"ref",ref:"lex:com.atproto.label.defs#label"}},indexedAt:{type:"string",format:"datetime"},moderation:{type:"ref",ref:"lex:com.atproto.admin.defs#moderationDetail"},repo:{type:"ref",ref:"lex:com.atproto.admin.defs#repoView"}}},recordViewNotFound:{type:"object",required:["uri"],properties:{uri:{type:"string",format:"at-uri"}}},moderation:{type:"object",properties:{subjectStatus:{type:"ref",ref:"lex:com.atproto.admin.defs#subjectStatusView"}}},moderationDetail:{type:"object",properties:{subjectStatus:{type:"ref",ref:"lex:com.atproto.admin.defs#subjectStatusView"}}},blobView:{type:"object",required:["cid","mimeType","size","createdAt"],properties:{cid:{type:"string",format:"cid"},mimeType:{type:"string"},size:{type:"integer"},createdAt:{type:"string",format:"datetime"},details:{type:"union",refs:["lex:com.atproto.admin.defs#imageDetails","lex:com.atproto.admin.defs#videoDetails"]},moderation:{type:"ref",ref:"lex:com.atproto.admin.defs#moderation"}}},imageDetails:{type:"object",required:["width","height"],properties:{width:{type:"integer"},height:{type:"integer"}}},videoDetails:{type:"object",required:["width","height","length"],properties:{width:{type:"integer"},height:{type:"integer"},length:{type:"integer"}}},subjectReviewState:{type:"string",knownValues:["lex:com.atproto.admin.defs#reviewOpen","lex:com.atproto.admin.defs#reviewEscalated","lex:com.atproto.admin.defs#reviewClosed"]},reviewOpen:{type:"token",description:"Moderator review status of a subject: Open. Indicates that the subject needs to be reviewed by a moderator"},reviewEscalated:{type:"token",description:"Moderator review status of a subject: Escalated. Indicates that the subject was escalated for review by a moderator"},reviewClosed:{type:"token",description:"Moderator review status of a subject: Closed. Indicates that the subject was already reviewed and resolved by a moderator"},modEventTakedown:{type:"object",description:"Take down a subject permanently or temporarily",properties:{comment:{type:"string"},durationInHours:{type:"integer",description:"Indicates how long the takedown should be in effect before automatically expiring."}}},modEventReverseTakedown:{type:"object",description:"Revert take down action on a subject",properties:{comment:{type:"string",description:"Describe reasoning behind the reversal."}}},modEventResolveAppeal:{type:"object",description:"Resolve appeal on a subject",properties:{comment:{type:"string",description:"Describe resolution."}}},modEventComment:{type:"object",description:"Add a comment to a subject",required:["comment"],properties:{comment:{type:"string"},sticky:{type:"boolean",description:"Make the comment persistent on the subject"}}},modEventReport:{type:"object",description:"Report a subject",required:["reportType"],properties:{comment:{type:"string"},reportType:{type:"ref",ref:"lex:com.atproto.moderation.defs#reasonType"}}},modEventLabel:{type:"object",description:"Apply/Negate labels on a subject",required:["createLabelVals","negateLabelVals"],properties:{comment:{type:"string"},createLabelVals:{type:"array",items:{type:"string"}},negateLabelVals:{type:"array",items:{type:"string"}}}},modEventAcknowledge:{type:"object",properties:{comment:{type:"string"}}},modEventEscalate:{type:"object",properties:{comment:{type:"string"}}},modEventMute:{type:"object",description:"Mute incoming reports on a subject",required:["durationInHours"],properties:{comment:{type:"string"},durationInHours:{type:"integer",description:"Indicates how long the subject should remain muted."}}},modEventUnmute:{type:"object",description:"Unmute action on a subject",properties:{comment:{type:"string",description:"Describe reasoning behind the reversal."}}},modEventEmail:{type:"object",description:"Keep a log of outgoing email to a user",required:["subjectLine"],properties:{subjectLine:{type:"string",description:"The subject line of the email sent to the user."},comment:{type:"string",description:"Additional comment about the outgoing comm."}}},communicationTemplateView:{type:"object",required:["id","name","contentMarkdown","disabled","lastUpdatedBy","createdAt","updatedAt"],properties:{id:{type:"string"},name:{type:"string",description:"Name of the template."},subject:{type:"string",description:"Content of the template, can contain markdown and variable placeholders."},contentMarkdown:{type:"string",description:"Subject of the message, used in emails."},disabled:{type:"boolean"},lastUpdatedBy:{type:"string",format:"did",description:"DID of the user who last updated the template."},createdAt:{type:"string",format:"datetime"},updatedAt:{type:"string",format:"datetime"}}}}},ComAtprotoAdminDeleteAccount:{lexicon:1,id:"com.atproto.admin.deleteAccount",defs:{main:{type:"procedure",description:"Delete a user account as an administrator.",input:{encoding:"application/json",schema:{type:"object",required:["did"],properties:{did:{type:"string",format:"did"}}}}}}},ComAtprotoAdminDeleteCommunicationTemplate:{lexicon:1,id:"com.atproto.admin.deleteCommunicationTemplate",defs:{main:{type:"procedure",description:"Delete a communication template.",input:{encoding:"application/json",schema:{type:"object",required:["id"],properties:{id:{type:"string"}}}}}}},ComAtprotoAdminDisableAccountInvites:{lexicon:1,id:"com.atproto.admin.disableAccountInvites",defs:{main:{type:"procedure",description:"Disable an account from receiving new invite codes, but does not invalidate existing codes.",input:{encoding:"application/json",schema:{type:"object",required:["account"],properties:{account:{type:"string",format:"did"},note:{type:"string",description:"Optional reason for disabled invites."}}}}}}},ComAtprotoAdminDisableInviteCodes:{lexicon:1,id:"com.atproto.admin.disableInviteCodes",defs:{main:{type:"procedure",description:"Disable some set of codes and/or all codes associated with a set of users.",input:{encoding:"application/json",schema:{type:"object",properties:{codes:{type:"array",items:{type:"string"}},accounts:{type:"array",items:{type:"string"}}}}}}}},ComAtprotoAdminEmitModerationEvent:{lexicon:1,id:"com.atproto.admin.emitModerationEvent",defs:{main:{type:"procedure",description:"Take a moderation action on an actor.",input:{encoding:"application/json",schema:{type:"object",required:["event","subject","createdBy"],properties:{event:{type:"union",refs:["lex:com.atproto.admin.defs#modEventTakedown","lex:com.atproto.admin.defs#modEventAcknowledge","lex:com.atproto.admin.defs#modEventEscalate","lex:com.atproto.admin.defs#modEventComment","lex:com.atproto.admin.defs#modEventLabel","lex:com.atproto.admin.defs#modEventReport","lex:com.atproto.admin.defs#modEventMute","lex:com.atproto.admin.defs#modEventReverseTakedown","lex:com.atproto.admin.defs#modEventUnmute","lex:com.atproto.admin.defs#modEventEmail"]},subject:{type:"union",refs:["lex:com.atproto.admin.defs#repoRef","lex:com.atproto.repo.strongRef"]},subjectBlobCids:{type:"array",items:{type:"string",format:"cid"}},createdBy:{type:"string",format:"did"}}}},output:{encoding:"application/json",schema:{type:"ref",ref:"lex:com.atproto.admin.defs#modEventView"}},errors:[{name:"SubjectHasAction"}]}}},ComAtprotoAdminEnableAccountInvites:{lexicon:1,id:"com.atproto.admin.enableAccountInvites",defs:{main:{type:"procedure",description:"Re-enable an account's ability to receive invite codes.",input:{encoding:"application/json",schema:{type:"object",required:["account"],properties:{account:{type:"string",format:"did"},note:{type:"string",description:"Optional reason for enabled invites."}}}}}}},ComAtprotoAdminGetAccountInfo:{lexicon:1,id:"com.atproto.admin.getAccountInfo",defs:{main:{type:"query",description:"Get details about an account.",parameters:{type:"params",required:["did"],properties:{did:{type:"string",format:"did"}}},output:{encoding:"application/json",schema:{type:"ref",ref:"lex:com.atproto.admin.defs#accountView"}}}}},ComAtprotoAdminGetAccountInfos:{lexicon:1,id:"com.atproto.admin.getAccountInfos",defs:{main:{type:"query",description:"Get details about some accounts.",parameters:{type:"params",required:["dids"],properties:{dids:{type:"array",items:{type:"string",format:"did"}}}},output:{encoding:"application/json",schema:{type:"object",required:["infos"],properties:{infos:{type:"array",items:{type:"ref",ref:"lex:com.atproto.admin.defs#accountView"}}}}}}}},ComAtprotoAdminGetInviteCodes:{lexicon:1,id:"com.atproto.admin.getInviteCodes",defs:{main:{type:"query",description:"Get an admin view of invite codes.",parameters:{type:"params",properties:{sort:{type:"string",knownValues:["recent","usage"],default:"recent"},limit:{type:"integer",minimum:1,maximum:500,default:100},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["codes"],properties:{cursor:{type:"string"},codes:{type:"array",items:{type:"ref",ref:"lex:com.atproto.server.defs#inviteCode"}}}}}}}},ComAtprotoAdminGetModerationEvent:{lexicon:1,id:"com.atproto.admin.getModerationEvent",defs:{main:{type:"query",description:"Get details about a moderation event.",parameters:{type:"params",required:["id"],properties:{id:{type:"integer"}}},output:{encoding:"application/json",schema:{type:"ref",ref:"lex:com.atproto.admin.defs#modEventViewDetail"}}}}},ComAtprotoAdminGetRecord:{lexicon:1,id:"com.atproto.admin.getRecord",defs:{main:{type:"query",description:"Get details about a record.",parameters:{type:"params",required:["uri"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"}}},output:{encoding:"application/json",schema:{type:"ref",ref:"lex:com.atproto.admin.defs#recordViewDetail"}},errors:[{name:"RecordNotFound"}]}}},ComAtprotoAdminGetRepo:{lexicon:1,id:"com.atproto.admin.getRepo",defs:{main:{type:"query",description:"Get details about a repository.",parameters:{type:"params",required:["did"],properties:{did:{type:"string",format:"did"}}},output:{encoding:"application/json",schema:{type:"ref",ref:"lex:com.atproto.admin.defs#repoViewDetail"}},errors:[{name:"RepoNotFound"}]}}},ComAtprotoAdminGetSubjectStatus:{lexicon:1,id:"com.atproto.admin.getSubjectStatus",defs:{main:{type:"query",description:"Get the service-specific admin status of a subject (account, record, or blob).",parameters:{type:"params",properties:{did:{type:"string",format:"did"},uri:{type:"string",format:"at-uri"},blob:{type:"string",format:"cid"}}},output:{encoding:"application/json",schema:{type:"object",required:["subject"],properties:{subject:{type:"union",refs:["lex:com.atproto.admin.defs#repoRef","lex:com.atproto.repo.strongRef","lex:com.atproto.admin.defs#repoBlobRef"]},takedown:{type:"ref",ref:"lex:com.atproto.admin.defs#statusAttr"}}}}}}},ComAtprotoAdminListCommunicationTemplates:{lexicon:1,id:"com.atproto.admin.listCommunicationTemplates",defs:{main:{type:"query",description:"Get list of all communication templates.",output:{encoding:"application/json",schema:{type:"object",required:["communicationTemplates"],properties:{communicationTemplates:{type:"array",items:{type:"ref",ref:"lex:com.atproto.admin.defs#communicationTemplateView"}}}}}}}},ComAtprotoAdminQueryModerationEvents:{lexicon:1,id:"com.atproto.admin.queryModerationEvents",defs:{main:{type:"query",description:"List moderation events related to a subject.",parameters:{type:"params",properties:{types:{type:"array",items:{type:"string"},description:"The types of events (fully qualified string in the format of com.atproto.admin#modEvent<name>) to filter by. If not specified, all events are returned."},createdBy:{type:"string",format:"did"},sortDirection:{type:"string",default:"desc",enum:["asc","desc"],description:"Sort direction for the events. Defaults to descending order of created at timestamp."},createdAfter:{type:"string",format:"datetime",description:"Retrieve events created after a given timestamp"},createdBefore:{type:"string",format:"datetime",description:"Retrieve events created before a given timestamp"},subject:{type:"string",format:"uri"},includeAllUserRecords:{type:"boolean",default:!1,description:"If true, events on all record types (posts, lists, profile etc.) owned by the did are returned"},limit:{type:"integer",minimum:1,maximum:100,default:50},hasComment:{type:"boolean",description:"If true, only events with comments are returned"},comment:{type:"string",description:"If specified, only events with comments containing the keyword are returned"},addedLabels:{type:"array",items:{type:"string"},description:"If specified, only events where all of these labels were added are returned"},removedLabels:{type:"array",items:{type:"string"},description:"If specified, only events where all of these labels were removed are returned"},reportTypes:{type:"array",items:{type:"string"}},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["events"],properties:{cursor:{type:"string"},events:{type:"array",items:{type:"ref",ref:"lex:com.atproto.admin.defs#modEventView"}}}}}}}},ComAtprotoAdminQueryModerationStatuses:{lexicon:1,id:"com.atproto.admin.queryModerationStatuses",defs:{main:{type:"query",description:"View moderation statuses of subjects (record or repo).",parameters:{type:"params",properties:{subject:{type:"string",format:"uri"},comment:{type:"string",description:"Search subjects by keyword from comments"},reportedAfter:{type:"string",format:"datetime",description:"Search subjects reported after a given timestamp"},reportedBefore:{type:"string",format:"datetime",description:"Search subjects reported before a given timestamp"},reviewedAfter:{type:"string",format:"datetime",description:"Search subjects reviewed after a given timestamp"},reviewedBefore:{type:"string",format:"datetime",description:"Search subjects reviewed before a given timestamp"},includeMuted:{type:"boolean",description:"By default, we don't include muted subjects in the results. Set this to true to include them."},reviewState:{type:"string",description:"Specify when fetching subjects in a certain state"},ignoreSubjects:{type:"array",items:{type:"string",format:"uri"}},lastReviewedBy:{type:"string",format:"did",description:"Get all subject statuses that were reviewed by a specific moderator"},sortField:{type:"string",default:"lastReportedAt",enum:["lastReviewedAt","lastReportedAt"]},sortDirection:{type:"string",default:"desc",enum:["asc","desc"]},takendown:{type:"boolean",description:"Get subjects that were taken down"},appealed:{type:"boolean",description:"Get subjects in unresolved appealed status"},limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["subjectStatuses"],properties:{cursor:{type:"string"},subjectStatuses:{type:"array",items:{type:"ref",ref:"lex:com.atproto.admin.defs#subjectStatusView"}}}}}}}},ComAtprotoAdminSearchRepos:{lexicon:1,id:"com.atproto.admin.searchRepos",defs:{main:{type:"query",description:"Find repositories based on a search term.",parameters:{type:"params",properties:{term:{type:"string",description:"DEPRECATED: use 'q' instead"},q:{type:"string"},limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["repos"],properties:{cursor:{type:"string"},repos:{type:"array",items:{type:"ref",ref:"lex:com.atproto.admin.defs#repoView"}}}}}}}},ComAtprotoAdminSendEmail:{lexicon:1,id:"com.atproto.admin.sendEmail",defs:{main:{type:"procedure",description:"Send email to a user's account email address.",input:{encoding:"application/json",schema:{type:"object",required:["recipientDid","content","senderDid"],properties:{recipientDid:{type:"string",format:"did"},content:{type:"string"},subject:{type:"string"},senderDid:{type:"string",format:"did"},comment:{type:"string",description:"Additional comment by the sender that won't be used in the email itself but helpful to provide more context for moderators/reviewers"}}}},output:{encoding:"application/json",schema:{type:"object",required:["sent"],properties:{sent:{type:"boolean"}}}}}}},ComAtprotoAdminUpdateAccountEmail:{lexicon:1,id:"com.atproto.admin.updateAccountEmail",defs:{main:{type:"procedure",description:"Administrative action to update an account's email.",input:{encoding:"application/json",schema:{type:"object",required:["account","email"],properties:{account:{type:"string",format:"at-identifier",description:"The handle or DID of the repo."},email:{type:"string"}}}}}}},ComAtprotoAdminUpdateAccountHandle:{lexicon:1,id:"com.atproto.admin.updateAccountHandle",defs:{main:{type:"procedure",description:"Administrative action to update an account's handle.",input:{encoding:"application/json",schema:{type:"object",required:["did","handle"],properties:{did:{type:"string",format:"did"},handle:{type:"string",format:"handle"}}}}}}},ComAtprotoAdminUpdateCommunicationTemplate:{lexicon:1,id:"com.atproto.admin.updateCommunicationTemplate",defs:{main:{type:"procedure",description:"Administrative action to update an existing communication template. Allows passing partial fields to patch specific fields only.",input:{encoding:"application/json",schema:{type:"object",required:["id"],properties:{id:{type:"string",description:"ID of the template to be updated."},name:{type:"string",description:"Name of the template."},contentMarkdown:{type:"string",description:"Content of the template, markdown supported, can contain variable placeholders."},subject:{type:"string",description:"Subject of the message, used in emails."},updatedBy:{type:"string",format:"did",description:"DID of the user who is updating the template."},disabled:{type:"boolean"}}}},output:{encoding:"application/json",schema:{type:"ref",ref:"lex:com.atproto.admin.defs#communicationTemplateView"}}}}},ComAtprotoAdminUpdateSubjectStatus:{lexicon:1,id:"com.atproto.admin.updateSubjectStatus",defs:{main:{type:"procedure",description:"Update the service-specific admin status of a subject (account, record, or blob).",input:{encoding:"application/json",schema:{type:"object",required:["subject"],properties:{subject:{type:"union",refs:["lex:com.atproto.admin.defs#repoRef","lex:com.atproto.repo.strongRef","lex:com.atproto.admin.defs#repoBlobRef"]},takedown:{type:"ref",ref:"lex:com.atproto.admin.defs#statusAttr"}}}},output:{encoding:"application/json",schema:{type:"object",required:["subject"],properties:{subject:{type:"union",refs:["lex:com.atproto.admin.defs#repoRef","lex:com.atproto.repo.strongRef","lex:com.atproto.admin.defs#repoBlobRef"]},takedown:{type:"ref",ref:"lex:com.atproto.admin.defs#statusAttr"}}}}}}},ComAtprotoIdentityResolveHandle:{lexicon:1,id:"com.atproto.identity.resolveHandle",defs:{main:{type:"query",description:"Provides the DID of a repo.",parameters:{type:"params",required:["handle"],properties:{handle:{type:"string",format:"handle",description:"The handle to resolve."}}},output:{encoding:"application/json",schema:{type:"object",required:["did"],properties:{did:{type:"string",format:"did"}}}}}}},ComAtprotoIdentityUpdateHandle:{lexicon:1,id:"com.atproto.identity.updateHandle",defs:{main:{type:"procedure",description:"Updates the handle of the account.",input:{encoding:"application/json",schema:{type:"object",required:["handle"],properties:{handle:{type:"string",format:"handle"}}}}}}},ComAtprotoLabelDefs:{lexicon:1,id:"com.atproto.label.defs",defs:{label:{type:"object",description:"Metadata tag on an atproto resource (eg, repo or record).",required:["src","uri","val","cts"],properties:{src:{type:"string",format:"did",description:"DID of the actor who created this label."},uri:{type:"string",format:"uri",description:"AT URI of the record, repository (account), or other resource that this label applies to."},cid:{type:"string",format:"cid",description:"Optionally, CID specifying the specific version of 'uri' resource this label applies to."},val:{type:"string",maxLength:128,description:"The short string name of the value or type of this label."},neg:{type:"boolean",description:"If true, this is a negation label, overwriting a previous label."},cts:{type:"string",format:"datetime",description:"Timestamp when this label was created."}}},selfLabels:{type:"object",description:"Metadata tags on an atproto record, published by the author within the record.",required:["values"],properties:{values:{type:"array",items:{type:"ref",ref:"lex:com.atproto.label.defs#selfLabel"},maxLength:10}}},selfLabel:{type:"object",description:"Metadata tag on an atproto record, published by the author within the record. Note that schemas should use #selfLabels, not #selfLabel.",required:["val"],properties:{val:{type:"string",maxLength:128,description:"The short string name of the value or type of this label."}}}}},ComAtprotoLabelQueryLabels:{lexicon:1,id:"com.atproto.label.queryLabels",defs:{main:{type:"query",description:"Find labels relevant to the provided URI patterns.",parameters:{type:"params",required:["uriPatterns"],properties:{uriPatterns:{type:"array",items:{type:"string"},description:"List of AT URI patterns to match (boolean 'OR'). Each may be a prefix (ending with '*'; will match inclusive of the string leading to '*'), or a full URI."},sources:{type:"array",items:{type:"string",format:"did"},description:"Optional list of label sources (DIDs) to filter on."},limit:{type:"integer",minimum:1,maximum:250,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["labels"],properties:{cursor:{type:"string"},labels:{type:"array",items:{type:"ref",ref:"lex:com.atproto.label.defs#label"}}}}}}}},ComAtprotoLabelSubscribeLabels:{lexicon:1,id:"com.atproto.label.subscribeLabels",defs:{main:{type:"subscription",description:"Subscribe to label updates.",parameters:{type:"params",properties:{cursor:{type:"integer",description:"The last known event to backfill from."}}},message:{schema:{type:"union",refs:["lex:com.atproto.label.subscribeLabels#labels","lex:com.atproto.label.subscribeLabels#info"]}},errors:[{name:"FutureCursor"}]},labels:{type:"object",required:["seq","labels"],properties:{seq:{type:"integer"},labels:{type:"array",items:{type:"ref",ref:"lex:com.atproto.label.defs#label"}}}},info:{type:"object",required:["name"],properties:{name:{type:"string",knownValues:["OutdatedCursor"]},message:{type:"string"}}}}},ComAtprotoModerationCreateReport:{lexicon:1,id:"com.atproto.moderation.createReport",defs:{main:{type:"procedure",description:"Report a repo or a record.",input:{encoding:"application/json",schema:{type:"object",required:["reasonType","subject"],properties:{reasonType:{type:"ref",ref:"lex:com.atproto.moderation.defs#reasonType"},reason:{type:"string"},subject:{type:"union",refs:["lex:com.atproto.admin.defs#repoRef","lex:com.atproto.repo.strongRef"]}}}},output:{encoding:"application/json",schema:{type:"object",required:["id","reasonType","subject","reportedBy","createdAt"],properties:{id:{type:"integer"},reasonType:{type:"ref",ref:"lex:com.atproto.moderation.defs#reasonType"},reason:{type:"string",maxGraphemes:2e3,maxLength:2e4},subject:{type:"union",refs:["lex:com.atproto.admin.defs#repoRef","lex:com.atproto.repo.strongRef"]},reportedBy:{type:"string",format:"did"},createdAt:{type:"string",format:"datetime"}}}}}}},ComAtprotoModerationDefs:{lexicon:1,id:"com.atproto.moderation.defs",defs:{reasonType:{type:"string",knownValues:["com.atproto.moderation.defs#reasonSpam","com.atproto.moderation.defs#reasonViolation","com.atproto.moderation.defs#reasonMisleading","com.atproto.moderation.defs#reasonSexual","com.atproto.moderation.defs#reasonRude","com.atproto.moderation.defs#reasonOther","com.atproto.moderation.defs#reasonAppeal"]},reasonSpam:{type:"token",description:"Spam: frequent unwanted promotion, replies, mentions"},reasonViolation:{type:"token",description:"Direct violation of server rules, laws, terms of service"},reasonMisleading:{type:"token",description:"Misleading identity, affiliation, or content"},reasonSexual:{type:"token",description:"Unwanted or mislabeled sexual content"},reasonRude:{type:"token",description:"Rude, harassing, explicit, or otherwise unwelcoming behavior"},reasonOther:{type:"token",description:"Other: reports not falling under another report category"},reasonAppeal:{type:"token",description:"Appeal: appeal a previously taken moderation action"}}},ComAtprotoRepoApplyWrites:{lexicon:1,id:"com.atproto.repo.applyWrites",defs:{main:{type:"procedure",description:"Apply a batch transaction of creates, updates, and deletes.",input:{encoding:"application/json",schema:{type:"object",required:["repo","writes"],properties:{repo:{type:"string",format:"at-identifier",description:"The handle or DID of the repo."},validate:{type:"boolean",default:!0,description:"Flag for validating the records."},writes:{type:"array",items:{type:"union",refs:["lex:com.atproto.repo.applyWrites#create","lex:com.atproto.repo.applyWrites#update","lex:com.atproto.repo.applyWrites#delete"],closed:!0}},swapCommit:{type:"string",format:"cid"}}}},errors:[{name:"InvalidSwap"}]},create:{type:"object",description:"Create a new record.",required:["collection","value"],properties:{collection:{type:"string",format:"nsid"},rkey:{type:"string",maxLength:15},value:{type:"unknown"}}},update:{type:"object",description:"Update an existing record.",required:["collection","rkey","value"],properties:{collection:{type:"string",format:"nsid"},rkey:{type:"string"},value:{type:"unknown"}}},delete:{type:"object",description:"Delete an existing record.",required:["collection","rkey"],properties:{collection:{type:"string",format:"nsid"},rkey:{type:"string"}}}}},ComAtprotoRepoCreateRecord:{lexicon:1,id:"com.atproto.repo.createRecord",defs:{main:{type:"procedure",description:"Create a new record.",input:{encoding:"application/json",schema:{type:"object",required:["repo","collection","record"],properties:{repo:{type:"string",format:"at-identifier",description:"The handle or DID of the repo."},collection:{type:"string",format:"nsid",description:"The NSID of the record collection."},rkey:{type:"string",description:"The key of the record.",maxLength:15},validate:{type:"boolean",default:!0,description:"Flag for validating the record."},record:{type:"unknown",description:"The record to create."},swapCommit:{type:"string",format:"cid",description:"Compare and swap with the previous commit by CID."}}}},output:{encoding:"application/json",schema:{type:"object",required:["uri","cid"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"}}}},errors:[{name:"InvalidSwap"}]}}},ComAtprotoRepoDeleteRecord:{lexicon:1,id:"com.atproto.repo.deleteRecord",defs:{main:{type:"procedure",description:"Delete a record, or ensure it doesn't exist.",input:{encoding:"application/json",schema:{type:"object",required:["repo","collection","rkey"],properties:{repo:{type:"string",format:"at-identifier",description:"The handle or DID of the repo."},collection:{type:"string",format:"nsid",description:"The NSID of the record collection."},rkey:{type:"string",description:"The key of the record."},swapRecord:{type:"string",format:"cid",description:"Compare and swap with the previous record by CID."},swapCommit:{type:"string",format:"cid",description:"Compare and swap with the previous commit by CID."}}}},errors:[{name:"InvalidSwap"}]}}},ComAtprotoRepoDescribeRepo:{lexicon:1,id:"com.atproto.repo.describeRepo",defs:{main:{type:"query",description:"Get information about the repo, including the list of collections.",parameters:{type:"params",required:["repo"],properties:{repo:{type:"string",format:"at-identifier",description:"The handle or DID of the repo."}}},output:{encoding:"application/json",schema:{type:"object",required:["handle","did","didDoc","collections","handleIsCorrect"],properties:{handle:{type:"string",format:"handle"},did:{type:"string",format:"did"},didDoc:{type:"unknown"},collections:{type:"array",items:{type:"string",format:"nsid"}},handleIsCorrect:{type:"boolean"}}}}}}},ComAtprotoRepoGetRecord:{lexicon:1,id:"com.atproto.repo.getRecord",defs:{main:{type:"query",description:"Get a record.",parameters:{type:"params",required:["repo","collection","rkey"],properties:{repo:{type:"string",format:"at-identifier",description:"The handle or DID of the repo."},collection:{type:"string",format:"nsid",description:"The NSID of the record collection."},rkey:{type:"string",description:"The key of the record."},cid:{type:"string",format:"cid",description:"The CID of the version of the record. If not specified, then return the most recent version."}}},output:{encoding:"application/json",schema:{type:"object",required:["uri","value"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"},value:{type:"unknown"}}}}}}},ComAtprotoRepoListRecords:{lexicon:1,id:"com.atproto.repo.listRecords",defs:{main:{type:"query",description:"List a range of records in a collection.",parameters:{type:"params",required:["repo","collection"],properties:{repo:{type:"string",format:"at-identifier",description:"The handle or DID of the repo."},collection:{type:"string",format:"nsid",description:"The NSID of the record type."},limit:{type:"integer",minimum:1,maximum:100,default:50,description:"The number of records to return."},cursor:{type:"string"},rkeyStart:{type:"string",description:"DEPRECATED: The lowest sort-ordered rkey to start from (exclusive)"},rkeyEnd:{type:"string",description:"DEPRECATED: The highest sort-ordered rkey to stop at (exclusive)"},reverse:{type:"boolean",description:"Flag to reverse the order of the returned records."}}},output:{encoding:"application/json",schema:{type:"object",required:["records"],properties:{cursor:{type:"string"},records:{type:"array",items:{type:"ref",ref:"lex:com.atproto.repo.listRecords#record"}}}}}},record:{type:"object",required:["uri","cid","value"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"},value:{type:"unknown"}}}}},ComAtprotoRepoPutRecord:{lexicon:1,id:"com.atproto.repo.putRecord",defs:{main:{type:"procedure",description:"Write a record, creating or updating it as needed.",input:{encoding:"application/json",schema:{type:"object",required:["repo","collection","rkey","record"],nullable:["swapRecord"],properties:{repo:{type:"string",format:"at-identifier",description:"The handle or DID of the repo."},collection:{type:"string",format:"nsid",description:"The NSID of the record collection."},rkey:{type:"string",description:"The key of the record.",maxLength:15},validate:{type:"boolean",default:!0,description:"Flag for validating the record."},record:{type:"unknown",description:"The record to write."},swapRecord:{type:"string",format:"cid",description:"Compare and swap with the previous record by CID."},swapCommit:{type:"string",format:"cid",description:"Compare and swap with the previous commit by CID."}}}},output:{encoding:"application/json",schema:{type:"object",required:["uri","cid"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"}}}},errors:[{name:"InvalidSwap"}]}}},ComAtprotoRepoStrongRef:{lexicon:1,id:"com.atproto.repo.strongRef",description:"A URI with a content-hash fingerprint.",defs:{main:{type:"object",required:["uri","cid"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"}}}}},ComAtprotoRepoUploadBlob:{lexicon:1,id:"com.atproto.repo.uploadBlob",defs:{main:{type:"procedure",description:"Upload a new blob to be added to repo in a later request.",input:{encoding:"*/*"},output:{encoding:"application/json",schema:{type:"object",required:["blob"],properties:{blob:{type:"blob"}}}}}}},ComAtprotoServerConfirmEmail:{lexicon:1,id:"com.atproto.server.confirmEmail",defs:{main:{type:"procedure",description:"Confirm an email using a token from com.atproto.server.requestEmailConfirmation.",input:{encoding:"application/json",schema:{type:"object",required:["email","token"],properties:{email:{type:"string"},token:{type:"string"}}}},errors:[{name:"AccountNotFound"},{name:"ExpiredToken"},{name:"InvalidToken"},{name:"InvalidEmail"}]}}},ComAtprotoServerCreateAccount:{lexicon:1,id:"com.atproto.server.createAccount",defs:{main:{type:"procedure",description:"Create an account.",input:{encoding:"application/json",schema:{type:"object",required:["handle"],properties:{email:{type:"string"},handle:{type:"string",format:"handle"},did:{type:"string",format:"did"},inviteCode:{type:"string"},verificationCode:{type:"string"},verificationPhone:{type:"string"},password:{type:"string"},recoveryKey:{type:"string"},plcOp:{type:"unknown"}}}},output:{encoding:"application/json",schema:{type:"object",required:["accessJwt","refreshJwt","handle","did"],properties:{accessJwt:{type:"string"},refreshJwt:{type:"string"},handle:{type:"string",format:"handle"},did:{type:"string",format:"did"},didDoc:{type:"unknown"}}}},errors:[{name:"InvalidHandle"},{name:"InvalidPassword"},{name:"InvalidInviteCode"},{name:"HandleNotAvailable"},{name:"UnsupportedDomain"},{name:"UnresolvableDid"},{name:"IncompatibleDidDoc"}]}}},ComAtprotoServerCreateAppPassword:{lexicon:1,id:"com.atproto.server.createAppPassword",defs:{main:{type:"procedure",description:"Create an App Password.",input:{encoding:"application/json",schema:{type:"object",required:["name"],properties:{name:{type:"string"}}}},output:{encoding:"application/json",schema:{type:"ref",ref:"lex:com.atproto.server.createAppPassword#appPassword"}},errors:[{name:"AccountTakedown"}]},appPassword:{type:"object",required:["name","password","createdAt"],properties:{name:{type:"string"},password:{type:"string"},createdAt:{type:"string",format:"datetime"}}}}},ComAtprotoServerCreateInviteCode:{lexicon:1,id:"com.atproto.server.createInviteCode",defs:{main:{type:"procedure",description:"Create an invite code.",input:{encoding:"application/json",schema:{type:"object",required:["useCount"],properties:{useCount:{type:"integer"},forAccount:{type:"string",format:"did"}}}},output:{encoding:"application/json",schema:{type:"object",required:["code"],properties:{code:{type:"string"}}}}}}},ComAtprotoServerCreateInviteCodes:{lexicon:1,id:"com.atproto.server.createInviteCodes",defs:{main:{type:"procedure",description:"Create invite codes.",input:{encoding:"application/json",schema:{type:"object",required:["codeCount","useCount"],properties:{codeCount:{type:"integer",default:1},useCount:{type:"integer"},forAccounts:{type:"array",items:{type:"string",format:"did"}}}}},output:{encoding:"application/json",schema:{type:"object",required:["codes"],properties:{codes:{type:"array",items:{type:"ref",ref:"lex:com.atproto.server.createInviteCodes#accountCodes"}}}}}},accountCodes:{type:"object",required:["account","codes"],properties:{account:{type:"string"},codes:{type:"array",items:{type:"string"}}}}}},ComAtprotoServerCreateSession:{lexicon:1,id:"com.atproto.server.createSession",defs:{main:{type:"procedure",description:"Create an authentication session.",input:{encoding:"application/json",schema:{type:"object",required:["identifier","password"],properties:{identifier:{type:"string",description:"Handle or other identifier supported by the server for the authenticating user."},password:{type:"string"}}}},output:{encoding:"application/json",schema:{type:"object",required:["accessJwt","refreshJwt","handle","did"],properties:{accessJwt:{type:"string"},refreshJwt:{type:"string"},handle:{type:"string",format:"handle"},did:{type:"string",format:"did"},didDoc:{type:"unknown"},email:{type:"string"},emailConfirmed:{type:"boolean"}}}},errors:[{name:"AccountTakedown"}]}}},ComAtprotoServerDefs:{lexicon:1,id:"com.atproto.server.defs",defs:{inviteCode:{type:"object",required:["code","available","disabled","forAccount","createdBy","createdAt","uses"],properties:{code:{type:"string"},available:{type:"integer"},disabled:{type:"boolean"},forAccount:{type:"string"},createdBy:{type:"string"},createdAt:{type:"string",format:"datetime"},uses:{type:"array",items:{type:"ref",ref:"lex:com.atproto.server.defs#inviteCodeUse"}}}},inviteCodeUse:{type:"object",required:["usedBy","usedAt"],properties:{usedBy:{type:"string",format:"did"},usedAt:{type:"string",format:"datetime"}}}}},ComAtprotoServerDeleteAccount:{lexicon:1,id:"com.atproto.server.deleteAccount",defs:{main:{type:"procedure",description:"Delete an actor's account with a token and password.",input:{encoding:"application/json",schema:{type:"object",required:["did","password","token"],properties:{did:{type:"string",format:"did"},password:{type:"string"},token:{type:"string"}}}},errors:[{name:"ExpiredToken"},{name:"InvalidToken"}]}}},ComAtprotoServerDeleteSession:{lexicon:1,id:"com.atproto.server.deleteSession",defs:{main:{type:"procedure",description:"Delete the current session."}}},ComAtprotoServerDescribeServer:{lexicon:1,id:"com.atproto.server.describeServer",defs:{main:{type:"query",description:"Get a document describing the service's accounts configuration.",output:{encoding:"application/json",schema:{type:"object",required:["availableUserDomains"],properties:{inviteCodeRequired:{type:"boolean"},phoneVerificationRequired:{type:"boolean"},availableUserDomains:{type:"array",items:{type:"string"}},links:{type:"ref",ref:"lex:com.atproto.server.describeServer#links"}}}}},links:{type:"object",properties:{privacyPolicy:{type:"string"},termsOfService:{type:"string"}}}}},ComAtprotoServerGetAccountInviteCodes:{lexicon:1,id:"com.atproto.server.getAccountInviteCodes",defs:{main:{type:"query",description:"Get all invite codes for a given account.",parameters:{type:"params",properties:{includeUsed:{type:"boolean",default:!0},createAvailable:{type:"boolean",default:!0}}},output:{encoding:"application/json",schema:{type:"object",required:["codes"],properties:{codes:{type:"array",items:{type:"ref",ref:"lex:com.atproto.server.defs#inviteCode"}}}}},errors:[{name:"DuplicateCreate"}]}}},ComAtprotoServerGetSession:{lexicon:1,id:"com.atproto.server.getSession",defs:{main:{type:"query",description:"Get information about the current session.",output:{encoding:"application/json",schema:{type:"object",required:["handle","did"],properties:{handle:{type:"string",format:"handle"},did:{type:"string",format:"did"},email:{type:"string"},emailConfirmed:{type:"boolean"},didDoc:{type:"unknown"}}}}}}},ComAtprotoServerListAppPasswords:{lexicon:1,id:"com.atproto.server.listAppPasswords",defs:{main:{type:"query",description:"List all App Passwords.",output:{encoding:"application/json",schema:{type:"object",required:["passwords"],properties:{passwords:{type:"array",items:{type:"ref",ref:"lex:com.atproto.server.listAppPasswords#appPassword"}}}}},errors:[{name:"AccountTakedown"}]},appPassword:{type:"object",required:["name","createdAt"],properties:{name:{type:"string"},createdAt:{type:"string",format:"datetime"}}}}},ComAtprotoServerRefreshSession:{lexicon:1,id:"com.atproto.server.refreshSession",defs:{main:{type:"procedure",description:"Refresh an authentication session.",output:{encoding:"application/json",schema:{type:"object",required:["accessJwt","refreshJwt","handle","did"],properties:{accessJwt:{type:"string"},refreshJwt:{type:"string"},handle:{type:"string",format:"handle"},did:{type:"string",format:"did"},didDoc:{type:"unknown"}}}},errors:[{name:"AccountTakedown"}]}}},ComAtprotoServerRequestAccountDelete:{lexicon:1,id:"com.atproto.server.requestAccountDelete",defs:{main:{type:"procedure",description:"Initiate a user account deletion via email."}}},ComAtprotoServerRequestEmailConfirmation:{lexicon:1,id:"com.atproto.server.requestEmailConfirmation",defs:{main:{type:"procedure",description:"Request an email with a code to confirm ownership of email."}}},ComAtprotoServerRequestEmailUpdate:{lexicon:1,id:"com.atproto.server.requestEmailUpdate",defs:{main:{type:"procedure",description:"Request a token in order to update email.",output:{encoding:"application/json",schema:{type:"object",required:["tokenRequired"],properties:{tokenRequired:{type:"boolean"}}}}}}},ComAtprotoServerRequestPasswordReset:{lexicon:1,id:"com.atproto.server.requestPasswordReset",defs:{main:{type:"procedure",description:"Initiate a user account password reset via email.",input:{encoding:"application/json",schema:{type:"object",required:["email"],properties:{email:{type:"string"}}}}}}},ComAtprotoServerReserveSigningKey:{lexicon:1,id:"com.atproto.server.reserveSigningKey",defs:{main:{type:"procedure",description:"Reserve a repo signing key for account creation.",input:{encoding:"application/json",schema:{type:"object",properties:{did:{type:"string",description:"The did to reserve a new did:key for"}}}},output:{encoding:"application/json",schema:{type:"object",required:["signingKey"],properties:{signingKey:{type:"string",description:"Public signing key in the form of a did:key."}}}}}}},ComAtprotoServerResetPassword:{lexicon:1,id:"com.atproto.server.resetPassword",defs:{main:{type:"procedure",description:"Reset a user account password using a token.",input:{encoding:"application/json",schema:{type:"object",required:["token","password"],properties:{token:{type:"string"},password:{type:"string"}}}},errors:[{name:"ExpiredToken"},{name:"InvalidToken"}]}}},ComAtprotoServerRevokeAppPassword:{lexicon:1,id:"com.atproto.server.revokeAppPassword",defs:{main:{type:"procedure",description:"Revoke an App Password by name.",input:{encoding:"application/json",schema:{type:"object",required:["name"],properties:{name:{type:"string"}}}}}}},ComAtprotoServerUpdateEmail:{lexicon:1,id:"com.atproto.server.updateEmail",defs:{main:{type:"procedure",description:"Update an account's email.",input:{encoding:"application/json",schema:{type:"object",required:["email"],properties:{email:{type:"string"},token:{type:"string",description:"Requires a token from com.atproto.sever.requestEmailUpdate if the account's email has been confirmed."}}}},errors:[{name:"ExpiredToken"},{name:"InvalidToken"},{name:"TokenRequired"}]}}},ComAtprotoSyncGetBlob:{lexicon:1,id:"com.atproto.sync.getBlob",defs:{main:{type:"query",description:"Get a blob associated with a given repo.",parameters:{type:"params",required:["did","cid"],properties:{did:{type:"string",format:"did",description:"The DID of the repo."},cid:{type:"string",format:"cid",description:"The CID of the blob to fetch"}}},output:{encoding:"*/*"}}}},ComAtprotoSyncGetBlocks:{lexicon:1,id:"com.atproto.sync.getBlocks",defs:{main:{type:"query",description:"Get blocks from a given repo.",parameters:{type:"params",required:["did","cids"],properties:{did:{type:"string",format:"did",description:"The DID of the repo."},cids:{type:"array",items:{type:"string",format:"cid"}}}},output:{encoding:"application/vnd.ipld.car"}}}},ComAtprotoSyncGetCheckout:{lexicon:1,id:"com.atproto.sync.getCheckout",defs:{main:{type:"query",description:"DEPRECATED - please use com.atproto.sync.getRepo instead",parameters:{type:"params",required:["did"],properties:{did:{type:"string",format:"did",description:"The DID of the repo."}}},output:{encoding:"application/vnd.ipld.car"}}}},ComAtprotoSyncGetHead:{lexicon:1,id:"com.atproto.sync.getHead",defs:{main:{type:"query",description:"DEPRECATED - please use com.atproto.sync.getLatestCommit instead",parameters:{type:"params",required:["did"],properties:{did:{type:"string",format:"did",description:"The DID of the repo."}}},output:{encoding:"application/json",schema:{type:"object",required:["root"],properties:{root:{type:"string",format:"cid"}}}},errors:[{name:"HeadNotFound"}]}}},ComAtprotoSyncGetLatestCommit:{lexicon:1,id:"com.atproto.sync.getLatestCommit",defs:{main:{type:"query",description:"Get the current commit CID & revision of the repo.",parameters:{type:"params",required:["did"],properties:{did:{type:"string",format:"did",description:"The DID of the repo."}}},output:{encoding:"application/json",schema:{type:"object",required:["cid","rev"],properties:{cid:{type:"string",format:"cid"},rev:{type:"string"}}}},errors:[{name:"RepoNotFound"}]}}},ComAtprotoSyncGetRecord:{lexicon:1,id:"com.atproto.sync.getRecord",defs:{main:{type:"query",description:"Get blocks needed for existence or non-existence of record.",parameters:{type:"params",required:["did","collection","rkey"],properties:{did:{type:"string",format:"did",description:"The DID of the repo."},collection:{type:"string",format:"nsid"},rkey:{type:"string"},commit:{type:"string",format:"cid",description:"An optional past commit CID."}}},output:{encoding:"application/vnd.ipld.car"}}}},ComAtprotoSyncGetRepo:{lexicon:1,id:"com.atproto.sync.getRepo",defs:{main:{type:"query",description:"Gets the DID's repo, optionally catching up from a specific revision.",parameters:{type:"params",required:["did"],properties:{did:{type:"string",format:"did",description:"The DID of the repo."},since:{type:"string",description:"The revision of the repo to catch up from."}}},output:{encoding:"application/vnd.ipld.car"}}}},ComAtprotoSyncListBlobs:{lexicon:1,id:"com.atproto.sync.listBlobs",defs:{main:{type:"query",description:"List blob CIDs since some revision.",parameters:{type:"params",required:["did"],properties:{did:{type:"string",format:"did",description:"The DID of the repo."},since:{type:"string",description:"Optional revision of the repo to list blobs since."},limit:{type:"integer",minimum:1,maximum:1e3,default:500},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["cids"],properties:{cursor:{type:"string"},cids:{type:"array",items:{type:"string",format:"cid"}}}}}}}},ComAtprotoSyncListRepos:{lexicon:1,id:"com.atproto.sync.listRepos",defs:{main:{type:"query",description:"List DIDs and root CIDs of hosted repos.",parameters:{type:"params",properties:{limit:{type:"integer",minimum:1,maximum:1e3,default:500},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["repos"],properties:{cursor:{type:"string"},repos:{type:"array",items:{type:"ref",ref:"lex:com.atproto.sync.listRepos#repo"}}}}}},repo:{type:"object",required:["did","head","rev"],properties:{did:{type:"string",format:"did"},head:{type:"string",format:"cid"},rev:{type:"string"}}}}},ComAtprotoSyncNotifyOfUpdate:{lexicon:1,id:"com.atproto.sync.notifyOfUpdate",defs:{main:{type:"procedure",description:"Notify a crawling service of a recent update; often when a long break between updates causes the connection with the crawling service to break.",input:{encoding:"application/json",schema:{type:"object",required:["hostname"],properties:{hostname:{type:"string",description:"Hostname of the service that is notifying of update."}}}}}}},ComAtprotoSyncRequestCrawl:{lexicon:1,id:"com.atproto.sync.requestCrawl",defs:{main:{type:"procedure",description:"Request a service to persistently crawl hosted repos.",input:{encoding:"application/json",schema:{type:"object",required:["hostname"],properties:{hostname:{type:"string",description:"Hostname of the service that is requesting to be crawled."}}}}}}},ComAtprotoSyncSubscribeRepos:{lexicon:1,id:"com.atproto.sync.subscribeRepos",defs:{main:{type:"subscription",description:"Subscribe to repo updates.",parameters:{type:"params",properties:{cursor:{type:"integer",description:"The last known event to backfill from."}}},message:{schema:{type:"union",refs:["lex:com.atproto.sync.subscribeRepos#commit","lex:com.atproto.sync.subscribeRepos#handle","lex:com.atproto.sync.subscribeRepos#migrate","lex:com.atproto.sync.subscribeRepos#tombstone","lex:com.atproto.sync.subscribeRepos#info"]}},errors:[{name:"FutureCursor"},{name:"ConsumerTooSlow"}]},commit:{type:"object",required:["seq","rebase","tooBig","repo","commit","rev","since","blocks","ops","blobs","time"],nullable:["prev","since"],properties:{seq:{type:"integer"},rebase:{type:"boolean"},tooBig:{type:"boolean"},repo:{type:"string",format:"did"},commit:{type:"cid-link"},prev:{type:"cid-link"},rev:{type:"string",description:"The rev of the emitted commit."},since:{type:"string",description:"The rev of the last emitted commit from this repo."},blocks:{type:"bytes",description:"CAR file containing relevant blocks.",maxLength:1e6},ops:{type:"array",items:{type:"ref",ref:"lex:com.atproto.sync.subscribeRepos#repoOp"},maxLength:200},blobs:{type:"array",items:{type:"cid-link"}},time:{type:"string",format:"datetime"}}},handle:{type:"object",required:["seq","did","handle","time"],properties:{seq:{type:"integer"},did:{type:"string",format:"did"},handle:{type:"string",format:"handle"},time:{type:"string",format:"datetime"}}},migrate:{type:"object",required:["seq","did","migrateTo","time"],nullable:["migrateTo"],properties:{seq:{type:"integer"},did:{type:"string",format:"did"},migrateTo:{type:"string"},time:{type:"string",format:"datetime"}}},tombstone:{type:"object",required:["seq","did","time"],properties:{seq:{type:"integer"},did:{type:"string",format:"did"},time:{type:"string",format:"datetime"}}},info:{type:"object",required:["name"],properties:{name:{type:"string",knownValues:["OutdatedCursor"]},message:{type:"string"}}},repoOp:{type:"object",description:"A repo operation, ie a write of a single record. For creates and updates, CID is the record's CID as of this operation. For deletes, it's null.",required:["action","path","cid"],nullable:["cid"],properties:{action:{type:"string",knownValues:["create","update","delete"]},path:{type:"string"},cid:{type:"cid-link"}}}}},ComAtprotoTempCheckSignupQueue:{lexicon:1,id:"com.atproto.temp.checkSignupQueue",defs:{main:{type:"query",description:"Check accounts location in signup queue.",output:{encoding:"application/json",schema:{type:"object",required:["activated"],properties:{activated:{type:"boolean"},placeInQueue:{type:"integer"},estimatedTimeMs:{type:"integer"}}}}}}},ComAtprotoTempFetchLabels:{lexicon:1,id:"com.atproto.temp.fetchLabels",defs:{main:{type:"query",description:"Fetch all labels from a labeler created after a certain date.",parameters:{type:"params",properties:{since:{type:"integer"},limit:{type:"integer",minimum:1,maximum:250,default:50}}},output:{encoding:"application/json",schema:{type:"object",required:["labels"],properties:{labels:{type:"array",items:{type:"ref",ref:"lex:com.atproto.label.defs#label"}}}}}}}},ComAtprotoTempImportRepo:{lexicon:1,id:"com.atproto.temp.importRepo",defs:{main:{type:"procedure",description:"Gets the did's repo, optionally catching up from a specific revision.",parameters:{type:"params",required:["did"],properties:{did:{type:"string",format:"did",description:"The DID of the repo."}}},input:{encoding:"application/vnd.ipld.car"},output:{encoding:"text/plain"}}}},ComAtprotoTempPushBlob:{lexicon:1,id:"com.atproto.temp.pushBlob",defs:{main:{type:"procedure",description:"Gets the did's repo, optionally catching up from a specific revision.",parameters:{type:"params",required:["did"],properties:{did:{type:"string",format:"did",description:"The DID of the repo."}}},input:{encoding:"*/*"}}}},ComAtprotoTempRequestPhoneVerification:{lexicon:1,id:"com.atproto.temp.requestPhoneVerification",defs:{main:{type:"procedure",description:"Request a verification code to be sent to the supplied phone number",input:{encoding:"application/json",schema:{type:"object",required:["phoneNumber"],properties:{phoneNumber:{type:"string"}}}}}}},ComAtprotoTempTransferAccount:{lexicon:1,id:"com.atproto.temp.transferAccount",defs:{main:{type:"procedure",description:"Transfer an account.",input:{encoding:"application/json",schema:{type:"object",required:["handle","did","plcOp"],properties:{handle:{type:"string",format:"handle"},did:{type:"string",format:"did"},plcOp:{type:"unknown"}}}},output:{encoding:"application/json",schema:{type:"object",required:["accessJwt","refreshJwt","handle","did"],properties:{accessJwt:{type:"string"},refreshJwt:{type:"string"},handle:{type:"string",format:"handle"},did:{type:"string",format:"did"}}}},errors:[{name:"InvalidHandle"},{name:"InvalidPassword"},{name:"InvalidInviteCode"},{name:"HandleNotAvailable"},{name:"UnsupportedDomain"},{name:"UnresolvableDid"},{name:"IncompatibleDidDoc"}]}}},AppBskyActorDefs:{lexicon:1,id:"app.bsky.actor.defs",description:"A reference to an actor in the network.",defs:{profileViewBasic:{type:"object",required:["did","handle"],properties:{did:{type:"string",format:"did"},handle:{type:"string",format:"handle"},displayName:{type:"string",maxGraphemes:64,maxLength:640},avatar:{type:"string"},viewer:{type:"ref",ref:"lex:app.bsky.actor.defs#viewerState"},labels:{type:"array",items:{type:"ref",ref:"lex:com.atproto.label.defs#label"}}}},profileView:{type:"object",required:["did","handle"],properties:{did:{type:"string",format:"did"},handle:{type:"string",format:"handle"},displayName:{type:"string",maxGraphemes:64,maxLength:640},description:{type:"string",maxGraphemes:256,maxLength:2560},avatar:{type:"string"},indexedAt:{type:"string",format:"datetime"},viewer:{type:"ref",ref:"lex:app.bsky.actor.defs#viewerState"},labels:{type:"array",items:{type:"ref",ref:"lex:com.atproto.label.defs#label"}}}},profileViewDetailed:{type:"object",required:["did","handle"],properties:{did:{type:"string",format:"did"},handle:{type:"string",format:"handle"},displayName:{type:"string",maxGraphemes:64,maxLength:640},description:{type:"string",maxGraphemes:256,maxLength:2560},avatar:{type:"string"},banner:{type:"string"},followersCount:{type:"integer"},followsCount:{type:"integer"},postsCount:{type:"integer"},indexedAt:{type:"string",format:"datetime"},viewer:{type:"ref",ref:"lex:app.bsky.actor.defs#viewerState"},labels:{type:"array",items:{type:"ref",ref:"lex:com.atproto.label.defs#label"}}}},viewerState:{type:"object",properties:{muted:{type:"boolean"},mutedByList:{type:"ref",ref:"lex:app.bsky.graph.defs#listViewBasic"},blockedBy:{type:"boolean"},blocking:{type:"string",format:"at-uri"},blockingByList:{type:"ref",ref:"lex:app.bsky.graph.defs#listViewBasic"},following:{type:"string",format:"at-uri"},followedBy:{type:"string",format:"at-uri"}}},preferences:{type:"array",items:{type:"union",refs:["lex:app.bsky.actor.defs#adultContentPref","lex:app.bsky.actor.defs#contentLabelPref","lex:app.bsky.actor.defs#savedFeedsPref","lex:app.bsky.actor.defs#personalDetailsPref","lex:app.bsky.actor.defs#feedViewPref","lex:app.bsky.actor.defs#threadViewPref","lex:app.bsky.actor.defs#interestsPref"]}},adultContentPref:{type:"object",required:["enabled"],properties:{enabled:{type:"boolean",default:!1}}},contentLabelPref:{type:"object",required:["label","visibility"],properties:{label:{type:"string"},visibility:{type:"string",knownValues:["show","warn","hide"]}}},savedFeedsPref:{type:"object",required:["pinned","saved"],properties:{pinned:{type:"array",items:{type:"string",format:"at-uri"}},saved:{type:"array",items:{type:"string",format:"at-uri"}}}},personalDetailsPref:{type:"object",properties:{birthDate:{type:"string",format:"datetime",description:"The birth date of account owner."}}},feedViewPref:{type:"object",required:["feed"],properties:{feed:{type:"string",description:"The URI of the feed, or an identifier which describes the feed."},hideReplies:{type:"boolean",description:"Hide replies in the feed."},hideRepliesByUnfollowed:{type:"boolean",description:"Hide replies in the feed if they are not by followed users."},hideRepliesByLikeCount:{type:"integer",description:"Hide replies in the feed if they do not have this number of likes."},hideReposts:{type:"boolean",description:"Hide reposts in the feed."},hideQuotePosts:{type:"boolean",description:"Hide quote posts in the feed."}}},threadViewPref:{type:"object",properties:{sort:{type:"string",description:"Sorting mode for threads.",knownValues:["oldest","newest","most-likes","random"]},prioritizeFollowedUsers:{type:"boolean",description:"Show followed users at the top of all replies."}}},interestsPref:{type:"object",required:["tags"],properties:{tags:{type:"array",maxLength:100,items:{type:"string",maxLength:640,maxGraphemes:64},description:"A list of tags which describe the account owner's interests gathered during onboarding."}}}}},AppBskyActorGetPreferences:{lexicon:1,id:"app.bsky.actor.getPreferences",defs:{main:{type:"query",description:"Get private preferences attached to the account.",parameters:{type:"params",properties:{}},output:{encoding:"application/json",schema:{type:"object",required:["preferences"],properties:{preferences:{type:"ref",ref:"lex:app.bsky.actor.defs#preferences"}}}}}}},AppBskyActorGetProfile:{lexicon:1,id:"app.bsky.actor.getProfile",defs:{main:{type:"query",description:"Get detailed profile view of an actor.",parameters:{type:"params",required:["actor"],properties:{actor:{type:"string",format:"at-identifier"}}},output:{encoding:"application/json",schema:{type:"ref",ref:"lex:app.bsky.actor.defs#profileViewDetailed"}}}}},AppBskyActorGetProfiles:{lexicon:1,id:"app.bsky.actor.getProfiles",defs:{main:{type:"query",description:"Get detailed profile views of multiple actors.",parameters:{type:"params",required:["actors"],properties:{actors:{type:"array",items:{type:"string",format:"at-identifier"},maxLength:25}}},output:{encoding:"application/json",schema:{type:"object",required:["profiles"],properties:{profiles:{type:"array",items:{type:"ref",ref:"lex:app.bsky.actor.defs#profileViewDetailed"}}}}}}}},AppBskyActorGetSuggestions:{lexicon:1,id:"app.bsky.actor.getSuggestions",defs:{main:{type:"query",description:"Get a list of suggested actors, used for discovery.",parameters:{type:"params",properties:{limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["actors"],properties:{cursor:{type:"string"},actors:{type:"array",items:{type:"ref",ref:"lex:app.bsky.actor.defs#profileView"}}}}}}}},AppBskyActorProfile:{lexicon:1,id:"app.bsky.actor.profile",defs:{main:{type:"record",description:"A declaration of a profile.",key:"literal:self",record:{type:"object",properties:{displayName:{type:"string",maxGraphemes:64,maxLength:640},description:{type:"string",maxGraphemes:256,maxLength:2560},avatar:{type:"blob",accept:["image/png","image/jpeg"],maxSize:1e6},banner:{type:"blob",accept:["image/png","image/jpeg"],maxSize:1e6},labels:{type:"union",refs:["lex:com.atproto.label.defs#selfLabels"]}}}}}},AppBskyActorPutPreferences:{lexicon:1,id:"app.bsky.actor.putPreferences",defs:{main:{type:"procedure",description:"Set the private preferences attached to the account.",input:{encoding:"application/json",schema:{type:"object",required:["preferences"],properties:{preferences:{type:"ref",ref:"lex:app.bsky.actor.defs#preferences"}}}}}}},AppBskyActorSearchActors:{lexicon:1,id:"app.bsky.actor.searchActors",defs:{main:{type:"query",description:"Find actors (profiles) matching search criteria.",parameters:{type:"params",properties:{term:{type:"string",description:"DEPRECATED: use 'q' instead."},q:{type:"string",description:"Search query string. Syntax, phrase, boolean, and faceting is unspecified, but Lucene query syntax is recommended."},limit:{type:"integer",minimum:1,maximum:100,default:25},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["actors"],properties:{cursor:{type:"string"},actors:{type:"array",items:{type:"ref",ref:"lex:app.bsky.actor.defs#profileView"}}}}}}}},AppBskyActorSearchActorsTypeahead:{lexicon:1,id:"app.bsky.actor.searchActorsTypeahead",defs:{main:{type:"query",description:"Find actor suggestions for a prefix search term.",parameters:{type:"params",properties:{term:{type:"string",description:"DEPRECATED: use 'q' instead."},q:{type:"string",description:"Search query prefix; not a full query string."},limit:{type:"integer",minimum:1,maximum:100,default:10}}},output:{encoding:"application/json",schema:{type:"object",required:["actors"],properties:{actors:{type:"array",items:{type:"ref",ref:"lex:app.bsky.actor.defs#profileViewBasic"}}}}}}}},AppBskyEmbedExternal:{lexicon:1,id:"app.bsky.embed.external",description:"A representation of some externally linked content, embedded in another form of content.",defs:{main:{type:"object",required:["external"],properties:{external:{type:"ref",ref:"lex:app.bsky.embed.external#external"}}},external:{type:"object",required:["uri","title","description"],properties:{uri:{type:"string",format:"uri"},title:{type:"string"},description:{type:"string"},thumb:{type:"blob",accept:["image/*"],maxSize:1e6}}},view:{type:"object",required:["external"],properties:{external:{type:"ref",ref:"lex:app.bsky.embed.external#viewExternal"}}},viewExternal:{type:"object",required:["uri","title","description"],properties:{uri:{type:"string",format:"uri"},title:{type:"string"},description:{type:"string"},thumb:{type:"string"}}}}},AppBskyEmbedImages:{lexicon:1,id:"app.bsky.embed.images",description:"A set of images embedded in some other form of content.",defs:{main:{type:"object",required:["images"],properties:{images:{type:"array",items:{type:"ref",ref:"lex:app.bsky.embed.images#image"},maxLength:4}}},image:{type:"object",required:["image","alt"],properties:{image:{type:"blob",accept:["image/*"],maxSize:1e6},alt:{type:"string"},aspectRatio:{type:"ref",ref:"lex:app.bsky.embed.images#aspectRatio"}}},aspectRatio:{type:"object",description:"width:height represents an aspect ratio. It may be approximate, and may not correspond to absolute dimensions in any given unit.",required:["width","height"],properties:{width:{type:"integer",minimum:1},height:{type:"integer",minimum:1}}},view:{type:"object",required:["images"],properties:{images:{type:"array",items:{type:"ref",ref:"lex:app.bsky.embed.images#viewImage"},maxLength:4}}},viewImage:{type:"object",required:["thumb","fullsize","alt"],properties:{thumb:{type:"string"},fullsize:{type:"string"},alt:{type:"string"},aspectRatio:{type:"ref",ref:"lex:app.bsky.embed.images#aspectRatio"}}}}},AppBskyEmbedRecord:{lexicon:1,id:"app.bsky.embed.record",description:"A representation of a record embedded in another form of content.",defs:{main:{type:"object",required:["record"],properties:{record:{type:"ref",ref:"lex:com.atproto.repo.strongRef"}}},view:{type:"object",required:["record"],properties:{record:{type:"union",refs:["lex:app.bsky.embed.record#viewRecord","lex:app.bsky.embed.record#viewNotFound","lex:app.bsky.embed.record#viewBlocked","lex:app.bsky.feed.defs#generatorView","lex:app.bsky.graph.defs#listView"]}}},viewRecord:{type:"object",required:["uri","cid","author","value","indexedAt"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"},author:{type:"ref",ref:"lex:app.bsky.actor.defs#profileViewBasic"},value:{type:"unknown"},labels:{type:"array",items:{type:"ref",ref:"lex:com.atproto.label.defs#label"}},embeds:{type:"array",items:{type:"union",refs:["lex:app.bsky.embed.images#view","lex:app.bsky.embed.external#view","lex:app.bsky.embed.record#view","lex:app.bsky.embed.recordWithMedia#view"]}},indexedAt:{type:"string",format:"datetime"}}},viewNotFound:{type:"object",required:["uri","notFound"],properties:{uri:{type:"string",format:"at-uri"},notFound:{type:"boolean",const:!0}}},viewBlocked:{type:"object",required:["uri","blocked","author"],properties:{uri:{type:"string",format:"at-uri"},blocked:{type:"boolean",const:!0},author:{type:"ref",ref:"lex:app.bsky.feed.defs#blockedAuthor"}}}}},AppBskyEmbedRecordWithMedia:{lexicon:1,id:"app.bsky.embed.recordWithMedia",description:"A representation of a record embedded in another form of content, alongside other compatible embeds.",defs:{main:{type:"object",required:["record","media"],properties:{record:{type:"ref",ref:"lex:app.bsky.embed.record"},media:{type:"union",refs:["lex:app.bsky.embed.images","lex:app.bsky.embed.external"]}}},view:{type:"object",required:["record","media"],properties:{record:{type:"ref",ref:"lex:app.bsky.embed.record#view"},media:{type:"union",refs:["lex:app.bsky.embed.images#view","lex:app.bsky.embed.external#view"]}}}}},AppBskyFeedDefs:{lexicon:1,id:"app.bsky.feed.defs",defs:{postView:{type:"object",required:["uri","cid","author","record","indexedAt"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"},author:{type:"ref",ref:"lex:app.bsky.actor.defs#profileViewBasic"},record:{type:"unknown"},embed:{type:"union",refs:["lex:app.bsky.embed.images#view","lex:app.bsky.embed.external#view","lex:app.bsky.embed.record#view","lex:app.bsky.embed.recordWithMedia#view"]},replyCount:{type:"integer"},repostCount:{type:"integer"},likeCount:{type:"integer"},indexedAt:{type:"string",format:"datetime"},viewer:{type:"ref",ref:"lex:app.bsky.feed.defs#viewerState"},labels:{type:"array",items:{type:"ref",ref:"lex:com.atproto.label.defs#label"}},threadgate:{type:"ref",ref:"lex:app.bsky.feed.defs#threadgateView"}}},viewerState:{type:"object",properties:{repost:{type:"string",format:"at-uri"},like:{type:"string",format:"at-uri"},replyDisabled:{type:"boolean"}}},feedViewPost:{type:"object",required:["post"],properties:{post:{type:"ref",ref:"lex:app.bsky.feed.defs#postView"},reply:{type:"ref",ref:"lex:app.bsky.feed.defs#replyRef"},reason:{type:"union",refs:["lex:app.bsky.feed.defs#reasonRepost"]}}},replyRef:{type:"object",required:["root","parent"],properties:{root:{type:"union",refs:["lex:app.bsky.feed.defs#postView","lex:app.bsky.feed.defs#notFoundPost","lex:app.bsky.feed.defs#blockedPost"]},parent:{type:"union",refs:["lex:app.bsky.feed.defs#postView","lex:app.bsky.feed.defs#notFoundPost","lex:app.bsky.feed.defs#blockedPost"]}}},reasonRepost:{type:"object",required:["by","indexedAt"],properties:{by:{type:"ref",ref:"lex:app.bsky.actor.defs#profileViewBasic"},indexedAt:{type:"string",format:"datetime"}}},threadViewPost:{type:"object",required:["post"],properties:{post:{type:"ref",ref:"lex:app.bsky.feed.defs#postView"},parent:{type:"union",refs:["lex:app.bsky.feed.defs#threadViewPost","lex:app.bsky.feed.defs#notFoundPost","lex:app.bsky.feed.defs#blockedPost"]},replies:{type:"array",items:{type:"union",refs:["lex:app.bsky.feed.defs#threadViewPost","lex:app.bsky.feed.defs#notFoundPost","lex:app.bsky.feed.defs#blockedPost"]}}}},notFoundPost:{type:"object",required:["uri","notFound"],properties:{uri:{type:"string",format:"at-uri"},notFound:{type:"boolean",const:!0}}},blockedPost:{type:"object",required:["uri","blocked","author"],properties:{uri:{type:"string",format:"at-uri"},blocked:{type:"boolean",const:!0},author:{type:"ref",ref:"lex:app.bsky.feed.defs#blockedAuthor"}}},blockedAuthor:{type:"object",required:["did"],properties:{did:{type:"string",format:"did"},viewer:{type:"ref",ref:"lex:app.bsky.actor.defs#viewerState"}}},generatorView:{type:"object",required:["uri","cid","did","creator","displayName","indexedAt"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"},did:{type:"string",format:"did"},creator:{type:"ref",ref:"lex:app.bsky.actor.defs#profileView"},displayName:{type:"string"},description:{type:"string",maxGraphemes:300,maxLength:3e3},descriptionFacets:{type:"array",items:{type:"ref",ref:"lex:app.bsky.richtext.facet"}},avatar:{type:"string"},likeCount:{type:"integer",minimum:0},viewer:{type:"ref",ref:"lex:app.bsky.feed.defs#generatorViewerState"},indexedAt:{type:"string",format:"datetime"}}},generatorViewerState:{type:"object",properties:{like:{type:"string",format:"at-uri"}}},skeletonFeedPost:{type:"object",required:["post"],properties:{post:{type:"string",format:"at-uri"},reason:{type:"union",refs:["lex:app.bsky.feed.defs#skeletonReasonRepost"]}}},skeletonReasonRepost:{type:"object",required:["repost"],properties:{repost:{type:"string",format:"at-uri"}}},threadgateView:{type:"object",properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"},record:{type:"unknown"},lists:{type:"array",items:{type:"ref",ref:"lex:app.bsky.graph.defs#listViewBasic"}}}}}},AppBskyFeedDescribeFeedGenerator:{lexicon:1,id:"app.bsky.feed.describeFeedGenerator",defs:{main:{type:"query",description:"Get information about a feed generator, including policies and offered feed URIs.",output:{encoding:"application/json",schema:{type:"object",required:["did","feeds"],properties:{did:{type:"string",format:"did"},feeds:{type:"array",items:{type:"ref",ref:"lex:app.bsky.feed.describeFeedGenerator#feed"}},links:{type:"ref",ref:"lex:app.bsky.feed.describeFeedGenerator#links"}}}}},feed:{type:"object",required:["uri"],properties:{uri:{type:"string",format:"at-uri"}}},links:{type:"object",properties:{privacyPolicy:{type:"string"},termsOfService:{type:"string"}}}}},AppBskyFeedGenerator:{lexicon:1,id:"app.bsky.feed.generator",defs:{main:{type:"record",description:"A declaration of the existence of a feed generator.",key:"any",record:{type:"object",required:["did","displayName","createdAt"],properties:{did:{type:"string",format:"did"},displayName:{type:"string",maxGraphemes:24,maxLength:240},description:{type:"string",maxGraphemes:300,maxLength:3e3},descriptionFacets:{type:"array",items:{type:"ref",ref:"lex:app.bsky.richtext.facet"}},avatar:{type:"blob",accept:["image/png","image/jpeg"],maxSize:1e6},labels:{type:"union",refs:["lex:com.atproto.label.defs#selfLabels"]},createdAt:{type:"string",format:"datetime"}}}}}},AppBskyFeedGetActorFeeds:{lexicon:1,id:"app.bsky.feed.getActorFeeds",defs:{main:{type:"query",description:"Get a list of feeds created by the actor.",parameters:{type:"params",required:["actor"],properties:{actor:{type:"string",format:"at-identifier"},limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["feeds"],properties:{cursor:{type:"string"},feeds:{type:"array",items:{type:"ref",ref:"lex:app.bsky.feed.defs#generatorView"}}}}}}}},AppBskyFeedGetActorLikes:{lexicon:1,id:"app.bsky.feed.getActorLikes",defs:{main:{type:"query",description:"Get a list of posts liked by an actor.",parameters:{type:"params",required:["actor"],properties:{actor:{type:"string",format:"at-identifier"},limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["feed"],properties:{cursor:{type:"string"},feed:{type:"array",items:{type:"ref",ref:"lex:app.bsky.feed.defs#feedViewPost"}}}}},errors:[{name:"BlockedActor"},{name:"BlockedByActor"}]}}},AppBskyFeedGetAuthorFeed:{lexicon:1,id:"app.bsky.feed.getAuthorFeed",defs:{main:{type:"query",description:"Get a view of an actor's feed.",parameters:{type:"params",required:["actor"],properties:{actor:{type:"string",format:"at-identifier"},limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"},filter:{type:"string",knownValues:["posts_with_replies","posts_no_replies","posts_with_media","posts_and_author_threads"],default:"posts_with_replies"}}},output:{encoding:"application/json",schema:{type:"object",required:["feed"],properties:{cursor:{type:"string"},feed:{type:"array",items:{type:"ref",ref:"lex:app.bsky.feed.defs#feedViewPost"}}}}},errors:[{name:"BlockedActor"},{name:"BlockedByActor"}]}}},AppBskyFeedGetFeed:{lexicon:1,id:"app.bsky.feed.getFeed",defs:{main:{type:"query",description:"Get a hydrated feed from an actor's selected feed generator.",parameters:{type:"params",required:["feed"],properties:{feed:{type:"string",format:"at-uri"},limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["feed"],properties:{cursor:{type:"string"},feed:{type:"array",items:{type:"ref",ref:"lex:app.bsky.feed.defs#feedViewPost"}}}}},errors:[{name:"UnknownFeed"}]}}},AppBskyFeedGetFeedGenerator:{lexicon:1,id:"app.bsky.feed.getFeedGenerator",defs:{main:{type:"query",description:"Get information about a feed generator.",parameters:{type:"params",required:["feed"],properties:{feed:{type:"string",format:"at-uri"}}},output:{encoding:"application/json",schema:{type:"object",required:["view","isOnline","isValid"],properties:{view:{type:"ref",ref:"lex:app.bsky.feed.defs#generatorView"},isOnline:{type:"boolean"},isValid:{type:"boolean"}}}}}}},AppBskyFeedGetFeedGenerators:{lexicon:1,id:"app.bsky.feed.getFeedGenerators",defs:{main:{type:"query",description:"Get information about a list of feed generators.",parameters:{type:"params",required:["feeds"],properties:{feeds:{type:"array",items:{type:"string",format:"at-uri"}}}},output:{encoding:"application/json",schema:{type:"object",required:["feeds"],properties:{feeds:{type:"array",items:{type:"ref",ref:"lex:app.bsky.feed.defs#generatorView"}}}}}}}},AppBskyFeedGetFeedSkeleton:{lexicon:1,id:"app.bsky.feed.getFeedSkeleton",defs:{main:{type:"query",description:"Get a skeleton of a feed provided by a feed generator.",parameters:{type:"params",required:["feed"],properties:{feed:{type:"string",format:"at-uri"},limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["feed"],properties:{cursor:{type:"string"},feed:{type:"array",items:{type:"ref",ref:"lex:app.bsky.feed.defs#skeletonFeedPost"}}}}},errors:[{name:"UnknownFeed"}]}}},AppBskyFeedGetLikes:{lexicon:1,id:"app.bsky.feed.getLikes",defs:{main:{type:"query",description:"Get the list of likes.",parameters:{type:"params",required:["uri"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"},limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["uri","likes"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"},cursor:{type:"string"},likes:{type:"array",items:{type:"ref",ref:"lex:app.bsky.feed.getLikes#like"}}}}}},like:{type:"object",required:["indexedAt","createdAt","actor"],properties:{indexedAt:{type:"string",format:"datetime"},createdAt:{type:"string",format:"datetime"},actor:{type:"ref",ref:"lex:app.bsky.actor.defs#profileView"}}}}},AppBskyFeedGetListFeed:{lexicon:1,id:"app.bsky.feed.getListFeed",defs:{main:{type:"query",description:"Get a view of a recent posts from actors in a list.",parameters:{type:"params",required:["list"],properties:{list:{type:"string",format:"at-uri"},limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["feed"],properties:{cursor:{type:"string"},feed:{type:"array",items:{type:"ref",ref:"lex:app.bsky.feed.defs#feedViewPost"}}}}},errors:[{name:"UnknownList"}]}}},AppBskyFeedGetPostThread:{lexicon:1,id:"app.bsky.feed.getPostThread",defs:{main:{type:"query",description:"Get posts in a thread.",parameters:{type:"params",required:["uri"],properties:{uri:{type:"string",format:"at-uri"},depth:{type:"integer",default:6,minimum:0,maximum:1e3},parentHeight:{type:"integer",default:80,minimum:0,maximum:1e3}}},output:{encoding:"application/json",schema:{type:"object",required:["thread"],properties:{thread:{type:"union",refs:["lex:app.bsky.feed.defs#threadViewPost","lex:app.bsky.feed.defs#notFoundPost","lex:app.bsky.feed.defs#blockedPost"]}}}},errors:[{name:"NotFound"}]}}},AppBskyFeedGetPosts:{lexicon:1,id:"app.bsky.feed.getPosts",defs:{main:{type:"query",description:"Get a view of an actor's feed.",parameters:{type:"params",required:["uris"],properties:{uris:{type:"array",items:{type:"string",format:"at-uri"},maxLength:25}}},output:{encoding:"application/json",schema:{type:"object",required:["posts"],properties:{posts:{type:"array",items:{type:"ref",ref:"lex:app.bsky.feed.defs#postView"}}}}}}}},AppBskyFeedGetRepostedBy:{lexicon:1,id:"app.bsky.feed.getRepostedBy",defs:{main:{type:"query",description:"Get a list of reposts.",parameters:{type:"params",required:["uri"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"},limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["uri","repostedBy"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"},cursor:{type:"string"},repostedBy:{type:"array",items:{type:"ref",ref:"lex:app.bsky.actor.defs#profileView"}}}}}}}},AppBskyFeedGetSuggestedFeeds:{lexicon:1,id:"app.bsky.feed.getSuggestedFeeds",defs:{main:{type:"query",description:"Get a list of suggested feeds for the viewer.",parameters:{type:"params",properties:{limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["feeds"],properties:{cursor:{type:"string"},feeds:{type:"array",items:{type:"ref",ref:"lex:app.bsky.feed.defs#generatorView"}}}}}}}},AppBskyFeedGetTimeline:{lexicon:1,id:"app.bsky.feed.getTimeline",defs:{main:{type:"query",description:"Get a view of the actor's home timeline.",parameters:{type:"params",properties:{algorithm:{type:"string"},limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["feed"],properties:{cursor:{type:"string"},feed:{type:"array",items:{type:"ref",ref:"lex:app.bsky.feed.defs#feedViewPost"}}}}}}}},AppBskyFeedLike:{lexicon:1,id:"app.bsky.feed.like",defs:{main:{type:"record",description:"A declaration of a like.",key:"tid",record:{type:"object",required:["subject","createdAt"],properties:{subject:{type:"ref",ref:"lex:com.atproto.repo.strongRef"},createdAt:{type:"string",format:"datetime"}}}}}},AppBskyFeedPost:{lexicon:1,id:"app.bsky.feed.post",defs:{main:{type:"record",description:"A declaration of a post.",key:"tid",record:{type:"object",required:["text","createdAt"],properties:{text:{type:"string",maxLength:3e3,maxGraphemes:300},entities:{type:"array",description:"Deprecated: replaced by app.bsky.richtext.facet.",items:{type:"ref",ref:"lex:app.bsky.feed.post#entity"}},facets:{type:"array",items:{type:"ref",ref:"lex:app.bsky.richtext.facet"}},reply:{type:"ref",ref:"lex:app.bsky.feed.post#replyRef"},embed:{type:"union",refs:["lex:app.bsky.embed.images","lex:app.bsky.embed.external","lex:app.bsky.embed.record","lex:app.bsky.embed.recordWithMedia"]},langs:{type:"array",maxLength:3,items:{type:"string",format:"language"}},labels:{type:"union",refs:["lex:com.atproto.label.defs#selfLabels"]},tags:{type:"array",maxLength:8,items:{type:"string",maxLength:640,maxGraphemes:64},description:"Additional non-inline tags describing this post."},createdAt:{type:"string",format:"datetime"}}}},replyRef:{type:"object",required:["root","parent"],properties:{root:{type:"ref",ref:"lex:com.atproto.repo.strongRef"},parent:{type:"ref",ref:"lex:com.atproto.repo.strongRef"}}},entity:{type:"object",description:"Deprecated: use facets instead.",required:["index","type","value"],properties:{index:{type:"ref",ref:"lex:app.bsky.feed.post#textSlice"},type:{type:"string",description:"Expected values are 'mention' and 'link'."},value:{type:"string"}}},textSlice:{type:"object",description:"Deprecated. Use app.bsky.richtext instead -- A text segment. Start is inclusive, end is exclusive. Indices are for utf16-encoded strings.",required:["start","end"],properties:{start:{type:"integer",minimum:0},end:{type:"integer",minimum:0}}}}},AppBskyFeedRepost:{lexicon:1,id:"app.bsky.feed.repost",defs:{main:{description:"A declaration of a repost.",type:"record",key:"tid",record:{type:"object",required:["subject","createdAt"],properties:{subject:{type:"ref",ref:"lex:com.atproto.repo.strongRef"},createdAt:{type:"string",format:"datetime"}}}}}},AppBskyFeedSearchPosts:{lexicon:1,id:"app.bsky.feed.searchPosts",defs:{main:{type:"query",description:"Find posts matching search criteria.",parameters:{type:"params",required:["q"],properties:{q:{type:"string",description:"Search query string; syntax, phrase, boolean, and faceting is unspecified, but Lucene query syntax is recommended."},limit:{type:"integer",minimum:1,maximum:100,default:25},cursor:{type:"string",description:"Optional pagination mechanism; may not necessarily allow scrolling through entire result set."}}},output:{encoding:"application/json",schema:{type:"object",required:["posts"],properties:{cursor:{type:"string"},hitsTotal:{type:"integer",description:"Count of search hits. Optional, may be rounded/truncated, and may not be possible to paginate through all hits."},posts:{type:"array",items:{type:"ref",ref:"lex:app.bsky.feed.defs#postView"}}}}},errors:[{name:"BadQueryString"}]}}},AppBskyFeedThreadgate:{lexicon:1,id:"app.bsky.feed.threadgate",defs:{main:{type:"record",key:"tid",description:"Defines interaction gating rules for a thread. The rkey of the threadgate record should match the rkey of the thread's root post.",record:{type:"object",required:["post","createdAt"],properties:{post:{type:"string",format:"at-uri"},allow:{type:"array",maxLength:5,items:{type:"union",refs:["lex:app.bsky.feed.threadgate#mentionRule","lex:app.bsky.feed.threadgate#followingRule","lex:app.bsky.feed.threadgate#listRule"]}},createdAt:{type:"string",format:"datetime"}}}},mentionRule:{type:"object",description:"Allow replies from actors mentioned in your post.",properties:{}},followingRule:{type:"object",description:"Allow replies from actors you follow.",properties:{}},listRule:{type:"object",description:"Allow replies from actors on a list.",required:["list"],properties:{list:{type:"string",format:"at-uri"}}}}},AppBskyGraphBlock:{lexicon:1,id:"app.bsky.graph.block",defs:{main:{type:"record",description:"A declaration of a block.",key:"tid",record:{type:"object",required:["subject","createdAt"],properties:{subject:{type:"string",format:"did"},createdAt:{type:"string",format:"datetime"}}}}}},AppBskyGraphDefs:{lexicon:1,id:"app.bsky.graph.defs",defs:{listViewBasic:{type:"object",required:["uri","cid","name","purpose"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"},name:{type:"string",maxLength:64,minLength:1},purpose:{type:"ref",ref:"lex:app.bsky.graph.defs#listPurpose"},avatar:{type:"string"},viewer:{type:"ref",ref:"lex:app.bsky.graph.defs#listViewerState"},indexedAt:{type:"string",format:"datetime"}}},listView:{type:"object",required:["uri","cid","creator","name","purpose","indexedAt"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"},creator:{type:"ref",ref:"lex:app.bsky.actor.defs#profileView"},name:{type:"string",maxLength:64,minLength:1},purpose:{type:"ref",ref:"lex:app.bsky.graph.defs#listPurpose"},description:{type:"string",maxGraphemes:300,maxLength:3e3},descriptionFacets:{type:"array",items:{type:"ref",ref:"lex:app.bsky.richtext.facet"}},avatar:{type:"string"},viewer:{type:"ref",ref:"lex:app.bsky.graph.defs#listViewerState"},indexedAt:{type:"string",format:"datetime"}}},listItemView:{type:"object",required:["uri","subject"],properties:{uri:{type:"string",format:"at-uri"},subject:{type:"ref",ref:"lex:app.bsky.actor.defs#profileView"}}},listPurpose:{type:"string",knownValues:["app.bsky.graph.defs#modlist","app.bsky.graph.defs#curatelist"]},modlist:{type:"token",description:"A list of actors to apply an aggregate moderation action (mute/block) on."},curatelist:{type:"token",description:"A list of actors used for curation purposes such as list feeds or interaction gating."},listViewerState:{type:"object",properties:{muted:{type:"boolean"},blocked:{type:"string",format:"at-uri"}}},notFoundActor:{type:"object",description:"indicates that a handle or DID could not be resolved",required:["actor","notFound"],properties:{actor:{type:"string",format:"at-identifier"},notFound:{type:"boolean",const:!0}}},relationship:{type:"object",description:"lists the bi-directional graph relationships between one actor (not indicated in the object), and the target actors (the DID included in the object)",required:["did"],properties:{did:{type:"string",format:"did"},following:{type:"string",format:"at-uri",description:"if the actor follows this DID, this is the AT-URI of the follow record"},followedBy:{type:"string",format:"at-uri",description:"if the actor is followed by this DID, contains the AT-URI of the follow record"}}}}},AppBskyGraphFollow:{lexicon:1,id:"app.bsky.graph.follow",defs:{main:{type:"record",description:"A declaration of a social follow.",key:"tid",record:{type:"object",required:["subject","createdAt"],properties:{subject:{type:"string",format:"did"},createdAt:{type:"string",format:"datetime"}}}}}},AppBskyGraphGetBlocks:{lexicon:1,id:"app.bsky.graph.getBlocks",defs:{main:{type:"query",description:"Get a list of who the actor is blocking.",parameters:{type:"params",properties:{limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["blocks"],properties:{cursor:{type:"string"},blocks:{type:"array",items:{type:"ref",ref:"lex:app.bsky.actor.defs#profileView"}}}}}}}},AppBskyGraphGetFollowers:{lexicon:1,id:"app.bsky.graph.getFollowers",defs:{main:{type:"query",description:"Get a list of an actor's followers.",parameters:{type:"params",required:["actor"],properties:{actor:{type:"string",format:"at-identifier"},limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["subject","followers"],properties:{subject:{type:"ref",ref:"lex:app.bsky.actor.defs#profileView"},cursor:{type:"string"},followers:{type:"array",items:{type:"ref",ref:"lex:app.bsky.actor.defs#profileView"}}}}}}}},AppBskyGraphGetFollows:{lexicon:1,id:"app.bsky.graph.getFollows",defs:{main:{type:"query",description:"Get a list of who the actor follows.",parameters:{type:"params",required:["actor"],properties:{actor:{type:"string",format:"at-identifier"},limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["subject","follows"],properties:{subject:{type:"ref",ref:"lex:app.bsky.actor.defs#profileView"},cursor:{type:"string"},follows:{type:"array",items:{type:"ref",ref:"lex:app.bsky.actor.defs#profileView"}}}}}}}},AppBskyGraphGetList:{lexicon:1,id:"app.bsky.graph.getList",defs:{main:{type:"query",description:"Get a list of actors.",parameters:{type:"params",required:["list"],properties:{list:{type:"string",format:"at-uri"},limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["list","items"],properties:{cursor:{type:"string"},list:{type:"ref",ref:"lex:app.bsky.graph.defs#listView"},items:{type:"array",items:{type:"ref",ref:"lex:app.bsky.graph.defs#listItemView"}}}}}}}},AppBskyGraphGetListBlocks:{lexicon:1,id:"app.bsky.graph.getListBlocks",defs:{main:{type:"query",description:"Get lists that the actor is blocking.",parameters:{type:"params",properties:{limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["lists"],properties:{cursor:{type:"string"},lists:{type:"array",items:{type:"ref",ref:"lex:app.bsky.graph.defs#listView"}}}}}}}},AppBskyGraphGetListMutes:{lexicon:1,id:"app.bsky.graph.getListMutes",defs:{main:{type:"query",description:"Get lists that the actor is muting.",parameters:{type:"params",properties:{limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["lists"],properties:{cursor:{type:"string"},lists:{type:"array",items:{type:"ref",ref:"lex:app.bsky.graph.defs#listView"}}}}}}}},AppBskyGraphGetLists:{lexicon:1,id:"app.bsky.graph.getLists",defs:{main:{type:"query",description:"Get a list of lists that belong to an actor.",parameters:{type:"params",required:["actor"],properties:{actor:{type:"string",format:"at-identifier"},limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["lists"],properties:{cursor:{type:"string"},lists:{type:"array",items:{type:"ref",ref:"lex:app.bsky.graph.defs#listView"}}}}}}}},AppBskyGraphGetMutes:{lexicon:1,id:"app.bsky.graph.getMutes",defs:{main:{type:"query",description:"Get a list of who the actor mutes.",parameters:{type:"params",properties:{limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["mutes"],properties:{cursor:{type:"string"},mutes:{type:"array",items:{type:"ref",ref:"lex:app.bsky.actor.defs#profileView"}}}}}}}},AppBskyGraphGetRelationships:{lexicon:1,id:"app.bsky.graph.getRelationships",defs:{main:{type:"query",description:"Enumerates public relationships between one account, and a list of other accounts",parameters:{type:"params",required:["actor"],properties:{actor:{type:"string",format:"at-identifier"},others:{type:"array",maxLength:30,items:{type:"string",format:"at-identifier"}}}},output:{encoding:"application/json",schema:{type:"object",required:["relationships"],properties:{actor:{type:"string",format:"did"},relationships:{type:"array",items:{type:"union",refs:["lex:app.bsky.graph.defs#relationship","lex:app.bsky.graph.defs#notFoundActor"]}}}}},errors:[{name:"ActorNotFound",description:"the primary actor at-identifier could not be resolved"}]}}},AppBskyGraphGetSuggestedFollowsByActor:{lexicon:1,id:"app.bsky.graph.getSuggestedFollowsByActor",defs:{main:{type:"query",description:"Get suggested follows related to a given actor.",parameters:{type:"params",required:["actor"],properties:{actor:{type:"string",format:"at-identifier"}}},output:{encoding:"application/json",schema:{type:"object",required:["suggestions"],properties:{suggestions:{type:"array",items:{type:"ref",ref:"lex:app.bsky.actor.defs#profileView"}}}}}}}},AppBskyGraphList:{lexicon:1,id:"app.bsky.graph.list",defs:{main:{type:"record",description:"A declaration of a list of actors.",key:"tid",record:{type:"object",required:["name","purpose","createdAt"],properties:{purpose:{type:"ref",ref:"lex:app.bsky.graph.defs#listPurpose"},name:{type:"string",maxLength:64,minLength:1},description:{type:"string",maxGraphemes:300,maxLength:3e3},descriptionFacets:{type:"array",items:{type:"ref",ref:"lex:app.bsky.richtext.facet"}},avatar:{type:"blob",accept:["image/png","image/jpeg"],maxSize:1e6},labels:{type:"union",refs:["lex:com.atproto.label.defs#selfLabels"]},createdAt:{type:"string",format:"datetime"}}}}}},AppBskyGraphListblock:{lexicon:1,id:"app.bsky.graph.listblock",defs:{main:{type:"record",description:"A block of an entire list of actors.",key:"tid",record:{type:"object",required:["subject","createdAt"],properties:{subject:{type:"string",format:"at-uri"},createdAt:{type:"string",format:"datetime"}}}}}},AppBskyGraphListitem:{lexicon:1,id:"app.bsky.graph.listitem",defs:{main:{type:"record",description:"An item under a declared list of actors.",key:"tid",record:{type:"object",required:["subject","list","createdAt"],properties:{subject:{type:"string",format:"did"},list:{type:"string",format:"at-uri"},createdAt:{type:"string",format:"datetime"}}}}}},AppBskyGraphMuteActor:{lexicon:1,id:"app.bsky.graph.muteActor",defs:{main:{type:"procedure",description:"Mute an actor by DID or handle.",input:{encoding:"application/json",schema:{type:"object",required:["actor"],properties:{actor:{type:"string",format:"at-identifier"}}}}}}},AppBskyGraphMuteActorList:{lexicon:1,id:"app.bsky.graph.muteActorList",defs:{main:{type:"procedure",description:"Mute a list of actors.",input:{encoding:"application/json",schema:{type:"object",required:["list"],properties:{list:{type:"string",format:"at-uri"}}}}}}},AppBskyGraphUnmuteActor:{lexicon:1,id:"app.bsky.graph.unmuteActor",defs:{main:{type:"procedure",description:"Unmute an actor by DID or handle.",input:{encoding:"application/json",schema:{type:"object",required:["actor"],properties:{actor:{type:"string",format:"at-identifier"}}}}}}},AppBskyGraphUnmuteActorList:{lexicon:1,id:"app.bsky.graph.unmuteActorList",defs:{main:{type:"procedure",description:"Unmute a list of actors.",input:{encoding:"application/json",schema:{type:"object",required:["list"],properties:{list:{type:"string",format:"at-uri"}}}}}}},AppBskyNotificationGetUnreadCount:{lexicon:1,id:"app.bsky.notification.getUnreadCount",defs:{main:{type:"query",description:"Get the count of unread notifications.",parameters:{type:"params",properties:{seenAt:{type:"string",format:"datetime"}}},output:{encoding:"application/json",schema:{type:"object",required:["count"],properties:{count:{type:"integer"}}}}}}},AppBskyNotificationListNotifications:{lexicon:1,id:"app.bsky.notification.listNotifications",defs:{main:{type:"query",description:"Get a list of notifications.",parameters:{type:"params",properties:{limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"},seenAt:{type:"string",format:"datetime"}}},output:{encoding:"application/json",schema:{type:"object",required:["notifications"],properties:{cursor:{type:"string"},notifications:{type:"array",items:{type:"ref",ref:"lex:app.bsky.notification.listNotifications#notification"}},seenAt:{type:"string",format:"datetime"}}}}},notification:{type:"object",required:["uri","cid","author","reason","record","isRead","indexedAt"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"},author:{type:"ref",ref:"lex:app.bsky.actor.defs#profileView"},reason:{type:"string",description:"Expected values are 'like', 'repost', 'follow', 'mention', 'reply', and 'quote'.",knownValues:["like","repost","follow","mention","reply","quote"]},reasonSubject:{type:"string",format:"at-uri"},record:{type:"unknown"},isRead:{type:"boolean"},indexedAt:{type:"string",format:"datetime"},labels:{type:"array",items:{type:"ref",ref:"lex:com.atproto.label.defs#label"}}}}}},AppBskyNotificationRegisterPush:{lexicon:1,id:"app.bsky.notification.registerPush",defs:{main:{type:"procedure",description:"Register for push notifications with a service.",input:{encoding:"application/json",schema:{type:"object",required:["serviceDid","token","platform","appId"],properties:{serviceDid:{type:"string",format:"did"},token:{type:"string"},platform:{type:"string",knownValues:["ios","android","web"]},appId:{type:"string"}}}}}}},AppBskyNotificationUpdateSeen:{lexicon:1,id:"app.bsky.notification.updateSeen",defs:{main:{type:"procedure",description:"Notify server that the user has seen notifications.",input:{encoding:"application/json",schema:{type:"object",required:["seenAt"],properties:{seenAt:{type:"string",format:"datetime"}}}}}}},AppBskyRichtextFacet:{lexicon:1,id:"app.bsky.richtext.facet",defs:{main:{type:"object",required:["index","features"],properties:{index:{type:"ref",ref:"lex:app.bsky.richtext.facet#byteSlice"},features:{type:"array",items:{type:"union",refs:["lex:app.bsky.richtext.facet#mention","lex:app.bsky.richtext.facet#link","lex:app.bsky.richtext.facet#tag"]}}}},mention:{type:"object",description:"A facet feature for actor mentions.",required:["did"],properties:{did:{type:"string",format:"did"}}},link:{type:"object",description:"A facet feature for links.",required:["uri"],properties:{uri:{type:"string",format:"uri"}}},tag:{type:"object",description:"A hashtag.",required:["tag"],properties:{tag:{type:"string",maxLength:640,maxGraphemes:64}}},byteSlice:{type:"object",description:"A text segment. Start is inclusive, end is exclusive. Indices are for utf8-encoded strings.",required:["byteStart","byteEnd"],properties:{byteStart:{type:"integer",minimum:0},byteEnd:{type:"integer",minimum:0}}}}},AppBskyUnspeccedDefs:{lexicon:1,id:"app.bsky.unspecced.defs",defs:{skeletonSearchPost:{type:"object",required:["uri"],properties:{uri:{type:"string",format:"at-uri"}}},skeletonSearchActor:{type:"object",required:["did"],properties:{did:{type:"string",format:"did"}}}}},AppBskyUnspeccedGetPopularFeedGenerators:{lexicon:1,id:"app.bsky.unspecced.getPopularFeedGenerators",defs:{main:{type:"query",description:"An unspecced view of globally popular feed generators.",parameters:{type:"params",properties:{limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"},query:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["feeds"],properties:{cursor:{type:"string"},feeds:{type:"array",items:{type:"ref",ref:"lex:app.bsky.feed.defs#generatorView"}}}}}}}},AppBskyUnspeccedGetTaggedSuggestions:{lexicon:1,id:"app.bsky.unspecced.getTaggedSuggestions",defs:{main:{type:"query",description:"Get a list of suggestions (feeds and users) tagged with categories",parameters:{type:"params",properties:{}},output:{encoding:"application/json",schema:{type:"object",required:["suggestions"],properties:{suggestions:{type:"array",items:{type:"ref",ref:"lex:app.bsky.unspecced.getTaggedSuggestions#suggestion"}}}}}},suggestion:{type:"object",required:["tag","subjectType","subject"],properties:{tag:{type:"string"},subjectType:{type:"string",knownValues:["actor","feed"]},subject:{type:"string",format:"uri"}}}}},AppBskyUnspeccedSearchActorsSkeleton:{lexicon:1,id:"app.bsky.unspecced.searchActorsSkeleton",defs:{main:{type:"query",description:"Backend Actors (profile) search, returns only skeleton.",parameters:{type:"params",required:["q"],properties:{q:{type:"string",description:"Search query string; syntax, phrase, boolean, and faceting is unspecified, but Lucene query syntax is recommended. For typeahead search, only simple term match is supported, not full syntax."},typeahead:{type:"boolean",description:"If true, acts as fast/simple 'typeahead' query."},limit:{type:"integer",minimum:1,maximum:100,default:25},cursor:{type:"string",description:"Optional pagination mechanism; may not necessarily allow scrolling through entire result set."}}},output:{encoding:"application/json",schema:{type:"object",required:["actors"],properties:{cursor:{type:"string"},hitsTotal:{type:"integer",description:"Count of search hits. Optional, may be rounded/truncated, and may not be possible to paginate through all hits."},actors:{type:"array",items:{type:"ref",ref:"lex:app.bsky.unspecced.defs#skeletonSearchActor"}}}}},errors:[{name:"BadQueryString"}]}}},AppBskyUnspeccedSearchPostsSkeleton:{lexicon:1,id:"app.bsky.unspecced.searchPostsSkeleton",defs:{main:{type:"query",description:"Backend Posts search, returns only skeleton",parameters:{type:"params",required:["q"],properties:{q:{type:"string",description:"Search query string; syntax, phrase, boolean, and faceting is unspecified, but Lucene query syntax is recommended."},limit:{type:"integer",minimum:1,maximum:100,default:25},cursor:{type:"string",description:"Optional pagination mechanism; may not necessarily allow scrolling through entire result set."}}},output:{encoding:"application/json",schema:{type:"object",required:["posts"],properties:{cursor:{type:"string"},hitsTotal:{type:"integer",description:"Count of search hits. Optional, may be rounded/truncated, and may not be possible to paginate through all hits."},posts:{type:"array",items:{type:"ref",ref:"lex:app.bsky.unspecced.defs#skeletonSearchPost"}}}}},errors:[{name:"BadQueryString"}]}}}}),gs=new zi(ms),ys={};function vs(e){return e}c(ys,{toKnownErr:()=>vs});var Es={};function bs(e){return e}c(Es,{toKnownErr:()=>bs});var Ts={};function Rs(e){return e}c(Ts,{toKnownErr:()=>Rs});var Ss={};function As(e){return e}c(Ss,{toKnownErr:()=>As});var Ls={};function ws(e){return e}c(Ls,{toKnownErr:()=>ws});var Cs={};c(Cs,{SubjectHasActionError:()=>ks,toKnownErr:()=>xs});var ks=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}};function xs(e){return e instanceof os&&"SubjectHasAction"===e.error?new ks(e):e}var _s={};function Ds(e){return e}c(_s,{toKnownErr:()=>Ds});var Is={};function Bs(e){return e}c(Is,{toKnownErr:()=>Bs});var Ps={};function Us(e){return e}c(Ps,{toKnownErr:()=>Us});var Ns={};function Os(e){return e}c(Ns,{toKnownErr:()=>Os});var Ks={};function Fs(e){return e}c(Ks,{toKnownErr:()=>Fs});var Ms={};c(Ms,{RecordNotFoundError:()=>Vs,toKnownErr:()=>js});var Vs=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}};function js(e){return e instanceof os&&"RecordNotFound"===e.error?new Vs(e):e}var Gs={};c(Gs,{RepoNotFoundError:()=>qs,toKnownErr:()=>Hs});var qs=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}};function Hs(e){return e instanceof os&&"RepoNotFound"===e.error?new qs(e):e}var Xs={};function zs(e){return e}c(Xs,{toKnownErr:()=>zs});var $s={};function Ws(e){return e}c($s,{toKnownErr:()=>Ws});var Ys={};function Zs(e){return e}c(Ys,{toKnownErr:()=>Zs});var Qs={};function Js(e){return e}c(Qs,{toKnownErr:()=>Js});var ea={};function ta(e){return e}c(ea,{toKnownErr:()=>ta});var ra={};function na(e){return e}c(ra,{toKnownErr:()=>na});var ia={};function sa(e){return e}c(ia,{toKnownErr:()=>sa});var aa={};function oa(e){return e}c(aa,{toKnownErr:()=>oa});var la={};function ca(e){return e}c(la,{toKnownErr:()=>ca});var ua={};function da(e){return e}c(ua,{toKnownErr:()=>da});var fa={};function pa(e){return e}c(fa,{toKnownErr:()=>pa});var ha={};function ma(e){return e}c(ha,{toKnownErr:()=>ma});var ga={};function ya(e){return e}c(ga,{toKnownErr:()=>ya});var va={};function Ea(e){return e}c(va,{toKnownErr:()=>Ea});var ba={};function Ta(e){return"object"===typeof e&&null!==e}function Ra(e,t){return t in e}c(ba,{InvalidSwapError:()=>Sa,isCreate:()=>La,isDelete:()=>xa,isUpdate:()=>Ca,toKnownErr:()=>Aa,validateCreate:()=>wa,validateDelete:()=>_a,validateUpdate:()=>ka});var Sa=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}};function Aa(e){return e instanceof os&&"InvalidSwap"===e.error?new Sa(e):e}function La(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.repo.applyWrites#create"===e.$type}function wa(e){return gs.validate("com.atproto.repo.applyWrites#create",e)}function Ca(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.repo.applyWrites#update"===e.$type}function ka(e){return gs.validate("com.atproto.repo.applyWrites#update",e)}function xa(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.repo.applyWrites#delete"===e.$type}function _a(e){return gs.validate("com.atproto.repo.applyWrites#delete",e)}var Da={};c(Da,{InvalidSwapError:()=>Ia,toKnownErr:()=>Ba});var Ia=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}};function Ba(e){return e instanceof os&&"InvalidSwap"===e.error?new Ia(e):e}var Pa={};c(Pa,{InvalidSwapError:()=>Ua,toKnownErr:()=>Na});var Ua=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}};function Na(e){return e instanceof os&&"InvalidSwap"===e.error?new Ua(e):e}var Oa={};function Ka(e){return e}c(Oa,{toKnownErr:()=>Ka});var Fa={};function Ma(e){return e}c(Fa,{toKnownErr:()=>Ma});var Va={};function ja(e){return e}function Ga(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.repo.listRecords#record"===e.$type}function qa(e){return gs.validate("com.atproto.repo.listRecords#record",e)}c(Va,{isRecord:()=>Ga,toKnownErr:()=>ja,validateRecord:()=>qa});var Ha={};c(Ha,{InvalidSwapError:()=>Xa,toKnownErr:()=>za});var Xa=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}};function za(e){return e instanceof os&&"InvalidSwap"===e.error?new Xa(e):e}var $a={};function Wa(e){return e}c($a,{toKnownErr:()=>Wa});var Ya={};c(Ya,{AccountNotFoundError:()=>Za,ExpiredTokenError:()=>Qa,InvalidEmailError:()=>eo,InvalidTokenError:()=>Ja,toKnownErr:()=>to});var Za=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}},Qa=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}},Ja=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}},eo=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}};function to(e){if(e instanceof os){if("AccountNotFound"===e.error)return new Za(e);if("ExpiredToken"===e.error)return new Qa(e);if("InvalidToken"===e.error)return new Ja(e);if("InvalidEmail"===e.error)return new eo(e)}return e}var ro={};c(ro,{HandleNotAvailableError:()=>ao,IncompatibleDidDocError:()=>co,InvalidHandleError:()=>no,InvalidInviteCodeError:()=>so,InvalidPasswordError:()=>io,UnresolvableDidError:()=>lo,UnsupportedDomainError:()=>oo,toKnownErr:()=>uo});var no=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}},io=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}},so=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}},ao=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}},oo=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}},lo=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}},co=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}};function uo(e){if(e instanceof os){if("InvalidHandle"===e.error)return new no(e);if("InvalidPassword"===e.error)return new io(e);if("InvalidInviteCode"===e.error)return new so(e);if("HandleNotAvailable"===e.error)return new ao(e);if("UnsupportedDomain"===e.error)return new oo(e);if("UnresolvableDid"===e.error)return new lo(e);if("IncompatibleDidDoc"===e.error)return new co(e)}return e}var fo={};c(fo,{AccountTakedownError:()=>po,isAppPassword:()=>mo,toKnownErr:()=>ho,validateAppPassword:()=>go});var po=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}};function ho(e){return e instanceof os&&"AccountTakedown"===e.error?new po(e):e}function mo(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.server.createAppPassword#appPassword"===e.$type}function go(e){return gs.validate("com.atproto.server.createAppPassword#appPassword",e)}var yo={};function vo(e){return e}c(yo,{toKnownErr:()=>vo});var Eo={};function bo(e){return e}function To(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.server.createInviteCodes#accountCodes"===e.$type}function Ro(e){return gs.validate("com.atproto.server.createInviteCodes#accountCodes",e)}c(Eo,{isAccountCodes:()=>To,toKnownErr:()=>bo,validateAccountCodes:()=>Ro});var So={};c(So,{AccountTakedownError:()=>Ao,toKnownErr:()=>Lo});var Ao=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}};function Lo(e){return e instanceof os&&"AccountTakedown"===e.error?new Ao(e):e}var wo={};c(wo,{ExpiredTokenError:()=>Co,InvalidTokenError:()=>ko,toKnownErr:()=>xo});var Co=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}},ko=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}};function xo(e){if(e instanceof os){if("ExpiredToken"===e.error)return new Co(e);if("InvalidToken"===e.error)return new ko(e)}return e}var _o={};function Do(e){return e}c(_o,{toKnownErr:()=>Do});var Io={};function Bo(e){return e}function Po(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.server.describeServer#links"===e.$type}function Uo(e){return gs.validate("com.atproto.server.describeServer#links",e)}c(Io,{isLinks:()=>Po,toKnownErr:()=>Bo,validateLinks:()=>Uo});var No={};c(No,{DuplicateCreateError:()=>Oo,toKnownErr:()=>Ko});var Oo=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}};function Ko(e){return e instanceof os&&"DuplicateCreate"===e.error?new Oo(e):e}var Fo={};function Mo(e){return e}c(Fo,{toKnownErr:()=>Mo});var Vo={};c(Vo,{AccountTakedownError:()=>jo,isAppPassword:()=>qo,toKnownErr:()=>Go,validateAppPassword:()=>Ho});var jo=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}};function Go(e){return e instanceof os&&"AccountTakedown"===e.error?new jo(e):e}function qo(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.server.listAppPasswords#appPassword"===e.$type}function Ho(e){return gs.validate("com.atproto.server.listAppPasswords#appPassword",e)}var Xo={};c(Xo,{AccountTakedownError:()=>zo,toKnownErr:()=>$o});var zo=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}};function $o(e){return e instanceof os&&"AccountTakedown"===e.error?new zo(e):e}var Wo={};function Yo(e){return e}c(Wo,{toKnownErr:()=>Yo});var Zo={};function Qo(e){return e}c(Zo,{toKnownErr:()=>Qo});var Jo={};function el(e){return e}c(Jo,{toKnownErr:()=>el});var tl={};function rl(e){return e}c(tl,{toKnownErr:()=>rl});var nl={};function il(e){return e}c(nl,{toKnownErr:()=>il});var sl={};c(sl,{ExpiredTokenError:()=>al,InvalidTokenError:()=>ol,toKnownErr:()=>ll});var al=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}},ol=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}};function ll(e){if(e instanceof os){if("ExpiredToken"===e.error)return new al(e);if("InvalidToken"===e.error)return new ol(e)}return e}var cl={};function ul(e){return e}c(cl,{toKnownErr:()=>ul});var dl={};c(dl,{ExpiredTokenError:()=>fl,InvalidTokenError:()=>pl,TokenRequiredError:()=>hl,toKnownErr:()=>ml});var fl=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}},pl=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}},hl=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}};function ml(e){if(e instanceof os){if("ExpiredToken"===e.error)return new fl(e);if("InvalidToken"===e.error)return new pl(e);if("TokenRequired"===e.error)return new hl(e)}return e}var gl={};function yl(e){return e}c(gl,{toKnownErr:()=>yl});var vl={};function El(e){return e}c(vl,{toKnownErr:()=>El});var bl={};function Tl(e){return e}c(bl,{toKnownErr:()=>Tl});var Rl={};c(Rl,{HeadNotFoundError:()=>Sl,toKnownErr:()=>Al});var Sl=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}};function Al(e){return e instanceof os&&"HeadNotFound"===e.error?new Sl(e):e}var Ll={};c(Ll,{RepoNotFoundError:()=>wl,toKnownErr:()=>Cl});var wl=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}};function Cl(e){return e instanceof os&&"RepoNotFound"===e.error?new wl(e):e}var kl={};function xl(e){return e}c(kl,{toKnownErr:()=>xl});var _l={};function Dl(e){return e}c(_l,{toKnownErr:()=>Dl});var Il={};function Bl(e){return e}c(Il,{toKnownErr:()=>Bl});var Pl={};function Ul(e){return e}function Nl(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.sync.listRepos#repo"===e.$type}function Ol(e){return gs.validate("com.atproto.sync.listRepos#repo",e)}c(Pl,{isRepo:()=>Nl,toKnownErr:()=>Ul,validateRepo:()=>Ol});var Kl={};function Fl(e){return e}c(Kl,{toKnownErr:()=>Fl});var Ml={};function Vl(e){return e}c(Ml,{toKnownErr:()=>Vl});var jl={};function Gl(e){return e}c(jl,{toKnownErr:()=>Gl});var ql={};function Hl(e){return e}c(ql,{toKnownErr:()=>Hl});var Xl={};function zl(e){return e}c(Xl,{toKnownErr:()=>zl});var $l={};function Wl(e){return e}c($l,{toKnownErr:()=>Wl});var Yl={};function Zl(e){return e}c(Yl,{toKnownErr:()=>Zl});var Ql={};c(Ql,{HandleNotAvailableError:()=>rc,IncompatibleDidDocError:()=>sc,InvalidHandleError:()=>Jl,InvalidInviteCodeError:()=>tc,InvalidPasswordError:()=>ec,UnresolvableDidError:()=>ic,UnsupportedDomainError:()=>nc,toKnownErr:()=>ac});var Jl=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}},ec=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}},tc=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}},rc=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}},nc=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}},ic=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}},sc=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}};function ac(e){if(e instanceof os){if("InvalidHandle"===e.error)return new Jl(e);if("InvalidPassword"===e.error)return new ec(e);if("InvalidInviteCode"===e.error)return new tc(e);if("HandleNotAvailable"===e.error)return new rc(e);if("UnsupportedDomain"===e.error)return new nc(e);if("UnresolvableDid"===e.error)return new ic(e);if("IncompatibleDidDoc"===e.error)return new sc(e)}return e}var oc={};function lc(e){return e}c(oc,{toKnownErr:()=>lc});var cc={};function uc(e){return e}c(cc,{toKnownErr:()=>uc});var dc={};function fc(e){return e}c(dc,{toKnownErr:()=>fc});var pc={};function hc(e){return e}c(pc,{toKnownErr:()=>hc});var mc={};function gc(e){return e}c(mc,{toKnownErr:()=>gc});var yc={};function vc(e){return e}c(yc,{toKnownErr:()=>vc});var Ec={};function bc(e){return e}c(Ec,{toKnownErr:()=>bc});var Tc={};function Rc(e){return e}function Sc(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.feed.describeFeedGenerator#feed"===e.$type}function Ac(e){return gs.validate("app.bsky.feed.describeFeedGenerator#feed",e)}function Lc(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.feed.describeFeedGenerator#links"===e.$type}function wc(e){return gs.validate("app.bsky.feed.describeFeedGenerator#links",e)}c(Tc,{isFeed:()=>Sc,isLinks:()=>Lc,toKnownErr:()=>Rc,validateFeed:()=>Ac,validateLinks:()=>wc});var Cc={};function kc(e){return e}c(Cc,{toKnownErr:()=>kc});var xc={};c(xc,{BlockedActorError:()=>_c,BlockedByActorError:()=>Dc,toKnownErr:()=>Ic});var _c=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}},Dc=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}};function Ic(e){if(e instanceof os){if("BlockedActor"===e.error)return new _c(e);if("BlockedByActor"===e.error)return new Dc(e)}return e}var Bc={};c(Bc,{BlockedActorError:()=>Pc,BlockedByActorError:()=>Uc,toKnownErr:()=>Nc});var Pc=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}},Uc=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}};function Nc(e){if(e instanceof os){if("BlockedActor"===e.error)return new Pc(e);if("BlockedByActor"===e.error)return new Uc(e)}return e}var Oc={};c(Oc,{UnknownFeedError:()=>Kc,toKnownErr:()=>Fc});var Kc=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}};function Fc(e){return e instanceof os&&"UnknownFeed"===e.error?new Kc(e):e}var Mc={};function Vc(e){return e}c(Mc,{toKnownErr:()=>Vc});var jc={};function Gc(e){return e}c(jc,{toKnownErr:()=>Gc});var qc={};c(qc,{UnknownFeedError:()=>Hc,toKnownErr:()=>Xc});var Hc=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}};function Xc(e){return e instanceof os&&"UnknownFeed"===e.error?new Hc(e):e}var zc={};function $c(e){return e}function Wc(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.feed.getLikes#like"===e.$type}function Yc(e){return gs.validate("app.bsky.feed.getLikes#like",e)}c(zc,{isLike:()=>Wc,toKnownErr:()=>$c,validateLike:()=>Yc});var Zc={};c(Zc,{UnknownListError:()=>Qc,toKnownErr:()=>Jc});var Qc=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}};function Jc(e){return e instanceof os&&"UnknownList"===e.error?new Qc(e):e}var eu={};c(eu,{NotFoundError:()=>tu,toKnownErr:()=>ru});var tu=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}};function ru(e){return e instanceof os&&"NotFound"===e.error?new tu(e):e}var nu={};function iu(e){return e}c(nu,{toKnownErr:()=>iu});var su={};function au(e){return e}c(su,{toKnownErr:()=>au});var ou={};function lu(e){return e}c(ou,{toKnownErr:()=>lu});var cu={};function uu(e){return e}c(cu,{toKnownErr:()=>uu});var du={};c(du,{BadQueryStringError:()=>fu,toKnownErr:()=>pu});var fu=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}};function pu(e){return e instanceof os&&"BadQueryString"===e.error?new fu(e):e}var hu={};function mu(e){return e}c(hu,{toKnownErr:()=>mu});var gu={};function yu(e){return e}c(gu,{toKnownErr:()=>yu});var vu={};function Eu(e){return e}c(vu,{toKnownErr:()=>Eu});var bu={};function Tu(e){return e}c(bu,{toKnownErr:()=>Tu});var Ru={};function Su(e){return e}c(Ru,{toKnownErr:()=>Su});var Au={};function Lu(e){return e}c(Au,{toKnownErr:()=>Lu});var wu={};function Cu(e){return e}c(wu,{toKnownErr:()=>Cu});var ku={};function xu(e){return e}c(ku,{toKnownErr:()=>xu});var _u={};c(_u,{ActorNotFoundError:()=>Du,toKnownErr:()=>Iu});var Du=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}};function Iu(e){return e instanceof os&&"ActorNotFound"===e.error?new Du(e):e}var Bu={};function Pu(e){return e}c(Bu,{toKnownErr:()=>Pu});var Uu={};function Nu(e){return e}c(Uu,{toKnownErr:()=>Nu});var Ou={};function Ku(e){return e}c(Ou,{toKnownErr:()=>Ku});var Fu={};function Mu(e){return e}c(Fu,{toKnownErr:()=>Mu});var Vu={};function ju(e){return e}c(Vu,{toKnownErr:()=>ju});var Gu={};function qu(e){return e}c(Gu,{toKnownErr:()=>qu});var Hu={};function Xu(e){return e}function zu(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.notification.listNotifications#notification"===e.$type}function $u(e){return gs.validate("app.bsky.notification.listNotifications#notification",e)}c(Hu,{isNotification:()=>zu,toKnownErr:()=>Xu,validateNotification:()=>$u});var Wu={};function Yu(e){return e}c(Wu,{toKnownErr:()=>Yu});var Zu={};function Qu(e){return e}c(Zu,{toKnownErr:()=>Qu});var Ju={};function ed(e){return e}c(Ju,{toKnownErr:()=>ed});var td={};function rd(e){return e}function nd(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.unspecced.getTaggedSuggestions#suggestion"===e.$type}function id(e){return gs.validate("app.bsky.unspecced.getTaggedSuggestions#suggestion",e)}c(td,{isSuggestion:()=>nd,toKnownErr:()=>rd,validateSuggestion:()=>id});var sd={};c(sd,{BadQueryStringError:()=>ad,toKnownErr:()=>od});var ad=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}};function od(e){return e instanceof os&&"BadQueryString"===e.error?new ad(e):e}var ld={};c(ld,{BadQueryStringError:()=>cd,toKnownErr:()=>ud});var cd=class extends os{constructor(e){super(e.status,e.error,e.message,e.headers)}};function ud(e){return e instanceof os&&"BadQueryString"===e.error?new cd(e):e}var dd={};function fd(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.admin.defs#statusAttr"===e.$type}function pd(e){return gs.validate("com.atproto.admin.defs#statusAttr",e)}function hd(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.admin.defs#modEventView"===e.$type}function md(e){return gs.validate("com.atproto.admin.defs#modEventView",e)}function gd(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.admin.defs#modEventViewDetail"===e.$type}function yd(e){return gs.validate("com.atproto.admin.defs#modEventViewDetail",e)}function vd(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.admin.defs#reportView"===e.$type}function Ed(e){return gs.validate("com.atproto.admin.defs#reportView",e)}function bd(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.admin.defs#subjectStatusView"===e.$type}function Td(e){return gs.validate("com.atproto.admin.defs#subjectStatusView",e)}function Rd(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.admin.defs#reportViewDetail"===e.$type}function Sd(e){return gs.validate("com.atproto.admin.defs#reportViewDetail",e)}function Ad(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.admin.defs#repoView"===e.$type}function Ld(e){return gs.validate("com.atproto.admin.defs#repoView",e)}function wd(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.admin.defs#repoViewDetail"===e.$type}function Cd(e){return gs.validate("com.atproto.admin.defs#repoViewDetail",e)}function kd(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.admin.defs#accountView"===e.$type}function xd(e){return gs.validate("com.atproto.admin.defs#accountView",e)}function _d(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.admin.defs#repoViewNotFound"===e.$type}function Dd(e){return gs.validate("com.atproto.admin.defs#repoViewNotFound",e)}function Id(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.admin.defs#repoRef"===e.$type}function Bd(e){return gs.validate("com.atproto.admin.defs#repoRef",e)}function Pd(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.admin.defs#repoBlobRef"===e.$type}function Ud(e){return gs.validate("com.atproto.admin.defs#repoBlobRef",e)}function Nd(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.admin.defs#recordView"===e.$type}function Od(e){return gs.validate("com.atproto.admin.defs#recordView",e)}function Kd(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.admin.defs#recordViewDetail"===e.$type}function Fd(e){return gs.validate("com.atproto.admin.defs#recordViewDetail",e)}function Md(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.admin.defs#recordViewNotFound"===e.$type}function Vd(e){return gs.validate("com.atproto.admin.defs#recordViewNotFound",e)}function jd(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.admin.defs#moderation"===e.$type}function Gd(e){return gs.validate("com.atproto.admin.defs#moderation",e)}function qd(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.admin.defs#moderationDetail"===e.$type}function Hd(e){return gs.validate("com.atproto.admin.defs#moderationDetail",e)}function Xd(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.admin.defs#blobView"===e.$type}function zd(e){return gs.validate("com.atproto.admin.defs#blobView",e)}function $d(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.admin.defs#imageDetails"===e.$type}function Wd(e){return gs.validate("com.atproto.admin.defs#imageDetails",e)}function Yd(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.admin.defs#videoDetails"===e.$type}function Zd(e){return gs.validate("com.atproto.admin.defs#videoDetails",e)}c(dd,{REVIEWCLOSED:()=>ef,REVIEWESCALATED:()=>Jd,REVIEWOPEN:()=>Qd,isAccountView:()=>kd,isBlobView:()=>Xd,isCommunicationTemplateView:()=>Af,isImageDetails:()=>$d,isModEventAcknowledge:()=>hf,isModEventComment:()=>lf,isModEventEmail:()=>Rf,isModEventEscalate:()=>gf,isModEventLabel:()=>ff,isModEventMute:()=>vf,isModEventReport:()=>uf,isModEventResolveAppeal:()=>af,isModEventReverseTakedown:()=>nf,isModEventTakedown:()=>tf,isModEventUnmute:()=>bf,isModEventView:()=>hd,isModEventViewDetail:()=>gd,isModeration:()=>jd,isModerationDetail:()=>qd,isRecordView:()=>Nd,isRecordViewDetail:()=>Kd,isRecordViewNotFound:()=>Md,isRepoBlobRef:()=>Pd,isRepoRef:()=>Id,isRepoView:()=>Ad,isRepoViewDetail:()=>wd,isRepoViewNotFound:()=>_d,isReportView:()=>vd,isReportViewDetail:()=>Rd,isStatusAttr:()=>fd,isSubjectStatusView:()=>bd,isVideoDetails:()=>Yd,validateAccountView:()=>xd,validateBlobView:()=>zd,validateCommunicationTemplateView:()=>Lf,validateImageDetails:()=>Wd,validateModEventAcknowledge:()=>mf,validateModEventComment:()=>cf,validateModEventEmail:()=>Sf,validateModEventEscalate:()=>yf,validateModEventLabel:()=>pf,validateModEventMute:()=>Ef,validateModEventReport:()=>df,validateModEventResolveAppeal:()=>of,validateModEventReverseTakedown:()=>sf,validateModEventTakedown:()=>rf,validateModEventUnmute:()=>Tf,validateModEventView:()=>md,validateModEventViewDetail:()=>yd,validateModeration:()=>Gd,validateModerationDetail:()=>Hd,validateRecordView:()=>Od,validateRecordViewDetail:()=>Fd,validateRecordViewNotFound:()=>Vd,validateRepoBlobRef:()=>Ud,validateRepoRef:()=>Bd,validateRepoView:()=>Ld,validateRepoViewDetail:()=>Cd,validateRepoViewNotFound:()=>Dd,validateReportView:()=>Ed,validateReportViewDetail:()=>Sd,validateStatusAttr:()=>pd,validateSubjectStatusView:()=>Td,validateVideoDetails:()=>Zd});var Qd="com.atproto.admin.defs#reviewOpen",Jd="com.atproto.admin.defs#reviewEscalated",ef="com.atproto.admin.defs#reviewClosed";function tf(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.admin.defs#modEventTakedown"===e.$type}function rf(e){return gs.validate("com.atproto.admin.defs#modEventTakedown",e)}function nf(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.admin.defs#modEventReverseTakedown"===e.$type}function sf(e){return gs.validate("com.atproto.admin.defs#modEventReverseTakedown",e)}function af(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.admin.defs#modEventResolveAppeal"===e.$type}function of(e){return gs.validate("com.atproto.admin.defs#modEventResolveAppeal",e)}function lf(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.admin.defs#modEventComment"===e.$type}function cf(e){return gs.validate("com.atproto.admin.defs#modEventComment",e)}function uf(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.admin.defs#modEventReport"===e.$type}function df(e){return gs.validate("com.atproto.admin.defs#modEventReport",e)}function ff(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.admin.defs#modEventLabel"===e.$type}function pf(e){return gs.validate("com.atproto.admin.defs#modEventLabel",e)}function hf(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.admin.defs#modEventAcknowledge"===e.$type}function mf(e){return gs.validate("com.atproto.admin.defs#modEventAcknowledge",e)}function gf(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.admin.defs#modEventEscalate"===e.$type}function yf(e){return gs.validate("com.atproto.admin.defs#modEventEscalate",e)}function vf(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.admin.defs#modEventMute"===e.$type}function Ef(e){return gs.validate("com.atproto.admin.defs#modEventMute",e)}function bf(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.admin.defs#modEventUnmute"===e.$type}function Tf(e){return gs.validate("com.atproto.admin.defs#modEventUnmute",e)}function Rf(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.admin.defs#modEventEmail"===e.$type}function Sf(e){return gs.validate("com.atproto.admin.defs#modEventEmail",e)}function Af(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.admin.defs#communicationTemplateView"===e.$type}function Lf(e){return gs.validate("com.atproto.admin.defs#communicationTemplateView",e)}var wf={};function Cf(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.label.defs#label"===e.$type}function kf(e){return gs.validate("com.atproto.label.defs#label",e)}function xf(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.label.defs#selfLabels"===e.$type}function _f(e){return gs.validate("com.atproto.label.defs#selfLabels",e)}function Df(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.label.defs#selfLabel"===e.$type}function If(e){return gs.validate("com.atproto.label.defs#selfLabel",e)}c(wf,{isLabel:()=>Cf,isSelfLabel:()=>Df,isSelfLabels:()=>xf,validateLabel:()=>kf,validateSelfLabel:()=>If,validateSelfLabels:()=>_f});var Bf={};function Pf(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.label.subscribeLabels#labels"===e.$type}function Uf(e){return gs.validate("com.atproto.label.subscribeLabels#labels",e)}function Nf(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.label.subscribeLabels#info"===e.$type}function Of(e){return gs.validate("com.atproto.label.subscribeLabels#info",e)}c(Bf,{isInfo:()=>Nf,isLabels:()=>Pf,validateInfo:()=>Of,validateLabels:()=>Uf});var Kf={};c(Kf,{REASONAPPEAL:()=>Hf,REASONMISLEADING:()=>Vf,REASONOTHER:()=>qf,REASONRUDE:()=>Gf,REASONSEXUAL:()=>jf,REASONSPAM:()=>Ff,REASONVIOLATION:()=>Mf});var Ff="com.atproto.moderation.defs#reasonSpam",Mf="com.atproto.moderation.defs#reasonViolation",Vf="com.atproto.moderation.defs#reasonMisleading",jf="com.atproto.moderation.defs#reasonSexual",Gf="com.atproto.moderation.defs#reasonRude",qf="com.atproto.moderation.defs#reasonOther",Hf="com.atproto.moderation.defs#reasonAppeal",Xf={};function zf(e){return Ta(e)&&Ra(e,"$type")&&("com.atproto.repo.strongRef#main"===e.$type||"com.atproto.repo.strongRef"===e.$type)}function $f(e){return gs.validate("com.atproto.repo.strongRef#main",e)}c(Xf,{isMain:()=>zf,validateMain:()=>$f});var Wf={};function Yf(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.server.defs#inviteCode"===e.$type}function Zf(e){return gs.validate("com.atproto.server.defs#inviteCode",e)}function Qf(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.server.defs#inviteCodeUse"===e.$type}function Jf(e){return gs.validate("com.atproto.server.defs#inviteCodeUse",e)}c(Wf,{isInviteCode:()=>Yf,isInviteCodeUse:()=>Qf,validateInviteCode:()=>Zf,validateInviteCodeUse:()=>Jf});var ep={};function tp(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.sync.subscribeRepos#commit"===e.$type}function rp(e){return gs.validate("com.atproto.sync.subscribeRepos#commit",e)}function np(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.sync.subscribeRepos#handle"===e.$type}function ip(e){return gs.validate("com.atproto.sync.subscribeRepos#handle",e)}function sp(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.sync.subscribeRepos#migrate"===e.$type}function ap(e){return gs.validate("com.atproto.sync.subscribeRepos#migrate",e)}function op(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.sync.subscribeRepos#tombstone"===e.$type}function lp(e){return gs.validate("com.atproto.sync.subscribeRepos#tombstone",e)}function cp(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.sync.subscribeRepos#info"===e.$type}function up(e){return gs.validate("com.atproto.sync.subscribeRepos#info",e)}function dp(e){return Ta(e)&&Ra(e,"$type")&&"com.atproto.sync.subscribeRepos#repoOp"===e.$type}function fp(e){return gs.validate("com.atproto.sync.subscribeRepos#repoOp",e)}c(ep,{isCommit:()=>tp,isHandle:()=>np,isInfo:()=>cp,isMigrate:()=>sp,isRepoOp:()=>dp,isTombstone:()=>op,validateCommit:()=>rp,validateHandle:()=>ip,validateInfo:()=>up,validateMigrate:()=>ap,validateRepoOp:()=>fp,validateTombstone:()=>lp});var pp={};function hp(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.actor.defs#profileViewBasic"===e.$type}function mp(e){return gs.validate("app.bsky.actor.defs#profileViewBasic",e)}function gp(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.actor.defs#profileView"===e.$type}function yp(e){return gs.validate("app.bsky.actor.defs#profileView",e)}function vp(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.actor.defs#profileViewDetailed"===e.$type}function Ep(e){return gs.validate("app.bsky.actor.defs#profileViewDetailed",e)}function bp(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.actor.defs#viewerState"===e.$type}function Tp(e){return gs.validate("app.bsky.actor.defs#viewerState",e)}function Rp(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.actor.defs#adultContentPref"===e.$type}function Sp(e){return gs.validate("app.bsky.actor.defs#adultContentPref",e)}function Ap(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.actor.defs#contentLabelPref"===e.$type}function Lp(e){return gs.validate("app.bsky.actor.defs#contentLabelPref",e)}function wp(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.actor.defs#savedFeedsPref"===e.$type}function Cp(e){return gs.validate("app.bsky.actor.defs#savedFeedsPref",e)}function kp(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.actor.defs#personalDetailsPref"===e.$type}function xp(e){return gs.validate("app.bsky.actor.defs#personalDetailsPref",e)}function _p(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.actor.defs#feedViewPref"===e.$type}function Dp(e){return gs.validate("app.bsky.actor.defs#feedViewPref",e)}function Ip(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.actor.defs#threadViewPref"===e.$type}function Bp(e){return gs.validate("app.bsky.actor.defs#threadViewPref",e)}function Pp(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.actor.defs#interestsPref"===e.$type}function Up(e){return gs.validate("app.bsky.actor.defs#interestsPref",e)}c(pp,{isAdultContentPref:()=>Rp,isContentLabelPref:()=>Ap,isFeedViewPref:()=>_p,isInterestsPref:()=>Pp,isPersonalDetailsPref:()=>kp,isProfileView:()=>gp,isProfileViewBasic:()=>hp,isProfileViewDetailed:()=>vp,isSavedFeedsPref:()=>wp,isThreadViewPref:()=>Ip,isViewerState:()=>bp,validateAdultContentPref:()=>Sp,validateContentLabelPref:()=>Lp,validateFeedViewPref:()=>Dp,validateInterestsPref:()=>Up,validatePersonalDetailsPref:()=>xp,validateProfileView:()=>yp,validateProfileViewBasic:()=>mp,validateProfileViewDetailed:()=>Ep,validateSavedFeedsPref:()=>Cp,validateThreadViewPref:()=>Bp,validateViewerState:()=>Tp});var Np={};function Op(e){return Ta(e)&&Ra(e,"$type")&&("app.bsky.actor.profile#main"===e.$type||"app.bsky.actor.profile"===e.$type)}function Kp(e){return gs.validate("app.bsky.actor.profile#main",e)}c(Np,{isRecord:()=>Op,validateRecord:()=>Kp});var Fp={};function Mp(e){return Ta(e)&&Ra(e,"$type")&&("app.bsky.embed.external#main"===e.$type||"app.bsky.embed.external"===e.$type)}function Vp(e){return gs.validate("app.bsky.embed.external#main",e)}function jp(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.embed.external#external"===e.$type}function Gp(e){return gs.validate("app.bsky.embed.external#external",e)}function qp(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.embed.external#view"===e.$type}function Hp(e){return gs.validate("app.bsky.embed.external#view",e)}function Xp(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.embed.external#viewExternal"===e.$type}function zp(e){return gs.validate("app.bsky.embed.external#viewExternal",e)}c(Fp,{isExternal:()=>jp,isMain:()=>Mp,isView:()=>qp,isViewExternal:()=>Xp,validateExternal:()=>Gp,validateMain:()=>Vp,validateView:()=>Hp,validateViewExternal:()=>zp});var $p={};function Wp(e){return Ta(e)&&Ra(e,"$type")&&("app.bsky.embed.images#main"===e.$type||"app.bsky.embed.images"===e.$type)}function Yp(e){return gs.validate("app.bsky.embed.images#main",e)}function Zp(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.embed.images#image"===e.$type}function Qp(e){return gs.validate("app.bsky.embed.images#image",e)}function Jp(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.embed.images#aspectRatio"===e.$type}function eh(e){return gs.validate("app.bsky.embed.images#aspectRatio",e)}function th(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.embed.images#view"===e.$type}function rh(e){return gs.validate("app.bsky.embed.images#view",e)}function nh(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.embed.images#viewImage"===e.$type}function ih(e){return gs.validate("app.bsky.embed.images#viewImage",e)}c($p,{isAspectRatio:()=>Jp,isImage:()=>Zp,isMain:()=>Wp,isView:()=>th,isViewImage:()=>nh,validateAspectRatio:()=>eh,validateImage:()=>Qp,validateMain:()=>Yp,validateView:()=>rh,validateViewImage:()=>ih});var sh={};function ah(e){return Ta(e)&&Ra(e,"$type")&&("app.bsky.embed.record#main"===e.$type||"app.bsky.embed.record"===e.$type)}function oh(e){return gs.validate("app.bsky.embed.record#main",e)}function lh(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.embed.record#view"===e.$type}function ch(e){return gs.validate("app.bsky.embed.record#view",e)}function uh(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.embed.record#viewRecord"===e.$type}function dh(e){return gs.validate("app.bsky.embed.record#viewRecord",e)}function fh(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.embed.record#viewNotFound"===e.$type}function ph(e){return gs.validate("app.bsky.embed.record#viewNotFound",e)}function hh(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.embed.record#viewBlocked"===e.$type}function mh(e){return gs.validate("app.bsky.embed.record#viewBlocked",e)}c(sh,{isMain:()=>ah,isView:()=>lh,isViewBlocked:()=>hh,isViewNotFound:()=>fh,isViewRecord:()=>uh,validateMain:()=>oh,validateView:()=>ch,validateViewBlocked:()=>mh,validateViewNotFound:()=>ph,validateViewRecord:()=>dh});var gh={};function yh(e){return Ta(e)&&Ra(e,"$type")&&("app.bsky.embed.recordWithMedia#main"===e.$type||"app.bsky.embed.recordWithMedia"===e.$type)}function vh(e){return gs.validate("app.bsky.embed.recordWithMedia#main",e)}function Eh(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.embed.recordWithMedia#view"===e.$type}function bh(e){return gs.validate("app.bsky.embed.recordWithMedia#view",e)}c(gh,{isMain:()=>yh,isView:()=>Eh,validateMain:()=>vh,validateView:()=>bh});var Th={};function Rh(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.feed.defs#postView"===e.$type}function Sh(e){return gs.validate("app.bsky.feed.defs#postView",e)}function Ah(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.feed.defs#viewerState"===e.$type}function Lh(e){return gs.validate("app.bsky.feed.defs#viewerState",e)}function wh(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.feed.defs#feedViewPost"===e.$type}function Ch(e){return gs.validate("app.bsky.feed.defs#feedViewPost",e)}function kh(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.feed.defs#replyRef"===e.$type}function xh(e){return gs.validate("app.bsky.feed.defs#replyRef",e)}function _h(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.feed.defs#reasonRepost"===e.$type}function Dh(e){return gs.validate("app.bsky.feed.defs#reasonRepost",e)}function Ih(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.feed.defs#threadViewPost"===e.$type}function Bh(e){return gs.validate("app.bsky.feed.defs#threadViewPost",e)}function Ph(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.feed.defs#notFoundPost"===e.$type}function Uh(e){return gs.validate("app.bsky.feed.defs#notFoundPost",e)}function Nh(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.feed.defs#blockedPost"===e.$type}function Oh(e){return gs.validate("app.bsky.feed.defs#blockedPost",e)}function Kh(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.feed.defs#blockedAuthor"===e.$type}function Fh(e){return gs.validate("app.bsky.feed.defs#blockedAuthor",e)}function Mh(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.feed.defs#generatorView"===e.$type}function Vh(e){return gs.validate("app.bsky.feed.defs#generatorView",e)}function jh(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.feed.defs#generatorViewerState"===e.$type}function Gh(e){return gs.validate("app.bsky.feed.defs#generatorViewerState",e)}function qh(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.feed.defs#skeletonFeedPost"===e.$type}function Hh(e){return gs.validate("app.bsky.feed.defs#skeletonFeedPost",e)}function Xh(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.feed.defs#skeletonReasonRepost"===e.$type}function zh(e){return gs.validate("app.bsky.feed.defs#skeletonReasonRepost",e)}function $h(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.feed.defs#threadgateView"===e.$type}function Wh(e){return gs.validate("app.bsky.feed.defs#threadgateView",e)}c(Th,{isBlockedAuthor:()=>Kh,isBlockedPost:()=>Nh,isFeedViewPost:()=>wh,isGeneratorView:()=>Mh,isGeneratorViewerState:()=>jh,isNotFoundPost:()=>Ph,isPostView:()=>Rh,isReasonRepost:()=>_h,isReplyRef:()=>kh,isSkeletonFeedPost:()=>qh,isSkeletonReasonRepost:()=>Xh,isThreadViewPost:()=>Ih,isThreadgateView:()=>$h,isViewerState:()=>Ah,validateBlockedAuthor:()=>Fh,validateBlockedPost:()=>Oh,validateFeedViewPost:()=>Ch,validateGeneratorView:()=>Vh,validateGeneratorViewerState:()=>Gh,validateNotFoundPost:()=>Uh,validatePostView:()=>Sh,validateReasonRepost:()=>Dh,validateReplyRef:()=>xh,validateSkeletonFeedPost:()=>Hh,validateSkeletonReasonRepost:()=>zh,validateThreadViewPost:()=>Bh,validateThreadgateView:()=>Wh,validateViewerState:()=>Lh});var Yh={};function Zh(e){return Ta(e)&&Ra(e,"$type")&&("app.bsky.feed.generator#main"===e.$type||"app.bsky.feed.generator"===e.$type)}function Qh(e){return gs.validate("app.bsky.feed.generator#main",e)}c(Yh,{isRecord:()=>Zh,validateRecord:()=>Qh});var Jh={};function em(e){return Ta(e)&&Ra(e,"$type")&&("app.bsky.feed.like#main"===e.$type||"app.bsky.feed.like"===e.$type)}function tm(e){return gs.validate("app.bsky.feed.like#main",e)}c(Jh,{isRecord:()=>em,validateRecord:()=>tm});var rm={};function nm(e){return Ta(e)&&Ra(e,"$type")&&("app.bsky.feed.post#main"===e.$type||"app.bsky.feed.post"===e.$type)}function im(e){return gs.validate("app.bsky.feed.post#main",e)}function sm(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.feed.post#replyRef"===e.$type}function am(e){return gs.validate("app.bsky.feed.post#replyRef",e)}function om(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.feed.post#entity"===e.$type}function lm(e){return gs.validate("app.bsky.feed.post#entity",e)}function cm(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.feed.post#textSlice"===e.$type}function um(e){return gs.validate("app.bsky.feed.post#textSlice",e)}c(rm,{isEntity:()=>om,isRecord:()=>nm,isReplyRef:()=>sm,isTextSlice:()=>cm,validateEntity:()=>lm,validateRecord:()=>im,validateReplyRef:()=>am,validateTextSlice:()=>um});var dm={};function fm(e){return Ta(e)&&Ra(e,"$type")&&("app.bsky.feed.repost#main"===e.$type||"app.bsky.feed.repost"===e.$type)}function pm(e){return gs.validate("app.bsky.feed.repost#main",e)}c(dm,{isRecord:()=>fm,validateRecord:()=>pm});var hm={};function mm(e){return Ta(e)&&Ra(e,"$type")&&("app.bsky.feed.threadgate#main"===e.$type||"app.bsky.feed.threadgate"===e.$type)}function gm(e){return gs.validate("app.bsky.feed.threadgate#main",e)}function ym(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.feed.threadgate#mentionRule"===e.$type}function vm(e){return gs.validate("app.bsky.feed.threadgate#mentionRule",e)}function Em(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.feed.threadgate#followingRule"===e.$type}function bm(e){return gs.validate("app.bsky.feed.threadgate#followingRule",e)}function Tm(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.feed.threadgate#listRule"===e.$type}function Rm(e){return gs.validate("app.bsky.feed.threadgate#listRule",e)}c(hm,{isFollowingRule:()=>Em,isListRule:()=>Tm,isMentionRule:()=>ym,isRecord:()=>mm,validateFollowingRule:()=>bm,validateListRule:()=>Rm,validateMentionRule:()=>vm,validateRecord:()=>gm});var Sm={};function Am(e){return Ta(e)&&Ra(e,"$type")&&("app.bsky.graph.block#main"===e.$type||"app.bsky.graph.block"===e.$type)}function Lm(e){return gs.validate("app.bsky.graph.block#main",e)}c(Sm,{isRecord:()=>Am,validateRecord:()=>Lm});var wm={};function Cm(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.graph.defs#listViewBasic"===e.$type}function km(e){return gs.validate("app.bsky.graph.defs#listViewBasic",e)}function xm(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.graph.defs#listView"===e.$type}function _m(e){return gs.validate("app.bsky.graph.defs#listView",e)}function Dm(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.graph.defs#listItemView"===e.$type}function Im(e){return gs.validate("app.bsky.graph.defs#listItemView",e)}c(wm,{CURATELIST:()=>Pm,MODLIST:()=>Bm,isListItemView:()=>Dm,isListView:()=>xm,isListViewBasic:()=>Cm,isListViewerState:()=>Um,isNotFoundActor:()=>Om,isRelationship:()=>Fm,validateListItemView:()=>Im,validateListView:()=>_m,validateListViewBasic:()=>km,validateListViewerState:()=>Nm,validateNotFoundActor:()=>Km,validateRelationship:()=>Mm});var Bm="app.bsky.graph.defs#modlist",Pm="app.bsky.graph.defs#curatelist";function Um(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.graph.defs#listViewerState"===e.$type}function Nm(e){return gs.validate("app.bsky.graph.defs#listViewerState",e)}function Om(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.graph.defs#notFoundActor"===e.$type}function Km(e){return gs.validate("app.bsky.graph.defs#notFoundActor",e)}function Fm(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.graph.defs#relationship"===e.$type}function Mm(e){return gs.validate("app.bsky.graph.defs#relationship",e)}var Vm={};function jm(e){return Ta(e)&&Ra(e,"$type")&&("app.bsky.graph.follow#main"===e.$type||"app.bsky.graph.follow"===e.$type)}function Gm(e){return gs.validate("app.bsky.graph.follow#main",e)}c(Vm,{isRecord:()=>jm,validateRecord:()=>Gm});var qm={};function Hm(e){return Ta(e)&&Ra(e,"$type")&&("app.bsky.graph.list#main"===e.$type||"app.bsky.graph.list"===e.$type)}function Xm(e){return gs.validate("app.bsky.graph.list#main",e)}c(qm,{isRecord:()=>Hm,validateRecord:()=>Xm});var zm={};function $m(e){return Ta(e)&&Ra(e,"$type")&&("app.bsky.graph.listblock#main"===e.$type||"app.bsky.graph.listblock"===e.$type)}function Wm(e){return gs.validate("app.bsky.graph.listblock#main",e)}c(zm,{isRecord:()=>$m,validateRecord:()=>Wm});var Ym={};function Zm(e){return Ta(e)&&Ra(e,"$type")&&("app.bsky.graph.listitem#main"===e.$type||"app.bsky.graph.listitem"===e.$type)}function Qm(e){return gs.validate("app.bsky.graph.listitem#main",e)}c(Ym,{isRecord:()=>Zm,validateRecord:()=>Qm});var Jm={};function eg(e){return Ta(e)&&Ra(e,"$type")&&("app.bsky.richtext.facet#main"===e.$type||"app.bsky.richtext.facet"===e.$type)}function tg(e){return gs.validate("app.bsky.richtext.facet#main",e)}function rg(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.richtext.facet#mention"===e.$type}function ng(e){return gs.validate("app.bsky.richtext.facet#mention",e)}function ig(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.richtext.facet#link"===e.$type}function sg(e){return gs.validate("app.bsky.richtext.facet#link",e)}function ag(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.richtext.facet#tag"===e.$type}function og(e){return gs.validate("app.bsky.richtext.facet#tag",e)}function lg(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.richtext.facet#byteSlice"===e.$type}function cg(e){return gs.validate("app.bsky.richtext.facet#byteSlice",e)}c(Jm,{isByteSlice:()=>lg,isLink:()=>ig,isMain:()=>eg,isMention:()=>rg,isTag:()=>ag,validateByteSlice:()=>cg,validateLink:()=>sg,validateMain:()=>tg,validateMention:()=>ng,validateTag:()=>og});var ug={};function dg(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.unspecced.defs#skeletonSearchPost"===e.$type}function fg(e){return gs.validate("app.bsky.unspecced.defs#skeletonSearchPost",e)}function pg(e){return Ta(e)&&Ra(e,"$type")&&"app.bsky.unspecced.defs#skeletonSearchActor"===e.$type}function hg(e){return gs.validate("app.bsky.unspecced.defs#skeletonSearchActor",e)}c(ug,{isSkeletonSearchActor:()=>pg,isSkeletonSearchPost:()=>dg,validateSkeletonSearchActor:()=>hg,validateSkeletonSearchPost:()=>fg});var mg={DefsReviewOpen:"com.atproto.admin.defs#reviewOpen",DefsReviewEscalated:"com.atproto.admin.defs#reviewEscalated",DefsReviewClosed:"com.atproto.admin.defs#reviewClosed"},gg={DefsReasonSpam:"com.atproto.moderation.defs#reasonSpam",DefsReasonViolation:"com.atproto.moderation.defs#reasonViolation",DefsReasonMisleading:"com.atproto.moderation.defs#reasonMisleading",DefsReasonSexual:"com.atproto.moderation.defs#reasonSexual",DefsReasonRude:"com.atproto.moderation.defs#reasonRude",DefsReasonOther:"com.atproto.moderation.defs#reasonOther",DefsReasonAppeal:"com.atproto.moderation.defs#reasonAppeal"},yg={DefsModlist:"app.bsky.graph.defs#modlist",DefsCuratelist:"app.bsky.graph.defs#curatelist"},vg=class{constructor(){this.xrpc=new fs,this.xrpc.addLexicons(ms)}service(e){return new Eg(this,this.xrpc.service(e))}},Eg=class{constructor(e,t){this._baseClient=e,this.xrpc=t,this.com=new bg(this),this.app=new _g(this)}setHeader(e,t){this.xrpc.setHeader(e,t)}},bg=class{constructor(e){this._service=e,this.atproto=new Tg(e)}},Tg=class{constructor(e){this._service=e,this.admin=new Rg(e),this.identity=new Sg(e),this.label=new Ag(e),this.moderation=new Lg(e),this.repo=new wg(e),this.server=new Cg(e),this.sync=new kg(e),this.temp=new xg(e)}},Rg=class{constructor(e){this._service=e}createCommunicationTemplate(e,t){return this._service.xrpc.call("com.atproto.admin.createCommunicationTemplate",null===t||void 0===t?void 0:t.qp,e,t).catch((e=>{throw e}))}deleteAccount(e,t){return this._service.xrpc.call("com.atproto.admin.deleteAccount",null===t||void 0===t?void 0:t.qp,e,t).catch((e=>{throw e}))}deleteCommunicationTemplate(e,t){return this._service.xrpc.call("com.atproto.admin.deleteCommunicationTemplate",null===t||void 0===t?void 0:t.qp,e,t).catch((e=>{throw e}))}disableAccountInvites(e,t){return this._service.xrpc.call("com.atproto.admin.disableAccountInvites",null===t||void 0===t?void 0:t.qp,e,t).catch((e=>{throw e}))}disableInviteCodes(e,t){return this._service.xrpc.call("com.atproto.admin.disableInviteCodes",null===t||void 0===t?void 0:t.qp,e,t).catch((e=>{throw e}))}emitModerationEvent(e,t){return this._service.xrpc.call("com.atproto.admin.emitModerationEvent",null===t||void 0===t?void 0:t.qp,e,t).catch((e=>{throw xs(e)}))}enableAccountInvites(e,t){return this._service.xrpc.call("com.atproto.admin.enableAccountInvites",null===t||void 0===t?void 0:t.qp,e,t).catch((e=>{throw e}))}getAccountInfo(e,t){return this._service.xrpc.call("com.atproto.admin.getAccountInfo",e,void 0,t).catch((e=>{throw e}))}getAccountInfos(e,t){return this._service.xrpc.call("com.atproto.admin.getAccountInfos",e,void 0,t).catch((e=>{throw e}))}getInviteCodes(e,t){return this._service.xrpc.call("com.atproto.admin.getInviteCodes",e,void 0,t).catch((e=>{throw e}))}getModerationEvent(e,t){return this._service.xrpc.call("com.atproto.admin.getModerationEvent",e,void 0,t).catch((e=>{throw e}))}getRecord(e,t){return this._service.xrpc.call("com.atproto.admin.getRecord",e,void 0,t).catch((e=>{throw js(e)}))}getRepo(e,t){return this._service.xrpc.call("com.atproto.admin.getRepo",e,void 0,t).catch((e=>{throw Hs(e)}))}getSubjectStatus(e,t){return this._service.xrpc.call("com.atproto.admin.getSubjectStatus",e,void 0,t).catch((e=>{throw e}))}listCommunicationTemplates(e,t){return this._service.xrpc.call("com.atproto.admin.listCommunicationTemplates",e,void 0,t).catch((e=>{throw e}))}queryModerationEvents(e,t){return this._service.xrpc.call("com.atproto.admin.queryModerationEvents",e,void 0,t).catch((e=>{throw e}))}queryModerationStatuses(e,t){return this._service.xrpc.call("com.atproto.admin.queryModerationStatuses",e,void 0,t).catch((e=>{throw e}))}searchRepos(e,t){return this._service.xrpc.call("com.atproto.admin.searchRepos",e,void 0,t).catch((e=>{throw e}))}sendEmail(e,t){return this._service.xrpc.call("com.atproto.admin.sendEmail",null===t||void 0===t?void 0:t.qp,e,t).catch((e=>{throw e}))}updateAccountEmail(e,t){return this._service.xrpc.call("com.atproto.admin.updateAccountEmail",null===t||void 0===t?void 0:t.qp,e,t).catch((e=>{throw e}))}updateAccountHandle(e,t){return this._service.xrpc.call("com.atproto.admin.updateAccountHandle",null===t||void 0===t?void 0:t.qp,e,t).catch((e=>{throw e}))}updateCommunicationTemplate(e,t){return this._service.xrpc.call("com.atproto.admin.updateCommunicationTemplate",null===t||void 0===t?void 0:t.qp,e,t).catch((e=>{throw e}))}updateSubjectStatus(e,t){return this._service.xrpc.call("com.atproto.admin.updateSubjectStatus",null===t||void 0===t?void 0:t.qp,e,t).catch((e=>{throw e}))}},Sg=class{constructor(e){this._service=e}resolveHandle(e,t){return this._service.xrpc.call("com.atproto.identity.resolveHandle",e,void 0,t).catch((e=>{throw e}))}updateHandle(e,t){return this._service.xrpc.call("com.atproto.identity.updateHandle",null===t||void 0===t?void 0:t.qp,e,t).catch((e=>{throw e}))}},Ag=class{constructor(e){this._service=e}queryLabels(e,t){return this._service.xrpc.call("com.atproto.label.queryLabels",e,void 0,t).catch((e=>{throw e}))}},Lg=class{constructor(e){this._service=e}createReport(e,t){return this._service.xrpc.call("com.atproto.moderation.createReport",null===t||void 0===t?void 0:t.qp,e,t).catch((e=>{throw e}))}},wg=class{constructor(e){this._service=e}applyWrites(e,t){return this._service.xrpc.call("com.atproto.repo.applyWrites",null===t||void 0===t?void 0:t.qp,e,t).catch((e=>{throw Aa(e)}))}createRecord(e,t){return this._service.xrpc.call("com.atproto.repo.createRecord",null===t||void 0===t?void 0:t.qp,e,t).catch((e=>{throw Ba(e)}))}deleteRecord(e,t){return this._service.xrpc.call("com.atproto.repo.deleteRecord",null===t||void 0===t?void 0:t.qp,e,t).catch((e=>{throw Na(e)}))}describeRepo(e,t){return this._service.xrpc.call("com.atproto.repo.describeRepo",e,void 0,t).catch((e=>{throw e}))}getRecord(e,t){return this._service.xrpc.call("com.atproto.repo.getRecord",e,void 0,t).catch((e=>{throw e}))}listRecords(e,t){return this._service.xrpc.call("com.atproto.repo.listRecords",e,void 0,t).catch((e=>{throw e}))}putRecord(e,t){return this._service.xrpc.call("com.atproto.repo.putRecord",null===t||void 0===t?void 0:t.qp,e,t).catch((e=>{throw za(e)}))}uploadBlob(e,t){return this._service.xrpc.call("com.atproto.repo.uploadBlob",null===t||void 0===t?void 0:t.qp,e,t).catch((e=>{throw e}))}},Cg=class{constructor(e){this._service=e}confirmEmail(e,t){return this._service.xrpc.call("com.atproto.server.confirmEmail",null===t||void 0===t?void 0:t.qp,e,t).catch((e=>{throw to(e)}))}createAccount(e,t){return this._service.xrpc.call("com.atproto.server.createAccount",null===t||void 0===t?void 0:t.qp,e,t).catch((e=>{throw uo(e)}))}createAppPassword(e,t){return this._service.xrpc.call("com.atproto.server.createAppPassword",null===t||void 0===t?void 0:t.qp,e,t).catch((e=>{throw ho(e)}))}createInviteCode(e,t){return this._service.xrpc.call("com.atproto.server.createInviteCode",null===t||void 0===t?void 0:t.qp,e,t).catch((e=>{throw e}))}createInviteCodes(e,t){return this._service.xrpc.call("com.atproto.server.createInviteCodes",null===t||void 0===t?void 0:t.qp,e,t).catch((e=>{throw e}))}createSession(e,t){return this._service.xrpc.call("com.atproto.server.createSession",null===t||void 0===t?void 0:t.qp,e,t).catch((e=>{throw Lo(e)}))}deleteAccount(e,t){return this._service.xrpc.call("com.atproto.server.deleteAccount",null===t||void 0===t?void 0:t.qp,e,t).catch((e=>{throw xo(e)}))}deleteSession(e,t){return this._service.xrpc.call("com.atproto.server.deleteSession",null===t||void 0===t?void 0:t.qp,e,t).catch((e=>{throw e}))}describeServer(e,t){return this._service.xrpc.call("com.atproto.server.describeServer",e,void 0,t).catch((e=>{throw e}))}getAccountInviteCodes(e,t){return this._service.xrpc.call("com.atproto.server.getAccountInviteCodes",e,void 0,t).catch((e=>{throw Ko(e)}))}getSession(e,t){return this._service.xrpc.call("com.atproto.server.getSession",e,void 0,t).catch((e=>{throw e}))}listAppPasswords(e,t){return this._service.xrpc.call("com.atproto.server.listAppPasswords",e,void 0,t).catch((e=>{throw Go(e)}))}refreshSession(e,t){return this._service.xrpc.call("com.atproto.server.refreshSession",null===t||void 0===t?void 0:t.qp,e,t).catch((e=>{throw $o(e)}))}requestAccountDelete(e,t){return this._service.xrpc.call("com.atproto.server.requestAccountDelete",null===t||void 0===t?void 0:t.qp,e,t).catch((e=>{throw e}))}requestEmailConfirmation(e,t){return this._service.xrpc.call("com.atproto.server.requestEmailConfirmation",null===t||void 0===t?void 0:t.qp,e,t).catch((e=>{throw e}))}requestEmailUpdate(e,t){return this._service.xrpc.call("com.atproto.server.requestEmailUpdate",null===t||void 0===t?void 0:t.qp,e,t).catch((e=>{throw e}))}requestPasswordReset(e,t){return this._service.xrpc.call("com.atproto.server.requestPasswordReset",null===t||void 0===t?void 0:t.qp,e,t).catch((e=>{throw e}))}reserveSigningKey(e,t){return this._service.xrpc.call("com.atproto.server.reserveSigningKey",null===t||void 0===t?void 0:t.qp,e,t).catch((e=>{throw e}))}resetPassword(e,t){return this._service.xrpc.call("com.atproto.server.resetPassword",null===t||void 0===t?void 0:t.qp,e,t).catch((e=>{throw ll(e)}))}revokeAppPassword(e,t){return this._service.xrpc.call("com.atproto.server.revokeAppPassword",null===t||void 0===t?void 0:t.qp,e,t).catch((e=>{throw e}))}updateEmail(e,t){return this._service.xrpc.call("com.atproto.server.updateEmail",null===t||void 0===t?void 0:t.qp,e,t).catch((e=>{throw ml(e)}))}},kg=class{constructor(e){this._service=e}getBlob(e,t){return this._service.xrpc.call("com.atproto.sync.getBlob",e,void 0,t).catch((e=>{throw e}))}getBlocks(e,t){return this._service.xrpc.call("com.atproto.sync.getBlocks",e,void 0,t).catch((e=>{throw e}))}getCheckout(e,t){return this._service.xrpc.call("com.atproto.sync.getCheckout",e,void 0,t).catch((e=>{throw e}))}getHead(e,t){return this._service.xrpc.call("com.atproto.sync.getHead",e,void 0,t).catch((e=>{throw Al(e)}))}getLatestCommit(e,t){return this._service.xrpc.call("com.atproto.sync.getLatestCommit",e,void 0,t).catch((e=>{throw Cl(e)}))}getRecord(e,t){return this._service.xrpc.call("com.atproto.sync.getRecord",e,void 0,t).catch((e=>{throw e}))}getRepo(e,t){return this._service.xrpc.call("com.atproto.sync.getRepo",e,void 0,t).catch((e=>{throw e}))}listBlobs(e,t){return this._service.xrpc.call("com.atproto.sync.listBlobs",e,void 0,t).catch((e=>{throw e}))}listRepos(e,t){return this._service.xrpc.call("com.atproto.sync.listRepos",e,void 0,t).catch((e=>{throw e}))}notifyOfUpdate(e,t){return this._service.xrpc.call("com.atproto.sync.notifyOfUpdate",null===t||void 0===t?void 0:t.qp,e,t).catch((e=>{throw e}))}requestCrawl(e,t){return this._service.xrpc.call("com.atproto.sync.requestCrawl",null===t||void 0===t?void 0:t.qp,e,t).catch((e=>{throw e}))}},xg=class{constructor(e){this._service=e}checkSignupQueue(e,t){return this._service.xrpc.call("com.atproto.temp.checkSignupQueue",e,void 0,t).catch((e=>{throw e}))}fetchLabels(e,t){return this._service.xrpc.call("com.atproto.temp.fetchLabels",e,void 0,t).catch((e=>{throw e}))}importRepo(e,t){return this._service.xrpc.call("com.atproto.temp.importRepo",null===t||void 0===t?void 0:t.qp,e,t).catch((e=>{throw e}))}pushBlob(e,t){return this._service.xrpc.call("com.atproto.temp.pushBlob",null===t||void 0===t?void 0:t.qp,e,t).catch((e=>{throw e}))}requestPhoneVerification(e,t){return this._service.xrpc.call("com.atproto.temp.requestPhoneVerification",null===t||void 0===t?void 0:t.qp,e,t).catch((e=>{throw e}))}transferAccount(e,t){return this._service.xrpc.call("com.atproto.temp.transferAccount",null===t||void 0===t?void 0:t.qp,e,t).catch((e=>{throw ac(e)}))}},_g=class{constructor(e){this._service=e,this.bsky=new Dg(e)}},Dg=class{constructor(e){this._service=e,this.actor=new Ig(e),this.embed=new Pg(e),this.feed=new Ug(e),this.graph=new Vg(e),this.notification=new zg(e),this.richtext=new $g(e),this.unspecced=new Wg(e)}},Ig=class{constructor(e){this._service=e,this.profile=new Bg(e)}getPreferences(e,t){return this._service.xrpc.call("app.bsky.actor.getPreferences",e,void 0,t).catch((e=>{throw e}))}getProfile(e,t){return this._service.xrpc.call("app.bsky.actor.getProfile",e,void 0,t).catch((e=>{throw e}))}getProfiles(e,t){return this._service.xrpc.call("app.bsky.actor.getProfiles",e,void 0,t).catch((e=>{throw e}))}getSuggestions(e,t){return this._service.xrpc.call("app.bsky.actor.getSuggestions",e,void 0,t).catch((e=>{throw e}))}putPreferences(e,t){return this._service.xrpc.call("app.bsky.actor.putPreferences",null===t||void 0===t?void 0:t.qp,e,t).catch((e=>{throw e}))}searchActors(e,t){return this._service.xrpc.call("app.bsky.actor.searchActors",e,void 0,t).catch((e=>{throw e}))}searchActorsTypeahead(e,t){return this._service.xrpc.call("app.bsky.actor.searchActorsTypeahead",e,void 0,t).catch((e=>{throw e}))}},Bg=class{constructor(e){this._service=e}async list(e){return(await this._service.xrpc.call("com.atproto.repo.listRecords",{collection:"app.bsky.actor.profile",...e})).data}async get(e){return(await this._service.xrpc.call("com.atproto.repo.getRecord",{collection:"app.bsky.actor.profile",...e})).data}async create(e,t,r){t.$type="app.bsky.actor.profile";return(await this._service.xrpc.call("com.atproto.repo.createRecord",void 0,{collection:"app.bsky.actor.profile",rkey:"self",...e,record:t},{encoding:"application/json",headers:r})).data}async delete(e,t){await this._service.xrpc.call("com.atproto.repo.deleteRecord",void 0,{collection:"app.bsky.actor.profile",...e},{headers:t})}},Pg=class{constructor(e){this._service=e}},Ug=class{constructor(e){this._service=e,this.generator=new Ng(e),this.like=new Og(e),this.post=new Kg(e),this.repost=new Fg(e),this.threadgate=new Mg(e)}describeFeedGenerator(e,t){return this._service.xrpc.call("app.bsky.feed.describeFeedGenerator",e,void 0,t).catch((e=>{throw e}))}getActorFeeds(e,t){return this._service.xrpc.call("app.bsky.feed.getActorFeeds",e,void 0,t).catch((e=>{throw e}))}getActorLikes(e,t){return this._service.xrpc.call("app.bsky.feed.getActorLikes",e,void 0,t).catch((e=>{throw Ic(e)}))}getAuthorFeed(e,t){return this._service.xrpc.call("app.bsky.feed.getAuthorFeed",e,void 0,t).catch((e=>{throw Nc(e)}))}getFeed(e,t){return this._service.xrpc.call("app.bsky.feed.getFeed",e,void 0,t).catch((e=>{throw Fc(e)}))}getFeedGenerator(e,t){return this._service.xrpc.call("app.bsky.feed.getFeedGenerator",e,void 0,t).catch((e=>{throw e}))}getFeedGenerators(e,t){return this._service.xrpc.call("app.bsky.feed.getFeedGenerators",e,void 0,t).catch((e=>{throw e}))}getFeedSkeleton(e,t){return this._service.xrpc.call("app.bsky.feed.getFeedSkeleton",e,void 0,t).catch((e=>{throw Xc(e)}))}getLikes(e,t){return this._service.xrpc.call("app.bsky.feed.getLikes",e,void 0,t).catch((e=>{throw e}))}getListFeed(e,t){return this._service.xrpc.call("app.bsky.feed.getListFeed",e,void 0,t).catch((e=>{throw Jc(e)}))}getPostThread(e,t){return this._service.xrpc.call("app.bsky.feed.getPostThread",e,void 0,t).catch((e=>{throw ru(e)}))}getPosts(e,t){return this._service.xrpc.call("app.bsky.feed.getPosts",e,void 0,t).catch((e=>{throw e}))}getRepostedBy(e,t){return this._service.xrpc.call("app.bsky.feed.getRepostedBy",e,void 0,t).catch((e=>{throw e}))}getSuggestedFeeds(e,t){return this._service.xrpc.call("app.bsky.feed.getSuggestedFeeds",e,void 0,t).catch((e=>{throw e}))}getTimeline(e,t){return this._service.xrpc.call("app.bsky.feed.getTimeline",e,void 0,t).catch((e=>{throw e}))}searchPosts(e,t){return this._service.xrpc.call("app.bsky.feed.searchPosts",e,void 0,t).catch((e=>{throw pu(e)}))}},Ng=class{constructor(e){this._service=e}async list(e){return(await this._service.xrpc.call("com.atproto.repo.listRecords",{collection:"app.bsky.feed.generator",...e})).data}async get(e){return(await this._service.xrpc.call("com.atproto.repo.getRecord",{collection:"app.bsky.feed.generator",...e})).data}async create(e,t,r){t.$type="app.bsky.feed.generator";return(await this._service.xrpc.call("com.atproto.repo.createRecord",void 0,{collection:"app.bsky.feed.generator",...e,record:t},{encoding:"application/json",headers:r})).data}async delete(e,t){await this._service.xrpc.call("com.atproto.repo.deleteRecord",void 0,{collection:"app.bsky.feed.generator",...e},{headers:t})}},Og=class{constructor(e){this._service=e}async list(e){return(await this._service.xrpc.call("com.atproto.repo.listRecords",{collection:"app.bsky.feed.like",...e})).data}async get(e){return(await this._service.xrpc.call("com.atproto.repo.getRecord",{collection:"app.bsky.feed.like",...e})).data}async create(e,t,r){t.$type="app.bsky.feed.like";return(await this._service.xrpc.call("com.atproto.repo.createRecord",void 0,{collection:"app.bsky.feed.like",...e,record:t},{encoding:"application/json",headers:r})).data}async delete(e,t){await this._service.xrpc.call("com.atproto.repo.deleteRecord",void 0,{collection:"app.bsky.feed.like",...e},{headers:t})}},Kg=class{constructor(e){this._service=e}async list(e){return(await this._service.xrpc.call("com.atproto.repo.listRecords",{collection:"app.bsky.feed.post",...e})).data}async get(e){return(await this._service.xrpc.call("com.atproto.repo.getRecord",{collection:"app.bsky.feed.post",...e})).data}async create(e,t,r){t.$type="app.bsky.feed.post";return(await this._service.xrpc.call("com.atproto.repo.createRecord",void 0,{collection:"app.bsky.feed.post",...e,record:t},{encoding:"application/json",headers:r})).data}async delete(e,t){await this._service.xrpc.call("com.atproto.repo.deleteRecord",void 0,{collection:"app.bsky.feed.post",...e},{headers:t})}},Fg=class{constructor(e){this._service=e}async list(e){return(await this._service.xrpc.call("com.atproto.repo.listRecords",{collection:"app.bsky.feed.repost",...e})).data}async get(e){return(await this._service.xrpc.call("com.atproto.repo.getRecord",{collection:"app.bsky.feed.repost",...e})).data}async create(e,t,r){t.$type="app.bsky.feed.repost";return(await this._service.xrpc.call("com.atproto.repo.createRecord",void 0,{collection:"app.bsky.feed.repost",...e,record:t},{encoding:"application/json",headers:r})).data}async delete(e,t){await this._service.xrpc.call("com.atproto.repo.deleteRecord",void 0,{collection:"app.bsky.feed.repost",...e},{headers:t})}},Mg=class{constructor(e){this._service=e}async list(e){return(await this._service.xrpc.call("com.atproto.repo.listRecords",{collection:"app.bsky.feed.threadgate",...e})).data}async get(e){return(await this._service.xrpc.call("com.atproto.repo.getRecord",{collection:"app.bsky.feed.threadgate",...e})).data}async create(e,t,r){t.$type="app.bsky.feed.threadgate";return(await this._service.xrpc.call("com.atproto.repo.createRecord",void 0,{collection:"app.bsky.feed.threadgate",...e,record:t},{encoding:"application/json",headers:r})).data}async delete(e,t){await this._service.xrpc.call("com.atproto.repo.deleteRecord",void 0,{collection:"app.bsky.feed.threadgate",...e},{headers:t})}},Vg=class{constructor(e){this._service=e,this.block=new jg(e),this.follow=new Gg(e),this.list=new qg(e),this.listblock=new Hg(e),this.listitem=new Xg(e)}getBlocks(e,t){return this._service.xrpc.call("app.bsky.graph.getBlocks",e,void 0,t).catch((e=>{throw e}))}getFollowers(e,t){return this._service.xrpc.call("app.bsky.graph.getFollowers",e,void 0,t).catch((e=>{throw e}))}getFollows(e,t){return this._service.xrpc.call("app.bsky.graph.getFollows",e,void 0,t).catch((e=>{throw e}))}getList(e,t){return this._service.xrpc.call("app.bsky.graph.getList",e,void 0,t).catch((e=>{throw e}))}getListBlocks(e,t){return this._service.xrpc.call("app.bsky.graph.getListBlocks",e,void 0,t).catch((e=>{throw e}))}getListMutes(e,t){return this._service.xrpc.call("app.bsky.graph.getListMutes",e,void 0,t).catch((e=>{throw e}))}getLists(e,t){return this._service.xrpc.call("app.bsky.graph.getLists",e,void 0,t).catch((e=>{throw e}))}getMutes(e,t){return this._service.xrpc.call("app.bsky.graph.getMutes",e,void 0,t).catch((e=>{throw e}))}getRelationships(e,t){return this._service.xrpc.call("app.bsky.graph.getRelationships",e,void 0,t).catch((e=>{throw Iu(e)}))}getSuggestedFollowsByActor(e,t){return this._service.xrpc.call("app.bsky.graph.getSuggestedFollowsByActor",e,void 0,t).catch((e=>{throw e}))}muteActor(e,t){return this._service.xrpc.call("app.bsky.graph.muteActor",null===t||void 0===t?void 0:t.qp,e,t).catch((e=>{throw e}))}muteActorList(e,t){return this._service.xrpc.call("app.bsky.graph.muteActorList",null===t||void 0===t?void 0:t.qp,e,t).catch((e=>{throw e}))}unmuteActor(e,t){return this._service.xrpc.call("app.bsky.graph.unmuteActor",null===t||void 0===t?void 0:t.qp,e,t).catch((e=>{throw e}))}unmuteActorList(e,t){return this._service.xrpc.call("app.bsky.graph.unmuteActorList",null===t||void 0===t?void 0:t.qp,e,t).catch((e=>{throw e}))}},jg=class{constructor(e){this._service=e}async list(e){return(await this._service.xrpc.call("com.atproto.repo.listRecords",{collection:"app.bsky.graph.block",...e})).data}async get(e){return(await this._service.xrpc.call("com.atproto.repo.getRecord",{collection:"app.bsky.graph.block",...e})).data}async create(e,t,r){t.$type="app.bsky.graph.block";return(await this._service.xrpc.call("com.atproto.repo.createRecord",void 0,{collection:"app.bsky.graph.block",...e,record:t},{encoding:"application/json",headers:r})).data}async delete(e,t){await this._service.xrpc.call("com.atproto.repo.deleteRecord",void 0,{collection:"app.bsky.graph.block",...e},{headers:t})}},Gg=class{constructor(e){this._service=e}async list(e){return(await this._service.xrpc.call("com.atproto.repo.listRecords",{collection:"app.bsky.graph.follow",...e})).data}async get(e){return(await this._service.xrpc.call("com.atproto.repo.getRecord",{collection:"app.bsky.graph.follow",...e})).data}async create(e,t,r){t.$type="app.bsky.graph.follow";return(await this._service.xrpc.call("com.atproto.repo.createRecord",void 0,{collection:"app.bsky.graph.follow",...e,record:t},{encoding:"application/json",headers:r})).data}async delete(e,t){await this._service.xrpc.call("com.atproto.repo.deleteRecord",void 0,{collection:"app.bsky.graph.follow",...e},{headers:t})}},qg=class{constructor(e){this._service=e}async list(e){return(await this._service.xrpc.call("com.atproto.repo.listRecords",{collection:"app.bsky.graph.list",...e})).data}async get(e){return(await this._service.xrpc.call("com.atproto.repo.getRecord",{collection:"app.bsky.graph.list",...e})).data}async create(e,t,r){t.$type="app.bsky.graph.list";return(await this._service.xrpc.call("com.atproto.repo.createRecord",void 0,{collection:"app.bsky.graph.list",...e,record:t},{encoding:"application/json",headers:r})).data}async delete(e,t){await this._service.xrpc.call("com.atproto.repo.deleteRecord",void 0,{collection:"app.bsky.graph.list",...e},{headers:t})}},Hg=class{constructor(e){this._service=e}async list(e){return(await this._service.xrpc.call("com.atproto.repo.listRecords",{collection:"app.bsky.graph.listblock",...e})).data}async get(e){return(await this._service.xrpc.call("com.atproto.repo.getRecord",{collection:"app.bsky.graph.listblock",...e})).data}async create(e,t,r){t.$type="app.bsky.graph.listblock";return(await this._service.xrpc.call("com.atproto.repo.createRecord",void 0,{collection:"app.bsky.graph.listblock",...e,record:t},{encoding:"application/json",headers:r})).data}async delete(e,t){await this._service.xrpc.call("com.atproto.repo.deleteRecord",void 0,{collection:"app.bsky.graph.listblock",...e},{headers:t})}},Xg=class{constructor(e){this._service=e}async list(e){return(await this._service.xrpc.call("com.atproto.repo.listRecords",{collection:"app.bsky.graph.listitem",...e})).data}async get(e){return(await this._service.xrpc.call("com.atproto.repo.getRecord",{collection:"app.bsky.graph.listitem",...e})).data}async create(e,t,r){t.$type="app.bsky.graph.listitem";return(await this._service.xrpc.call("com.atproto.repo.createRecord",void 0,{collection:"app.bsky.graph.listitem",...e,record:t},{encoding:"application/json",headers:r})).data}async delete(e,t){await this._service.xrpc.call("com.atproto.repo.deleteRecord",void 0,{collection:"app.bsky.graph.listitem",...e},{headers:t})}},zg=class{constructor(e){this._service=e}getUnreadCount(e,t){return this._service.xrpc.call("app.bsky.notification.getUnreadCount",e,void 0,t).catch((e=>{throw e}))}listNotifications(e,t){return this._service.xrpc.call("app.bsky.notification.listNotifications",e,void 0,t).catch((e=>{throw e}))}registerPush(e,t){return this._service.xrpc.call("app.bsky.notification.registerPush",null===t||void 0===t?void 0:t.qp,e,t).catch((e=>{throw e}))}updateSeen(e,t){return this._service.xrpc.call("app.bsky.notification.updateSeen",null===t||void 0===t?void 0:t.qp,e,t).catch((e=>{throw e}))}},$g=class{constructor(e){this._service=e}},Wg=class{constructor(e){this._service=e}getPopularFeedGenerators(e,t){return this._service.xrpc.call("app.bsky.unspecced.getPopularFeedGenerators",e,void 0,t).catch((e=>{throw e}))}getTaggedSuggestions(e,t){return this._service.xrpc.call("app.bsky.unspecced.getTaggedSuggestions",e,void 0,t).catch((e=>{throw e}))}searchActorsSkeleton(e,t){return this._service.xrpc.call("app.bsky.unspecced.searchActorsSkeleton",e,void 0,t).catch((e=>{throw od(e)}))}searchPostsSkeleton(e,t){return this._service.xrpc.call("app.bsky.unspecced.searchPostsSkeleton",e,void 0,t).catch((e=>{throw ud(e)}))}},Yg=class{constructor(e){this.uploadBlob=(e,t)=>this.api.com.atproto.repo.uploadBlob(e,t),this.resolveHandle=(e,t)=>this.api.com.atproto.identity.resolveHandle(e,t),this.updateHandle=(e,t)=>this.api.com.atproto.identity.updateHandle(e,t),this.createModerationReport=(e,t)=>this.api.com.atproto.moderation.createReport(e,t),this.service=e.service instanceof URL?e.service:new URL(e.service),this._persistSession=e.persistSession,this._baseClient=new vg,this._baseClient.xrpc.fetch=this._fetch.bind(this),this.api=this._baseClient.service(e.service)}get com(){return this.api.com}static configure(e){Yg.fetch=e.fetch}get hasSession(){return!!this.session}setPersistSessionHandler(e){this._persistSession=e}async createAccount(e){try{const t=await this.api.com.atproto.server.createAccount(e);return this.session={accessJwt:t.data.accessJwt,refreshJwt:t.data.refreshJwt,handle:t.data.handle,did:t.data.did,email:e.email,emailConfirmed:!1},this._updateApiEndpoint(t.data.didDoc),t}catch(n){throw this.session=void 0,n}finally{var t,r;if(this.session)null===(t=this._persistSession)||void 0===t||t.call(this,"create",this.session);else null===(r=this._persistSession)||void 0===r||r.call(this,"create-failed",void 0)}}async login(e){try{const t=await this.api.com.atproto.server.createSession({identifier:e.identifier,password:e.password});return this.session={accessJwt:t.data.accessJwt,refreshJwt:t.data.refreshJwt,handle:t.data.handle,did:t.data.did,email:t.data.email,emailConfirmed:t.data.emailConfirmed},this._updateApiEndpoint(t.data.didDoc),t}catch(n){throw this.session=void 0,n}finally{var t,r;if(this.session)null===(t=this._persistSession)||void 0===t||t.call(this,"create",this.session);else null===(r=this._persistSession)||void 0===r||r.call(this,"create-failed",void 0)}}async resumeSession(e){try{var t;this.session=e;const r=await this.api.com.atproto.server.getSession();if(r.data.did!==this.session.did)throw new os(400,"Invalid session","InvalidDID");return this.session.email=r.data.email,this.session.handle=r.data.handle,this.session.emailConfirmed=r.data.emailConfirmed,this._updateApiEndpoint(r.data.didDoc),null===(t=this._persistSession)||void 0===t||t.call(this,"update",this.session),r}catch(s){var r,n,i;if(this.session=void 0,s instanceof os)if([1,408,425,429,500,502,503,504,522,524].includes(s.status))null===(r=this._persistSession)||void 0===r||r.call(this,"network-error",void 0);else null===(n=this._persistSession)||void 0===n||n.call(this,"expired",void 0);else null===(i=this._persistSession)||void 0===i||i.call(this,"network-error",void 0);throw s}}_addAuthHeader(e){var t;return!e.authorization&&null!==(t=this.session)&&void 0!==t&&t.accessJwt?{...e,authorization:"Bearer ".concat(this.session.accessJwt)}:e}async _fetch(e,t,r,n){var i;if(!Yg.fetch)throw new Error("AtpAgent fetch() method not configured");await this._refreshSessionPromise;let s=await Yg.fetch(e,t,this._addAuthHeader(r),n);return Qg(s,["ExpiredToken"])&&null!==(i=this.session)&&void 0!==i&&i.refreshJwt&&(await this.refreshSession(),s=await Yg.fetch(e,t,this._addAuthHeader(r),n)),s}async refreshSession(){if(this._refreshSessionPromise)return this._refreshSessionPromise;this._refreshSessionPromise=this._refreshSessionInner();try{await this._refreshSessionPromise}finally{this._refreshSessionPromise=void 0}}async _refreshSessionInner(){var e;if(!Yg.fetch)throw new Error("AtpAgent fetch() method not configured");if(null===(e=this.session)||void 0===e||!e.refreshJwt)return;const t=new URL((this.pdsUrl||this.service).origin);t.pathname="/xrpc/".concat("com.atproto.server.refreshSession");const r=await Yg.fetch(t.toString(),"POST",{authorization:"Bearer ".concat(this.session.refreshJwt)},void 0);var n;if(Qg(r,["ExpiredToken","InvalidToken"]))this.session=void 0,null===(n=this._persistSession)||void 0===n||n.call(this,"expired",void 0);else if(function(e,t){try{return e.xrpc.lex.assertValidXrpcOutput("com.atproto.server.refreshSession",t),!0}catch{return!1}}(this._baseClient,r.body)){var i;this.session={...this.session||{},accessJwt:r.body.accessJwt,refreshJwt:r.body.refreshJwt,handle:r.body.handle,did:r.body.did},this._updateApiEndpoint(r.body.didDoc),null===(i=this._persistSession)||void 0===i||i.call(this,"update",this.session)}}_updateApiEndpoint(e){if(t=e,Hn.safeParse(t).success){const t=(e=>Vn(e,{id:"#atproto_pds",type:"AtprotoPersonalDataServer"}))(e);this.pdsUrl=t?new URL(t):void 0}var t;this.api.xrpc.uri=this.pdsUrl||this.service}},Zg=Yg;function Qg(e,t){return 400===e.status&&(r=e.body,!!rs.safeParse(r).success&&("string"===typeof e.body.error&&t.includes(e.body.error)));var r}Zg.fetch=hs;var Jg=new TextEncoder,ey=new TextDecoder,ty=class{constructor(e){this.utf16=e,this.utf8=Jg.encode(e)}get length(){return this.utf8.byteLength}get graphemeLength(){return this._graphemeLen||(this._graphemeLen=On(this.utf16)),this._graphemeLen}slice(e,t){return ey.decode(this.utf8.slice(e,t))}utf16IndexToUtf8Index(e){return Jg.encode(this.utf16.slice(0,e)).byteLength}toString(){return this.utf16}},ry=/[\r\n]([\u00AD\u2060\u200D\u200C\u200B\s]*[\r\n]){2,}/,ny="\n\n";function iy(e,t){return t.cleanNewlines&&(e=function(e,t,r){e=e.clone();let n=e.unicodeText.utf16.match(t);for(;n&&"undefined"!==typeof n.index;){const i=e.unicodeText,s=e.unicodeText.utf16IndexToUtf8Index(n.index),a=s+new ty(n[0]).length;if(e.delete(s,a),e.unicodeText.utf16===i.utf16)break;e.insert(s,r),n=e.unicodeText.utf16.match(t)}return e}(e,ry,ny)),e}var sy=["aaa","aarp","abarth","abb","abbott","abbvie","abc","able","abogado","abudhabi","ac","academy","accenture","accountant","accountants","aco","actor","ad","ads","adult","ae","aeg","aero","aetna","af","afl","africa","ag","agakhan","agency","ai","aig","airbus","airforce","airtel","akdn","al","alfaromeo","alibaba","alipay","allfinanz","allstate","ally","alsace","alstom","am","amazon","americanexpress","americanfamily","amex","amfam","amica","amsterdam","analytics","android","anquan","anz","ao","aol","apartments","app","apple","aq","aquarelle","ar","arab","aramco","archi","army","arpa","art","arte","as","asda","asia","associates","at","athleta","attorney","au","auction","audi","audible","audio","auspost","author","auto","autos","avianca","aw","aws","ax","axa","az","azure","ba","baby","baidu","banamex","bananarepublic","band","bank","bar","barcelona","barclaycard","barclays","barefoot","bargains","baseball","basketball","bauhaus","bayern","bb","bbc","bbt","bbva","bcg","bcn","bd","be","beats","beauty","beer","bentley","berlin","best","bestbuy","bet","bf","bg","bh","bharti","bi","bible","bid","bike","bing","bingo","bio","biz","bj","black","blackfriday","blockbuster","blog","bloomberg","blue","bm","bms","bmw","bn","bnpparibas","bo","boats","boehringer","bofa","bom","bond","boo","book","booking","bosch","bostik","boston","bot","boutique","box","br","bradesco","bridgestone","broadway","broker","brother","brussels","bs","bt","build","builders","business","buy","buzz","bv","bw","by","bz","bzh","ca","cab","cafe","cal","call","calvinklein","cam","camera","camp","canon","capetown","capital","capitalone","car","caravan","cards","care","career","careers","cars","casa","case","cash","casino","cat","catering","catholic","cba","cbn","cbre","cbs","cc","cd","center","ceo","cern","cf","cfa","cfd","cg","ch","chanel","channel","charity","chase","chat","cheap","chintai","christmas","chrome","church","ci","cipriani","circle","cisco","citadel","citi","citic","city","cityeats","ck","cl","claims","cleaning","click","clinic","clinique","clothing","cloud","club","clubmed","cm","cn","co","coach","codes","coffee","college","cologne","com","comcast","commbank","community","company","compare","computer","comsec","condos","construction","consulting","contact","contractors","cooking","cookingchannel","cool","coop","corsica","country","coupon","coupons","courses","cpa","cr","credit","creditcard","creditunion","cricket","crown","crs","cruise","cruises","cu","cuisinella","cv","cw","cx","cy","cymru","cyou","cz","dabur","dad","dance","data","date","dating","datsun","day","dclk","dds","de","deal","dealer","deals","degree","delivery","dell","deloitte","delta","democrat","dental","dentist","desi","design","dev","dhl","diamonds","diet","digital","direct","directory","discount","discover","dish","diy","dj","dk","dm","dnp","do","docs","doctor","dog","domains","dot","download","drive","dtv","dubai","dunlop","dupont","durban","dvag","dvr","dz","earth","eat","ec","eco","edeka","edu","education","ee","eg","email","emerck","energy","engineer","engineering","enterprises","epson","equipment","er","ericsson","erni","es","esq","estate","et","etisalat","eu","eurovision","eus","events","exchange","expert","exposed","express","extraspace","fage","fail","fairwinds","faith","family","fan","fans","farm","farmers","fashion","fast","fedex","feedback","ferrari","ferrero","fi","fiat","fidelity","fido","film","final","finance","financial","fire","firestone","firmdale","fish","fishing","fit","fitness","fj","fk","flickr","flights","flir","florist","flowers","fly","fm","fo","foo","food","foodnetwork","football","ford","forex","forsale","forum","foundation","fox","fr","free","fresenius","frl","frogans","frontdoor","frontier","ftr","fujitsu","fun","fund","furniture","futbol","fyi","ga","gal","gallery","gallo","gallup","game","games","gap","garden","gay","gb","gbiz","gd","gdn","ge","gea","gent","genting","george","gf","gg","ggee","gh","gi","gift","gifts","gives","giving","gl","glass","gle","global","globo","gm","gmail","gmbh","gmo","gmx","gn","godaddy","gold","goldpoint","golf","goo","goodyear","goog","google","gop","got","gov","gp","gq","gr","grainger","graphics","gratis","green","gripe","grocery","group","gs","gt","gu","guardian","gucci","guge","guide","guitars","guru","gw","gy","hair","hamburg","hangout","haus","hbo","hdfc","hdfcbank","health","healthcare","help","helsinki","here","hermes","hgtv","hiphop","hisamitsu","hitachi","hiv","hk","hkt","hm","hn","hockey","holdings","holiday","homedepot","homegoods","homes","homesense","honda","horse","hospital","host","hosting","hot","hoteles","hotels","hotmail","house","how","hr","hsbc","ht","hu","hughes","hyatt","hyundai","ibm","icbc","ice","icu","id","ie","ieee","ifm","ikano","il","im","imamat","imdb","immo","immobilien","in","inc","industries","infiniti","info","ing","ink","institute","insurance","insure","int","international","intuit","investments","io","ipiranga","iq","ir","irish","is","ismaili","ist","istanbul","it","itau","itv","jaguar","java","jcb","je","jeep","jetzt","jewelry","jio","jll","jm","jmp","jnj","jo","jobs","joburg","jot","joy","jp","jpmorgan","jprs","juegos","juniper","kaufen","kddi","ke","kerryhotels","kerrylogistics","kerryproperties","kfh","kg","kh","ki","kia","kids","kim","kinder","kindle","kitchen","kiwi","km","kn","koeln","komatsu","kosher","kp","kpmg","kpn","kr","krd","kred","kuokgroup","kw","ky","kyoto","kz","la","lacaixa","lamborghini","lamer","lancaster","lancia","land","landrover","lanxess","lasalle","lat","latino","latrobe","law","lawyer","lb","lc","lds","lease","leclerc","lefrak","legal","lego","lexus","lgbt","li","lidl","life","lifeinsurance","lifestyle","lighting","like","lilly","limited","limo","lincoln","linde","link","lipsy","live","living","lk","llc","llp","loan","loans","locker","locus","loft","lol","london","lotte","lotto","love","lpl","lplfinancial","lr","ls","lt","ltd","ltda","lu","lundbeck","luxe","luxury","lv","ly","ma","macys","madrid","maif","maison","makeup","man","management","mango","map","market","marketing","markets","marriott","marshalls","maserati","mattel","mba","mc","mckinsey","md","me","med","media","meet","melbourne","meme","memorial","men","menu","merckmsd","mg","mh","miami","microsoft","mil","mini","mint","mit","mitsubishi","mk","ml","mlb","mls","mm","mma","mn","mo","mobi","mobile","moda","moe","moi","mom","monash","money","monster","mormon","mortgage","moscow","moto","motorcycles","mov","movie","mp","mq","mr","ms","msd","mt","mtn","mtr","mu","museum","music","mutual","mv","mw","mx","my","mz","na","nab","nagoya","name","natura","navy","nba","nc","ne","nec","net","netbank","netflix","network","neustar","new","news","next","nextdirect","nexus","nf","nfl","ng","ngo","nhk","ni","nico","nike","nikon","ninja","nissan","nissay","nl","no","nokia","northwesternmutual","norton","now","nowruz","nowtv","np","nr","nra","nrw","ntt","nu","nyc","nz","obi","observer","office","okinawa","olayan","olayangroup","oldnavy","ollo","om","omega","one","ong","onl","online","ooo","open","oracle","orange","org","organic","origins","osaka","otsuka","ott","ovh","pa","page","panasonic","paris","pars","partners","parts","party","passagens","pay","pccw","pe","pet","pf","pfizer","pg","ph","pharmacy","phd","philips","phone","photo","photography","photos","physio","pics","pictet","pictures","pid","pin","ping","pink","pioneer","pizza","pk","pl","place","play","playstation","plumbing","plus","pm","pn","pnc","pohl","poker","politie","porn","post","pr","pramerica","praxi","press","prime","pro","prod","productions","prof","progressive","promo","properties","property","protection","pru","prudential","ps","pt","pub","pw","pwc","py","qa","qpon","quebec","quest","racing","radio","re","read","realestate","realtor","realty","recipes","red","redstone","redumbrella","rehab","reise","reisen","reit","reliance","ren","rent","rentals","repair","report","republican","rest","restaurant","review","reviews","rexroth","rich","richardli","ricoh","ril","rio","rip","ro","rocher","rocks","rodeo","rogers","room","rs","rsvp","ru","rugby","ruhr","run","rw","rwe","ryukyu","sa","saarland","safe","safety","sakura","sale","salon","samsclub","samsung","sandvik","sandvikcoromant","sanofi","sap","sarl","sas","save","saxo","sb","sbi","sbs","sc","sca","scb","schaeffler","schmidt","scholarships","school","schule","schwarz","science","scot","sd","se","search","seat","secure","security","seek","select","sener","services","ses","seven","sew","sex","sexy","sfr","sg","sh","shangrila","sharp","shaw","shell","shia","shiksha","shoes","shop","shopping","shouji","show","showtime","si","silk","sina","singles","site","sj","sk","ski","skin","sky","skype","sl","sling","sm","smart","smile","sn","sncf","so","soccer","social","softbank","software","sohu","solar","solutions","song","sony","soy","spa","space","sport","spot","sr","srl","ss","st","stada","staples","star","statebank","statefarm","stc","stcgroup","stockholm","storage","store","stream","studio","study","style","su","sucks","supplies","supply","support","surf","surgery","suzuki","sv","swatch","swiss","sx","sy","sydney","systems","sz","tab","taipei","talk","taobao","target","tatamotors","tatar","tattoo","tax","taxi","tc","tci","td","tdk","team","tech","technology","tel","temasek","tennis","teva","tf","tg","th","thd","theater","theatre","tiaa","tickets","tienda","tiffany","tips","tires","tirol","tj","tjmaxx","tjx","tk","tkmaxx","tl","tm","tmall","tn","to","today","tokyo","tools","top","toray","toshiba","total","tours","town","toyota","toys","tr","trade","trading","training","travel","travelchannel","travelers","travelersinsurance","trust","trv","tt","tube","tui","tunes","tushu","tv","tvs","tw","tz","ua","ubank","ubs","ug","uk","unicom","university","uno","uol","ups","us","uy","uz","va","vacations","vana","vanguard","vc","ve","vegas","ventures","verisign","verm\xf6gensberater","verm\xf6gensberatung","versicherung","vet","vg","vi","viajes","video","vig","viking","villas","vin","vip","virgin","visa","vision","viva","vivo","vlaanderen","vn","vodka","volkswagen","volvo","vote","voting","voto","voyage","vu","vuelos","wales","walmart","walter","wang","wanggou","watch","watches","weather","weatherchannel","webcam","weber","website","wed","wedding","weibo","weir","wf","whoswho","wien","wiki","williamhill","win","windows","wine","winners","wme","wolterskluwer","woodside","work","works","world","wow","ws","wtc","wtf","xbox","xerox","xfinity","xihuan","xin","xxx","xyz","yachts","yahoo","yamaxun","yandex","ye","yodobashi","yoga","yokohama","you","youtube","yt","yun","za","zappos","zara","zero","zip","zm","zone","zuerich","zw","\u03b5\u03bb","\u03b5\u03c5","\u0431\u0433","\u0431\u0435\u043b","\u0434\u0435\u0442\u0438","\u0435\u044e","\u043a\u0430\u0442\u043e\u043b\u0438\u043a","\u043a\u043e\u043c","\u043c\u043a\u0434","\u043c\u043e\u043d","\u043c\u043e\u0441\u043a\u0432\u0430","\u043e\u043d\u043b\u0430\u0439\u043d","\u043e\u0440\u0433","\u0440\u0443\u0441","\u0440\u0444","\u0441\u0430\u0439\u0442","\u0441\u0440\u0431","\u0443\u043a\u0440","\u049b\u0430\u0437","\u0570\u0561\u0575","\u05d9\u05e9\u05e8\u05d0\u05dc","\u05e7\u05d5\u05dd","\u0627\u0628\u0648\u0638\u0628\u064a","\u0627\u062a\u0635\u0627\u0644\u0627\u062a","\u0627\u0631\u0627\u0645\u0643\u0648","\u0627\u0644\u0627\u0631\u062f\u0646","\u0627\u0644\u0628\u062d\u0631\u064a\u0646","\u0627\u0644\u062c\u0632\u0627\u0626\u0631","\u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629","\u0627\u0644\u0639\u0644\u064a\u0627\u0646","\u0627\u0644\u0645\u063a\u0631\u0628","\u0627\u0645\u0627\u0631\u0627\u062a","\u0627\u06cc\u0631\u0627\u0646","\u0628\u0627\u0631\u062a","\u0628\u0627\u0632\u0627\u0631","\u0628\u064a\u062a\u0643","\u0628\u06be\u0627\u0631\u062a","\u062a\u0648\u0646\u0633","\u0633\u0648\u062f\u0627\u0646","\u0633\u0648\u0631\u064a\u0629","\u0634\u0628\u0643\u0629","\u0639\u0631\u0627\u0642","\u0639\u0631\u0628","\u0639\u0645\u0627\u0646","\u0641\u0644\u0633\u0637\u064a\u0646","\u0642\u0637\u0631","\u0643\u0627\u062b\u0648\u0644\u064a\u0643","\u0643\u0648\u0645","\u0645\u0635\u0631","\u0645\u0644\u064a\u0633\u064a\u0627","\u0645\u0648\u0631\u064a\u062a\u0627\u0646\u064a\u0627","\u0645\u0648\u0642\u0639","\u0647\u0645\u0631\u0627\u0647","\u067e\u0627\u06a9\u0633\u062a\u0627\u0646","\u0680\u0627\u0631\u062a","\u0915\u0949\u092e","\u0928\u0947\u091f","\u092d\u093e\u0930\u0924","\u092d\u093e\u0930\u0924\u092e\u094d","\u092d\u093e\u0930\u094b\u0924","\u0938\u0902\u0917\u0920\u0928","\u09ac\u09be\u0982\u09b2\u09be","\u09ad\u09be\u09b0\u09a4","\u09ad\u09be\u09f0\u09a4","\u0a2d\u0a3e\u0a30\u0a24","\u0aad\u0abe\u0ab0\u0aa4","\u0b2d\u0b3e\u0b30\u0b24","\u0b87\u0ba8\u0bcd\u0ba4\u0bbf\u0baf\u0bbe","\u0b87\u0bb2\u0b99\u0bcd\u0b95\u0bc8","\u0b9a\u0bbf\u0b99\u0bcd\u0b95\u0baa\u0bcd\u0baa\u0bc2\u0bb0\u0bcd","\u0c2d\u0c3e\u0c30\u0c24\u0c4d","\u0cad\u0cbe\u0cb0\u0ca4","\u0d2d\u0d3e\u0d30\u0d24\u0d02","\u0dbd\u0d82\u0d9a\u0dcf","\u0e04\u0e2d\u0e21","\u0e44\u0e17\u0e22","\u0ea5\u0eb2\u0ea7","\u10d2\u10d4","\u307f\u3093\u306a","\u30a2\u30de\u30be\u30f3","\u30af\u30e9\u30a6\u30c9","\u30b0\u30fc\u30b0\u30eb","\u30b3\u30e0","\u30b9\u30c8\u30a2","\u30bb\u30fc\u30eb","\u30d5\u30a1\u30c3\u30b7\u30e7\u30f3","\u30dd\u30a4\u30f3\u30c8","\u4e16\u754c","\u4e2d\u4fe1","\u4e2d\u56fd","\u4e2d\u570b","\u4e2d\u6587\u7f51","\u4e9a\u9a6c\u900a","\u4f01\u4e1a","\u4f5b\u5c71","\u4fe1\u606f","\u5065\u5eb7","\u516b\u5366","\u516c\u53f8","\u516c\u76ca","\u53f0\u6e7e","\u53f0\u7063","\u5546\u57ce","\u5546\u5e97","\u5546\u6807","\u5609\u91cc","\u5609\u91cc\u5927\u9152\u5e97","\u5728\u7ebf","\u5927\u62ff","\u5929\u4e3b\u6559","\u5a31\u4e50","\u5bb6\u96fb","\u5e7f\u4e1c","\u5fae\u535a","\u6148\u5584","\u6211\u7231\u4f60","\u624b\u673a","\u62db\u8058","\u653f\u52a1","\u653f\u5e9c","\u65b0\u52a0\u5761","\u65b0\u95fb","\u65f6\u5c1a","\u66f8\u7c4d","\u673a\u6784","\u6de1\u9a6c\u9521","\u6e38\u620f","\u6fb3\u9580","\u70b9\u770b","\u79fb\u52a8","\u7ec4\u7ec7\u673a\u6784","\u7f51\u5740","\u7f51\u5e97","\u7f51\u7ad9","\u7f51\u7edc","\u8054\u901a","\u8bfa\u57fa\u4e9a","\u8c37\u6b4c","\u8d2d\u7269","\u901a\u8ca9","\u96c6\u56e2","\u96fb\u8a0a\u76c8\u79d1","\u98de\u5229\u6d66","\u98df\u54c1","\u9910\u5385","\u9999\u683c\u91cc\u62c9","\u9999\u6e2f","\ub2f7\ub137","\ub2f7\ucef4","\uc0bc\uc131","\ud55c\uad6d"];function ay(e){let t;const r=[];{const n=/(^|\s|\()(@)([a-zA-Z0-9.-]+)(\b)/g;for(;t=n.exec(e.utf16);){if(!oy(t[3])&&!t[3].endsWith(".test"))continue;const n=e.utf16.indexOf(t[3],t.index)-1;r.push({$type:"app.bsky.richtext.facet",index:{byteStart:e.utf16IndexToUtf8Index(n),byteEnd:e.utf16IndexToUtf8Index(n+t[3].length+1)},features:[{$type:"app.bsky.richtext.facet#mention",did:t[3]}]})}}{const i=/(^|\s|\()((https?:\/\/[\S]+)|((?<domain>[a-z][a-z0-9]*(\.[a-z0-9]+)+)[\S]*))/gim;for(;t=i.exec(e.utf16);){let i=t[2];if(!i.startsWith("http")){var n;const e=null===(n=t.groups)||void 0===n?void 0:n.domain;if(!e||!oy(e))continue;i="https://".concat(i)}const s=e.utf16.indexOf(t[2],t.index),a={start:s,end:s+t[2].length};/[.,;:!?]$/.test(i)&&(i=i.slice(0,-1),a.end--),/[)]$/.test(i)&&!i.includes("(")&&(i=i.slice(0,-1),a.end--),r.push({index:{byteStart:e.utf16IndexToUtf8Index(a.start),byteEnd:e.utf16IndexToUtf8Index(a.end)},features:[{$type:"app.bsky.richtext.facet#link",uri:i}]})}}{const n=/(?:^|\s)(#[^\d\s]\S*)(?=\s)?/g;for(;t=n.exec(e.utf16);){let[n]=t;const i=/^\s/.test(n);if(n=n.trim().replace(/\p{P}+$/gu,""),n.length>66)continue;const s=t.index+(i?1:0);r.push({index:{byteStart:e.utf16IndexToUtf8Index(s),byteEnd:e.utf16IndexToUtf8Index(s+n.length)},features:[{$type:"app.bsky.richtext.facet#tag",tag:n.replace(/^#/,"")}]})}}return r.length>0?r:void 0}function oy(e){return!!sy.find((t=>{const r=e.lastIndexOf(t);return-1!==r&&("."===e.charAt(r-1)&&r===e.length-t.length)}))}var ly=class{constructor(e,t){this.text=e,this.facet=t}get link(){var e;const t=null===(e=this.facet)||void 0===e?void 0:e.features.find(Jm.isLink);if(Jm.isLink(t))return t}isLink(){return!!this.link}get mention(){var e;const t=null===(e=this.facet)||void 0===e?void 0:e.features.find(Jm.isMention);if(Jm.isMention(t))return t}isMention(){return!!this.mention}get tag(){var e;const t=null===(e=this.facet)||void 0===e?void 0:e.features.find(Jm.isTag);if(Jm.isTag(t))return t}isTag(){return!!this.tag}},cy=class{constructor(e,t){var r,n;this.unicodeText=new ty(e.text),this.facets=e.facets,null!==(r=this.facets)&&void 0!==r&&r.length||null===(n=e.entities)||void 0===n||!n.length||(this.facets=function(e,t){const r=[];for(const n of t)"link"===n.type?r.push({$type:"app.bsky.richtext.facet",index:{byteStart:e.utf16IndexToUtf8Index(n.index.start),byteEnd:e.utf16IndexToUtf8Index(n.index.end)},features:[{$type:"app.bsky.richtext.facet#link",uri:n.value}]}):"mention"===n.type&&r.push({$type:"app.bsky.richtext.facet",index:{byteStart:e.utf16IndexToUtf8Index(n.index.start),byteEnd:e.utf16IndexToUtf8Index(n.index.end)},features:[{$type:"app.bsky.richtext.facet#mention",did:n.value}]});return r}(this.unicodeText,e.entities)),this.facets&&this.facets.sort(uy),null!==t&&void 0!==t&&t.cleanNewlines&&iy(this,{cleanNewlines:!0}).copyInto(this)}get text(){return this.unicodeText.toString()}get length(){return this.unicodeText.length}get graphemeLength(){return this.unicodeText.graphemeLength}clone(){return new cy({text:this.unicodeText.utf16,facets:dy(this.facets)})}copyInto(e){e.unicodeText=this.unicodeText,e.facets=dy(this.facets)}*segments(){const e=this.facets||[];if(!e.length)return void(yield new ly(this.unicodeText.utf16));let t=0,r=0;do{const n=e[r];if(t<n.index.byteStart)yield new ly(this.unicodeText.slice(t,n.index.byteStart));else if(t>n.index.byteStart){r++;continue}if(n.index.byteStart<n.index.byteEnd){const e=this.unicodeText.slice(n.index.byteStart,n.index.byteEnd);e.trim()?yield new ly(e,n):yield new ly(e)}t=n.index.byteEnd,r++}while(r<e.length);t<this.unicodeText.length&&(yield new ly(this.unicodeText.slice(t,this.unicodeText.length)))}insert(e,t){var r;if(this.unicodeText=new ty(this.unicodeText.slice(0,e)+t+this.unicodeText.slice(e)),null===(r=this.facets)||void 0===r||!r.length)return this;const n=t.length;for(const i of this.facets)e<=i.index.byteStart?(i.index.byteStart+=n,i.index.byteEnd+=n):e>=i.index.byteStart&&e<i.index.byteEnd&&(i.index.byteEnd+=n);return this}delete(e,t){var r;if(this.unicodeText=new ty(this.unicodeText.slice(0,e)+this.unicodeText.slice(t)),null===(r=this.facets)||void 0===r||!r.length)return this;const n=t-e;for(const i of this.facets)e<=i.index.byteStart&&t>=i.index.byteEnd?(i.index.byteStart=0,i.index.byteEnd=0):e>i.index.byteEnd||(e>i.index.byteStart&&e<=i.index.byteEnd&&t>i.index.byteEnd?i.index.byteEnd=e:e>=i.index.byteStart&&t<=i.index.byteEnd?i.index.byteEnd-=n:e<i.index.byteStart&&t>=i.index.byteStart&&t<=i.index.byteEnd?(i.index.byteStart=e,i.index.byteEnd-=n):t<i.index.byteStart&&(i.index.byteStart-=n,i.index.byteEnd-=n));return this.facets=this.facets.filter((e=>e.index.byteStart<e.index.byteEnd)),this}async detectFacets(e){if(this.facets=ay(this.unicodeText),this.facets){for(const t of this.facets)for(const r of t.features)if(Jm.isMention(r)){const t=await e.resolveHandle({handle:r.did}).catch((e=>{})).then((e=>null===e||void 0===e?void 0:e.data.did));r.did=t||""}this.facets.sort(uy)}}detectFacetsWithoutResolution(){this.facets=ay(this.unicodeText),this.facets&&this.facets.sort(uy)}},uy=(e,t)=>e.index.byteStart-t.index.byteStart;function dy(e){return"undefined"===typeof e?e:JSON.parse(JSON.stringify(e))}var fy=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"";this.cause=e,this.alert=t,this.blur=r,this.blurMedia=n,this.filter=i,this.noOverride=s,this.additionalCauses=a,this.did=o}static noop(){return new fy}},py={"!hide":{id:"!hide",preferences:["hide"],flags:["no-override"],onwarn:"blur",groupId:"system",configurable:!1,strings:{settings:{en:{name:"Moderator Hide",description:"Moderator has chosen to hide the content."}},account:{en:{name:"Content Blocked",description:"This account has been hidden by the moderators."}},content:{en:{name:"Content Blocked",description:"This content has been hidden by the moderators."}}}},"!no-promote":{id:"!no-promote",preferences:["hide"],flags:[],onwarn:null,groupId:"system",configurable:!1,strings:{settings:{en:{name:"Moderator Filter",description:"Moderator has chosen to filter the content from feeds."}},account:{en:{name:"N/A",description:"N/A"}},content:{en:{name:"N/A",description:"N/A"}}}},"!warn":{id:"!warn",preferences:["warn"],flags:[],onwarn:"blur",groupId:"system",configurable:!1,strings:{settings:{en:{name:"Moderator Warn",description:"Moderator has chosen to set a general warning on the content."}},account:{en:{name:"Content Warning",description:"This account has received a general warning from moderators."}},content:{en:{name:"Content Warning",description:"This content has received a general warning from moderators."}}}},"!no-unauthenticated":{id:"!no-unauthenticated",preferences:["hide"],flags:["no-override","unauthed"],onwarn:"blur",groupId:"system",configurable:!1,strings:{settings:{en:{name:"Sign-in Required",description:"This user has requested that their account only be shown to signed-in users."}},account:{en:{name:"Sign-in Required",description:"This user has requested that their account only be shown to signed-in users."}},content:{en:{name:"Sign-in Required",description:"This user has requested that their content only be shown to signed-in users."}}}},"dmca-violation":{id:"dmca-violation",preferences:["hide"],flags:["no-override"],onwarn:"blur",groupId:"legal",configurable:!1,strings:{settings:{en:{name:"Copyright Violation",description:"The content has received a DMCA takedown request."}},account:{en:{name:"Copyright Violation",description:"This account has received a DMCA takedown request. It will be restored if the concerns can be resolved."}},content:{en:{name:"Copyright Violation",description:"This content has received a DMCA takedown request. It will be restored if the concerns can be resolved."}}}},doxxing:{id:"doxxing",preferences:["hide"],flags:["no-override"],onwarn:"blur",groupId:"legal",configurable:!1,strings:{settings:{en:{name:"Doxxing",description:"Information that reveals private information about someone which has been shared without the consent of the subject."}},account:{en:{name:"Doxxing",description:"This account has been reported to publish private information about someone without their consent. This report is currently under review."}},content:{en:{name:"Doxxing",description:"This content has been reported to include private information about someone without their consent."}}}},porn:{id:"porn",preferences:["ignore","warn","hide"],flags:["adult"],onwarn:"blur-media",groupId:"sexual",configurable:!0,strings:{settings:{en:{name:"Pornography",description:"Images of full-frontal nudity (genitalia) in any sexualized context, or explicit sexual activity (meaning contact with genitalia or breasts) even if partially covered. Includes graphic sexual cartoons (often jokes/memes)."}},account:{en:{name:"Adult Content",description:"This account contains imagery of full-frontal nudity or explicit sexual activity."}},content:{en:{name:"Adult Content",description:"This content contains imagery of full-frontal nudity or explicit sexual activity."}}}},sexual:{id:"sexual",preferences:["ignore","warn","hide"],flags:["adult"],onwarn:"blur-media",groupId:"sexual",configurable:!0,strings:{settings:{en:{name:"Sexually Suggestive",description:'Content that does not meet the level of "pornography", but is still sexual. Some common examples have been selfies and "hornyposting" with underwear on, or partially naked (naked but covered, eg with hands or from side perspective). Sheer/see-through nipples may end up in this category.'}},account:{en:{name:"Suggestive Content",description:"This account contains imagery which is sexually suggestive. Common examples include selfies in underwear or in partial undress."}},content:{en:{name:"Suggestive Content",description:"This content contains imagery which is sexually suggestive. Common examples include selfies in underwear or in partial undress."}}}},nudity:{id:"nudity",preferences:["ignore","warn","hide"],flags:["adult"],onwarn:"blur-media",groupId:"sexual",configurable:!0,strings:{settings:{en:{name:"Nudity",description:'Nudity which is not sexual, or that is primarily "artistic" in nature. For example: breastfeeding; classic art paintings and sculptures; newspaper images with some nudity; fashion modeling. "Erotic photography" is likely to end up in sexual or porn.'}},account:{en:{name:"Adult Content",description:"This account contains imagery which portrays nudity in a non-sexual or artistic setting."}},content:{en:{name:"Adult Content",description:"This content contains imagery which portrays nudity in a non-sexual or artistic setting."}}}},nsfl:{id:"nsfl",preferences:["ignore","warn","hide"],flags:["adult"],onwarn:"blur-media",groupId:"violence",configurable:!0,strings:{settings:{en:{name:"NSFL",description:'"Not Suitable For Life." This includes graphic images like the infamous "goatse" (don\'t look it up).'}},account:{en:{name:"Graphic Imagery (NSFL)",description:'This account contains graphic images which are often referred to as "Not Suitable For Life."'}},content:{en:{name:"Graphic Imagery (NSFL)",description:'This content contains graphic images which are often referred to as "Not Suitable For Life."'}}}},corpse:{id:"corpse",preferences:["ignore","warn","hide"],flags:["adult"],onwarn:"blur-media",groupId:"violence",configurable:!0,strings:{settings:{en:{name:"Corpse",description:"Visual image of a dead human body in any context. Includes war images, hanging, funeral caskets. Does not include all figurative cases (cartoons), but can include realistic figurative images or renderings."}},account:{en:{name:"Graphic Imagery (Corpse)",description:"This account contains images of a dead human body in any context. Includes war images, hanging, funeral caskets."}},content:{en:{name:"Graphic Imagery (Corpse)",description:"This content contains images of a dead human body in any context. Includes war images, hanging, funeral caskets."}}}},gore:{id:"gore",preferences:["ignore","warn","hide"],flags:["adult"],onwarn:"blur-media",groupId:"violence",configurable:!0,strings:{settings:{en:{name:"Gore",description:"Intended for shocking images, typically involving blood or visible wounds."}},account:{en:{name:"Graphic Imagery (Gore)",description:"This account contains shocking images involving blood or visible wounds."}},content:{en:{name:"Graphic Imagery (Gore)",description:"This content contains shocking images involving blood or visible wounds."}}}},torture:{id:"torture",preferences:["ignore","warn","hide"],flags:["adult"],onwarn:"blur",groupId:"violence",configurable:!0,strings:{settings:{en:{name:"Torture",description:"Depictions of torture of a human or animal (animal cruelty)."}},account:{en:{name:"Graphic Imagery (Torture)",description:"This account contains depictions of torture of a human or animal."}},content:{en:{name:"Graphic Imagery (Torture)",description:"This content contains depictions of torture of a human or animal."}}}},"self-harm":{id:"self-harm",preferences:["ignore","warn","hide"],flags:["adult"],onwarn:"blur-media",groupId:"violence",configurable:!0,strings:{settings:{en:{name:"Self-Harm",description:"A visual depiction (photo or figurative) of cutting, suicide, or similar."}},account:{en:{name:"Graphic Imagery (Self-Harm)",description:"This account includes depictions of cutting, suicide, or other forms of self-harm."}},content:{en:{name:"Graphic Imagery (Self-Harm)",description:"This content includes depictions of cutting, suicide, or other forms of self-harm."}}}},"intolerant-race":{id:"intolerant-race",preferences:["ignore","warn","hide"],flags:[],onwarn:"blur",groupId:"intolerance",configurable:!0,strings:{settings:{en:{name:"Racial Intolerance",description:"Hateful or intolerant content related to race."}},account:{en:{name:"Intolerance (Racial)",description:"This account includes hateful or intolerant content related to race."}},content:{en:{name:"Intolerance (Racial)",description:"This content includes hateful or intolerant views related to race."}}}},"intolerant-gender":{id:"intolerant-gender",preferences:["ignore","warn","hide"],flags:[],onwarn:"blur",groupId:"intolerance",configurable:!0,strings:{settings:{en:{name:"Gender Intolerance",description:"Hateful or intolerant content related to gender or gender identity."}},account:{en:{name:"Intolerance (Gender)",description:"This account includes hateful or intolerant content related to gender or gender identity."}},content:{en:{name:"Intolerance (Gender)",description:"This content includes hateful or intolerant views related to gender or gender identity."}}}},"intolerant-sexual-orientation":{id:"intolerant-sexual-orientation",preferences:["ignore","warn","hide"],flags:[],onwarn:"blur",groupId:"intolerance",configurable:!0,strings:{settings:{en:{name:"Sexual Orientation Intolerance",description:"Hateful or intolerant content related to sexual preferences."}},account:{en:{name:"Intolerance (Orientation)",description:"This account includes hateful or intolerant content related to sexual preferences."}},content:{en:{name:"Intolerance (Orientation)",description:"This content includes hateful or intolerant views related to sexual preferences."}}}},"intolerant-religion":{id:"intolerant-religion",preferences:["ignore","warn","hide"],flags:[],onwarn:"blur",groupId:"intolerance",configurable:!0,strings:{settings:{en:{name:"Religious Intolerance",description:"Hateful or intolerant content related to religious views or practices."}},account:{en:{name:"Intolerance (Religious)",description:"This account includes hateful or intolerant content related to religious views or practices."}},content:{en:{name:"Intolerance (Religious)",description:"This content includes hateful or intolerant views related to religious views or practices."}}}},intolerant:{id:"intolerant",preferences:["ignore","warn","hide"],flags:[],onwarn:"blur",groupId:"intolerance",configurable:!0,strings:{settings:{en:{name:"Intolerance",description:"A catchall for hateful or intolerant content which is not covered elsewhere."}},account:{en:{name:"Intolerance",description:"This account includes hateful or intolerant content."}},content:{en:{name:"Intolerance",description:"This content includes hateful or intolerant views."}}}},"icon-intolerant":{id:"icon-intolerant",preferences:["ignore","warn","hide"],flags:[],onwarn:"blur-media",groupId:"intolerance",configurable:!0,strings:{settings:{en:{name:"Intolerant Iconography",description:"Visual imagery associated with a hate group, such as the KKK or Nazi, in any context (supportive, critical, documentary, etc)."}},account:{en:{name:"Intolerant Iconography",description:"This account includes imagery associated with a hate group such as the KKK or Nazis. This warning may apply to content any context, including critical or documentary purposes."}},content:{en:{name:"Intolerant Iconography",description:"This content includes imagery associated with a hate group such as the KKK or Nazis. This warning may apply to content any context, including critical or documentary purposes."}}}},threat:{id:"threat",preferences:["ignore","warn","hide"],flags:[],onwarn:"blur",groupId:"rude",configurable:!0,strings:{settings:{en:{name:"Threats",description:"Statements or imagery published with the intent to threaten, intimidate, or harm."}},account:{en:{name:"Threats",description:"The moderators believe this account has published statements or imagery with the intent to threaten, intimidate, or harm others."}},content:{en:{name:"Threats",description:"The moderators believe this content was published with the intent to threaten, intimidate, or harm others."}}}},spoiler:{id:"spoiler",preferences:["ignore","warn","hide"],flags:[],onwarn:"blur",groupId:"curation",configurable:!0,strings:{settings:{en:{name:"Spoiler",description:"Discussion about film, TV, etc which gives away plot points."}},account:{en:{name:"Spoiler Warning",description:"This account contains discussion about film, TV, etc which gives away plot points."}},content:{en:{name:"Spoiler Warning",description:"This content contains discussion about film, TV, etc which gives away plot points."}}}},spam:{id:"spam",preferences:["ignore","warn","hide"],flags:[],onwarn:"blur",groupId:"spam",configurable:!0,strings:{settings:{en:{name:"Spam",description:"Repeat, low-quality messages which are clearly not designed to add to a conversation or space."}},account:{en:{name:"Spam",description:"This account publishes repeat, low-quality messages which are clearly not designed to add to a conversation or space."}},content:{en:{name:"Spam",description:"This content is a part of repeat, low-quality messages which are clearly not designed to add to a conversation or space."}}}},"account-security":{id:"account-security",preferences:["ignore","warn","hide"],flags:[],onwarn:"blur",groupId:"misinfo",configurable:!0,strings:{settings:{en:{name:"Security Concerns",description:"Content designed to hijack user accounts such as a phishing attack."}},account:{en:{name:"Security Warning",description:"This account has published content designed to hijack user accounts such as a phishing attack."}},content:{en:{name:"Security Warning",description:"This content is designed to hijack user accounts such as a phishing attack."}}}},"net-abuse":{id:"net-abuse",preferences:["ignore","warn","hide"],flags:[],onwarn:"blur",groupId:"misinfo",configurable:!0,strings:{settings:{en:{name:"Network Attacks",description:"Content designed to attack network systems such as denial-of-service attacks."}},account:{en:{name:"Network Attack Warning",description:"This account has published content designed to attack network systems such as denial-of-service attacks."}},content:{en:{name:"Network Attack Warning",description:"This content is designed to attack network systems such as denial-of-service attacks."}}}},impersonation:{id:"impersonation",preferences:["ignore","warn","hide"],flags:[],onwarn:"alert",groupId:"misinfo",configurable:!0,strings:{settings:{en:{name:"Impersonation",description:"Accounts which falsely assert some identity."}},account:{en:{name:"Impersonation Warning",description:"The moderators believe this account is lying about their identity."}},content:{en:{name:"Impersonation Warning",description:"The moderators believe this account is lying about their identity."}}}},scam:{id:"scam",preferences:["ignore","warn","hide"],flags:[],onwarn:"alert",groupId:"misinfo",configurable:!0,strings:{settings:{en:{name:"Scam",description:"Fraudulent content."}},account:{en:{name:"Scam Warning",description:"The moderators believe this account publishes fraudulent content."}},content:{en:{name:"Scam Warning",description:"The moderators believe this is fraudulent content."}}}},misleading:{id:"misleading",preferences:["ignore","warn","hide"],flags:[],onwarn:"alert",groupId:"misinfo",configurable:!0,strings:{settings:{en:{name:"Misleading",description:"Accounts which share misleading information."}},account:{en:{name:"Misleading",description:"The moderators believe this account is spreading misleading information."}},content:{en:{name:"Misleading",description:"The moderators believe this account is spreading misleading information."}}}}},hy=class{constructor(){this.did="",this.causes=[]}setDid(e){this.did=e}addBlocking(e){e&&this.causes.push({type:"blocking",source:{type:"user"},priority:3})}addBlockingByList(e){e&&this.causes.push({type:"blocking",source:{type:"list",list:e},priority:3})}addBlockedBy(e){e&&this.causes.push({type:"blocked-by",source:{type:"user"},priority:4})}addBlockOther(e){e&&this.causes.push({type:"block-other",source:{type:"user"},priority:4})}addLabel(e,t){const r=py[e.val];if(!r)return;const n=e.src===this.did,i=n?void 0:t.labelers.find((t=>t.labeler.did===e.src));let s,a="ignore";r.configurable?r.flags.includes("adult")&&!t.adultContentEnabled?a="hide":null!==i&&void 0!==i&&i.labels[e.val]?a=i.labels[e.val]:t.labels[e.val]&&(a=t.labels[e.val]):a=r.preferences[0],"ignore"!==a&&(r.flags.includes("unauthed")&&t.userDid||(s=r.flags.includes("no-override")?1:"hide"===a?2:"blur"===r.onwarn?5:"blur-media"===r.onwarn?7:8,this.causes.push({type:"label",source:n||!i?{type:"user"}:{type:"labeler",labeler:i.labeler},label:e,labelDef:r,setting:a,priority:s})))}addMuted(e){e&&this.causes.push({type:"muted",source:{type:"user"},priority:6})}addMutedByList(e){e&&this.causes.push({type:"muted",source:{type:"list",list:e},priority:6})}finalizeDecision(e){const t=new fy;if(t.did=this.did,!this.causes.length)return t;if(this.causes.sort(((e,t)=>e.priority-t.priority)),t.cause=this.causes[0],t.additionalCauses=this.causes.slice(1),"blocking"===t.cause.type||"blocked-by"===t.cause.type||"block-other"===t.cause.type)t.filter=!0,t.blur=!0,t.noOverride=!0;else if("muted"===t.cause.type)t.filter=!0,t.blur=!0;else if("label"===t.cause.type){switch("hide"===t.cause.setting&&(t.filter=!0),t.cause.labelDef.onwarn){case"alert":t.alert=!0;break;case"blur":t.blur=!0;break;case"blur-media":t.blurMedia=!0}(t.cause.labelDef.flags.includes("no-override")||t.cause.labelDef.flags.includes("adult")&&!e.adultContentEnabled)&&(t.noOverride=!0)}return t}};function my(e,t){var r,n,i;const s=new hy;var a,o,l,c,u,d;(s.setDid(e.did),null!==(r=e.viewer)&&void 0!==r&&r.muted)&&(null!==(a=e.viewer)&&void 0!==a&&a.mutedByList?s.addMutedByList(null===(o=e.viewer)||void 0===o?void 0:o.mutedByList):s.addMuted(null===(l=e.viewer)||void 0===l?void 0:l.muted));null!==(n=e.viewer)&&void 0!==n&&n.blocking&&(null!==(c=e.viewer)&&void 0!==c&&c.blockingByList?s.addBlockingByList(null===(u=e.viewer)||void 0===u?void 0:u.blockingByList):s.addBlocking(null===(d=e.viewer)||void 0===d?void 0:d.blocking));s.addBlockedBy(null===(i=e.viewer)||void 0===i?void 0:i.blockedBy);for(const f of function(e){if(!e)return[];return e.filter((e=>!e.uri.endsWith("/app.bsky.actor.profile/self")||"!no-unauthenticated"===e.val))}(e.labels))s.addLabel(f,t);return s.finalizeDecision(t)}function gy(e,t){const r=new hy;r.setDid(e.did);for(const n of function(e){if(!e)return[];return e.filter((e=>e.uri.endsWith("/app.bsky.actor.profile/self")))}(e.labels))r.addLabel(n,t);return r.finalizeDecision(t)}function yy(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const n=t.filter((e=>!!e));return 0===n.length?fy.noop():(n.sort(((e,t)=>e.cause&&t.cause?e.cause.priority-t.cause.priority:e.cause?-1:t.cause?1:0)),n[0])}function vy(e,t){e.filter=!1,e.noOverride=!1,"noop"===t?(e.blur=!1,e.blurMedia=!1,e.alert=!1,delete e.cause):"alert"===t&&(e.blur=!1,e.blurMedia=!1,e.alert=!0)}function Ey(e){let{ignoreFilter:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ignoreFilter:!1};return!e||!e.alert&&(!e.blur&&!(e.filter&&!t))}function by(e){return{cause:e.cause,filter:e.filter,blur:e.blur,alert:e.alert,noOverride:e.noOverride}}function Ty(e,t){var r,n,i,s;const a=my(e,t),o=gy(e,t);a.blurMedia&&(a.blur=!0),o.filter=!1,Ey(a)||a.did!==t.userDid||vy(a,"alert"),Ey(o)||o.did!==t.userDid||vy(o,"alert");let l=!1,c=!1;return((a.blur||a.blurMedia)&&"muted"!==(null===(r=a.cause)||void 0===r?void 0:r.type)||o.blur||o.blurMedia)&&(l=!0,c=a.noOverride||o.noOverride),"blocking"!==(null===(n=a.cause)||void 0===n?void 0:n.type)&&"blocked-by"!==(null===(i=a.cause)||void 0===i?void 0:i.type)&&"muted"!==(null===(s=a.cause)||void 0===s?void 0:s.type)||(a.blur=!1,a.noOverride=!1),{decisions:{account:a,profile:o},account:a.filter||a.blur||a.alert?by(a):{},profile:o.filter||o.blur||o.alert?by(o):{},avatar:{blur:l,alert:a.alert||o.alert,noOverride:c}}}function Ry(e,t){var r,n,i;const s=function(e,t){var r;const n=new hy;if(n.setDid(e.author.did),null!==(r=e.labels)&&void 0!==r&&r.length)for(const i of e.labels)n.addLabel(i,t);return n.finalizeDecision(t)}(e,t),a=my(e.author,t),o=gy(e.author,t);let l,c;var u;u=e.embed,u&&sh.isView(u)?(l=function(e,t){const r=new hy;var n;if(sh.isViewRecord(e.record)){if(r.setDid(e.record.author.did),null!==(n=e.record.labels)&&void 0!==n&&n.length)for(const l of e.record.labels)r.addLabel(l,t)}else if(sh.isViewBlocked(e.record)){var i,s,a;if(r.setDid(e.record.author.did),null!==(i=e.record.author.viewer)&&void 0!==i&&i.blocking)r.addBlocking(null===(a=e.record.author.viewer)||void 0===a?void 0:a.blocking);else if(null!==(s=e.record.author.viewer)&&void 0!==s&&s.blockedBy){var o;r.addBlockedBy(null===(o=e.record.author.viewer)||void 0===o?void 0:o.blockedBy)}else r.addBlockOther(!0)}return r.finalizeDecision(t)}(e.embed,t),c=function(e,t){return sh.isViewRecord(e.record)?my(e.record.author,t):fy.noop()}(e.embed,t)):function(e){return Boolean(e&&gh.isView(e))}(e.embed)&&(l=function(e,t){const r=new hy;var n;if(sh.isViewRecord(e.record.record)){if(r.setDid(e.record.record.author.did),null!==(n=e.record.record.labels)&&void 0!==n&&n.length)for(const l of e.record.record.labels)r.addLabel(l,t)}else if(sh.isViewBlocked(e.record.record)){var i,s,a;if(r.setDid(e.record.record.author.did),null!==(i=e.record.record.author.viewer)&&void 0!==i&&i.blocking)r.addBlocking(null===(a=e.record.record.author.viewer)||void 0===a?void 0:a.blocking);else if(null!==(s=e.record.record.author.viewer)&&void 0!==s&&s.blockedBy){var o;r.addBlockedBy(null===(o=e.record.record.author.viewer)||void 0===o?void 0:o.blockedBy)}else r.addBlockOther(!0)}return r.finalizeDecision(t)}(e.embed,t),c=function(e,t){return sh.isViewRecord(e.record.record)?my(e.record.record.author,t):fy.noop()}(e.embed,t)),null!==(r=l)&&void 0!==r&&r.blurMedia&&(l.blur=!0),Ey(s)||s.did!==t.userDid||vy(s,"blur"),a.cause&&a.did===t.userDid&&vy(a,"noop"),o.cause&&o.did===t.userDid&&vy(o,"noop"),l&&!Ey(l)&&l.did===t.userDid&&vy(l,"blur"),c&&!Ey(c)&&c.did===t.userDid&&vy(c,"noop");const d=yy(s,a,l,c),f=yy(s,a),p=yy(l,c);let h=!1;return((a.blur||a.blurMedia)&&"muted"!==(null===(n=a.cause)||void 0===n?void 0:n.type)||(o.blur||o.blurMedia)&&"muted"!==(null===(i=o.cause)||void 0===i?void 0:i.type))&&(h=!0),{decisions:{post:s,account:a,profile:o,quote:l,quotedAccount:c},content:{cause:Ey(f)?d.filter?d.cause:void 0:f.cause,filter:d.filter,blur:f.blur,alert:f.alert,noOverride:f.noOverride},avatar:{blur:h,alert:a.alert||o.alert,noOverride:a.noOverride||o.noOverride},embed:Ey(p,{ignoreFilter:!0})?a.blurMedia?{cause:a.cause,blur:!0,noOverride:a.noOverride}:s.blurMedia?{cause:s.cause,blur:!0,noOverride:s.noOverride}:{}:{cause:p.cause,blur:p.blur,alert:p.alert,noOverride:p.noOverride}}}function Sy(e,t){const r=fy.noop(),n=my(e.creator,t),i=gy(e.creator,t),s=yy(r,n);return{decisions:{feedGenerator:r,account:n,profile:i},content:{cause:Ey(s)?void 0:s.cause,filter:s.filter,blur:s.blur,alert:s.alert,noOverride:s.noOverride},avatar:{blur:n.blurMedia||i.blurMedia,alert:n.alert,noOverride:n.noOverride||i.noOverride}}}function Ay(e,t){const r=fy.noop(),n=pp.isProfileViewBasic(e.creator)?my(e.creator,t):fy.noop(),i=pp.isProfileViewBasic(e.creator)?gy(e.creator,t):fy.noop(),s=yy(r,n);return{decisions:{userList:r,account:n,profile:i},content:{cause:Ey(s)?void 0:s.cause,filter:s.filter,blur:s.blur,alert:s.alert,noOverride:s.noOverride},avatar:{blur:n.blurMedia||i.blurMedia,alert:n.alert,noOverride:n.noOverride||i.noOverride}}}var Ly={system:{id:"system",configurable:!1,labels:[py["!hide"],py["!no-promote"],py["!warn"],py["!no-unauthenticated"]],strings:{settings:{en:{name:"System",description:"Moderator overrides for special cases."}}}},legal:{id:"legal",configurable:!1,labels:[py["dmca-violation"],py.doxxing],strings:{settings:{en:{name:"Legal",description:"Content removed for legal reasons."}}}},sexual:{id:"sexual",configurable:!0,labels:[py.porn,py.sexual,py.nudity],strings:{settings:{en:{name:"Adult Content",description:"Content which is sexual in nature."}}}},violence:{id:"violence",configurable:!0,labels:[py.nsfl,py.corpse,py.gore,py.torture,py["self-harm"]],strings:{settings:{en:{name:"Violence",description:"Content which is violent or deeply disturbing."}}}},intolerance:{id:"intolerance",configurable:!0,labels:[py["intolerant-race"],py["intolerant-gender"],py["intolerant-sexual-orientation"],py["intolerant-religion"],py.intolerant,py["icon-intolerant"]],strings:{settings:{en:{name:"Intolerance",description:"Content or behavior which is hateful or intolerant toward a group of people."}}}},rude:{id:"rude",configurable:!0,labels:[py.threat],strings:{settings:{en:{name:"Rude",description:"Behavior which is rude toward other users."}}}},curation:{id:"curation",configurable:!0,labels:[py.spoiler],strings:{settings:{en:{name:"Curational",description:"Subjective moderation geared towards curating a more positive environment."}}}},spam:{id:"spam",configurable:!0,labels:[py.spam],strings:{settings:{en:{name:"Spam",description:"Content which doesn't add to the conversation."}}}},misinfo:{id:"misinfo",configurable:!0,labels:[py["account-security"],py["net-abuse"],py.impersonation,py.scam,py.misleading],strings:{settings:{en:{name:"Misinformation",description:"Content which misleads or defrauds users."}}}}},wy={hideReplies:!1,hideRepliesByUnfollowed:!1,hideRepliesByLikeCount:0,hideReposts:!1,hideQuotePosts:!1},Cy={sort:"oldest",prioritizeFollowedUsers:!0},ky=class extends Zg{constructor(){super(...arguments),this.getTimeline=(e,t)=>this.api.app.bsky.feed.getTimeline(e,t),this.getAuthorFeed=(e,t)=>this.api.app.bsky.feed.getAuthorFeed(e,t),this.getActorLikes=(e,t)=>this.api.app.bsky.feed.getActorLikes(e,t),this.getPostThread=(e,t)=>this.api.app.bsky.feed.getPostThread(e,t),this.getPost=e=>this.api.app.bsky.feed.post.get(e),this.getPosts=(e,t)=>this.api.app.bsky.feed.getPosts(e,t),this.getLikes=(e,t)=>this.api.app.bsky.feed.getLikes(e,t),this.getRepostedBy=(e,t)=>this.api.app.bsky.feed.getRepostedBy(e,t),this.getFollows=(e,t)=>this.api.app.bsky.graph.getFollows(e,t),this.getFollowers=(e,t)=>this.api.app.bsky.graph.getFollowers(e,t),this.getProfile=(e,t)=>this.api.app.bsky.actor.getProfile(e,t),this.getProfiles=(e,t)=>this.api.app.bsky.actor.getProfiles(e,t),this.getSuggestions=(e,t)=>this.api.app.bsky.actor.getSuggestions(e,t),this.searchActors=(e,t)=>this.api.app.bsky.actor.searchActors(e,t),this.searchActorsTypeahead=(e,t)=>this.api.app.bsky.actor.searchActorsTypeahead(e,t),this.listNotifications=(e,t)=>this.api.app.bsky.notification.listNotifications(e,t),this.countUnreadNotifications=(e,t)=>this.api.app.bsky.notification.getUnreadCount(e,t)}get app(){return this.api.app}async post(e){if(!this.session)throw new Error("Not logged in");return e.createdAt=e.createdAt||(new Date).toISOString(),this.api.app.bsky.feed.post.create({repo:this.session.did},e)}async deletePost(e){if(!this.session)throw new Error("Not logged in");const t=new I(e);return await this.api.app.bsky.feed.post.delete({repo:t.hostname,rkey:t.rkey})}async like(e,t){if(!this.session)throw new Error("Not logged in");return await this.api.app.bsky.feed.like.create({repo:this.session.did},{subject:{uri:e,cid:t},createdAt:(new Date).toISOString()})}async deleteLike(e){if(!this.session)throw new Error("Not logged in");const t=new I(e);return await this.api.app.bsky.feed.like.delete({repo:t.hostname,rkey:t.rkey})}async repost(e,t){if(!this.session)throw new Error("Not logged in");return await this.api.app.bsky.feed.repost.create({repo:this.session.did},{subject:{uri:e,cid:t},createdAt:(new Date).toISOString()})}async deleteRepost(e){if(!this.session)throw new Error("Not logged in");const t=new I(e);return await this.api.app.bsky.feed.repost.delete({repo:t.hostname,rkey:t.rkey})}async follow(e){if(!this.session)throw new Error("Not logged in");return await this.api.app.bsky.graph.follow.create({repo:this.session.did},{subject:e,createdAt:(new Date).toISOString()})}async deleteFollow(e){if(!this.session)throw new Error("Not logged in");const t=new I(e);return await this.api.app.bsky.graph.follow.delete({repo:t.hostname,rkey:t.rkey})}async upsertProfile(e){if(!this.session)throw new Error("Not logged in");let t=5;for(;t>=0;){const n=await this.com.atproto.repo.getRecord({repo:this.session.did,collection:"app.bsky.actor.profile",rkey:"self"}).catch((e=>{})),i=await e(null===n||void 0===n?void 0:n.data.value);i&&(i.$type="app.bsky.actor.profile");const s=Np.validateRecord(i);if(!s.success)throw s.error;try{await this.com.atproto.repo.putRecord({repo:this.session.did,collection:"app.bsky.actor.profile",rkey:"self",record:i,swapRecord:(null===n||void 0===n?void 0:n.data.cid)||null})}catch(r){if(t>0&&r instanceof Ha.InvalidSwapError){t--;continue}throw r}break}}async mute(e){return this.api.app.bsky.graph.muteActor({actor:e})}async unmute(e){return this.api.app.bsky.graph.unmuteActor({actor:e})}async muteModList(e){return this.api.app.bsky.graph.muteActorList({list:e})}async unmuteModList(e){return this.api.app.bsky.graph.unmuteActorList({list:e})}async blockModList(e){if(!this.session)throw new Error("Not logged in");return await this.api.app.bsky.graph.listblock.create({repo:this.session.did},{subject:e,createdAt:(new Date).toISOString()})}async unblockModList(e){var t;if(!this.session)throw new Error("Not logged in");const r=await this.api.app.bsky.graph.getList({list:e,limit:1});if(null===(t=r.data.list.viewer)||void 0===t||!t.blocked)return;const{rkey:n}=new I(r.data.list.viewer.blocked);return await this.api.app.bsky.graph.listblock.delete({repo:this.session.did,rkey:n})}async updateSeenNotifications(e){return e=e||(new Date).toISOString(),this.api.app.bsky.notification.updateSeen({seenAt:e})}async getPreferences(){const e={feeds:{saved:void 0,pinned:void 0},feedViewPrefs:{home:{...wy}},threadViewPrefs:{...Cy},adultContentEnabled:!1,contentLabels:{},birthDate:void 0,interests:{tags:[]}},t=await this.app.bsky.actor.getPreferences({});for(const r of t.data.preferences)if(pp.isAdultContentPref(r)&&pp.validateAdultContentPref(r).success)e.adultContentEnabled=r.enabled;else if(pp.isContentLabelPref(r)&&pp.validateAdultContentPref(r).success){let t=r.visibility;"show"===t&&(t="ignore"),"ignore"!==t&&"warn"!==t&&"hide"!==t||(e.contentLabels[r.label]=t)}else if(pp.isSavedFeedsPref(r)&&pp.validateSavedFeedsPref(r).success)e.feeds.saved=r.saved,e.feeds.pinned=r.pinned;else if(pp.isPersonalDetailsPref(r)&&pp.validatePersonalDetailsPref(r).success)r.birthDate&&(e.birthDate=new Date(r.birthDate));else if(pp.isFeedViewPref(r)&&pp.validateFeedViewPref(r).success){const{$type:t,feed:n,...i}=r;e.feedViewPrefs[r.feed]={...wy,...i}}else if(pp.isThreadViewPref(r)&&pp.validateThreadViewPref(r).success){const{$type:t,...n}=r;e.threadViewPrefs={...e.threadViewPrefs,...n}}else if(pp.isInterestsPref(r)&&pp.validateInterestsPref(r).success){const{$type:t,...n}=r;e.interests={...e.interests,...n}}return e}async setSavedFeeds(e,t){return _y(this,(()=>({saved:e,pinned:t})))}async addSavedFeed(e){return _y(this,((t,r)=>({saved:[...t.filter((t=>t!==e)),e],pinned:r})))}async removeSavedFeed(e){return _y(this,((t,r)=>({saved:t.filter((t=>t!==e)),pinned:r.filter((t=>t!==e))})))}async addPinnedFeed(e){return _y(this,((t,r)=>({saved:[...t.filter((t=>t!==e)),e],pinned:[...r.filter((t=>t!==e)),e]})))}async removePinnedFeed(e){return _y(this,((t,r)=>({saved:t,pinned:r.filter((t=>t!==e))})))}async setAdultContentEnabled(e){await xy(this,(t=>{let r=t.findLast((e=>pp.isAdultContentPref(e)&&pp.validateAdultContentPref(e).success));return r?r.enabled=e:r={$type:"app.bsky.actor.defs#adultContentPref",enabled:e},t.filter((e=>!pp.isAdultContentPref(e))).concat([r])}))}async setContentLabelPref(e,t){"show"===t&&(t="ignore"),await xy(this,(r=>{let n=r.findLast((t=>pp.isContentLabelPref(t)&&pp.validateAdultContentPref(t).success&&t.label===e));return n?n.visibility=t:n={$type:"app.bsky.actor.defs#contentLabelPref",label:e,visibility:t},r.filter((t=>!pp.isContentLabelPref(t)||t.label!==e)).concat([n])}))}async setPersonalDetails(e){let{birthDate:t}=e;t=t instanceof Date?t.toISOString():t,await xy(this,(e=>{let r=e.findLast((e=>pp.isPersonalDetailsPref(e)&&pp.validatePersonalDetailsPref(e).success));return r?r.birthDate=t:r={$type:"app.bsky.actor.defs#personalDetailsPref",birthDate:t},e.filter((e=>!pp.isPersonalDetailsPref(e))).concat([r])}))}async setFeedViewPrefs(e,t){await xy(this,(r=>{const n=r.findLast((t=>pp.isFeedViewPref(t)&&pp.validateFeedViewPref(t).success&&t.feed===e));return n&&(t={...n,...t}),r.filter((r=>!pp.isFeedViewPref(t)||r.feed!==e)).concat([{...t,$type:"app.bsky.actor.defs#feedViewPref",feed:e}])}))}async setThreadViewPrefs(e){await xy(this,(t=>{const r=t.findLast((e=>pp.isThreadViewPref(e)&&pp.validateThreadViewPref(e).success));return r&&(e={...r,...e}),t.filter((e=>!pp.isThreadViewPref(e))).concat([{...e,$type:"app.bsky.actor.defs#threadViewPref"}])}))}async setInterestsPref(e){await xy(this,(t=>{const r=t.findLast((e=>pp.isInterestsPref(e)&&pp.validateInterestsPref(e).success));return r&&(e={...r,...e}),t.filter((e=>!pp.isInterestsPref(e))).concat([{...e,$type:"app.bsky.actor.defs#interestsPref"}])}))}};async function xy(e,t){const r=t((await e.app.bsky.actor.getPreferences({})).data.preferences);!1!==r&&await e.app.bsky.actor.putPreferences({preferences:r})}async function _y(e,t){let r;return await xy(e,(e=>{let n=e.findLast((e=>pp.isSavedFeedsPref(e)&&pp.validateSavedFeedsPref(e).success));return n?(r=t(n.saved,n.pinned),n.saved=r.saved,n.pinned=r.pinned):(r=t([],[]),n={$type:"app.bsky.actor.defs#savedFeedsPref",saved:r.saved,pinned:r.pinned}),e.filter((e=>!pp.isSavedFeedsPref(e))).concat([n])})),r}},4524:function(e,t){var r;!function(n){var i,s,a="0.5.4",o="hasOwnProperty",l=/[\.\/]/,c=/\s*,\s*/,u=function(e,t){return e-t},d={n:{}},f=function(){for(var e=0,t=this.length;e<t;e++)if("undefined"!=typeof this[e])return this[e]},p=function(){for(var e=this.length;--e;)if("undefined"!=typeof this[e])return this[e]},h=Object.prototype.toString,m=String,g=Array.isArray||function(e){return e instanceof Array||"[object Array]"==h.call(e)},y=function(e,t){var r,n=s,a=Array.prototype.slice.call(arguments,2),o=y.listeners(e),l=0,c=[],d={},h=[],m=i;h.firstDefined=f,h.lastDefined=p,i=e,s=0;for(var g=0,v=o.length;g<v;g++)"zIndex"in o[g]&&(c.push(o[g].zIndex),o[g].zIndex<0&&(d[o[g].zIndex]=o[g]));for(c.sort(u);c[l]<0;)if(r=d[c[l++]],h.push(r.apply(t,a)),s)return s=n,h;for(g=0;g<v;g++)if("zIndex"in(r=o[g]))if(r.zIndex==c[l]){if(h.push(r.apply(t,a)),s)break;do{if((r=d[c[++l]])&&h.push(r.apply(t,a)),s)break}while(r)}else d[r.zIndex]=r;else if(h.push(r.apply(t,a)),s)break;return s=n,i=m,h};y._events=d,y.listeners=function(e){var t,r,n,i,s,a,o,c,u=g(e)?e:e.split(l),f=d,p=[f],h=[];for(i=0,s=u.length;i<s;i++){for(c=[],a=0,o=p.length;a<o;a++)for(r=[(f=p[a].n)[u[i]],f["*"]],n=2;n--;)(t=r[n])&&(c.push(t),h=h.concat(t.f||[]));p=c}return h},y.separator=function(e){e?(e="["+(e=m(e).replace(/(?=[\.\^\]\[\-])/g,"\\"))+"]",l=new RegExp(e)):l=/[\.\/]/},y.on=function(e,t){if("function"!=typeof t)return function(){};for(var r=g(e)?g(e[0])?e:[e]:m(e).split(c),n=0,i=r.length;n<i;n++)!function(e){for(var r,n=g(e)?e:m(e).split(l),i=d,s=0,a=n.length;s<a;s++)i=(i=i.n).hasOwnProperty(n[s])&&i[n[s]]||(i[n[s]]={n:{}});for(i.f=i.f||[],s=0,a=i.f.length;s<a;s++)if(i.f[s]==t){r=!0;break}!r&&i.f.push(t)}(r[n]);return function(e){+e==+e&&(t.zIndex=+e)}},y.f=function(e){var t=[].slice.call(arguments,1);return function(){y.apply(null,[e,null].concat(t).concat([].slice.call(arguments,0)))}},y.stop=function(){s=1},y.nt=function(e){var t=g(i)?i.join("."):i;return e?new RegExp("(?:\\.|\\/|^)"+e+"(?:\\.|\\/|$)").test(t):t},y.nts=function(){return g(i)?i:i.split(l)},y.off=y.unbind=function(e,t){if(e){var r=g(e)?g(e[0])?e:[e]:m(e).split(c);if(r.length>1)for(var n=0,i=r.length;n<i;n++)y.off(r[n],t);else{r=g(e)?e:m(e).split(l);var s,a,u,f,p,h=[d],v=[];for(n=0,i=r.length;n<i;n++)for(f=0;f<h.length;f+=u.length-2){if(u=[f,1],s=h[f].n,"*"!=r[n])s[r[n]]&&(u.push(s[r[n]]),v.unshift({n:s,name:r[n]}));else for(a in s)s[o](a)&&(u.push(s[a]),v.unshift({n:s,name:a}));h.splice.apply(h,u)}for(n=0,i=h.length;n<i;n++)for(s=h[n];s.n;){if(t){if(s.f){for(f=0,p=s.f.length;f<p;f++)if(s.f[f]==t){s.f.splice(f,1);break}!s.f.length&&delete s.f}for(a in s.n)if(s.n[o](a)&&s.n[a].f){var E=s.n[a].f;for(f=0,p=E.length;f<p;f++)if(E[f]==t){E.splice(f,1);break}!E.length&&delete s.n[a].f}}else for(a in delete s.f,s.n)s.n[o](a)&&s.n[a].f&&delete s.n[a].f;s=s.n}e:for(n=0,i=v.length;n<i;n++){for(a in(s=v[n]).n[s.name].f)continue e;for(a in s.n[s.name].n)continue e;delete s.n[s.name]}}}else y._events=d={n:{}}},y.once=function(e,t){var r=function(){return y.off(e,r),t.apply(this,arguments)};return y.on(e,r)},y.version=a,y.toString=function(){return"You are running Eve "+a},n.eve=y,e.exports?e.exports=y:void 0===(r=function(){return y}.apply(t,[]))||(e.exports=r)}("undefined"!=typeof window?window:this)},122:e=>{"use strict";e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var n,i,s;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(i=n;0!==i--;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(s=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(i=n;0!==i--;)if(!Object.prototype.hasOwnProperty.call(r,s[i]))return!1;for(i=n;0!==i--;){var a=s[i];if(!e(t[a],r[a]))return!1}return!0}return t!==t&&r!==r}},3452:e=>{function t(e,t){e.onload=function(){this.onerror=this.onload=null,t(null,e)},e.onerror=function(){this.onerror=this.onload=null,t(new Error("Failed to load "+this.src),e)}}function r(e,t){e.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,t(null,e))}}e.exports=function(e,n,i){var s=document.head||document.getElementsByTagName("head")[0],a=document.createElement("script");"function"===typeof n&&(i=n,n={}),n=n||{},i=i||function(){},a.type=n.type||"text/javascript",a.charset=n.charset||"utf8",a.async=!("async"in n)||!!n.async,a.src=e,n.attrs&&function(e,t){for(var r in t)e.setAttribute(r,t[r])}(a,n.attrs),n.text&&(a.text=""+n.text),("onload"in a?t:r)(a,i),a.onload||t(a,i),s.appendChild(a)}},2123:e=>{"use strict";var t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(i){return!1}}()?Object.assign:function(e,i){for(var s,a,o=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var c in s=Object(arguments[l]))r.call(s,c)&&(o[c]=s[c]);if(t){a=t(s);for(var u=0;u<a.length;u++)n.call(s,a[u])&&(o[a[u]]=s[a[u]])}}return o}},1497:(e,t,r)=>{"use strict";var n=r(3218);function i(){}function s(){}s.resetWarningCache=i,e.exports=function(){function e(e,t,r,i,s,a){if(a!==n){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:i};return r.PropTypes=r,r}},5173:(e,t,r)=>{e.exports=r(1497)()},3218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},6723:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={slide:r(147),stack:r(9790),elastic:r(3285),bubble:r(5978),push:r(5572),pushRotate:r(8459),scaleDown:r(7428),scaleRotate:r(5991),fallDown:r(117),reveal:r(8233)},e.exports=t.default},7996:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function s(e){return e&&e.__esModule?e:{default:e}}var a=r(5043),o=s(a),l=s(r(5173)),c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,r){for(var n=!0;n;){var i=e,s=t,a=r;n=!1,null===i&&(i=Function.prototype);var o=Object.getOwnPropertyDescriptor(i,s);if(void 0!==o){if("value"in o)return o.value;var l=o.get;if(void 0===l)return;return l.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return;e=c,t=s,r=a,n=!0,o=c=void 0}}(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={hover:!1}}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"getLineStyle",value:function(e){return n({position:"absolute",height:"20%",left:0,right:0,top:2*e*20+"%",opacity:this.state.hover?.6:1},this.state.hover&&this.props.styles.bmBurgerBarsHover)}},{key:"render",value:function(){var e=this,t=void 0;if(this.props.customIcon){var r={className:("bm-icon "+(this.props.customIcon.props.className||"")).trim(),style:n({width:"100%",height:"100%"},this.props.styles.bmIcon)};t=o.default.cloneElement(this.props.customIcon,r)}else t=o.default.createElement("span",null,[0,1,2].map((function(t){return o.default.createElement("span",{key:t,className:("bm-burger-bars "+e.props.barClassName+" "+(e.state.hover?"bm-burger-bars-hover":"")).trim(),style:n({},e.getLineStyle(t),e.props.styles.bmBurgerBars)})})));return o.default.createElement("div",{className:("bm-burger-button "+this.props.className).trim(),style:n({zIndex:1e3},this.props.styles.bmBurgerButton)},o.default.createElement("button",{type:"button",id:"react-burger-menu-btn",onClick:this.props.onClick,onMouseOver:function(){e.setState({hover:!0}),e.props.onIconHoverChange&&e.props.onIconHoverChange({isMouseIn:!0})},onMouseOut:function(){e.setState({hover:!1}),e.props.onIconHoverChange&&e.props.onIconHoverChange({isMouseIn:!1})},style:{position:"absolute",left:0,top:0,zIndex:1,width:"100%",height:"100%",margin:0,padding:0,border:"none",fontSize:0,background:"transparent",cursor:"pointer"}},"Open Menu"),t)}}]),t}(a.Component);t.default=c,c.propTypes={barClassName:l.default.string,customIcon:l.default.element,styles:l.default.object},c.defaultProps={barClassName:"",className:"",styles:{}},e.exports=t.default},2103:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function s(e){return e&&e.__esModule?e:{default:e}}var a=r(5043),o=s(a),l=s(r(5173)),c=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,r){for(var n=!0;n;){var i=e,s=t,a=r;n=!1,null===i&&(i=Function.prototype);var o=Object.getOwnPropertyDescriptor(i,s);if(void 0!==o){if("value"in o)return o.value;var l=o.get;if(void 0===l)return;return l.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return;e=c,t=s,r=a,n=!0,o=c=void 0}}(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"getCrossStyle",value:function(e){return{position:"absolute",width:3,height:14,transform:"before"===e?"rotate(45deg)":"rotate(-45deg)"}}},{key:"render",value:function(){var e,t=this;if(this.props.customIcon){var r={className:("bm-cross "+(this.props.customIcon.props.className||"")).trim(),style:n({width:"100%",height:"100%"},this.props.styles.bmCross)};e=o.default.cloneElement(this.props.customIcon,r)}else e=o.default.createElement("span",{style:{position:"absolute",top:"6px",right:"14px"}},["before","after"].map((function(e,r){return o.default.createElement("span",{key:r,className:("bm-cross "+t.props.crossClassName).trim(),style:n({},t.getCrossStyle(e),t.props.styles.bmCross)})})));return o.default.createElement("div",{className:("bm-cross-button "+this.props.className).trim(),style:n({},{position:"absolute",width:24,height:24,right:8,top:8},this.props.styles.bmCrossButton)},o.default.createElement("button",n({type:"button",id:"react-burger-cross-btn",onClick:this.props.onClick,style:{position:"absolute",left:0,top:0,zIndex:1,width:"100%",height:"100%",margin:0,padding:0,border:"none",fontSize:0,background:"transparent",cursor:"pointer"}},!this.props.isOpen&&{tabIndex:-1}),"Close Menu"),e)}}]),t}(a.Component);t.default=c,c.propTypes={crossClassName:l.default.string,customIcon:l.default.element,isOpen:l.default.bool,styles:l.default.object},c.defaultProps={crossClassName:"",className:"",styles:{},isOpen:!1},e.exports=t.default},4312:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={overlay:function(e){return{position:"fixed",zIndex:1e3,width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.3)",opacity:e?1:0,MozTransform:e?"":"translate3d(100%, 0, 0)",MsTransform:e?"":"translate3d(100%, 0, 0)",OTransform:e?"":"translate3d(100%, 0, 0)",WebkitTransform:e?"":"translate3d(100%, 0, 0)",transform:e?"":"translate3d(100%, 0, 0)",transition:e?"opacity 0.3s":"opacity 0.3s, transform 0s 0.3s"}},menuWrap:function(e,t,r){return{position:"fixed",right:r?0:"inherit",zIndex:1100,width:t,height:"100%",MozTransform:e?"":r?"translate3d(100%, 0, 0)":"translate3d(-100%, 0, 0)",MsTransform:e?"":r?"translate3d(100%, 0, 0)":"translate3d(-100%, 0, 0)",OTransform:e?"":r?"translate3d(100%, 0, 0)":"translate3d(-100%, 0, 0)",WebkitTransform:e?"":r?"translate3d(100%, 0, 0)":"translate3d(-100%, 0, 0)",transform:e?"":r?"translate3d(100%, 0, 0)":"translate3d(-100%, 0, 0)",transition:"all 0.5s"}},menu:function(){return{height:"100%",boxSizing:"border-box",overflow:"auto"}},itemList:function(){return{height:"100%"}},item:function(){return{display:"block"}}},e.exports=t.default},6767:(e,t)=>{"use strict";function r(){var e=Array.from(document.getElementsByClassName("bm-item")).shift();e&&e.focus()}function n(){var e=Array.from(document.getElementsByClassName("bm-item")).pop();e&&e.focus()}function i(){var e=document.getElementById("react-burger-cross-btn");e&&e.focus()}function s(e){if(document.activeElement.className.includes("bm-item")){var t=document.activeElement[e];t?t.focus():i()}else"previousElementSibling"===e?n():r()}Object.defineProperty(t,"__esModule",{value:!0}),t.focusOnFirstMenuItem=r,t.focusOnLastMenuItem=n,t.focusOnCrossButton=i,t.focusOnMenuButton=function(){var e=document.getElementById("react-burger-menu-btn");e&&e.focus()},t.focusOnMenuItem=s,t.focusOnNextMenuItem=function(){s("nextElementSibling")},t.focusOnPreviousMenuItem=function(){s("previousElementSibling")}},1535:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=void 0;try{e=r(7775)}finally{return e}},e.exports=t.default},2650:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.pxToNum=function(e){return parseInt(e.slice(0,-2),10)}},3370:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,s=l}finally{try{!n&&o.return&&o.return()}finally{if(i)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};function s(e){return e&&e.__esModule?e:{default:e}}var a=s(r(5043)),o=(s(r(7950)),s(r(5173))),l=s(r(4312)),c=r(6767),u=s(r(7996)),d=s(r(2103));t.default=function(e){if(!e)throw new Error("No styles supplied");var t="ArrowDown",r="ArrowUp";var s=function(s){var o=a.default.useState(!1),f=n(o,2),p=f[0],h=f[1],m=a.default.useRef(),g=a.default.useRef({}),y=function(e){var t=a.default.useRef(e);return a.default.useEffect((function(){t.current=e})),t.current}(s.isOpen);function v(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];g.current=e,S(),setTimeout((function(){h((function(t){return"undefined"!==typeof e.isOpen?e.isOpen:!t}))}))}function E(){"function"===typeof s.onClose?s.onClose():v()}function b(e,t){var r=s.width,n=s.right;return e(p,"string"!==typeof r?r+"px":r,n,t)}function T(t,r,n){var a="bm"+t.replace(t.charAt(0),t.charAt(0).toUpperCase()),o=l.default[t]?b(l.default[t]):{};return e[t]&&(o=i({},o,b(e[t],r+1))),s.styles[a]&&(o=i({},o,s.styles[a])),n&&(o=i({},o,n)),s.noTransition&&delete o.transition,o}function R(e,t,r){var n=document.getElementById(e);if(n){var i=b(t);for(var a in i)i.hasOwnProperty(a)&&(n.style[a]=r?i[a]:"");var o=function(e){return e.style["overflow-x"]=r?"hidden":""};s.htmlClassName||o(document.querySelector("html")),s.bodyClassName||o(document.querySelector("body"))}else console.error("Element with ID '"+e+"' not found")}function S(){var t=arguments.length<=0||void 0===arguments[0]||arguments[0],r=function(e,r){return e.classList[t?"add":"remove"](r)};s.htmlClassName&&r(document.querySelector("html"),s.htmlClassName),s.bodyClassName&&r(document.querySelector("body"),s.bodyClassName),e.pageWrap&&s.pageWrapId&&R(s.pageWrapId,e.pageWrap,t),e.outerContainer&&s.outerContainerId&&R(s.outerContainerId,e.outerContainer,t);var n=document.querySelector(".bm-menu-wrap");n&&(t?n.removeAttribute("hidden"):n.setAttribute("hidden",!0))}function A(){m.current&&clearTimeout(m.current)}function L(e){switch((e=e||window.event).key){case"Escape":s.disableCloseOnEsc||(E(),(0,c.focusOnMenuButton)());break;case t:(0,c.focusOnNextMenuItem)();break;case r:(0,c.focusOnPreviousMenuItem)();break;case"Home":(0,c.focusOnFirstMenuItem)();break;case"End":(0,c.focusOnLastMenuItem)()}}function w(e){if((e=e||window.event).target===document.getElementById("react-burger-menu-btn"))switch(e.key){case t:case" ":v();break;case r:v({focusOnLastItem:!0})}}return a.default.useEffect((function(){return s.isOpen&&v({isOpen:!0,noStateChange:!0}),function(){S(!1),A()}}),[]),a.default.useEffect((function(){"undefined"!==typeof s.isOpen&&s.isOpen!==p&&s.isOpen!==y?v():e.svg&&function(){var t=document.getElementById("bm-morph-shape"),r=e.svg.lib(t).select("path");p?e.svg.animate(r):setTimeout((function(){r.attr("d",e.svg.pathInitial)}),300)}()})),a.default.useEffect((function(){var e=g.current,t=e.noStateChange,r=e.focusOnLastItem;t||s.onStateChange({isOpen:p}),s.disableAutoFocus||(p?r?(0,c.focusOnLastMenuItem)():(0,c.focusOnFirstMenuItem)():document.activeElement?document.activeElement.blur():document.body.blur()),A(),m.current=setTimeout((function(){m.current=null,p||S(!1)}),500);var n=p?L:w,i=s.customOnKeyDown||n;return window.addEventListener("keydown",i),function(){window.removeEventListener("keydown",i)}}),[p]),a.default.createElement("div",null,!s.noOverlay&&a.default.createElement("div",{className:("bm-overlay "+s.overlayClassName).trim(),onClick:function(){!0===s.disableOverlayClick||"function"===typeof s.disableOverlayClick&&s.disableOverlayClick()||E()},style:T("overlay")}),!1!==s.customBurgerIcon&&a.default.createElement("div",{style:T("burgerIcon")},a.default.createElement(u.default,{onClick:function(){"function"===typeof s.onOpen?s.onOpen():v()},styles:s.styles,customIcon:s.customBurgerIcon,className:s.burgerButtonClassName,barClassName:s.burgerBarClassName,onIconStateChange:s.onIconStateChange})),a.default.createElement("div",{id:s.id,className:("bm-menu-wrap "+s.className).trim(),style:T("menuWrap"),"aria-hidden":!p},e.svg&&a.default.createElement("div",{id:"bm-morph-shape",className:("bm-morph-shape "+s.morphShapeClassName).trim(),style:T("morphShape")},a.default.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 100 800",preserveAspectRatio:"none"},a.default.createElement("path",{d:e.svg.pathInitial}))),a.default.createElement("div",{className:("bm-menu "+s.menuClassName).trim(),style:T("menu")},a.default.createElement(s.itemListElement,{className:("bm-item-list "+s.itemListClassName).trim(),style:T("itemList")},a.default.Children.map(s.children,(function(e,t){if(e){var r=["bm-item",s.itemClassName,e.props.className].filter((function(e){return!!e})).join(" "),n=i({key:t,className:r,style:T("item",t,e.props.style)},!p&&{tabIndex:-1});return a.default.cloneElement(e,n)}})))),!1!==s.customCrossIcon&&a.default.createElement("div",{style:T("closeButton")},a.default.createElement(d.default,{onClick:E,styles:s.styles,customIcon:s.customCrossIcon,className:s.crossButtonClassName,crossClassName:s.crossClassName,isOpen:p}))))};return s.propTypes={bodyClassName:o.default.string,burgerBarClassName:o.default.string,burgerButtonClassName:o.default.string,className:o.default.string,crossButtonClassName:o.default.string,crossClassName:o.default.string,customBurgerIcon:o.default.oneOfType([o.default.element,o.default.oneOf([!1])]),customCrossIcon:o.default.oneOfType([o.default.element,o.default.oneOf([!1])]),customOnKeyDown:o.default.func,disableAutoFocus:o.default.bool,disableCloseOnEsc:o.default.bool,disableOverlayClick:o.default.oneOfType([o.default.bool,o.default.func]),htmlClassName:o.default.string,id:o.default.string,isOpen:o.default.bool,itemClassName:o.default.string,itemListClassName:o.default.string,itemListElement:o.default.oneOf(["div","nav"]),menuClassName:o.default.string,morphShapeClassName:o.default.string,noOverlay:o.default.bool,noTransition:o.default.bool,onClose:o.default.func,onIconHoverChange:o.default.func,onOpen:o.default.func,onStateChange:o.default.func,outerContainerId:e&&e.outerContainer?o.default.string.isRequired:o.default.string,overlayClassName:o.default.string,pageWrapId:e&&e.pageWrap?o.default.string.isRequired:o.default.string,right:o.default.bool,styles:o.default.object,width:o.default.oneOfType([o.default.number,o.default.string])},s.defaultProps={bodyClassName:"",burgerBarClassName:"",burgerButtonClassName:"",className:"",crossButtonClassName:"",crossClassName:"",disableAutoFocus:!1,disableCloseOnEsc:!1,htmlClassName:"",id:"",itemClassName:"",itemListClassName:"",menuClassName:"",morphShapeClassName:"",noOverlay:!1,noTransition:!1,onStateChange:function(){},outerContainerId:"",overlayClassName:"",pageWrapId:"",styles:{},width:300,onIconHoverChange:function(){},itemListElement:"nav"},s},e.exports=t.default},5978:(e,t,r)=>{"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(1535)),s=n(r(3370)),a=r(2650),o={svg:{lib:i.default,pathInitial:"M-7.312,0H0c0,0,0,113.839,0,400c0,264.506,0,400,0,400h-7.312V0z",pathOpen:"M-7.312,0H15c0,0,66,113.339,66,399.5C81,664.006,15,800,15,800H-7.312V0z;M-7.312,0H100c0,0,0,113.839,0,400c0,264.506,0,400,0,400H-7.312V0z",animate:function(e){var t=0,r=this.pathOpen.split(";"),n=r.length,i=window.mina;!function s(){t>n-1||(e.animate({path:r[t]},0===t?400:500,0===t?i.easein:i.elastic,(function(){s()})),t++)}()}},morphShape:function(e,t,r){return{position:"absolute",width:"100%",height:"100%",right:r?"inherit":0,left:r?0:"inherit",MozTransform:r?"rotateY(180deg)":"rotateY(0deg)",MsTransform:r?"rotateY(180deg)":"rotateY(0deg)",OTransform:r?"rotateY(180deg)":"rotateY(0deg)",WebkitTransform:r?"rotateY(180deg)":"rotateY(0deg)",transform:r?"rotateY(180deg)":"rotateY(0deg)"}},menuWrap:function(e,t,r){return{MozTransform:e?"translate3d(0, 0, 0)":r?"translate3d(100%, 0, 0)":"translate3d(-100%, 0, 0)",MsTransform:e?"translate3d(0, 0, 0)":r?"translate3d(100%, 0, 0)":"translate3d(-100%, 0, 0)",OTransform:e?"translate3d(0, 0, 0)":r?"translate3d(100%, 0, 0)":"translate3d(-100%, 0, 0)",WebkitTransform:e?"translate3d(0, 0, 0)":r?"translate3d(100%, 0, 0)":"translate3d(-100%, 0, 0)",transform:e?"translate3d(0, 0, 0)":r?"translate3d(100%, 0, 0)":"translate3d(-100%, 0, 0)",transition:e?"transform 0.4s 0s":"transform 0.4s"}},menu:function(e,t,r){var n=(0,a.pxToNum)(t)-140;return{position:"fixed",MozTransform:e?"":r?"translate3d("+n+", 0, 0)":"translate3d(-"+n+", 0, 0)",MsTransform:e?"":r?"translate3d("+n+", 0, 0)":"translate3d(-"+n+", 0, 0)",OTransform:e?"":r?"translate3d("+n+", 0, 0)":"translate3d(-"+n+", 0, 0)",WebkitTransform:e?"":r?"translate3d("+n+", 0, 0)":"translate3d(-"+n+", 0, 0)",transform:e?"":r?"translate3d("+n+", 0, 0)":"translate3d(-"+n+", 0, 0)",transition:e?"opacity 0.1s 0.4s cubic-bezier(.17, .67, .1, 1.27), transform 0.1s 0.4s cubic-bezier(.17, .67, .1, 1.27)":"opacity 0s 0.3s cubic-bezier(.17, .67, .1, 1.27), transform 0s 0.3s cubic-bezier(.17, .67, .1, 1.27)",opacity:e?1:0}},item:function(e,t,r,n){var i=(0,a.pxToNum)(t)-140;return{MozTransform:e?"translate3d(0, 0, 0)":r?"translate3d("+i+", 0, 0)":"translate3d(-"+i+", 0, 0)",MsTransform:e?"translate3d(0, 0, 0)":r?"translate3d("+i+", 0, 0)":"translate3d(-"+i+", 0, 0)",OTransform:e?"translate3d(0, 0, 0)":r?"translate3d("+i+", 0, 0)":"translate3d(-"+i+", 0, 0)",WebkitTransform:e?"translate3d(0, 0, 0)":r?"translate3d("+i+", 0, 0)":"translate3d(-"+i+", 0, 0)",transform:e?"translate3d(0, 0, 0)":r?"translate3d("+i+", 0, 0)":"translate3d(-"+i+", 0, 0)",transition:e?"opacity 0.3s 0.4s, transform 0.3s 0.4s":"opacity 0s 0.3s cubic-bezier(.17, .67, .1, 1.27), transform 0s 0.3s cubic-bezier(.17, .67, .1, 1.27)",opacity:e?1:0}},closeButton:function(e,t,r){var n=(0,a.pxToNum)(t)-140;return{MozTransform:e?"translate3d(0, 0, 0)":r?"translate3d("+n+", 0, 0)":"translate3d(-"+n+", 0, 0)",MsTransform:e?"translate3d(0, 0, 0)":r?"translate3d("+n+", 0, 0)":"translate3d(-"+n+", 0, 0)",OTransform:e?"translate3d(0, 0, 0)":r?"translate3d("+n+", 0, 0)":"translate3d(-"+n+", 0, 0)",WebkitTransform:e?"translate3d(0, 0, 0)":r?"translate3d("+n+", 0, 0)":"translate3d(-"+n+", 0, 0)",transform:e?"translate3d(0, 0, 0)":r?"translate3d("+n+", 0, 0)":"translate3d(-"+n+", 0, 0)",transition:e?"opacity 0.3s 0.4s cubic-bezier(.17, .67, .1, 1.27), transform 0.3s 0.4s cubic-bezier(.17, .67, .1, 1.27)":"opacity 0s 0.3s cubic-bezier(.17, .67, .1, 1.27), transform 0s 0.3s cubic-bezier(.17, .67, .1, 1.27)",opacity:e?1:0}}};t.default=(0,s.default)(o),e.exports=t.default},3285:(e,t,r)=>{"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(1535)),s=n(r(3370)),a=r(2650),o={svg:{lib:i.default,pathInitial:"M-1,0h101c0,0-97.833,153.603-97.833,396.167C2.167,627.579,100,800,100,800H-1V0z",pathOpen:"M-1,0h101c0,0,0-1,0,395c0,404,0,405,0,405H-1V0z",animate:function(e){e.animate({path:this.pathOpen},400,window.mina.easeinout)}},morphShape:function(e,t,r){return{position:"absolute",width:120,height:"100%",right:r?"inherit":0,left:r?0:"inherit",MozTransform:r?"rotateY(180deg)":"",MsTransform:r?"rotateY(180deg)":"",OTransform:r?"rotateY(180deg)":"",WebkitTransform:r?"rotateY(180deg)":"",transform:r?"rotateY(180deg)":""}},menuWrap:function(e,t,r){return{MozTransform:e?"translate3d(0, 0, 0)":r?"translate3d(100%, 0, 0)":"translate3d(-100%, 0, 0)",MsTransform:e?"translate3d(0, 0, 0)":r?"translate3d(100%, 0, 0)":"translate3d(-100%, 0, 0)",OTransform:e?"translate3d(0, 0, 0)":r?"translate3d(100%, 0, 0)":"translate3d(-100%, 0, 0)",WebkitTransform:e?"translate3d(0, 0, 0)":r?"translate3d(100%, 0, 0)":"translate3d(-100%, 0, 0)",transform:e?"translate3d(0, 0, 0)":r?"translate3d(100%, 0, 0)":"translate3d(-100%, 0, 0)",transition:"all 0.3s"}},menu:function(e,t,r){return{position:"fixed",right:r?0:"inherit",width:(0,a.pxToNum)(t)-120,whiteSpace:"nowrap",boxSizing:"border-box",overflow:"visible"}},itemList:function(e,t,r){if(r)return{position:"relative",left:"-110px",width:"170%",overflow:"auto"}},pageWrap:function(e,t,r){return{MozTransform:e?"":r?"translate3d(-100px, 0, 0)":"translate3d(100px, 0, 0)",MsTransform:e?"":r?"translate3d(-100px, 0, 0)":"translate3d(100px, 0, 0)",OTransform:e?"":r?"translate3d(-100px, 0, 0)":"translate3d(100px, 0, 0)",WebkitTransform:e?"":r?"translate3d(-100px, 0, 0)":"translate3d(100px, 0, 0)",transform:e?"":r?"translate3d(-100px, 0, 0)":"translate3d(100px, 0, 0)",transition:e?"all 0.3s":"all 0.3s 0.1s"}},outerContainer:function(e){return{overflow:e?"":"hidden"}}};t.default=(0,s.default)(o),e.exports=t.default},117:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(3370),s=(n=i)&&n.__esModule?n:{default:n};t.default=(0,s.default)({menuWrap:function(e){return{MozTransform:e?"":"translate3d(0, -100%, 0)",MsTransform:e?"":"translate3d(0, -100%, 0)",OTransform:e?"":"translate3d(0, -100%, 0)",WebkitTransform:e?"":"translate3d(0, -100%, 0)",transform:e?"":"translate3d(0, -100%, 0)",transition:"all 0.5s ease-in-out"}},pageWrap:function(e,t,r){return{MozTransform:e?"":r?"translate3d(-"+t+", 0, 0)":"translate3d("+t+", 0, 0)",MsTransform:e?"":r?"translate3d(-"+t+", 0, 0)":"translate3d("+t+", 0, 0)",OTransform:e?"":r?"translate3d(-"+t+", 0, 0)":"translate3d("+t+", 0, 0)",WebkitTransform:e?"":r?"translate3d(-"+t+", 0, 0)":"translate3d("+t+", 0, 0)",transform:e?"":r?"translate3d(-"+t+", 0, 0)":"translate3d("+t+", 0, 0)",transition:"all 0.5s"}},outerContainer:function(e){return{perspective:"1500px",perspectiveOrigin:"0% 50%",overflow:e?"":"hidden"}}}),e.exports=t.default},5572:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(3370),s=(n=i)&&n.__esModule?n:{default:n};t.default=(0,s.default)({pageWrap:function(e,t,r){return{MozTransform:e?"":r?"translate3d(-"+t+", 0, 0)":"translate3d("+t+", 0, 0)",MsTransform:e?"":r?"translate3d(-"+t+", 0, 0)":"translate3d("+t+", 0, 0)",OTransform:e?"":r?"translate3d(-"+t+", 0, 0)":"translate3d("+t+", 0, 0)",WebkitTransform:e?"":r?"translate3d(-"+t+", 0, 0)":"translate3d("+t+", 0, 0)",transform:e?"":r?"translate3d(-"+t+", 0, 0)":"translate3d("+t+", 0, 0)",transition:"all 0.5s"}},outerContainer:function(e){return{overflow:e?"":"hidden"}}}),e.exports=t.default},8459:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(3370),s=(n=i)&&n.__esModule?n:{default:n};t.default=(0,s.default)({pageWrap:function(e,t,r){return{MozTransform:e?"":r?"translate3d(-"+t+", 0, 0) rotateY(15deg)":"translate3d("+t+", 0, 0) rotateY(-15deg)",MsTransform:e?"":r?"translate3d(-"+t+", 0, 0) rotateY(15deg)":"translate3d("+t+", 0, 0) rotateY(-15deg)",OTransform:e?"":r?"translate3d(-"+t+", 0, 0) rotateY(15deg)":"translate3d("+t+", 0, 0) rotateY(-15deg)",WebkitTransform:e?"":r?"translate3d(-"+t+", 0, 0) rotateY(15deg)":"translate3d("+t+", 0, 0) rotateY(-15deg)",transform:e?"":r?"translate3d(-"+t+", 0, 0) rotateY(15deg)":"translate3d("+t+", 0, 0) rotateY(-15deg)",transformOrigin:r?"100% 50%":"0% 50%",transformStyle:"preserve-3d",transition:"all 0.5s"}},outerContainer:function(e){return{perspective:"1500px",overflow:e?"":"hidden"}}}),e.exports=t.default},8233:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(3370),s=(n=i)&&n.__esModule?n:{default:n};t.default=(0,s.default)({menuWrap:function(e,t,r){return{MozTransform:"translate3d(0, 0, 0)",MsTransform:"translate3d(0, 0, 0)",OTransform:"translate3d(0, 0, 0)",WebkitTransform:"translate3d(0, 0, 0)",transform:"translate3d(0, 0, 0)",zIndex:e?1e3:-1}},overlay:function(e,t,r){return{zIndex:1400,MozTransform:e?r?"translate3d(-"+t+", 0, 0)":"translate3d("+t+", 0, 0)":"translate3d(0, 0, 0)",MsTransform:e?r?"translate3d(-"+t+", 0, 0)":"translate3d("+t+", 0, 0)":"translate3d(0, 0, 0)",OTransform:e?r?"translate3d(-"+t+", 0, 0)":"translate3d("+t+", 0, 0)":"translate3d(0, 0, 0)",WebkitTransform:e?r?"translate3d(-"+t+", 0, 0)":"translate3d("+t+", 0, 0)":"translate3d(0, 0, 0)",transform:e?r?"translate3d(-"+t+", 0, 0)":"translate3d("+t+", 0, 0)":"translate3d(0, 0, 0)",transition:"all 0.5s",visibility:e?"visible":"hidden"}},pageWrap:function(e,t,r){return{MozTransform:e?"":r?"translate3d(-"+t+", 0, 0)":"translate3d("+t+", 0, 0)",MsTransform:e?"":r?"translate3d(-"+t+", 0, 0)":"translate3d("+t+", 0, 0)",OTransform:e?"":r?"translate3d(-"+t+", 0, 0)":"translate3d("+t+", 0, 0)",WebkitTransform:e?"":r?"translate3d(-"+t+", 0, 0)":"translate3d("+t+", 0, 0)",transform:e?"":r?"translate3d(-"+t+", 0, 0)":"translate3d("+t+", 0, 0)",transition:"all 0.5s",zIndex:1200,position:"relative"}},burgerIcon:function(e,t,r){return{MozTransform:e?r?"translate3d("+t+", 0, 0)":"translate3d(-"+t+", 0, 0)":"translate3d(0, 0, 0)",MsTransform:e?r?"translate3d("+t+", 0, 0)":"translate3d(-"+t+", 0, 0)":"translate3d(0, 0, 0)",OTransform:e?r?"translate3d("+t+", 0, 0)":"translate3d(-"+t+", 0, 0)":"translate3d(0, 0, 0)",WebkitTransform:e?r?"translate3d("+t+", 0, 0)":"translate3d(-"+t+", 0, 0)":"translate3d(0, 0, 0)",transform:e?r?"translate3d("+t+", 0, 0)":"translate3d(-"+t+", 0, 0)":"translate3d(0, 0, 0)",transition:"all 0.1s",position:"relative",zIndex:1300}},outerContainer:function(e){return{overflow:e?"":"hidden"}}}),e.exports=t.default},7428:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(3370),s=(n=i)&&n.__esModule?n:{default:n};t.default=(0,s.default)({pageWrap:function(e,t){return{MozTransform:e?"":"translate3d(0, 0, -"+t+")",MsTransform:e?"":"translate3d(0, 0, -"+t+")",OTransform:e?"":"translate3d(0, 0, -"+t+")",WebkitTransform:e?"":"translate3d(0, 0, -"+t+")",transform:e?"":"translate3d(0, 0, -"+t+")",transformOrigin:"100%",transformStyle:"preserve-3d",transition:"all 0.5s"}},outerContainer:function(){return{perspective:"1500px"}}}),e.exports=t.default},5991:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(3370),s=(n=i)&&n.__esModule?n:{default:n};t.default=(0,s.default)({pageWrap:function(e,t,r){return{MozTransform:e?"":r?"translate3d(-100px, 0, -600px) rotateY(20deg)":"translate3d(100px, 0, -600px) rotateY(-20deg)",MsTransform:e?"":r?"translate3d(-100px, 0, -600px) rotateY(20deg)":"translate3d(100px, 0, -600px) rotateY(-20deg)",OTransform:e?"":r?"translate3d(-100px, 0, -600px) rotateY(20deg)":"translate3d(100px, 0, -600px) rotateY(-20deg)",WebkitTransform:e?"":r?"translate3d(-100px, 0, -600px) rotateY(20deg)":"translate3d(100px, 0, -600px) rotateY(-20deg)",transform:e?"":r?"translate3d(-100px, 0, -600px) rotateY(20deg)":"translate3d(100px, 0, -600px) rotateY(-20deg)",transformStyle:"preserve-3d",transition:"all 0.5s",overflow:e?"":"hidden"}},outerContainer:function(e){return{perspective:"1500px",overflow:e?"":"hidden"}}}),e.exports=t.default},147:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(3370),s=(n=i)&&n.__esModule?n:{default:n};t.default=(0,s.default)({}),e.exports=t.default},9790:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(3370),s=(n=i)&&n.__esModule?n:{default:n};t.default=(0,s.default)({menuWrap:function(e,t,r){return{MozTransform:e?"":r?"translate3d("+t+", 0, 0)":"translate3d(-"+t+", 0, 0)",MsTransform:e?"":r?"translate3d("+t+", 0, 0)":"translate3d(-"+t+", 0, 0)",OTransform:e?"":r?"translate3d("+t+", 0, 0)":"translate3d(-"+t+", 0, 0)",WebkitTransform:e?"":r?"translate3d("+t+", 0, 0)":"translate3d(-"+t+", 0, 0)",transform:e?"":r?"translate3d("+t+", 0, 0)":"translate3d(-"+t+", 0, 0)",transition:e?"transform 0.8s cubic-bezier(0.7, 0, 0.3, 1)":"transform 0.4s cubic-bezier(0.7, 0, 0.3, 1)"}},item:function(e,t,r,n){return{MozTransform:e?"":"translate3d(0, "+500*n+"px, 0)",MsTransform:e?"":"translate3d(0, "+500*n+"px, 0)",OTransform:e?"":"translate3d(0, "+500*n+"px, 0)",WebkitTransform:e?"":"translate3d(0, "+500*n+"px, 0)",transform:e?"":"translate3d(0, "+500*n+"px, 0)",transition:e?"transform 0.8s cubic-bezier(0.7, 0, 0.3, 1)":"transform 0s 0.2s cubic-bezier(0.7, 0, 0.3, 1)"}}}),e.exports=t.default},2730:(e,t,r)=>{"use strict";var n=r(5043),i=r(8853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},h={};function m(e,t,r,n,i,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function E(e,t,r,n){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,n){if(null===t||"undefined"===typeof t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,i,n)&&(r=null),n||null===i?function(e){return!!d.call(h,e)||!d.call(p,e)&&(f.test(e)?h[e]=!0:(p[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=null===r?3!==i.type&&"":r:(t=i.attributeName,n=i.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(i=i.type)||4===i&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,T=Symbol.for("react.element"),R=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),C=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),I=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var B=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function U(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var N,O=Object.assign;function K(e){if(void 0===N)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);N=t&&t[1]||""}return"\n"+N+e}var F=!1;function M(e,t){if(!e||F)return"";F=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=n.stack.split("\n"),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||i[a]!==s[o]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{F=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?K(e):""}function V(e){switch(e.tag){case 5:return K(e.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return e=M(e.type,!1);case 11:return e=M(e.type.render,!1);case 1:return e=M(e.type,!0);default:return""}}function j(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case R:return"Portal";case L:return"Profiler";case A:return"StrictMode";case x:return"Suspense";case _:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case w:return(e._context.displayName||"Context")+".Provider";case k:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:j(e.type)||"Memo";case I:t=e._payload,e=e._init;try{return j(e(t))}catch(r){}}return null}function G(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return j(t);case 8:return t===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function X(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var i=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function z(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=H(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function $(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function W(e,t){var r=t.checked;return O({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function Y(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=q(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Z(e,t){null!=(t=t.checked)&&E(e,"checked",t,!1)}function Q(e,t){Z(e,t);var r=q(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,r):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ee(e,t,r){"number"===t&&$(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var te=Array.isArray;function re(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+q(r),t=null,i=0;i<e.length;i++){if(e[i].value===r)return e[i].selected=!0,void(n&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ne(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return O({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(s(92));if(te(r)){if(1<r.length)throw Error(s(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:q(r)}}function se(e,t){var r=q(t.value),n=q(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,n){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function fe(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},he=["Webkit","ms","Moz","O"];function me(e,t,r){return null==t||"boolean"===typeof t||""===t?"":r||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),i=me(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}Object.keys(pe).forEach((function(e){he.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ye=O({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function Ee(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function Te(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Re=null,Se=null,Ae=null;function Le(e){if(e=Ei(e)){if("function"!==typeof Re)throw Error(s(280));var t=e.stateNode;t&&(t=Ti(t),Re(e.stateNode,e.type,t))}}function we(e){Se?Ae?Ae.push(e):Ae=[e]:Se=e}function Ce(){if(Se){var e=Se,t=Ae;if(Ae=Se=null,Le(e),t)for(e=0;e<t.length;e++)Le(t[e])}}function ke(e,t){return e(t)}function xe(){}var _e=!1;function De(e,t,r){if(_e)return e(t,r);_e=!0;try{return ke(e,t,r)}finally{_e=!1,(null!==Se||null!==Ae)&&(xe(),Ce())}}function Ie(e,t){var r=e.stateNode;if(null===r)return null;var n=Ti(r);if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(s(231,t,typeof r));return r}var Be=!1;if(u)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){Be=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(ue){Be=!1}function Ue(e,t,r,n,i,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(u){this.onError(u)}}var Ne=!1,Oe=null,Ke=!1,Fe=null,Me={onError:function(e){Ne=!0,Oe=e}};function Ve(e,t,r,n,i,s,a,o,l){Ne=!1,Oe=null,Ue.apply(Me,arguments)}function je(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function Ge(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(je(e)!==e)throw Error(s(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=je(e)))throw Error(s(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(n=i.return)){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return qe(i),e;if(a===n)return qe(i),t;a=a.sibling}throw Error(s(188))}if(r.return!==n.return)r=i,n=a;else{for(var o=!1,l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o)throw Error(s(189))}}if(r.alternate!==n)throw Error(s(190))}if(3!==r.tag)throw Error(s(188));return r.stateNode.current===r?e:t}(e))?Xe(e):null}function Xe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Xe(e);if(null!==t)return t;e=e.sibling}return null}var ze=i.unstable_scheduleCallback,$e=i.unstable_cancelCallback,We=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Ze=i.unstable_now,Qe=i.unstable_getCurrentPriorityLevel,Je=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,rt=i.unstable_LowPriority,nt=i.unstable_IdlePriority,it=null,st=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var r=e.pendingLanes;if(0===r)return 0;var n=0,i=e.suspendedLanes,s=e.pingedLanes,a=268435455&r;if(0!==a){var o=a&~i;0!==o?n=dt(o):0!==(s&=a)&&(n=dt(s))}else 0!==(a=r&~i)?n=dt(a):0!==s&&(n=dt(s));if(0===n)return 0;if(0!==t&&t!==n&&0===(t&i)&&((i=n&-n)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&n)&&(n|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)i=1<<(r=31-at(t)),n|=e[r],t&=~i;return n}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ht(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function yt(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=r}function vt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-at(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var Et=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Tt,Rt,St,At,Lt,wt=!1,Ct=[],kt=null,xt=null,_t=null,Dt=new Map,It=new Map,Bt=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ut(e,t){switch(e){case"focusin":case"focusout":kt=null;break;case"dragenter":case"dragleave":xt=null;break;case"mouseover":case"mouseout":_t=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":It.delete(t.pointerId)}}function Nt(e,t,r,n,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=Ei(t))&&Rt(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ot(e){var t=vi(e.target);if(null!==t){var r=je(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=Ge(r)))return e.blockedOn=t,void Lt(e.priority,(function(){St(r)}))}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Kt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Wt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=Ei(r))&&Rt(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);be=n,r.target.dispatchEvent(n),be=null,t.shift()}return!0}function Ft(e,t,r){Kt(e)&&r.delete(t)}function Mt(){wt=!1,null!==kt&&Kt(kt)&&(kt=null),null!==xt&&Kt(xt)&&(xt=null),null!==_t&&Kt(_t)&&(_t=null),Dt.forEach(Ft),It.forEach(Ft)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,wt||(wt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Mt)))}function jt(e){function t(t){return Vt(t,e)}if(0<Ct.length){Vt(Ct[0],e);for(var r=1;r<Ct.length;r++){var n=Ct[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==kt&&Vt(kt,e),null!==xt&&Vt(xt,e),null!==_t&&Vt(_t,e),Dt.forEach(t),It.forEach(t),r=0;r<Bt.length;r++)(n=Bt[r]).blockedOn===e&&(n.blockedOn=null);for(;0<Bt.length&&null===(r=Bt[0]).blockedOn;)Ot(r),null===r.blockedOn&&Bt.shift()}var Gt=b.ReactCurrentBatchConfig,qt=!0;function Ht(e,t,r,n){var i=Et,s=Gt.transition;Gt.transition=null;try{Et=1,zt(e,t,r,n)}finally{Et=i,Gt.transition=s}}function Xt(e,t,r,n){var i=Et,s=Gt.transition;Gt.transition=null;try{Et=4,zt(e,t,r,n)}finally{Et=i,Gt.transition=s}}function zt(e,t,r,n){if(qt){var i=Wt(e,t,r,n);if(null===i)qn(e,t,n,$t,r),Ut(e,n);else if(function(e,t,r,n,i){switch(t){case"focusin":return kt=Nt(kt,e,t,r,n,i),!0;case"dragenter":return xt=Nt(xt,e,t,r,n,i),!0;case"mouseover":return _t=Nt(_t,e,t,r,n,i),!0;case"pointerover":var s=i.pointerId;return Dt.set(s,Nt(Dt.get(s)||null,e,t,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,It.set(s,Nt(It.get(s)||null,e,t,r,n,i)),!0}return!1}(i,e,t,r,n))n.stopPropagation();else if(Ut(e,n),4&t&&-1<Pt.indexOf(e)){for(;null!==i;){var s=Ei(i);if(null!==s&&Tt(s),null===(s=Wt(e,t,r,n))&&qn(e,t,n,$t,r),s===i)break;i=s}null!==i&&n.stopPropagation()}else qn(e,t,n,null,r)}}var $t=null;function Wt(e,t,r,n){if($t=null,null!==(e=vi(e=Te(n))))if(null===(t=je(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=Ge(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return $t=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case Je:return 1;case et:return 4;case tt:case rt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Zt=null,Qt=null,Jt=null;function er(){if(Jt)return Jt;var e,t,r=Qt,n=r.length,i="value"in Zt?Zt.value:Zt.textContent,s=i.length;for(e=0;e<n&&r[e]===i[e];e++);var a=n-e;for(t=1;t<=a&&r[n-t]===i[s-t];t++);return Jt=i.slice(e,1<t?1-t:void 0)}function tr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rr(){return!0}function nr(){return!1}function ir(e){function t(t,r,n,i,s){for(var a in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?rr:nr,this.isPropagationStopped=nr,this}return O(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),t}var sr,ar,or,lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cr=ir(lr),ur=O({},lr,{view:0,detail:0}),dr=ir(ur),fr=O({},ur,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ar,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==or&&(or&&"mousemove"===e.type?(sr=e.screenX-or.screenX,ar=e.screenY-or.screenY):ar=sr=0,or=e),sr)},movementY:function(e){return"movementY"in e?e.movementY:ar}}),pr=ir(fr),hr=ir(O({},fr,{dataTransfer:0})),mr=ir(O({},ur,{relatedTarget:0})),gr=ir(O({},lr,{animationName:0,elapsedTime:0,pseudoElement:0})),yr=O({},lr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vr=ir(yr),Er=ir(O({},lr,{data:0})),br={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Rr[e])&&!!t[e]}function Ar(){return Sr}var Lr=O({},ur,{key:function(e){if(e.key){var t=br[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Tr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ar,charCode:function(e){return"keypress"===e.type?tr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),wr=ir(Lr),Cr=ir(O({},fr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),kr=ir(O({},ur,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ar})),xr=ir(O({},lr,{propertyName:0,elapsedTime:0,pseudoElement:0})),_r=O({},fr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dr=ir(_r),Ir=[9,13,27,32],Br=u&&"CompositionEvent"in window,Pr=null;u&&"documentMode"in document&&(Pr=document.documentMode);var Ur=u&&"TextEvent"in window&&!Pr,Nr=u&&(!Br||Pr&&8<Pr&&11>=Pr),Or=String.fromCharCode(32),Kr=!1;function Fr(e,t){switch(e){case"keyup":return-1!==Ir.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mr(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vr=!1;var jr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!jr[e.type]:"textarea"===t}function qr(e,t,r,n){we(n),0<(t=Xn(t,"onChange")).length&&(r=new cr("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Hr=null,Xr=null;function zr(e){Kn(e,0)}function $r(e){if(z(bi(e)))return e}function Wr(e,t){if("change"===e)return t}var Yr=!1;if(u){var Zr;if(u){var Qr="oninput"in document;if(!Qr){var Jr=document.createElement("div");Jr.setAttribute("oninput","return;"),Qr="function"===typeof Jr.oninput}Zr=Qr}else Zr=!1;Yr=Zr&&(!document.documentMode||9<document.documentMode)}function en(){Hr&&(Hr.detachEvent("onpropertychange",tn),Xr=Hr=null)}function tn(e){if("value"===e.propertyName&&$r(Xr)){var t=[];qr(t,Xr,e,Te(e)),De(zr,t)}}function rn(e,t,r){"focusin"===e?(en(),Xr=r,(Hr=t).attachEvent("onpropertychange",tn)):"focusout"===e&&en()}function nn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $r(Xr)}function sn(e,t){if("click"===e)return $r(t)}function an(e,t){if("input"===e||"change"===e)return $r(t)}var on="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ln(e,t){if(on(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!d.call(t,i)||!on(e[i],t[i]))return!1}return!0}function cn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function un(e,t){var r,n=cn(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cn(n)}}function dn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fn(){for(var e=window,t=$();t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(n){r=!1}if(!r)break;t=$((e=t.contentWindow).document)}return t}function pn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function hn(e){var t=fn(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&dn(r.ownerDocument.documentElement,r)){if(null!==n&&pn(r))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=void 0===n.end?s:Math.min(n.end,i),!e.extend&&s>n&&(i=n,n=s,s=i),i=un(r,s);var a=un(r,n);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mn=u&&"documentMode"in document&&11>=document.documentMode,gn=null,yn=null,vn=null,En=!1;function bn(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;En||null==gn||gn!==$(n)||("selectionStart"in(n=gn)&&pn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},vn&&ln(vn,n)||(vn=n,0<(n=Xn(yn,"onSelect")).length&&(t=new cr("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=gn)))}function Tn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Rn={animationend:Tn("Animation","AnimationEnd"),animationiteration:Tn("Animation","AnimationIteration"),animationstart:Tn("Animation","AnimationStart"),transitionend:Tn("Transition","TransitionEnd")},Sn={},An={};function Ln(e){if(Sn[e])return Sn[e];if(!Rn[e])return e;var t,r=Rn[e];for(t in r)if(r.hasOwnProperty(t)&&t in An)return Sn[e]=r[t];return e}u&&(An=document.createElement("div").style,"AnimationEvent"in window||(delete Rn.animationend.animation,delete Rn.animationiteration.animation,delete Rn.animationstart.animation),"TransitionEvent"in window||delete Rn.transitionend.transition);var wn=Ln("animationend"),Cn=Ln("animationiteration"),kn=Ln("animationstart"),xn=Ln("transitionend"),_n=new Map,Dn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function In(e,t){_n.set(e,t),l(t,[e])}for(var Bn=0;Bn<Dn.length;Bn++){var Pn=Dn[Bn];In(Pn.toLowerCase(),"on"+(Pn[0].toUpperCase()+Pn.slice(1)))}In(wn,"onAnimationEnd"),In(Cn,"onAnimationIteration"),In(kn,"onAnimationStart"),In("dblclick","onDoubleClick"),In("focusin","onFocus"),In("focusout","onBlur"),In(xn,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Un="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nn=new Set("cancel close invalid load scroll toggle".split(" ").concat(Un));function On(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,n,i,a,o,l,c){if(Ve.apply(this,arguments),Ne){if(!Ne)throw Error(s(198));var u=Oe;Ne=!1,Oe=null,Ke||(Ke=!0,Fe=u)}}(n,t,void 0,e),e.currentTarget=null}function Kn(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var a=n.length-1;0<=a;a--){var o=n[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;On(i,o,c),s=l}else for(a=0;a<n.length;a++){if(l=(o=n[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;On(i,o,c),s=l}}}if(Ke)throw e=Fe,Ke=!1,Fe=null,e}function Fn(e,t){var r=t[mi];void 0===r&&(r=t[mi]=new Set);var n=e+"__bubble";r.has(n)||(Gn(t,e,2,!1),r.add(n))}function Mn(e,t,r){var n=0;t&&(n|=4),Gn(r,e,n,t)}var Vn="_reactListening"+Math.random().toString(36).slice(2);function jn(e){if(!e[Vn]){e[Vn]=!0,a.forEach((function(t){"selectionchange"!==t&&(Nn.has(t)||Mn(t,!1,e),Mn(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vn]||(t[Vn]=!0,Mn("selectionchange",!1,t))}}function Gn(e,t,r,n){switch(Yt(t)){case 1:var i=Ht;break;case 4:i=Xt;break;default:i=zt}r=i.bind(null,t,r,e),i=void 0,!Be||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),n?void 0!==i?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):void 0!==i?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function qn(e,t,r,n,i){var s=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var a=n.tag;if(3===a||4===a){var o=n.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===a)for(a=n.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==o;){if(null===(a=vi(o)))return;if(5===(l=a.tag)||6===l){n=s=a;continue e}o=o.parentNode}}n=n.return}De((function(){var n=s,i=Te(r),a=[];e:{var o=_n.get(e);if(void 0!==o){var l=cr,c=e;switch(e){case"keypress":if(0===tr(r))break e;case"keydown":case"keyup":l=wr;break;case"focusin":c="focus",l=mr;break;case"focusout":c="blur",l=mr;break;case"beforeblur":case"afterblur":l=mr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=hr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=kr;break;case wn:case Cn:case kn:l=gr;break;case xn:l=xr;break;case"scroll":l=dr;break;case"wheel":l=Dr;break;case"copy":case"cut":case"paste":l=vr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cr}var u=0!==(4&t),d=!u&&"scroll"===e,f=u?null!==o?o+"Capture":null:o;u=[];for(var p,h=n;null!==h;){var m=(p=h).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==f&&(null!=(m=Ie(h,f))&&u.push(Hn(h,m,p)))),d)break;h=h.return}0<u.length&&(o=new l(o,c,null,r,i),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||r===be||!(c=r.relatedTarget||r.fromElement)||!vi(c)&&!c[hi])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=n,null!==(c=(c=r.relatedTarget||r.toElement)?vi(c):null)&&(c!==(d=je(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=n),l!==c)){if(u=pr,m="onMouseLeave",f="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cr,m="onPointerLeave",f="onPointerEnter",h="pointer"),d=null==l?o:bi(l),p=null==c?o:bi(c),(o=new u(m,h+"leave",l,r,i)).target=d,o.relatedTarget=p,m=null,vi(i)===n&&((u=new u(f,h+"enter",c,r,i)).target=p,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(f=c,h=0,p=u=l;p;p=zn(p))h++;for(p=0,m=f;m;m=zn(m))p++;for(;0<h-p;)u=zn(u),h--;for(;0<p-h;)f=zn(f),p--;for(;h--;){if(u===f||null!==f&&u===f.alternate)break e;u=zn(u),f=zn(f)}u=null}else u=null;null!==l&&$n(a,o,l,u,!1),null!==c&&null!==d&&$n(a,d,c,u,!0)}if("select"===(l=(o=n?bi(n):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Wr;else if(Gr(o))if(Yr)g=an;else{g=nn;var y=rn}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=sn);switch(g&&(g=g(e,n))?qr(a,g,r,i):(y&&y(e,o,n),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&ee(o,"number",o.value)),y=n?bi(n):window,e){case"focusin":(Gr(y)||"true"===y.contentEditable)&&(gn=y,yn=n,vn=null);break;case"focusout":vn=yn=gn=null;break;case"mousedown":En=!0;break;case"contextmenu":case"mouseup":case"dragend":En=!1,bn(a,r,i);break;case"selectionchange":if(mn)break;case"keydown":case"keyup":bn(a,r,i)}var v;if(Br)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Vr?Fr(e,r)&&(E="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(E="onCompositionStart");E&&(Nr&&"ko"!==r.locale&&(Vr||"onCompositionStart"!==E?"onCompositionEnd"===E&&Vr&&(v=er()):(Qt="value"in(Zt=i)?Zt.value:Zt.textContent,Vr=!0)),0<(y=Xn(n,E)).length&&(E=new Er(E,e,null,r,i),a.push({event:E,listeners:y}),v?E.data=v:null!==(v=Mr(r))&&(E.data=v))),(v=Ur?function(e,t){switch(e){case"compositionend":return Mr(t);case"keypress":return 32!==t.which?null:(Kr=!0,Or);case"textInput":return(e=t.data)===Or&&Kr?null:e;default:return null}}(e,r):function(e,t){if(Vr)return"compositionend"===e||!Br&&Fr(e,t)?(e=er(),Jt=Qt=Zt=null,Vr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Nr&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(n=Xn(n,"onBeforeInput")).length&&(i=new Er("onBeforeInput","beforeinput",null,r,i),a.push({event:i,listeners:n}),i.data=v))}Kn(a,t)}))}function Hn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Xn(e,t){for(var r=t+"Capture",n=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Ie(e,r))&&n.unshift(Hn(e,s,i)),null!=(s=Ie(e,t))&&n.push(Hn(e,s,i))),e=e.return}return n}function zn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function $n(e,t,r,n,i){for(var s=t._reactName,a=[];null!==r&&r!==n;){var o=r,l=o.alternate,c=o.stateNode;if(null!==l&&l===n)break;5===o.tag&&null!==c&&(o=c,i?null!=(l=Ie(r,s))&&a.unshift(Hn(r,l,o)):i||null!=(l=Ie(r,s))&&a.push(Hn(r,l,o))),r=r.return}0!==a.length&&e.push({event:t,listeners:a})}var Wn=/\r\n?/g,Yn=/\u0000|\uFFFD/g;function Zn(e){return("string"===typeof e?e:""+e).replace(Wn,"\n").replace(Yn,"")}function Qn(e,t,r){if(t=Zn(t),Zn(e)!==t&&r)throw Error(s(425))}function Jn(){}var ei=null,ti=null;function ri(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ni="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(oi)}:ni;function oi(e){setTimeout((function(){throw e}))}function li(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&8===i.nodeType)if("/$"===(r=i.data)){if(0===n)return e.removeChild(i),void jt(t);n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=i}while(r);jt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),fi="__reactFiber$"+di,pi="__reactProps$"+di,hi="__reactContainer$"+di,mi="__reactEvents$"+di,gi="__reactListeners$"+di,yi="__reactHandles$"+di;function vi(e){var t=e[fi];if(t)return t;for(var r=e.parentNode;r;){if(t=r[hi]||r[fi]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=ui(e);null!==e;){if(r=e[fi])return r;e=ui(e)}return t}r=(e=r).parentNode}return null}function Ei(e){return!(e=e[fi]||e[hi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function Ti(e){return e[pi]||null}var Ri=[],Si=-1;function Ai(e){return{current:e}}function Li(e){0>Si||(e.current=Ri[Si],Ri[Si]=null,Si--)}function wi(e,t){Si++,Ri[Si]=e.current,e.current=t}var Ci={},ki=Ai(Ci),xi=Ai(!1),_i=Ci;function Di(e,t){var r=e.type.contextTypes;if(!r)return Ci;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in r)s[i]=t[i];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ii(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Bi(){Li(xi),Li(ki)}function Pi(e,t,r){if(ki.current!==Ci)throw Error(s(168));wi(ki,t),wi(xi,r)}function Ui(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,"function"!==typeof n.getChildContext)return r;for(var i in n=n.getChildContext())if(!(i in t))throw Error(s(108,G(e)||"Unknown",i));return O({},r,n)}function Ni(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,_i=ki.current,wi(ki,e),wi(xi,xi.current),!0}function Oi(e,t,r){var n=e.stateNode;if(!n)throw Error(s(169));r?(e=Ui(e,t,_i),n.__reactInternalMemoizedMergedChildContext=e,Li(xi),Li(ki),wi(ki,e)):Li(xi),wi(xi,r)}var Ki=null,Fi=!1,Mi=!1;function Vi(e){null===Ki?Ki=[e]:Ki.push(e)}function ji(){if(!Mi&&null!==Ki){Mi=!0;var e=0,t=Et;try{var r=Ki;for(Et=1;e<r.length;e++){var n=r[e];do{n=n(!0)}while(null!==n)}Ki=null,Fi=!1}catch(i){throw null!==Ki&&(Ki=Ki.slice(e+1)),ze(Je,ji),i}finally{Et=t,Mi=!1}}return null}var Gi=[],qi=0,Hi=null,Xi=0,zi=[],$i=0,Wi=null,Yi=1,Zi="";function Qi(e,t){Gi[qi++]=Xi,Gi[qi++]=Hi,Hi=e,Xi=t}function Ji(e,t,r){zi[$i++]=Yi,zi[$i++]=Zi,zi[$i++]=Wi,Wi=e;var n=Yi;e=Zi;var i=32-at(n)-1;n&=~(1<<i),r+=1;var s=32-at(t)+i;if(30<s){var a=i-i%5;s=(n&(1<<a)-1).toString(32),n>>=a,i-=a,Yi=1<<32-at(t)+i|r<<i|n,Zi=s+e}else Yi=1<<s|r<<i|n,Zi=e}function es(e){null!==e.return&&(Qi(e,1),Ji(e,1,0))}function ts(e){for(;e===Hi;)Hi=Gi[--qi],Gi[qi]=null,Xi=Gi[--qi],Gi[qi]=null;for(;e===Wi;)Wi=zi[--$i],zi[$i]=null,Zi=zi[--$i],zi[$i]=null,Yi=zi[--$i],zi[$i]=null}var rs=null,ns=null,is=!1,ss=null;function as(e,t){var r=Ic(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function os(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,rs=e,ns=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,rs=e,ns=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==Wi?{id:Yi,overflow:Zi}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Ic(18,null,null,0)).stateNode=t,r.return=e,e.child=r,rs=e,ns=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=ns;if(t){var r=t;if(!os(e,t)){if(ls(e))throw Error(s(418));t=ci(r.nextSibling);var n=rs;t&&os(e,t)?as(n,r):(e.flags=-4097&e.flags|2,is=!1,rs=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,rs=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;rs=e}function ds(e){if(e!==rs)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ri(e.type,e.memoizedProps)),t&&(t=ns)){if(ls(e))throw fs(),Error(s(418));for(;t;)as(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){ns=ci(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}ns=null}}else ns=rs?ci(e.stateNode.nextSibling):null;return!0}function fs(){for(var e=ns;e;)e=ci(e.nextSibling)}function ps(){ns=rs=null,is=!1}function hs(e){null===ss?ss=[e]:ss.push(e)}var ms=b.ReactCurrentBatchConfig;function gs(e,t){if(e&&e.defaultProps){for(var r in t=O({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}var ys=Ai(null),vs=null,Es=null,bs=null;function Ts(){bs=Es=vs=null}function Rs(e){var t=ys.current;Li(ys),e._currentValue=t}function Ss(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function As(e,t){vs=e,bs=Es=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bo=!0),e.firstContext=null)}function Ls(e){var t=e._currentValue;if(bs!==e)if(e={context:e,memoizedValue:t,next:null},null===Es){if(null===vs)throw Error(s(308));Es=e,vs.dependencies={lanes:0,firstContext:e}}else Es=Es.next=e;return t}var ws=null;function Cs(e){null===ws?ws=[e]:ws.push(e)}function ks(e,t,r,n){var i=t.interleaved;return null===i?(r.next=r,Cs(t)):(r.next=i.next,i.next=r),t.interleaved=r,xs(e,n)}function xs(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var _s=!1;function Ds(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Is(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Bs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ps(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&xl)){var i=n.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),n.pending=t,xs(e,r)}return null===(i=n.interleaved)?(t.next=t,Cs(n)):(t.next=i.next,i.next=t),n.interleaved=t,xs(e,r)}function Us(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&r))){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,vt(e,r)}}function Ns(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var i=null,s=null;if(null!==(r=r.firstBaseUpdate)){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===s?i=s=a:s=s.next=a,r=r.next}while(null!==r);null===s?i=s=t:s=s.next=t}else i=s=t;return r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Os(e,t,r,n){var i=e.updateQueue;_s=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(a=0,u=c=l=null,o=s;;){var f=o.lane,p=o.eventTime;if((n&f)===f){null!==u&&(u=u.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var h=e,m=o;switch(f=t,p=r,m.tag){case 1:if("function"===typeof(h=m.payload)){d=h.call(p,d,f);break e}d=h;break e;case 3:h.flags=-65537&h.flags|128;case 0:if(null===(f="function"===typeof(h=m.payload)?h.call(p,d,f):h)||void 0===f)break e;d=O({},d,f);break e;case 2:_s=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[o]:f.push(o))}else p={eventTime:p,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,a|=f;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(f=o).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Ol|=a,e.lanes=a,e.memoizedState=d}}function Ks(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(null!==i){if(n.callback=null,n=r,"function"!==typeof i)throw Error(s(191,i));i.call(n)}}}var Fs=(new n.Component).refs;function Ms(e,t,r,n){r=null===(r=r(n,t=e.memoizedState))||void 0===r?t:O({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var Vs={isMounted:function(e){return!!(e=e._reactInternals)&&je(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=tc(),i=rc(e),s=Bs(n,i);s.payload=t,void 0!==r&&null!==r&&(s.callback=r),null!==(t=Ps(e,s,i))&&(nc(t,e,i,n),Us(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=tc(),i=rc(e),s=Bs(n,i);s.tag=1,s.payload=t,void 0!==r&&null!==r&&(s.callback=r),null!==(t=Ps(e,s,i))&&(nc(t,e,i,n),Us(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=tc(),n=rc(e),i=Bs(r,n);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Ps(e,i,n))&&(nc(t,e,n,r),Us(t,e,n))}};function js(e,t,r,n,i,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!ln(r,n)||!ln(i,s))}function Gs(e,t,r){var n=!1,i=Ci,s=t.contextType;return"object"===typeof s&&null!==s?s=Ls(s):(i=Ii(t)?_i:ki.current,s=(n=null!==(n=t.contextTypes)&&void 0!==n)?Di(e,i):Ci),t=new t(r,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Vs,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function qs(e,t,r,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Vs.enqueueReplaceState(t,t.state,null)}function Hs(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs=Fs,Ds(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Ls(s):(s=Ii(t)?_i:ki.current,i.context=Di(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(Ms(e,t,s,r),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Vs.enqueueReplaceState(i,i.state,null),Os(e,r,i,n),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Xs(e,t,r){if(null!==(e=r.ref)&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(s(309));var n=r.stateNode}if(!n)throw Error(s(147,e));var i=n,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;t===Fs&&(t=i.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(s(284));if(!r._owner)throw Error(s(290,e))}return e}function zs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function $s(e){return(0,e._init)(e._payload)}function Ws(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function a(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=2,r):n:(t.flags|=2,r):(t.flags|=1048576,r)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,r,n){return null===t||6!==t.tag?((t=Kc(r,e.mode,n)).return=e,t):((t=i(t,r)).return=e,t)}function c(e,t,r,n){var s=r.type;return s===S?d(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===I&&$s(s)===t.type)?((n=i(t,r.props)).ref=Xs(e,t,r),n.return=e,n):((n=Uc(r.type,r.key,r.props,null,e.mode,n)).ref=Xs(e,t,r),n.return=e,n)}function u(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Fc(r,e.mode,n)).return=e,t):((t=i(t,r.children||[])).return=e,t)}function d(e,t,r,n,s){return null===t||7!==t.tag?((t=Nc(r,e.mode,n,s)).return=e,t):((t=i(t,r)).return=e,t)}function f(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Kc(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case T:return(r=Uc(t.type,t.key,t.props,null,e.mode,r)).ref=Xs(e,null,t),r.return=e,r;case R:return(t=Fc(t,e.mode,r)).return=e,t;case I:return f(e,(0,t._init)(t._payload),r)}if(te(t)||U(t))return(t=Nc(t,e.mode,r,null)).return=e,t;zs(e,t)}return null}function p(e,t,r,n){var i=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r)return null!==i?null:l(e,t,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case T:return r.key===i?c(e,t,r,n):null;case R:return r.key===i?u(e,t,r,n):null;case I:return p(e,t,(i=r._init)(r._payload),n)}if(te(r)||U(r))return null!==i?null:d(e,t,r,n,null);zs(e,r)}return null}function h(e,t,r,n,i){if("string"===typeof n&&""!==n||"number"===typeof n)return l(t,e=e.get(r)||null,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case T:return c(t,e=e.get(null===n.key?r:n.key)||null,n,i);case R:return u(t,e=e.get(null===n.key?r:n.key)||null,n,i);case I:return h(e,t,r,(0,n._init)(n._payload),i)}if(te(n)||U(n))return d(t,e=e.get(r)||null,n,i,null);zs(t,n)}return null}function m(i,s,o,l){for(var c=null,u=null,d=s,m=s=0,g=null;null!==d&&m<o.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=p(i,d,o[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(i,d),s=a(y,s,m),null===u?c=y:u.sibling=y,u=y,d=g}if(m===o.length)return r(i,d),is&&Qi(i,m),c;if(null===d){for(;m<o.length;m++)null!==(d=f(i,o[m],l))&&(s=a(d,s,m),null===u?c=d:u.sibling=d,u=d);return is&&Qi(i,m),c}for(d=n(i,d);m<o.length;m++)null!==(g=h(d,i,m,o[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),s=a(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(i,e)})),is&&Qi(i,m),c}function g(i,o,l,c){var u=U(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,m=o,g=o=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var E=p(i,m,v.value,c);if(null===E){null===m&&(m=y);break}e&&m&&null===E.alternate&&t(i,m),o=a(E,o,g),null===d?u=E:d.sibling=E,d=E,m=y}if(v.done)return r(i,m),is&&Qi(i,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=f(i,v.value,c))&&(o=a(v,o,g),null===d?u=v:d.sibling=v,d=v);return is&&Qi(i,g),u}for(m=n(i,m);!v.done;g++,v=l.next())null!==(v=h(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),o=a(v,o,g),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach((function(e){return t(i,e)})),is&&Qi(i,g),u}return function e(n,s,a,l){if("object"===typeof a&&null!==a&&a.type===S&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case T:e:{for(var c=a.key,u=s;null!==u;){if(u.key===c){if((c=a.type)===S){if(7===u.tag){r(n,u.sibling),(s=i(u,a.props.children)).return=n,n=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===I&&$s(c)===u.type){r(n,u.sibling),(s=i(u,a.props)).ref=Xs(n,u,a),s.return=n,n=s;break e}r(n,u);break}t(n,u),u=u.sibling}a.type===S?((s=Nc(a.props.children,n.mode,l,a.key)).return=n,n=s):((l=Uc(a.type,a.key,a.props,null,n.mode,l)).ref=Xs(n,s,a),l.return=n,n=l)}return o(n);case R:e:{for(u=a.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){r(n,s.sibling),(s=i(s,a.children||[])).return=n,n=s;break e}r(n,s);break}t(n,s),s=s.sibling}(s=Fc(a,n.mode,l)).return=n,n=s}return o(n);case I:return e(n,s,(u=a._init)(a._payload),l)}if(te(a))return m(n,s,a,l);if(U(a))return g(n,s,a,l);zs(n,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(r(n,s.sibling),(s=i(s,a)).return=n,n=s):(r(n,s),(s=Kc(a,n.mode,l)).return=n,n=s),o(n)):r(n,s)}}var Ys=Ws(!0),Zs=Ws(!1),Qs={},Js=Ai(Qs),ea=Ai(Qs),ta=Ai(Qs);function ra(e){if(e===Qs)throw Error(s(174));return e}function na(e,t){switch(wi(ta,t),wi(ea,e),wi(Js,Qs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Li(Js),wi(Js,t)}function ia(){Li(Js),Li(ea),Li(ta)}function sa(e){ra(ta.current);var t=ra(Js.current),r=le(t,e.type);t!==r&&(wi(ea,e),wi(Js,r))}function aa(e){ea.current===e&&(Li(Js),Li(ea))}var oa=Ai(0);function la(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ca=[];function ua(){for(var e=0;e<ca.length;e++)ca[e]._workInProgressVersionPrimary=null;ca.length=0}var da=b.ReactCurrentDispatcher,fa=b.ReactCurrentBatchConfig,pa=0,ha=null,ma=null,ga=null,ya=!1,va=!1,Ea=0,ba=0;function Ta(){throw Error(s(321))}function Ra(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!on(e[r],t[r]))return!1;return!0}function Sa(e,t,r,n,i,a){if(pa=a,ha=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,da.current=null===e||null===e.memoizedState?ao:oo,e=r(n,i),va){a=0;do{if(va=!1,Ea=0,25<=a)throw Error(s(301));a+=1,ga=ma=null,t.updateQueue=null,da.current=lo,e=r(n,i)}while(va)}if(da.current=so,t=null!==ma&&null!==ma.next,pa=0,ga=ma=ha=null,ya=!1,t)throw Error(s(300));return e}function Aa(){var e=0!==Ea;return Ea=0,e}function La(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ga?ha.memoizedState=ga=e:ga=ga.next=e,ga}function wa(){if(null===ma){var e=ha.alternate;e=null!==e?e.memoizedState:null}else e=ma.next;var t=null===ga?ha.memoizedState:ga.next;if(null!==t)ga=t,ma=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ma=e).memoizedState,baseState:ma.baseState,baseQueue:ma.baseQueue,queue:ma.queue,next:null},null===ga?ha.memoizedState=ga=e:ga=ga.next=e}return ga}function Ca(e,t){return"function"===typeof t?t(e):t}function ka(e){var t=wa(),r=t.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=e;var n=ma,i=n.baseQueue,a=r.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}n.baseQueue=i=a,r.pending=null}if(null!==i){a=i.next,n=n.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((pa&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=f,o=n):c=c.next=f,ha.lanes|=d,Ol|=d}u=u.next}while(null!==u&&u!==a);null===c?o=n:c.next=l,on(n,t.memoizedState)||(bo=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(null!==(e=r.interleaved)){i=e;do{a=i.lane,ha.lanes|=a,Ol|=a,i=i.next}while(i!==e)}else null===i&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function xa(e){var t=wa(),r=t.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,a=t.memoizedState;if(null!==i){r.pending=null;var o=i=i.next;do{a=e(a,o.action),o=o.next}while(o!==i);on(a,t.memoizedState)||(bo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function _a(){}function Da(e,t){var r=ha,n=wa(),i=t(),a=!on(n.memoizedState,i);if(a&&(n.memoizedState=i,bo=!0),n=n.queue,Ga(Pa.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||null!==ga&&1&ga.memoizedState.tag){if(r.flags|=2048,Ka(9,Ba.bind(null,r,n,i,t),void 0,null),null===_l)throw Error(s(349));0!==(30&pa)||Ia(r,t,i)}return i}function Ia(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=ha.updateQueue)?(t={lastEffect:null,stores:null},ha.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Ba(e,t,r,n){t.value=r,t.getSnapshot=n,Ua(t)&&Na(e)}function Pa(e,t,r){return r((function(){Ua(t)&&Na(e)}))}function Ua(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!on(e,r)}catch(n){return!0}}function Na(e){var t=xs(e,1);null!==t&&nc(t,e,1,-1)}function Oa(e){var t=La();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ca,lastRenderedState:e},t.queue=e,e=e.dispatch=to.bind(null,ha,e),[t.memoizedState,e]}function Ka(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=ha.updateQueue)?(t={lastEffect:null,stores:null},ha.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function Fa(){return wa().memoizedState}function Ma(e,t,r,n){var i=La();ha.flags|=e,i.memoizedState=Ka(1|t,r,void 0,void 0===n?null:n)}function Va(e,t,r,n){var i=wa();n=void 0===n?null:n;var s=void 0;if(null!==ma){var a=ma.memoizedState;if(s=a.destroy,null!==n&&Ra(n,a.deps))return void(i.memoizedState=Ka(t,r,s,n))}ha.flags|=e,i.memoizedState=Ka(1|t,r,s,n)}function ja(e,t){return Ma(8390656,8,e,t)}function Ga(e,t){return Va(2048,8,e,t)}function qa(e,t){return Va(4,2,e,t)}function Ha(e,t){return Va(4,4,e,t)}function Xa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function za(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Va(4,4,Xa.bind(null,t,e),r)}function $a(){}function Wa(e,t){var r=wa();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&Ra(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Ya(e,t){var r=wa();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&Ra(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Za(e,t,r){return 0===(21&pa)?(e.baseState&&(e.baseState=!1,bo=!0),e.memoizedState=r):(on(r,t)||(r=mt(),ha.lanes|=r,Ol|=r,e.baseState=!0),t)}function Qa(e,t){var r=Et;Et=0!==r&&4>r?r:4,e(!0);var n=fa.transition;fa.transition={};try{e(!1),t()}finally{Et=r,fa.transition=n}}function Ja(){return wa().memoizedState}function eo(e,t,r){var n=rc(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},ro(e))no(t,r);else if(null!==(r=ks(e,t,r,n))){nc(r,e,n,tc()),io(r,t,n)}}function to(e,t,r){var n=rc(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(ro(e))no(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,r);if(i.hasEagerState=!0,i.eagerState=o,on(o,a)){var l=t.interleaved;return null===l?(i.next=i,Cs(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(r=ks(e,t,i,n))&&(nc(r,e,n,i=tc()),io(r,t,n))}}function ro(e){var t=e.alternate;return e===ha||null!==t&&t===ha}function no(e,t){va=ya=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function io(e,t,r){if(0!==(4194240&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,vt(e,r)}}var so={readContext:Ls,useCallback:Ta,useContext:Ta,useEffect:Ta,useImperativeHandle:Ta,useInsertionEffect:Ta,useLayoutEffect:Ta,useMemo:Ta,useReducer:Ta,useRef:Ta,useState:Ta,useDebugValue:Ta,useDeferredValue:Ta,useTransition:Ta,useMutableSource:Ta,useSyncExternalStore:Ta,useId:Ta,unstable_isNewReconciler:!1},ao={readContext:Ls,useCallback:function(e,t){return La().memoizedState=[e,void 0===t?null:t],e},useContext:Ls,useEffect:ja,useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Ma(4194308,4,Xa.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ma(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ma(4,2,e,t)},useMemo:function(e,t){var r=La();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=La();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=eo.bind(null,ha,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},La().memoizedState=e},useState:Oa,useDebugValue:$a,useDeferredValue:function(e){return La().memoizedState=e},useTransition:function(){var e=Oa(!1),t=e[0];return e=Qa.bind(null,e[1]),La().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ha,i=La();if(is){if(void 0===r)throw Error(s(407));r=r()}else{if(r=t(),null===_l)throw Error(s(349));0!==(30&pa)||Ia(n,t,r)}i.memoizedState=r;var a={value:r,getSnapshot:t};return i.queue=a,ja(Pa.bind(null,n,a,e),[e]),n.flags|=2048,Ka(9,Ba.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=La(),t=_l.identifierPrefix;if(is){var r=Zi;t=":"+t+"R"+(r=(Yi&~(1<<32-at(Yi)-1)).toString(32)+r),0<(r=Ea++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=ba++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},oo={readContext:Ls,useCallback:Wa,useContext:Ls,useEffect:Ga,useImperativeHandle:za,useInsertionEffect:qa,useLayoutEffect:Ha,useMemo:Ya,useReducer:ka,useRef:Fa,useState:function(){return ka(Ca)},useDebugValue:$a,useDeferredValue:function(e){return Za(wa(),ma.memoizedState,e)},useTransition:function(){return[ka(Ca)[0],wa().memoizedState]},useMutableSource:_a,useSyncExternalStore:Da,useId:Ja,unstable_isNewReconciler:!1},lo={readContext:Ls,useCallback:Wa,useContext:Ls,useEffect:Ga,useImperativeHandle:za,useInsertionEffect:qa,useLayoutEffect:Ha,useMemo:Ya,useReducer:xa,useRef:Fa,useState:function(){return xa(Ca)},useDebugValue:$a,useDeferredValue:function(e){var t=wa();return null===ma?t.memoizedState=e:Za(t,ma.memoizedState,e)},useTransition:function(){return[xa(Ca)[0],wa().memoizedState]},useMutableSource:_a,useSyncExternalStore:Da,useId:Ja,unstable_isNewReconciler:!1};function co(e,t){try{var r="",n=t;do{r+=V(n),n=n.return}while(n);var i=r}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function uo(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function fo(e,t){try{console.error(t.value)}catch(r){setTimeout((function(){throw r}))}}var po="function"===typeof WeakMap?WeakMap:Map;function ho(e,t,r){(r=Bs(-1,r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Hl||(Hl=!0,Xl=n),fo(0,t)},r}function mo(e,t,r){(r=Bs(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){fo(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(r.callback=function(){fo(0,t),"function"!==typeof n&&(null===zl?zl=new Set([this]):zl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function go(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new po;var i=new Set;n.set(t,i)}else void 0===(i=n.get(t))&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=wc.bind(null,e,t,r),t.then(e,e))}function yo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,r,n,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=Bs(-1,1)).tag=2,Ps(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var Eo=b.ReactCurrentOwner,bo=!1;function To(e,t,r,n){t.child=null===e?Zs(t,null,r,n):Ys(t,e.child,r,n)}function Ro(e,t,r,n,i){r=r.render;var s=t.ref;return As(t,i),n=Sa(e,t,r,n,s,i),r=Aa(),null===e||bo?(is&&r&&es(t),t.flags|=1,To(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ho(e,t,i))}function So(e,t,r,n,i){if(null===e){var s=r.type;return"function"!==typeof s||Bc(s)||void 0!==s.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Uc(r.type,null,n,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ao(e,t,s,n,i))}if(s=e.child,0===(e.lanes&i)){var a=s.memoizedProps;if((r=null!==(r=r.compare)?r:ln)(a,n)&&e.ref===t.ref)return Ho(e,t,i)}return t.flags|=1,(e=Pc(s,n)).ref=t.ref,e.return=t,t.child=e}function Ao(e,t,r,n,i){if(null!==e){var s=e.memoizedProps;if(ln(s,n)&&e.ref===t.ref){if(bo=!1,t.pendingProps=n=s,0===(e.lanes&i))return t.lanes=e.lanes,Ho(e,t,i);0!==(131072&e.flags)&&(bo=!0)}}return Co(e,t,r,n,i)}function Lo(e,t,r){var n=t.pendingProps,i=n.children,s=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},wi(Pl,Bl),Bl|=r;else{if(0===(1073741824&r))return e=null!==s?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,wi(Pl,Bl),Bl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==s?s.baseLanes:r,wi(Pl,Bl),Bl|=n}else null!==s?(n=s.baseLanes|r,t.memoizedState=null):n=r,wi(Pl,Bl),Bl|=n;return To(e,t,i,r),t.child}function wo(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Co(e,t,r,n,i){var s=Ii(r)?_i:ki.current;return s=Di(t,s),As(t,i),r=Sa(e,t,r,n,s,i),n=Aa(),null===e||bo?(is&&n&&es(t),t.flags|=1,To(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ho(e,t,i))}function ko(e,t,r,n,i){if(Ii(r)){var s=!0;Ni(t)}else s=!1;if(As(t,i),null===t.stateNode)qo(e,t),Gs(t,r,n),Hs(t,r,n,i),n=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=r.contextType;"object"===typeof c&&null!==c?c=Ls(c):c=Di(t,c=Ii(r)?_i:ki.current);var u=r.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==n||l!==c)&&qs(t,a,n,c),_s=!1;var f=t.memoizedState;a.state=f,Os(t,n,a,i),l=t.memoizedState,o!==n||f!==l||xi.current||_s?("function"===typeof u&&(Ms(t,r,u,n),l=t.memoizedState),(o=_s||js(t,r,o,n,f,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),a.props=n,a.state=l,a.context=c,n=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,Is(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:gs(t.type,o),a.props=c,d=t.pendingProps,f=a.context,"object"===typeof(l=r.contextType)&&null!==l?l=Ls(l):l=Di(t,l=Ii(r)?_i:ki.current);var p=r.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==d||f!==l)&&qs(t,a,n,l),_s=!1,f=t.memoizedState,a.state=f,Os(t,n,a,i);var h=t.memoizedState;o!==d||f!==h||xi.current||_s?("function"===typeof p&&(Ms(t,r,p,n),h=t.memoizedState),(c=_s||js(t,r,c,n,f,h,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(n,h,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(n,h,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=h),a.props=n,a.state=h,a.context=l,n=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return xo(e,t,r,n,s,i)}function xo(e,t,r,n,i,s){wo(e,t);var a=0!==(128&t.flags);if(!n&&!a)return i&&Oi(t,r,!1),Ho(e,t,s);n=t.stateNode,Eo.current=t;var o=a&&"function"!==typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&a?(t.child=Ys(t,e.child,null,s),t.child=Ys(t,null,o,s)):To(e,t,o,s),t.memoizedState=n.state,i&&Oi(t,r,!0),t.child}function _o(e){var t=e.stateNode;t.pendingContext?Pi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Pi(0,t.context,!1),na(e,t.containerInfo)}function Do(e,t,r,n,i){return ps(),hs(i),t.flags|=256,To(e,t,r,n),t.child}var Io,Bo,Po,Uo,No={dehydrated:null,treeContext:null,retryLane:0};function Oo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ko(e,t,r){var n,i=t.pendingProps,a=oa.current,o=!1,l=0!==(128&t.flags);if((n=l)||(n=(null===e||null!==e.memoizedState)&&0!==(2&a)),n?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),wi(oa,1&a),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,o?(i=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Oc(l,i,0,null),e=Nc(e,i,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Oo(r),t.memoizedState=No,e):Fo(t,l));if(null!==(a=e.memoizedState)&&null!==(n=a.dehydrated))return function(e,t,r,n,i,a,o){if(r)return 256&t.flags?(t.flags&=-257,Mo(e,t,o,n=uo(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=n.fallback,i=t.mode,n=Oc({mode:"visible",children:n.children},i,0,null),(a=Nc(a,i,o,null)).flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,0!==(1&t.mode)&&Ys(t,e.child,null,o),t.child.memoizedState=Oo(o),t.memoizedState=No,a);if(0===(1&t.mode))return Mo(e,t,o,null);if("$!"===i.data){if(n=i.nextSibling&&i.nextSibling.dataset)var l=n.dgst;return n=l,Mo(e,t,o,n=uo(a=Error(s(419)),n,void 0))}if(l=0!==(o&e.childLanes),bo||l){if(null!==(n=_l)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(n.suspendedLanes|o))?0:i)&&i!==a.retryLane&&(a.retryLane=i,xs(e,i),nc(n,e,i,-1))}return gc(),Mo(e,t,o,n=uo(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=kc.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,ns=ci(i.nextSibling),rs=t,is=!0,ss=null,null!==e&&(zi[$i++]=Yi,zi[$i++]=Zi,zi[$i++]=Wi,Yi=e.id,Zi=e.overflow,Wi=t),t=Fo(t,n.children),t.flags|=4096,t)}(e,t,l,i,n,a,r);if(o){o=i.fallback,l=t.mode,n=(a=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Pc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==n?o=Pc(n,o):(o=Nc(o,l,r,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,l=null===(l=e.child.memoizedState)?Oo(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~r,t.memoizedState=No,i}return e=(o=e.child).sibling,i=Pc(o,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=r),i.return=t,i.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function Fo(e,t){return(t=Oc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Mo(e,t,r,n){return null!==n&&hs(n),Ys(t,e.child,null,r),(e=Fo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vo(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Ss(e.return,t,r)}function jo(e,t,r,n,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function Go(e,t,r){var n=t.pendingProps,i=n.revealOrder,s=n.tail;if(To(e,t,n.children,r),0!==(2&(n=oa.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vo(e,r,t);else if(19===e.tag)Vo(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(wi(oa,n),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;null!==r;)null!==(e=r.alternate)&&null===la(e)&&(i=r),r=r.sibling;null===(r=i)?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),jo(t,!1,i,r,s);break;case"backwards":for(r=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===la(e)){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}jo(t,!0,r,null,s);break;case"together":jo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ho(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Ol|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(r=Pc(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Pc(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Xo(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function zo(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;null!==i;)r|=i.lanes|i.childLanes,n|=14680064&i.subtreeFlags,n|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function $o(e,t,r){var n=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zo(t),null;case 1:case 17:return Ii(t.type)&&Bi(),zo(t),null;case 3:return n=t.stateNode,ia(),Li(xi),Li(ki),ua(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(ds(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(oc(ss),ss=null))),Bo(e,t),zo(t),null;case 5:aa(t);var i=ra(ta.current);if(r=t.type,null!==e&&null!=t.stateNode)Po(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(s(166));return zo(t),null}if(e=ra(Js.current),ds(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[fi]=t,n[pi]=a,e=0!==(1&t.mode),r){case"dialog":Fn("cancel",n),Fn("close",n);break;case"iframe":case"object":case"embed":Fn("load",n);break;case"video":case"audio":for(i=0;i<Un.length;i++)Fn(Un[i],n);break;case"source":Fn("error",n);break;case"img":case"image":case"link":Fn("error",n),Fn("load",n);break;case"details":Fn("toggle",n);break;case"input":Y(n,a),Fn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Fn("invalid",n);break;case"textarea":ie(n,a),Fn("invalid",n)}for(var l in ve(r,a),i=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?n.textContent!==c&&(!0!==a.suppressHydrationWarning&&Qn(n.textContent,c,e),i=["children",c]):"number"===typeof c&&n.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Qn(n.textContent,c,e),i=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fn("scroll",n)}switch(r){case"input":X(n),J(n,a,!0);break;case"textarea":X(n),ae(n);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(n.onclick=Jn)}n=i,t.updateQueue=n,null!==n&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof n.is?e=l.createElement(r,{is:n.is}):(e=l.createElement(r),"select"===r&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,r),e[fi]=t,e[pi]=n,Io(e,t,!1,!1),t.stateNode=e;e:{switch(l=Ee(r,n),r){case"dialog":Fn("cancel",e),Fn("close",e),i=n;break;case"iframe":case"object":case"embed":Fn("load",e),i=n;break;case"video":case"audio":for(i=0;i<Un.length;i++)Fn(Un[i],e);i=n;break;case"source":Fn("error",e),i=n;break;case"img":case"image":case"link":Fn("error",e),Fn("load",e),i=n;break;case"details":Fn("toggle",e),i=n;break;case"input":Y(e,n),i=W(e,n),Fn("invalid",e);break;case"option":default:i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=O({},n,{value:void 0}),Fn("invalid",e);break;case"textarea":ie(e,n),i=ne(e,n),Fn("invalid",e)}for(a in ve(r,i),c=i)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==r||""!==u)&&fe(e,u):"number"===typeof u&&fe(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Fn("scroll",e):null!=u&&E(e,a,u,l))}switch(r){case"input":X(e),J(e,n,!1);break;case"textarea":X(e),ae(e);break;case"option":null!=n.value&&e.setAttribute("value",""+q(n.value));break;case"select":e.multiple=!!n.multiple,null!=(a=n.value)?re(e,!!n.multiple,a,!1):null!=n.defaultValue&&re(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Jn)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return zo(t),null;case 6:if(e&&null!=t.stateNode)Uo(e,t,e.memoizedProps,n);else{if("string"!==typeof n&&null===t.stateNode)throw Error(s(166));if(r=ra(ta.current),ra(Js.current),ds(t)){if(n=t.stateNode,r=t.memoizedProps,n[fi]=t,(a=n.nodeValue!==r)&&null!==(e=rs))switch(e.tag){case 3:Qn(n.nodeValue,r,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qn(n.nodeValue,r,0!==(1&e.mode))}a&&(t.flags|=4)}else(n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[fi]=t,t.stateNode=n}return zo(t),null;case 13:if(Li(oa),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==ns&&0!==(1&t.mode)&&0===(128&t.flags))fs(),ps(),t.flags|=98560,a=!1;else if(a=ds(t),null!==n&&null!==n.dehydrated){if(null===e){if(!a)throw Error(s(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(s(317));a[fi]=t}else ps(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;zo(t),a=!1}else null!==ss&&(oc(ss),ss=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=r,t):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&oa.current)?0===Ul&&(Ul=3):gc())),null!==t.updateQueue&&(t.flags|=4),zo(t),null);case 4:return ia(),Bo(e,t),null===e&&jn(t.stateNode.containerInfo),zo(t),null;case 10:return Rs(t.type._context),zo(t),null;case 19:if(Li(oa),null===(a=t.memoizedState))return zo(t),null;if(n=0!==(128&t.flags),null===(l=a.rendering))if(n)Xo(a,!1);else{if(0!==Ul||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=la(e))){for(t.flags|=128,Xo(a,!1),null!==(n=l.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;null!==r;)e=n,(a=r).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return wi(oa,1&oa.current|2),t.child}e=e.sibling}null!==a.tail&&Ze()>Gl&&(t.flags|=128,n=!0,Xo(a,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=la(l))){if(t.flags|=128,n=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),Xo(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!is)return zo(t),null}else 2*Ze()-a.renderingStartTime>Gl&&1073741824!==r&&(t.flags|=128,n=!0,Xo(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(r=a.last)?r.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Ze(),t.sibling=null,r=oa.current,wi(oa,n?1&r|2:1&r),t):(zo(t),null);case 22:case 23:return fc(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!==(1&t.mode)?0!==(1073741824&Bl)&&(zo(t),6&t.subtreeFlags&&(t.flags|=8192)):zo(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Wo(e,t){switch(ts(t),t.tag){case 1:return Ii(t.type)&&Bi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ia(),Li(xi),Li(ki),ua(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return aa(t),null;case 13:if(Li(oa),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ps()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Li(oa),null;case 4:return ia(),null;case 10:return Rs(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}Io=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Bo=function(){},Po=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,ra(Js.current);var s,a=null;switch(r){case"input":i=W(e,i),n=W(e,n),a=[];break;case"select":i=O({},i,{value:void 0}),n=O({},n,{value:void 0}),a=[];break;case"textarea":i=ne(e,i),n=ne(e,n),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof n.onClick&&(e.onclick=Jn)}for(u in ve(r,n),r=null,i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var c=n[u];if(l=null!=i?i[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(r||(r={}),r[s]=c[s])}else r||(a||(a=[]),a.push(u,r)),r=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Fn("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}r&&(a=a||[]).push("style",r);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Uo=function(e,t,r,n){r!==n&&(t.flags|=4)};var Yo=!1,Zo=!1,Qo="function"===typeof WeakSet?WeakSet:Set,Jo=null;function el(e,t){var r=e.ref;if(null!==r)if("function"===typeof r)try{r(null)}catch(n){Lc(e,t,n)}else r.current=null}function tl(e,t,r){try{r()}catch(n){Lc(e,t,n)}}var rl=!1;function nl(e,t,r){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var i=n=n.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&tl(t,r,s)}i=i.next}while(i!==n)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function sl(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[pi],delete t[mi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=Jn));else if(4!==n&&null!==(e=e.child))for(cl(e,t,r),e=e.sibling;null!==e;)cl(e,t,r),e=e.sibling}function ul(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&null!==(e=e.child))for(ul(e,t,r),e=e.sibling;null!==e;)ul(e,t,r),e=e.sibling}var dl=null,fl=!1;function pl(e,t,r){for(r=r.child;null!==r;)hl(e,t,r),r=r.sibling}function hl(e,t,r){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,r)}catch(o){}switch(r.tag){case 5:Zo||el(r,t);case 6:var n=dl,i=fl;dl=null,pl(e,t,r),fl=i,null!==(dl=n)&&(fl?(e=dl,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):dl.removeChild(r.stateNode));break;case 18:null!==dl&&(fl?(e=dl,r=r.stateNode,8===e.nodeType?li(e.parentNode,r):1===e.nodeType&&li(e,r),jt(e)):li(dl,r.stateNode));break;case 4:n=dl,i=fl,dl=r.stateNode.containerInfo,fl=!0,pl(e,t,r),dl=n,fl=i;break;case 0:case 11:case 14:case 15:if(!Zo&&(null!==(n=r.updateQueue)&&null!==(n=n.lastEffect))){i=n=n.next;do{var s=i,a=s.destroy;s=s.tag,void 0!==a&&(0!==(2&s)||0!==(4&s))&&tl(r,t,a),i=i.next}while(i!==n)}pl(e,t,r);break;case 1:if(!Zo&&(el(r,t),"function"===typeof(n=r.stateNode).componentWillUnmount))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){Lc(r,t,o)}pl(e,t,r);break;case 21:pl(e,t,r);break;case 22:1&r.mode?(Zo=(n=Zo)||null!==r.memoizedState,pl(e,t,r),Zo=n):pl(e,t,r);break;default:pl(e,t,r)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Qo),t.forEach((function(t){var n=xc.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))}))}}function gl(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var i=r[n];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,fl=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,fl=!0;break e}l=l.return}if(null===dl)throw Error(s(160));hl(a,o,i),dl=null,fl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Lc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yl(t,e),t=t.sibling}function yl(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),vl(e),4&n){try{nl(3,e,e.return),il(3,e)}catch(g){Lc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Lc(e,e.return,g)}}break;case 1:gl(t,e),vl(e),512&n&&null!==r&&el(r,r.return);break;case 5:if(gl(t,e),vl(e),512&n&&null!==r&&el(r,r.return),32&e.flags){var i=e.stateNode;try{fe(i,"")}catch(g){Lc(e,e.return,g)}}if(4&n&&null!=(i=e.stateNode)){var a=e.memoizedProps,o=null!==r?r.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&Z(i,a),Ee(l,o);var u=Ee(l,a);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];"style"===d?ge(i,f):"dangerouslySetInnerHTML"===d?de(i,f):"children"===d?fe(i,f):E(i,d,f,u)}switch(l){case"input":Q(i,a);break;case"textarea":se(i,a);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var h=a.value;null!=h?re(i,!!a.multiple,h,!1):p!==!!a.multiple&&(null!=a.defaultValue?re(i,!!a.multiple,a.defaultValue,!0):re(i,!!a.multiple,a.multiple?[]:"",!1))}i[pi]=a}catch(g){Lc(e,e.return,g)}}break;case 6:if(gl(t,e),vl(e),4&n){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){Lc(e,e.return,g)}}break;case 3:if(gl(t,e),vl(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{jt(t.containerInfo)}catch(g){Lc(e,e.return,g)}break;case 4:default:gl(t,e),vl(e);break;case 13:gl(t,e),vl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(jl=Ze())),4&n&&ml(e);break;case 22:if(d=null!==r&&null!==r.memoizedState,1&e.mode?(Zo=(u=Zo)||d,gl(t,e),Zo=u):gl(t,e),vl(e),8192&n){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Jo=e,d=e.child;null!==d;){for(f=Jo=d;null!==Jo;){switch(h=(p=Jo).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:el(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){n=p,r=p.return;try{t=n,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Lc(n,r,g)}}break;case 5:el(p,p.return);break;case 22:if(null!==p.memoizedState){Rl(f);continue}}null!==h?(h.return=p,Jo=h):Rl(f)}d=d.sibling}e:for(d=null,f=e;;){if(5===f.tag){if(null===d){d=f;try{i=f.stateNode,u?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=f.stateNode,o=void 0!==(c=f.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",o))}catch(g){Lc(e,e.return,g)}}}else if(6===f.tag){if(null===d)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(g){Lc(e,e.return,g)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:gl(t,e),vl(e),4&n&&ml(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(ol(r)){var n=r;break e}r=r.return}throw Error(s(160))}switch(n.tag){case 5:var i=n.stateNode;32&n.flags&&(fe(i,""),n.flags&=-33),ul(e,ll(e),i);break;case 3:case 4:var a=n.stateNode.containerInfo;cl(e,ll(e),a);break;default:throw Error(s(161))}}catch(o){Lc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function El(e,t,r){Jo=e,bl(e,t,r)}function bl(e,t,r){for(var n=0!==(1&e.mode);null!==Jo;){var i=Jo,s=i.child;if(22===i.tag&&n){var a=null!==i.memoizedState||Yo;if(!a){var o=i.alternate,l=null!==o&&null!==o.memoizedState||Zo;o=Yo;var c=Zo;if(Yo=a,(Zo=l)&&!c)for(Jo=i;null!==Jo;)l=(a=Jo).child,22===a.tag&&null!==a.memoizedState?Sl(i):null!==l?(l.return=a,Jo=l):Sl(i);for(;null!==s;)Jo=s,bl(s,t,r),s=s.sibling;Jo=i,Yo=o,Zo=c}Tl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Jo=s):Tl(e)}}function Tl(e){for(;null!==Jo;){var t=Jo;if(0!==(8772&t.flags)){var r=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Zo||il(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!Zo)if(null===r)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:gs(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Ks(t,a,n);break;case 3:var o=t.updateQueue;if(null!==o){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}Ks(t,o,r)}break;case 5:var l=t.stateNode;if(null===r&&4&t.flags){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var f=d.dehydrated;null!==f&&jt(f)}}}break;default:throw Error(s(163))}Zo||512&t.flags&&sl(t)}catch(p){Lc(t,t.return,p)}}if(t===e){Jo=null;break}if(null!==(r=t.sibling)){r.return=t.return,Jo=r;break}Jo=t.return}}function Rl(e){for(;null!==Jo;){var t=Jo;if(t===e){Jo=null;break}var r=t.sibling;if(null!==r){r.return=t.return,Jo=r;break}Jo=t.return}}function Sl(e){for(;null!==Jo;){var t=Jo;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{il(4,t)}catch(l){Lc(t,r,l)}break;case 1:var n=t.stateNode;if("function"===typeof n.componentDidMount){var i=t.return;try{n.componentDidMount()}catch(l){Lc(t,i,l)}}var s=t.return;try{sl(t)}catch(l){Lc(t,s,l)}break;case 5:var a=t.return;try{sl(t)}catch(l){Lc(t,a,l)}}}catch(l){Lc(t,t.return,l)}if(t===e){Jo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Jo=o;break}Jo=t.return}}var Al,Ll=Math.ceil,wl=b.ReactCurrentDispatcher,Cl=b.ReactCurrentOwner,kl=b.ReactCurrentBatchConfig,xl=0,_l=null,Dl=null,Il=0,Bl=0,Pl=Ai(0),Ul=0,Nl=null,Ol=0,Kl=0,Fl=0,Ml=null,Vl=null,jl=0,Gl=1/0,ql=null,Hl=!1,Xl=null,zl=null,$l=!1,Wl=null,Yl=0,Zl=0,Ql=null,Jl=-1,ec=0;function tc(){return 0!==(6&xl)?Ze():-1!==Jl?Jl:Jl=Ze()}function rc(e){return 0===(1&e.mode)?1:0!==(2&xl)&&0!==Il?Il&-Il:null!==ms.transition?(0===ec&&(ec=mt()),ec):0!==(e=Et)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nc(e,t,r,n){if(50<Zl)throw Zl=0,Ql=null,Error(s(185));yt(e,r,n),0!==(2&xl)&&e===_l||(e===_l&&(0===(2&xl)&&(Kl|=r),4===Ul&&lc(e,Il)),ic(e,n),1===r&&0===xl&&0===(1&t.mode)&&(Gl=Ze()+500,Fi&&ji()))}function ic(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-at(s),o=1<<a,l=i[a];-1===l?0!==(o&r)&&0===(o&n)||(i[a]=pt(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var n=ft(e,e===_l?Il:0);if(0===n)null!==r&&$e(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=r&&$e(r),1===t)0===e.tag?function(e){Fi=!0,Vi(e)}(cc.bind(null,e)):Vi(cc.bind(null,e)),ai((function(){0===(6&xl)&&ji()})),r=null;else{switch(bt(n)){case 1:r=Je;break;case 4:r=et;break;case 16:default:r=tt;break;case 536870912:r=nt}r=_c(r,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function sc(e,t){if(Jl=-1,ec=0,0!==(6&xl))throw Error(s(327));var r=e.callbackNode;if(Sc()&&e.callbackNode!==r)return null;var n=ft(e,e===_l?Il:0);if(0===n)return null;if(0!==(30&n)||0!==(n&e.expiredLanes)||t)t=yc(e,n);else{t=n;var i=xl;xl|=2;var a=mc();for(_l===e&&Il===t||(ql=null,Gl=Ze()+500,pc(e,t));;)try{Ec();break}catch(l){hc(e,l)}Ts(),wl.current=a,xl=i,null!==Dl?t=0:(_l=null,Il=0,t=Ul)}if(0!==t){if(2===t&&(0!==(i=ht(e))&&(n=i,t=ac(e,i))),1===t)throw r=Nl,pc(e,0),lc(e,n),ic(e,Ze()),r;if(6===t)lc(e,n);else{if(i=e.current.alternate,0===(30&n)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!on(s(),i))return!1}catch(o){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,n))&&(0!==(a=ht(e))&&(n=a,t=ac(e,a))),1===t))throw r=Nl,pc(e,0),lc(e,n),ic(e,Ze()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(s(345));case 2:case 5:Rc(e,Vl,ql);break;case 3:if(lc(e,n),(130023424&n)===n&&10<(t=jl+500-Ze())){if(0!==ft(e,0))break;if(((i=e.suspendedLanes)&n)!==n){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ni(Rc.bind(null,e,Vl,ql),t);break}Rc(e,Vl,ql);break;case 4:if(lc(e,n),(4194240&n)===n)break;for(t=e.eventTimes,i=-1;0<n;){var o=31-at(n);a=1<<o,(o=t[o])>i&&(i=o),n&=~a}if(n=i,10<(n=(120>(n=Ze()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ll(n/1960))-n)){e.timeoutHandle=ni(Rc.bind(null,e,Vl,ql),n);break}Rc(e,Vl,ql);break;default:throw Error(s(329))}}}return ic(e,Ze()),e.callbackNode===r?sc.bind(null,e):null}function ac(e,t){var r=Ml;return e.current.memoizedState.isDehydrated&&(pc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=Vl,Vl=r,null!==t&&oc(t)),e}function oc(e){null===Vl?Vl=e:Vl.push.apply(Vl,e)}function lc(e,t){for(t&=~Fl,t&=~Kl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-at(t),n=1<<r;e[r]=-1,t&=~n}}function cc(e){if(0!==(6&xl))throw Error(s(327));Sc();var t=ft(e,0);if(0===(1&t))return ic(e,Ze()),null;var r=yc(e,t);if(0!==e.tag&&2===r){var n=ht(e);0!==n&&(t=n,r=ac(e,n))}if(1===r)throw r=Nl,pc(e,0),lc(e,t),ic(e,Ze()),r;if(6===r)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Rc(e,Vl,ql),ic(e,Ze()),null}function uc(e,t){var r=xl;xl|=1;try{return e(t)}finally{0===(xl=r)&&(Gl=Ze()+500,Fi&&ji())}}function dc(e){null!==Wl&&0===Wl.tag&&0===(6&xl)&&Sc();var t=xl;xl|=1;var r=kl.transition,n=Et;try{if(kl.transition=null,Et=1,e)return e()}finally{Et=n,kl.transition=r,0===(6&(xl=t))&&ji()}}function fc(){Bl=Pl.current,Li(Pl)}function pc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,ii(r)),null!==Dl)for(r=Dl.return;null!==r;){var n=r;switch(ts(n),n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&Bi();break;case 3:ia(),Li(xi),Li(ki),ua();break;case 5:aa(n);break;case 4:ia();break;case 13:case 19:Li(oa);break;case 10:Rs(n.type._context);break;case 22:case 23:fc()}r=r.return}if(_l=e,Dl=e=Pc(e.current,null),Il=Bl=t,Ul=0,Nl=null,Fl=Kl=Ol=0,Vl=Ml=null,null!==ws){for(t=0;t<ws.length;t++)if(null!==(n=(r=ws[t]).interleaved)){r.interleaved=null;var i=n.next,s=r.pending;if(null!==s){var a=s.next;s.next=i,n.next=a}r.pending=n}ws=null}return e}function hc(e,t){for(;;){var r=Dl;try{if(Ts(),da.current=so,ya){for(var n=ha.memoizedState;null!==n;){var i=n.queue;null!==i&&(i.pending=null),n=n.next}ya=!1}if(pa=0,ga=ma=ha=null,va=!1,Ea=0,Cl.current=null,null===r||null===r.return){Ul=1,Nl=t,Dl=null;break}e:{var a=e,o=r.return,l=r,c=t;if(t=Il,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,f=d.tag;if(0===(1&d.mode)&&(0===f||11===f||15===f)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=yo(o);if(null!==h){h.flags&=-257,vo(h,o,l,0,t),1&h.mode&&go(a,u,t),c=u;var m=(t=h).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){go(a,u,t),gc();break e}c=Error(s(426))}else if(is&&1&l.mode){var y=yo(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),vo(y,o,l,0,t),hs(co(c,l));break e}}a=c=co(c,l),4!==Ul&&(Ul=2),null===Ml?Ml=[a]:Ml.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Ns(a,ho(0,c,t));break e;case 1:l=c;var v=a.type,E=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==E&&"function"===typeof E.componentDidCatch&&(null===zl||!zl.has(E)))){a.flags|=65536,t&=-t,a.lanes|=t,Ns(a,mo(a,l,t));break e}}a=a.return}while(null!==a)}Tc(r)}catch(b){t=b,Dl===r&&null!==r&&(Dl=r=r.return);continue}break}}function mc(){var e=wl.current;return wl.current=so,null===e?so:e}function gc(){0!==Ul&&3!==Ul&&2!==Ul||(Ul=4),null===_l||0===(268435455&Ol)&&0===(268435455&Kl)||lc(_l,Il)}function yc(e,t){var r=xl;xl|=2;var n=mc();for(_l===e&&Il===t||(ql=null,pc(e,t));;)try{vc();break}catch(i){hc(e,i)}if(Ts(),xl=r,wl.current=n,null!==Dl)throw Error(s(261));return _l=null,Il=0,Ul}function vc(){for(;null!==Dl;)bc(Dl)}function Ec(){for(;null!==Dl&&!We();)bc(Dl)}function bc(e){var t=Al(e.alternate,e,Bl);e.memoizedProps=e.pendingProps,null===t?Tc(e):Dl=t,Cl.current=null}function Tc(e){var t=e;do{var r=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(r=$o(r,t,Bl)))return void(Dl=r)}else{if(null!==(r=Wo(r,t)))return r.flags&=32767,void(Dl=r);if(null===e)return Ul=6,void(Dl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Dl=t);Dl=t=e}while(null!==t);0===Ul&&(Ul=5)}function Rc(e,t,r){var n=Et,i=kl.transition;try{kl.transition=null,Et=1,function(e,t,r,n){do{Sc()}while(null!==Wl);if(0!==(6&xl))throw Error(s(327));r=e.finishedWork;var i=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-at(r),s=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~s}}(e,a),e===_l&&(Dl=_l=null,Il=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||$l||($l=!0,_c(tt,(function(){return Sc(),null}))),a=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||a){a=kl.transition,kl.transition=null;var o=Et;Et=1;var l=xl;xl|=4,Cl.current=null,function(e,t){if(ei=qt,pn(e=fn())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch(T){r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,f=e,p=null;t:for(;;){for(var h;f!==r||0!==i&&3!==f.nodeType||(l=o+i),f!==a||0!==n&&3!==f.nodeType||(c=o+n),3===f.nodeType&&(o+=f.nodeValue.length),null!==(h=f.firstChild);)p=f,f=h;for(;;){if(f===e)break t;if(p===r&&++u===i&&(l=o),p===a&&++d===n&&(c=o),null!==(h=f.nextSibling))break;p=(f=p).parentNode}f=h}r=-1===l||-1===c?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(ti={focusedElem:e,selectionRange:r},qt=!1,Jo=t;null!==Jo;)if(e=(t=Jo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Jo=e;else for(;null!==Jo;){t=Jo;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,E=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:gs(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(T){Lc(t,t.return,T)}if(null!==(e=t.sibling)){e.return=t.return,Jo=e;break}Jo=t.return}m=rl,rl=!1}(e,r),yl(r,e),hn(ti),qt=!!ei,ti=ei=null,e.current=r,El(r,e,i),Ye(),xl=l,Et=o,kl.transition=a}else e.current=r;if($l&&($l=!1,Wl=e,Yl=i),a=e.pendingLanes,0===a&&(zl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),ic(e,Ze()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,e=Xl,Xl=null,e;0!==(1&Yl)&&0!==e.tag&&Sc(),a=e.pendingLanes,0!==(1&a)?e===Ql?Zl++:(Zl=0,Ql=e):Zl=0,ji()}(e,t,r,n)}finally{kl.transition=i,Et=n}return null}function Sc(){if(null!==Wl){var e=bt(Yl),t=kl.transition,r=Et;try{if(kl.transition=null,Et=16>e?16:e,null===Wl)var n=!1;else{if(e=Wl,Wl=null,Yl=0,0!==(6&xl))throw Error(s(331));var i=xl;for(xl|=4,Jo=e.current;null!==Jo;){var a=Jo,o=a.child;if(0!==(16&Jo.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Jo=u;null!==Jo;){var d=Jo;switch(d.tag){case 0:case 11:case 15:nl(8,d,a)}var f=d.child;if(null!==f)f.return=d,Jo=f;else for(;null!==Jo;){var p=(d=Jo).sibling,h=d.return;if(al(d),d===u){Jo=null;break}if(null!==p){p.return=h,Jo=p;break}Jo=h}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Jo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Jo=o;else e:for(;null!==Jo;){if(0!==(2048&(a=Jo).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,Jo=v;break e}Jo=a.return}}var E=e.current;for(Jo=E;null!==Jo;){var b=(o=Jo).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,Jo=b;else e:for(o=E;null!==Jo;){if(0!==(2048&(l=Jo).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(R){Lc(l,l.return,R)}if(l===o){Jo=null;break e}var T=l.sibling;if(null!==T){T.return=l.return,Jo=T;break e}Jo=l.return}}if(xl=i,ji(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(R){}n=!0}return n}finally{Et=r,kl.transition=t}}return!1}function Ac(e,t,r){e=Ps(e,t=ho(0,t=co(r,t),1),1),t=tc(),null!==e&&(yt(e,1,t),ic(e,t))}function Lc(e,t,r){if(3===e.tag)Ac(e,e,r);else for(;null!==t;){if(3===t.tag){Ac(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===zl||!zl.has(n))){t=Ps(t,e=mo(t,e=co(r,e),1),1),e=tc(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function wc(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&r,_l===e&&(Il&r)===r&&(4===Ul||3===Ul&&(130023424&Il)===Il&&500>Ze()-jl?pc(e,0):Fl|=r),ic(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var r=tc();null!==(e=xs(e,t))&&(yt(e,t,r),ic(e,r))}function kc(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),Cc(e,r)}function xc(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;null!==i&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(s(314))}null!==n&&n.delete(t),Cc(e,r)}function _c(e,t){return ze(e,t)}function Dc(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ic(e,t,r,n){return new Dc(e,t,r,n)}function Bc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var r=e.alternate;return null===r?((r=Ic(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Uc(e,t,r,n,i,a){var o=2;if(n=e,"function"===typeof e)Bc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case S:return Nc(r.children,i,a,t);case A:o=8,i|=8;break;case L:return(e=Ic(12,r,t,2|i)).elementType=L,e.lanes=a,e;case x:return(e=Ic(13,r,t,i)).elementType=x,e.lanes=a,e;case _:return(e=Ic(19,r,t,i)).elementType=_,e.lanes=a,e;case B:return Oc(r,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case w:o=10;break e;case C:o=9;break e;case k:o=11;break e;case D:o=14;break e;case I:o=16,n=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Ic(o,r,t,i)).elementType=e,t.type=n,t.lanes=a,t}function Nc(e,t,r,n){return(e=Ic(7,e,n,t)).lanes=r,e}function Oc(e,t,r,n){return(e=Ic(22,e,n,t)).elementType=B,e.lanes=r,e.stateNode={isHidden:!1},e}function Kc(e,t,r){return(e=Ic(6,e,null,t)).lanes=r,e}function Fc(e,t,r){return(t=Ic(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Mc(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,r,n,i,s,a,o,l){return e=new Mc(e,t,r,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Ic(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ds(s),e}function jc(e){if(!e)return Ci;e:{if(je(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ii(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var r=e.type;if(Ii(r))return Ui(e,r,t)}return t}function Gc(e,t,r,n,i,s,a,o,l){return(e=Vc(r,n,!0,e,0,s,0,o,l)).context=jc(null),r=e.current,(s=Bs(n=tc(),i=rc(r))).callback=void 0!==t&&null!==t?t:null,Ps(r,s,i),e.current.lanes=i,yt(e,i,n),ic(e,n),e}function qc(e,t,r,n){var i=t.current,s=tc(),a=rc(i);return r=jc(r),null===t.context?t.context=r:t.pendingContext=r,(t=Bs(s,a)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=Ps(i,t,a))&&(nc(e,i,a,s),Us(e,i,a)),a}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Xc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function zc(e,t){Xc(e,t),(e=e.alternate)&&Xc(e,t)}Al=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||xi.current)bo=!0;else{if(0===(e.lanes&r)&&0===(128&t.flags))return bo=!1,function(e,t,r){switch(t.tag){case 3:_o(t),ps();break;case 5:sa(t);break;case 1:Ii(t.type)&&Ni(t);break;case 4:na(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;wi(ys,n._currentValue),n._currentValue=i;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(wi(oa,1&oa.current),t.flags|=128,null):0!==(r&t.child.childLanes)?Ko(e,t,r):(wi(oa,1&oa.current),null!==(e=Ho(e,t,r))?e.sibling:null);wi(oa,1&oa.current);break;case 19:if(n=0!==(r&t.childLanes),0!==(128&e.flags)){if(n)return Go(e,t,r);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),wi(oa,oa.current),n)break;return null;case 22:case 23:return t.lanes=0,Lo(e,t,r)}return Ho(e,t,r)}(e,t,r);bo=0!==(131072&e.flags)}else bo=!1,is&&0!==(1048576&t.flags)&&Ji(t,Xi,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;qo(e,t),e=t.pendingProps;var i=Di(t,ki.current);As(t,r),i=Sa(null,t,n,e,i,r);var a=Aa();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ii(n)?(a=!0,Ni(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ds(t),i.updater=Vs,t.stateNode=i,i._reactInternals=t,Hs(t,n,e,r),t=xo(null,t,n,!0,a,r)):(t.tag=0,is&&a&&es(t),To(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(qo(e,t),e=t.pendingProps,n=(i=n._init)(n._payload),t.type=n,i=t.tag=function(e){if("function"===typeof e)return Bc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===k)return 11;if(e===D)return 14}return 2}(n),e=gs(n,e),i){case 0:t=Co(null,t,n,e,r);break e;case 1:t=ko(null,t,n,e,r);break e;case 11:t=Ro(null,t,n,e,r);break e;case 14:t=So(null,t,n,gs(n.type,e),r);break e}throw Error(s(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,Co(e,t,n,i=t.elementType===n?i:gs(n,i),r);case 1:return n=t.type,i=t.pendingProps,ko(e,t,n,i=t.elementType===n?i:gs(n,i),r);case 3:e:{if(_o(t),null===e)throw Error(s(387));n=t.pendingProps,i=(a=t.memoizedState).element,Is(e,t),Os(t,n,null,r);var o=t.memoizedState;if(n=o.element,a.isDehydrated){if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Do(e,t,n,r,i=co(Error(s(423)),t));break e}if(n!==i){t=Do(e,t,n,r,i=co(Error(s(424)),t));break e}for(ns=ci(t.stateNode.containerInfo.firstChild),rs=t,is=!0,ss=null,r=Zs(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(ps(),n===i){t=Ho(e,t,r);break e}To(e,t,n,r)}t=t.child}return t;case 5:return sa(t),null===e&&cs(t),n=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,o=i.children,ri(n,i)?o=null:null!==a&&ri(n,a)&&(t.flags|=32),wo(e,t),To(e,t,o,r),t.child;case 6:return null===e&&cs(t),null;case 13:return Ko(e,t,r);case 4:return na(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=Ys(t,null,n,r):To(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,Ro(e,t,n,i=t.elementType===n?i:gs(n,i),r);case 7:return To(e,t,t.pendingProps,r),t.child;case 8:case 12:return To(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,wi(ys,n._currentValue),n._currentValue=o,null!==a)if(on(a.value,o)){if(a.children===i.children&&!xi.current){t=Ho(e,t,r);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===n){if(1===a.tag){(c=Bs(-1,r&-r)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=r,null!==(c=a.alternate)&&(c.lanes|=r),Ss(a.return,r,t),l.lanes|=r;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=r,null!==(l=o.alternate)&&(l.lanes|=r),Ss(o,r,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}To(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,As(t,r),n=n(i=Ls(i)),t.flags|=1,To(e,t,n,r),t.child;case 14:return i=gs(n=t.type,t.pendingProps),So(e,t,n,i=gs(n.type,i),r);case 15:return Ao(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:gs(n,i),qo(e,t),t.tag=1,Ii(n)?(e=!0,Ni(t)):e=!1,As(t,r),Gs(t,n,i),Hs(t,n,i,r),xo(null,t,n,!0,e,r);case 19:return Go(e,t,r);case 22:return Lo(e,t,r)}throw Error(s(156,t.tag))};var $c="function"===typeof reportError?reportError:function(e){console.error(e)};function Wc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function eu(e,t,r,n,i){var s=r._reactRootContainer;if(s){var a=s;if("function"===typeof i){var o=i;i=function(){var e=Hc(a);o.call(e)}}qc(t,a,e,i)}else a=function(e,t,r,n,i){if(i){if("function"===typeof n){var s=n;n=function(){var e=Hc(a);s.call(e)}}var a=Gc(t,n,e,0,null,!1,0,"",Jc);return e._reactRootContainer=a,e[hi]=a.current,jn(8===e.nodeType?e.parentNode:e),dc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof n){var o=n;n=function(){var e=Hc(l);o.call(e)}}var l=Vc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=l,e[hi]=l.current,jn(8===e.nodeType?e.parentNode:e),dc((function(){qc(t,l,r,n)})),l}(r,t,e,i,n);return Hc(a)}Yc.prototype.render=Wc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));qc(e,t,null,null)},Yc.prototype.unmount=Wc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc((function(){qc(null,e,null,null)})),t[hi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=At();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Bt.length&&0!==t&&t<Bt[r].priority;r++);Bt.splice(r,0,e),0===r&&Ot(e)}},Tt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=dt(t.pendingLanes);0!==r&&(vt(t,1|r),ic(t,Ze()),0===(6&xl)&&(Gl=Ze()+500,ji()))}break;case 13:dc((function(){var t=xs(e,1);if(null!==t){var r=tc();nc(t,e,1,r)}})),zc(e,1)}},Rt=function(e){if(13===e.tag){var t=xs(e,134217728);if(null!==t)nc(t,e,134217728,tc());zc(e,134217728)}},St=function(e){if(13===e.tag){var t=rc(e),r=xs(e,t);if(null!==r)nc(r,e,t,tc());zc(e,t)}},At=function(){return Et},Lt=function(e,t){var r=Et;try{return Et=e,t()}finally{Et=r}},Re=function(e,t,r){switch(t){case"input":if(Q(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=Ti(n);if(!i)throw Error(s(90));z(n),Q(n,i)}}}break;case"textarea":se(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},ke=uc,xe=dc;var tu={usingClientEntryPoint:!1,Events:[Ei,bi,Ti,we,Ce,uc]},ru={findFiberByHostInstance:vi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},nu={bundleType:ru.bundleType,version:ru.version,rendererPackageName:ru.rendererPackageName,rendererConfig:ru.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:ru.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(nu),st=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zc(t))throw Error(s(200));return function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:R,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},t.createRoot=function(e,t){if(!Zc(e))throw Error(s(299));var r=!1,n="",i=$c;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,r,0,n,i),e[hi]=t.current,jn(8===e.nodeType?e.parentNode:e),new Wc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,r){if(!Qc(t))throw Error(s(200));return eu(null,e,t,!0,r)},t.hydrateRoot=function(e,t,r){if(!Zc(e))throw Error(s(405));var n=null!=r&&r.hydratedSources||null,i=!1,a="",o=$c;if(null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(i=!0),void 0!==r.identifierPrefix&&(a=r.identifierPrefix),void 0!==r.onRecoverableError&&(o=r.onRecoverableError)),t=Gc(t,null,e,1,null!=r?r:null,i,0,a,o),e[hi]=t.current,jn(e),n)for(e=0;e<n.length;e++)i=(i=(r=n[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new Yc(t)},t.render=function(e,t,r){if(!Qc(t))throw Error(s(200));return eu(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!Qc(e))throw Error(s(40));return!!e._reactRootContainer&&(dc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[hi]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Qc(r))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return eu(e,t,r,!1,n)},t.version="18.2.0-next-9e3b772b8-20220608"},4391:(e,t,r)=>{"use strict";var n=r(7950);t.H=n.createRoot,n.hydrateRoot},7950:(e,t,r)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(2730)},6366:e=>{var t="undefined"!==typeof Element,r="function"===typeof Map,n="function"===typeof Set,i="function"===typeof ArrayBuffer&&!!ArrayBuffer.isView;function s(e,a){if(e===a)return!0;if(e&&a&&"object"==typeof e&&"object"==typeof a){if(e.constructor!==a.constructor)return!1;var o,l,c,u;if(Array.isArray(e)){if((o=e.length)!=a.length)return!1;for(l=o;0!==l--;)if(!s(e[l],a[l]))return!1;return!0}if(r&&e instanceof Map&&a instanceof Map){if(e.size!==a.size)return!1;for(u=e.entries();!(l=u.next()).done;)if(!a.has(l.value[0]))return!1;for(u=e.entries();!(l=u.next()).done;)if(!s(l.value[1],a.get(l.value[0])))return!1;return!0}if(n&&e instanceof Set&&a instanceof Set){if(e.size!==a.size)return!1;for(u=e.entries();!(l=u.next()).done;)if(!a.has(l.value[0]))return!1;return!0}if(i&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(a)){if((o=e.length)!=a.length)return!1;for(l=o;0!==l--;)if(e[l]!==a[l])return!1;return!0}if(e.constructor===RegExp)return e.source===a.source&&e.flags===a.flags;if(e.valueOf!==Object.prototype.valueOf&&"function"===typeof e.valueOf&&"function"===typeof a.valueOf)return e.valueOf()===a.valueOf();if(e.toString!==Object.prototype.toString&&"function"===typeof e.toString&&"function"===typeof a.toString)return e.toString()===a.toString();if((o=(c=Object.keys(e)).length)!==Object.keys(a).length)return!1;for(l=o;0!==l--;)if(!Object.prototype.hasOwnProperty.call(a,c[l]))return!1;if(t&&e instanceof Element)return!1;for(l=o;0!==l--;)if(("_owner"!==c[l]&&"__v"!==c[l]&&"__o"!==c[l]||!e.$$typeof)&&!s(e[c[l]],a[c[l]]))return!1;return!0}return e!==e&&a!==a}e.exports=function(e,t){try{return s(e,t)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}}},8161:(e,t,r)=>{"use strict";var n,i=r(5043),s=(n=i)&&"object"===typeof n&&"default"in n?n.default:n;function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=!("undefined"===typeof window||!window.document||!window.document.createElement);e.exports=function(e,t,r){if("function"!==typeof e)throw new Error("Expected reducePropsToState to be a function.");if("function"!==typeof t)throw new Error("Expected handleStateChangeOnClient to be a function.");if("undefined"!==typeof r&&"function"!==typeof r)throw new Error("Expected mapStateOnServer to either be undefined or a function.");return function(n){if("function"!==typeof n)throw new Error("Expected WrappedComponent to be a React component.");var l,c=[];function u(){l=e(c.map((function(e){return e.props}))),d.canUseDOM?t(l):r&&(l=r(l))}var d=function(e){var t,r;function i(){return e.apply(this,arguments)||this}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,i.peek=function(){return l},i.rewind=function(){if(i.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var e=l;return l=void 0,c=[],e};var a=i.prototype;return a.UNSAFE_componentWillMount=function(){c.push(this),u()},a.componentDidUpdate=function(){u()},a.componentWillUnmount=function(){var e=c.indexOf(this);c.splice(e,1),u()},a.render=function(){return s.createElement(n,this.props)},i}(i.PureComponent);return a(d,"displayName","SideEffect("+function(e){return e.displayName||e.name||"Component"}(n)+")"),a(d,"canUseDOM",o),d}}},1153:(e,t,r)=>{"use strict";var n=r(5043),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var n,s={},c=null,u=null;for(n in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,n)&&!l.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===s[n]&&(s[n]=t[n]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},4202:(e,t)=>{"use strict";var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||h}function v(){}function E(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||h}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=E.prototype=new v;b.constructor=E,m(b,y.prototype),b.isPureReactComponent=!0;var T=Array.isArray,R=Object.prototype.hasOwnProperty,S={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function L(e,t,n){var i,s={},a=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)R.call(t,i)&&!A.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:r,type:e,key:a,ref:o,props:s,_owner:S.current}}function w(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var C=/\/+/g;function k(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function x(e,t,i,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case r:case n:l=!0}}if(l)return a=a(l=e),e=""===s?"."+k(l,0):s,T(a)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),x(a,t,i,"",(function(e){return e}))):null!=a&&(w(a)&&(a=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(C,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=""===s?".":s+":",T(e))for(var c=0;c<e.length;c++){var u=s+k(o=e[c],c);l+=x(o,t,i,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=x(o=o.value,t,i,u=s+k(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function _(e,t,r){if(null==e)return e;var n=[],i=0;return x(e,n,"","",(function(e){return t.call(r,e,i++)})),n}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var I={current:null},B={transition:null},P={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:B,ReactCurrentOwner:S};t.Children={map:_,forEach:function(e,t,r){_(e,(function(){t.apply(this,arguments)}),r)},count:function(e){var t=0;return _(e,(function(){t++})),t},toArray:function(e){return _(e,(function(e){return e}))||[]},only:function(e){if(!w(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=a,t.PureComponent=E,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=S.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)R.call(t,c)&&!A.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:r,type:e.type,key:s,ref:a,props:i,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=L,t.createFactory=function(e){var t=L.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=w,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=B.transition;B.transition={};try{e()}finally{B.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return I.current.useCallback(e,t)},t.useContext=function(e){return I.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return I.current.useDeferredValue(e)},t.useEffect=function(e,t){return I.current.useEffect(e,t)},t.useId=function(){return I.current.useId()},t.useImperativeHandle=function(e,t,r){return I.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return I.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return I.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return I.current.useMemo(e,t)},t.useReducer=function(e,t,r){return I.current.useReducer(e,t,r)},t.useRef=function(e){return I.current.useRef(e)},t.useState=function(e){return I.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return I.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return I.current.useTransition()},t.version="18.2.0"},5043:(e,t,r)=>{"use strict";e.exports=r(4202)},579:(e,t,r)=>{"use strict";e.exports=r(1153)},7234:(e,t)=>{"use strict";function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,i=e[n];if(!(0<s(i,t)))break e;e[n]=t,e[r]=i,r=n}}function n(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,i=e.length,a=i>>>1;n<a;){var o=2*(n+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,r))c<i&&0>s(u,l)?(e[n]=u,e[c]=r,n=c):(e[n]=l,e[o]=r,n=o);else{if(!(c<i&&0>s(u,r)))break e;e[n]=u,e[c]=r,n=c}}}return t}function s(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,p=3,h=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,E="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=n(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,r(c,t)}t=n(u)}}function T(e){if(g=!1,b(e),!m)if(null!==n(c))m=!0,B(R);else{var t=n(u);null!==t&&P(T,t.startTime-e)}}function R(e,r){m=!1,g&&(g=!1,v(w),w=-1),h=!0;var s=p;try{for(b(r),f=n(c);null!==f&&(!(f.expirationTime>r)||e&&!x());){var a=f.callback;if("function"===typeof a){f.callback=null,p=f.priorityLevel;var o=a(f.expirationTime<=r);r=t.unstable_now(),"function"===typeof o?f.callback=o:f===n(c)&&i(c),b(r)}else i(c);f=n(c)}if(null!==f)var l=!0;else{var d=n(u);null!==d&&P(T,d.startTime-r),l=!1}return l}finally{f=null,p=s,h=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,A=!1,L=null,w=-1,C=5,k=-1;function x(){return!(t.unstable_now()-k<C)}function _(){if(null!==L){var e=t.unstable_now();k=e;var r=!0;try{r=L(!0,e)}finally{r?S():(A=!1,L=null)}}else A=!1}if("function"===typeof E)S=function(){E(_)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,I=D.port2;D.port1.onmessage=_,S=function(){I.postMessage(null)}}else S=function(){y(_,0)};function B(e){L=e,A||(A=!0,S())}function P(e,r){w=y((function(){e(t.unstable_now())}),r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||h||(m=!0,B(R))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var r=p;p=t;try{return e()}finally{p=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=p;p=e;try{return t()}finally{p=r}},t.unstable_scheduleCallback=function(e,i,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,r(u,e),null===n(c)&&e===n(u)&&(g?(v(w),w=-1):g=!0,P(T,s-a))):(e.sortIndex=o,r(c,e),m||h||(m=!0,B(R))),e},t.unstable_shouldYield=x,t.unstable_wrapCallback=function(e){var t=p;return function(){var r=p;p=t;try{return e.apply(this,arguments)}finally{p=r}}}},8853:(e,t,r)=>{"use strict";e.exports=r(7234)},6345:e=>{"use strict";var t;t=function(){var e={},t={};return e.on=function(e,r){var n={name:e,handler:r};return t[e]=t[e]||[],t[e].unshift(n),n},e.off=function(e){var r=t[e.name].indexOf(e);-1!==r&&t[e.name].splice(r,1)},e.trigger=function(e,r){var n,i=t[e];if(i)for(n=i.length;n--;)i[n].handler(r)},e},e.exports=t},7775:function(e,t,r){window.eve=r(4524);var n=function(e){var t,r={},n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,16,(new Date).getTime()),!0},i=Array.isArray||function(e){return e instanceof Array||"[object Array]"==Object.prototype.toString.call(e)},s=0,a="M"+(+new Date).toString(36),o=Date.now||function(){return+new Date},l=function(e){var t=this;if(null==e)return t.s;var r=t.s-e;t.b+=t.dur*r,t.B+=t.dur*r,t.s=e},c=function(e){if(null==e)return this.spd;this.spd=e},u=function(e){var t=this;if(null==e)return t.dur;t.s=t.s*e/t.dur,t.dur=e},d=function(){var t=this;delete r[t.id],t.update(),e("mina.stop."+t.id,t)},f=function(){var e=this;e.pdif||(delete r[e.id],e.update(),e.pdif=e.get()-e.b)},p=function(){var e=this;e.pdif&&(e.b=e.get()-e.pdif,delete e.pdif,r[e.id]=e,m())},h=function(){var e,t=this;if(i(t.start)){e=[];for(var r=0,n=t.start.length;r<n;r++)e[r]=+t.start[r]+(t.end[r]-t.start[r])*t.easing(t.s)}else e=+t.start+(t.end-t.start)*t.easing(t.s);t.set(e)},m=function(i){if(i){var s=0;for(var a in r)if(r.hasOwnProperty(a)){var o=r[a],l=o.get();s++,o.s=(l-o.b)/(o.dur/o.spd),o.s>=1&&(delete r[a],o.s=1,s--,function(t){setTimeout((function(){e("mina.finish."+t.id,t)}))}(o)),o.update()}t=!!s&&n(m)}else t||(t=n(m))},g=function(e,t,n,i,o,y,v){var E={id:a+(s++).toString(36),start:e,end:t,b:n,s:0,dur:i-n,spd:1,get:o,set:y,easing:v||g.linear,status:l,speed:c,duration:u,stop:d,pause:f,resume:p,update:h};r[E.id]=E;var b,T=0;for(b in r)if(r.hasOwnProperty(b)&&2==++T)break;return 1==T&&m(),E};return g.time=o,g.getById=function(e){return r[e]||null},g.linear=function(e){return e},g.easeout=function(e){return Math.pow(e,1.7)},g.easein=function(e){return Math.pow(e,.48)},g.easeinout=function(e){if(1==e)return 1;if(0==e)return 0;var t=.48-e/1.04,r=Math.sqrt(.1734+t*t),n=r-t,i=-r-t,s=Math.pow(Math.abs(n),1/3)*(n<0?-1:1)+Math.pow(Math.abs(i),1/3)*(i<0?-1:1)+.5;return 3*(1-s)*s*s+s*s*s},g.backin=function(e){if(1==e)return 1;var t=1.70158;return e*e*((t+1)*e-t)},g.backout=function(e){if(0==e)return 0;var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},g.elastic=function(e){return e==!!e?e:Math.pow(2,-10*e)*Math.sin((e-.075)*(2*Math.PI)/.3)+1},g.bounce=function(e){var t=7.5625,r=2.75;return e<1/r?t*e*e:e<2/r?t*(e-=1.5/r)*e+.75:e<2.5/r?t*(e-=2.25/r)*e+.9375:t*(e-=2.625/r)*e+.984375},window.mina=g,g}("undefined"==typeof eve?function(){}:eve),i=function(e){function t(e,n){if(e){if(e.nodeType)return G(e);if(C(e,"array")&&t.set)return t.set.apply(t,e);if(e instanceof F)return e;if(null==n)try{return G(e=r.doc.querySelector(String(e)))}catch(i){return null}}return new j(e=null==e?"100%":e,n=null==n?"100%":n)}t.version="0.5.1",t.toString=function(){return"Snap v"+this.version},t._={};var r={win:e.window,doc:e.window.document};t._.glob=r;var n="hasOwnProperty",i=String,s=parseFloat,a=parseInt,o=Math,l=o.max,c=o.min,u=o.abs,d=(o.pow,o.PI),f=(o.round,Object.prototype.toString),p=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\))\s*$/i,h=(t._.separator=/[,\s]+/,/[\s]*,[\s]*/),m={hs:1,rg:1},y=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,v=/([rstm])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,E=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\s]*,?[\s]*/gi,b=0,T="S"+(+new Date).toString(36),R=function(e){return(e&&e.type?e.type:"")+T+(b++).toString(36)},S="http://www.w3.org/1999/xlink",A="http://www.w3.org/2000/svg",L={};t.url=function(e){return"url('#"+e+"')"};function w(e,t){if(t){if("#text"==e&&(e=r.doc.createTextNode(t.text||t["#text"]||"")),"#comment"==e&&(e=r.doc.createComment(t.text||t["#text"]||"")),"string"==typeof e&&(e=w(e)),"string"==typeof t)return 1==e.nodeType?"xlink:"==t.substring(0,6)?e.getAttributeNS(S,t.substring(6)):"xml:"==t.substring(0,4)?e.getAttributeNS(A,t.substring(4)):e.getAttribute(t):"text"==t?e.nodeValue:null;if(1==e.nodeType){for(var s in t)if(t[n](s)){var a=i(t[s]);a?"xlink:"==s.substring(0,6)?e.setAttributeNS(S,s.substring(6),a):"xml:"==s.substring(0,4)?e.setAttributeNS(A,s.substring(4),a):e.setAttribute(s,a):e.removeAttribute(s)}}else"text"in t&&(e.nodeValue=t.text)}else e=r.doc.createElementNS(A,e);return e}function C(e,t){return"finite"==(t=i.prototype.toLowerCase.call(t))?isFinite(e):!("array"!=t||!(e instanceof Array||Array.isArray&&Array.isArray(e)))||("null"==t&&null===e||t==typeof e&&null!==e||"object"==t&&e===Object(e)||f.call(e).slice(8,-1).toLowerCase()==t)}function k(e,t,r){return function i(){var s=Array.prototype.slice.call(arguments,0),a=s.join("\u2400"),o=i.cache=i.cache||{},l=i.count=i.count||[];return o[n](a)?(function(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return e.push(e.splice(r,1)[0])}(l,a),r?r(o[a]):o[a]):(l.length>=1e3&&delete o[l.shift()],l.push(a),o[a]=e.apply(t,s),r?r(o[a]):o[a])}}function x(e){return e%360*d/180}t._.$=w,t._.id=R,t.format=function(){var e=/\{([^\}]+)\}/g,t=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;return function(r,n){return i(r).replace(e,(function(e,r){return function(e,r,n){var i=n;return r.replace(t,(function(e,t,r,n,s){t=t||n,i&&(t in i&&(i=i[t]),"function"==typeof i&&s&&(i=i()))})),i=(null==i||i==n?e:i)+""}(e,r,n)}))}}(),t._.clone=function e(t){if("function"==typeof t||Object(t)!==t)return t;var r=new t.constructor;for(var i in t)t[n](i)&&(r[i]=e(t[i]));return r},t._.cacher=k,t.rad=x,t.deg=function(e){return 180*e/d%360},t.sin=function(e){return o.sin(t.rad(e))},t.tan=function(e){return o.tan(t.rad(e))},t.cos=function(e){return o.cos(t.rad(e))},t.asin=function(e){return t.deg(o.asin(e))},t.acos=function(e){return t.deg(o.acos(e))},t.atan=function(e){return t.deg(o.atan(e))},t.atan2=function(e){return t.deg(o.atan2(e))},t.angle=function e(t,r,n,i,s,a){if(null==s){var l=t-n,c=r-i;return l||c?(180+180*o.atan2(-c,-l)/d+360)%360:0}return e(t,r,s,a)-e(n,i,s,a)},t.len=function(e,r,n,i){return Math.sqrt(t.len2(e,r,n,i))},t.len2=function(e,t,r,n){return(e-r)*(e-r)+(t-n)*(t-n)},t.closestPoint=function(e,t,r){function n(e){var n=e.x-t,i=e.y-r;return n*n+i*i}for(var i,s,a,o,l=e.node,c=l.getTotalLength(),u=c/l.pathSegList.numberOfItems*.125,d=1/0,f=0;f<=c;f+=u)(o=n(a=l.getPointAtLength(f)))<d&&(i=a,s=f,d=o);for(u*=.5;u>.5;){var p,h,m,g,y,v;(m=s-u)>=0&&(y=n(p=l.getPointAtLength(m)))<d?(i=p,s=m,d=y):(g=s+u)<=c&&(v=n(h=l.getPointAtLength(g)))<d?(i=h,s=g,d=v):u*=.5}return i={x:i.x,y:i.y,length:s,distance:Math.sqrt(d)}},t.is=C,t.snapTo=function(e,t,r){if(r=C(r,"finite")?r:10,C(e,"array")){for(var n=e.length;n--;)if(u(e[n]-t)<=r)return e[n]}else{var i=t%(e=+e);if(i<r)return t-i;if(i>e-r)return t-i+e}return t},t.getRGB=k((function(e){if(!e||(e=i(e)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:B};if("none"==e)return{r:-1,g:-1,b:-1,hex:"none",toString:B};if(!m[n](e.toLowerCase().substring(0,2))&&"#"!=e.charAt()&&(e=_(e)),!e)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:B};var r,u,d,f,g,y,v=e.match(p);return v?(v[2]&&(d=a(v[2].substring(5),16),u=a(v[2].substring(3,5),16),r=a(v[2].substring(1,3),16)),v[3]&&(d=a((g=v[3].charAt(3))+g,16),u=a((g=v[3].charAt(2))+g,16),r=a((g=v[3].charAt(1))+g,16)),v[4]&&(y=v[4].split(h),r=s(y[0]),"%"==y[0].slice(-1)&&(r*=2.55),u=s(y[1]),"%"==y[1].slice(-1)&&(u*=2.55),d=s(y[2]),"%"==y[2].slice(-1)&&(d*=2.55),"rgba"==v[1].toLowerCase().slice(0,4)&&(f=s(y[3])),y[3]&&"%"==y[3].slice(-1)&&(f/=100)),v[5]?(y=v[5].split(h),r=s(y[0]),"%"==y[0].slice(-1)&&(r/=100),u=s(y[1]),"%"==y[1].slice(-1)&&(u/=100),d=s(y[2]),"%"==y[2].slice(-1)&&(d/=100),("deg"==y[0].slice(-3)||"\xb0"==y[0].slice(-1))&&(r/=360),"hsba"==v[1].toLowerCase().slice(0,4)&&(f=s(y[3])),y[3]&&"%"==y[3].slice(-1)&&(f/=100),t.hsb2rgb(r,u,d,f)):v[6]?(y=v[6].split(h),r=s(y[0]),"%"==y[0].slice(-1)&&(r/=100),u=s(y[1]),"%"==y[1].slice(-1)&&(u/=100),d=s(y[2]),"%"==y[2].slice(-1)&&(d/=100),("deg"==y[0].slice(-3)||"\xb0"==y[0].slice(-1))&&(r/=360),"hsla"==v[1].toLowerCase().slice(0,4)&&(f=s(y[3])),y[3]&&"%"==y[3].slice(-1)&&(f/=100),t.hsl2rgb(r,u,d,f)):(r=c(o.round(r),255),u=c(o.round(u),255),d=c(o.round(d),255),f=c(l(f,0),1),(v={r:r,g:u,b:d,toString:B}).hex="#"+(16777216|d|u<<8|r<<16).toString(16).slice(1),v.opacity=C(f,"finite")?f:1,v)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:B}}),t),t.hsb=k((function(e,r,n){return t.hsb2rgb(e,r,n).hex})),t.hsl=k((function(e,r,n){return t.hsl2rgb(e,r,n).hex})),t.rgb=k((function(e,t,r,n){if(C(n,"finite")){var i=o.round;return"rgba("+[i(e),i(t),i(r),+n.toFixed(2)]+")"}return"#"+(16777216|r|t<<8|e<<16).toString(16).slice(1)}));var _=function(e){var t=r.doc.getElementsByTagName("head")[0]||r.doc.getElementsByTagName("svg")[0],n="rgb(255, 0, 0)";return _=k((function(e){if("red"==e.toLowerCase())return n;t.style.color=n,t.style.color=e;var i=r.doc.defaultView.getComputedStyle(t,"").getPropertyValue("color");return i==n?null:i})),_(e)},D=function(){return"hsb("+[this.h,this.s,this.b]+")"},I=function(){return"hsl("+[this.h,this.s,this.l]+")"},B=function(){return 1==this.opacity||null==this.opacity?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")"},P=function(e,r,n){if(null==r&&C(e,"object")&&"r"in e&&"g"in e&&"b"in e&&(n=e.b,r=e.g,e=e.r),null==r&&C(e,string)){var i=t.getRGB(e);e=i.r,r=i.g,n=i.b}return(e>1||r>1||n>1)&&(e/=255,r/=255,n/=255),[e,r,n]},U=function(e,r,n,i){var s={r:e=o.round(255*e),g:r=o.round(255*r),b:n=o.round(255*n),opacity:C(i,"finite")?i:1,hex:t.rgb(e,r,n),toString:B};return C(i,"finite")&&(s.opacity=i),s};t.color=function(e){var r;return C(e,"object")&&"h"in e&&"s"in e&&"b"in e?(r=t.hsb2rgb(e),e.r=r.r,e.g=r.g,e.b=r.b,e.opacity=1,e.hex=r.hex):C(e,"object")&&"h"in e&&"s"in e&&"l"in e?(r=t.hsl2rgb(e),e.r=r.r,e.g=r.g,e.b=r.b,e.opacity=1,e.hex=r.hex):(C(e,"string")&&(e=t.getRGB(e)),C(e,"object")&&"r"in e&&"g"in e&&"b"in e&&!("error"in e)?(r=t.rgb2hsl(e),e.h=r.h,e.s=r.s,e.l=r.l,r=t.rgb2hsb(e),e.v=r.b):((e={hex:"none"}).r=e.g=e.b=e.h=e.s=e.v=e.l=-1,e.error=1)),e.toString=B,e},t.hsb2rgb=function(e,t,r,n){var i,s,a,o,l;return C(e,"object")&&"h"in e&&"s"in e&&"b"in e&&(r=e.b,t=e.s,n=e.o,e=e.h),o=(l=r*t)*(1-u((e=(e*=360)%360/60)%2-1)),i=s=a=r-l,U(i+=[l,o,0,0,o,l][e=~~e],s+=[o,l,l,o,0,0][e],a+=[0,0,o,l,l,o][e],n)},t.hsl2rgb=function(e,t,r,n){var i,s,a,o,l;return C(e,"object")&&"h"in e&&"s"in e&&"l"in e&&(r=e.l,t=e.s,e=e.h),(e>1||t>1||r>1)&&(e/=360,t/=100,r/=100),o=(l=2*t*(r<.5?r:1-r))*(1-u((e=(e*=360)%360/60)%2-1)),i=s=a=r-l/2,U(i+=[l,o,0,0,o,l][e=~~e],s+=[o,l,l,o,0,0][e],a+=[0,0,o,l,l,o][e],n)},t.rgb2hsb=function(e,t,r){var n,i;return e=(r=P(e,t,r))[0],t=r[1],r=r[2],{h:((0==(i=(n=l(e,t,r))-c(e,t,r))?null:n==e?(t-r)/i:n==t?(r-e)/i+2:(e-t)/i+4)+360)%6*60/360,s:0==i?0:i/n,b:n,toString:D}},t.rgb2hsl=function(e,t,r){var n,i,s,a;return e=(r=P(e,t,r))[0],t=r[1],r=r[2],n=((i=l(e,t,r))+(s=c(e,t,r)))/2,{h:((0==(a=i-s)?null:i==e?(t-r)/a:i==t?(r-e)/a+2:(e-t)/a+4)+360)%6*60/360,s:0==a?0:n<.5?a/(2*n):a/(2-2*n),l:n,toString:I}},t.parsePathString=function(e){if(!e)return null;var r=t.path(e);if(r.arr)return t.path.clone(r.arr);var n={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},s=[];return C(e,"array")&&C(e[0],"array")&&(s=t.path.clone(e)),s.length||i(e).replace(y,(function(e,t,r){var i=[],a=t.toLowerCase();if(r.replace(E,(function(e,t){t&&i.push(+t)})),"m"==a&&i.length>2&&(s.push([t].concat(i.splice(0,2))),a="l",t="m"==t?"l":"L"),"o"==a&&1==i.length&&s.push([t,i[0]]),"r"==a)s.push([t].concat(i));else for(;i.length>=n[a]&&(s.push([t].concat(i.splice(0,n[a]))),n[a]););})),s.toString=t.path.toString,r.arr=t.path.clone(s),s};var N=t.parseTransformString=function(e){if(!e)return null;var r=[];return C(e,"array")&&C(e[0],"array")&&(r=t.path.clone(e)),r.length||i(e).replace(v,(function(e,t,n){var i=[];t.toLowerCase();n.replace(E,(function(e,t){t&&i.push(+t)})),r.push([t].concat(i))})),r.toString=t.path.toString,r};t._.svgTransform2string=function(e){var t=[];return e=e.replace(/(?:^|\s)(\w+)\(([^)]+)\)/g,(function(e,r,n){return n=n.split(/\s*,\s*|\s+/),"rotate"==r&&1==n.length&&n.push(0,0),"scale"==r&&(n.length>2?n=n.slice(0,2):2==n.length&&n.push(0,0),1==n.length&&n.push(n[0],0,0)),"skewX"==r?t.push(["m",1,0,o.tan(x(n[0])),1,0,0]):"skewY"==r?t.push(["m",1,o.tan(x(n[0])),0,1,0,0]):t.push([r.charAt(0)].concat(n)),e})),t},t._.rgTransform=/^[a-z][\s]*-?\.?\d/i,t._.transform2matrix=function(e,r){var n=N(e),s=new t.Matrix;if(n)for(var a=0,o=n.length;a<o;a++){var l,c,u,d,f,p=n[a],h=p.length,m=i(p[0]).toLowerCase(),g=p[0]!=m,y=g?s.invert():0;"t"==m&&2==h?s.translate(p[1],0):"t"==m&&3==h?g?(l=y.x(0,0),c=y.y(0,0),u=y.x(p[1],p[2]),d=y.y(p[1],p[2]),s.translate(u-l,d-c)):s.translate(p[1],p[2]):"r"==m?2==h?(f=f||r,s.rotate(p[1],f.x+f.width/2,f.y+f.height/2)):4==h&&(g?(u=y.x(p[2],p[3]),d=y.y(p[2],p[3]),s.rotate(p[1],u,d)):s.rotate(p[1],p[2],p[3])):"s"==m?2==h||3==h?(f=f||r,s.scale(p[1],p[h-1],f.x+f.width/2,f.y+f.height/2)):4==h?g?(u=y.x(p[2],p[3]),d=y.y(p[2],p[3]),s.scale(p[1],p[1],u,d)):s.scale(p[1],p[1],p[2],p[3]):5==h&&(g?(u=y.x(p[3],p[4]),d=y.y(p[3],p[4]),s.scale(p[1],p[2],u,d)):s.scale(p[1],p[2],p[3],p[4])):"m"==m&&7==h&&s.add(p[1],p[2],p[3],p[4],p[5],p[6])}return s},t._unit2px=function(e,t,r){var n=O(e).node,i={},s=n.querySelector(".svg---mgr");s||(s=w("rect"),w(s,{x:-9e9,y:-9e9,width:10,height:10,class:"svg---mgr",fill:"none"}),n.appendChild(s));function a(e){if(null==e)return"";if(e==+e)return e;w(s,{width:e});try{return s.getBBox().width}catch(t){return 0}}function o(e){if(null==e)return"";if(e==+e)return e;w(s,{height:e});try{return s.getBBox().height}catch(t){return 0}}function l(n,s){null==t?i[n]=s(e.attr(n)||0):n==t&&(i=s(null==r?e.attr(n)||0:r))}switch(e.type){case"rect":l("rx",a),l("ry",o);case"image":l("width",a),l("height",o);case"text":l("x",a),l("y",o);break;case"circle":l("cx",a),l("cy",o),l("r",a);break;case"ellipse":l("cx",a),l("cy",o),l("rx",a),l("ry",o);break;case"line":l("x1",a),l("x2",a),l("y1",o),l("y2",o);break;case"marker":l("refX",a),l("markerWidth",a),l("refY",o),l("markerHeight",o);break;case"radialGradient":l("fx",a),l("fy",o);break;case"tspan":l("dx",a),l("dy",o);break;default:l(t,a)}return n.removeChild(s),i};r.doc.contains||r.doc.compareDocumentPosition;function O(e){return e.node.ownerSVGElement&&G(e.node.ownerSVGElement)||t.select("svg")}function K(e){C(e,"array")||(e=Array.prototype.slice.call(arguments,0));for(var t=0,r=0,n=this.node;this[t];)delete this[t++];for(t=0;t<e.length;t++)"set"==e[t].type?e[t].forEach((function(e){n.appendChild(e.node)})):n.appendChild(e[t].node);var i=n.childNodes;for(t=0;t<i.length;t++)this[r++]=G(i[t]);return this}function F(e){if(e.snap in L)return L[e.snap];var t;try{t=e.ownerSVGElement}catch(s){}this.node=e,t&&(this.paper=new j(t)),this.type=e.tagName||e.nodeName;var r=this.id=R(this);if(this.anims={},this._={transform:[]},e.snap=r,L[r]=this,"g"==this.type&&(this.add=K),this.type in{g:1,mask:1,pattern:1,symbol:1})for(var i in j.prototype)j.prototype[n](i)&&(this[i]=j.prototype[i])}function M(e){this.node=e}function V(e,t){var r=w(e);return t.appendChild(r),G(r)}function j(e,t){var i,s,a,o=j.prototype;if(e&&e.tagName&&"svg"==e.tagName.toLowerCase()){if(e.snap in L)return L[e.snap];var l=e.ownerDocument;for(var c in i=new F(e),s=e.getElementsByTagName("desc")[0],a=e.getElementsByTagName("defs")[0],s||((s=w("desc")).appendChild(l.createTextNode("Created with Snap")),i.node.appendChild(s)),a||(a=w("defs"),i.node.appendChild(a)),i.defs=a,o)o[n](c)&&(i[c]=o[c]);i.paper=i.root=i}else w((i=V("svg",r.doc.body)).node,{height:t,version:1.1,width:e,xmlns:A});return i}function G(e){return e?e instanceof F||e instanceof M?e:e.tagName&&"svg"==e.tagName.toLowerCase()?new j(e):e.tagName&&"object"==e.tagName.toLowerCase()&&"image/svg+xml"==e.type?new j(e.contentDocument.getElementsByTagName("svg")[0]):new F(e):e}function q(e,t){for(var r=0,n=e.length;r<n;r++){var i={type:e[r].type,attr:e[r].attr()},s=e[r].children();t.push(i),s.length&&q(s,i.childNodes=[])}}t._.getSomeDefs=function(e){var r=e.node.ownerSVGElement&&G(e.node.ownerSVGElement)||e.node.parentNode&&G(e.node.parentNode)||t.select("svg")||t(0,0),n=r.select("defs"),i=null!=n&&n.node;return i||(i=V("defs",r.node).node),i},t._.getSomeSVG=O,t.select=function(e){return e=i(e).replace(/([^\\]):/g,"$1\\:"),G(r.doc.querySelector(e))},t.selectAll=function(e){for(var n=r.doc.querySelectorAll(e),i=(t.set||Array)(),s=0;s<n.length;s++)i.push(G(n[s]));return i},setInterval((function(){for(var e in L)if(L[n](e)){var t=L[e],r=t.node;("svg"!=t.type&&!r.ownerSVGElement||"svg"==t.type&&(!r.parentNode||"ownerSVGElement"in r.parentNode&&!r.ownerSVGElement))&&delete L[e]}}),1e4),F.prototype.attr=function(e,t){var r=this,i=r.node;if(!e){if(1!=i.nodeType)return{text:i.nodeValue};for(var s=i.attributes,a={},o=0,l=s.length;o<l;o++)a[s[o].nodeName]=s[o].nodeValue;return a}if(C(e,"string")){if(!(arguments.length>1))return eve("snap.util.getattr."+e,r).firstDefined();var c={};c[e]=t,e=c}for(var u in e)e[n](u)&&eve("snap.util.attr."+u,r,e[u]);return r},t.parse=function(e){var t=r.doc.createDocumentFragment(),n=!0,s=r.doc.createElement("div");if((e=i(e)).match(/^\s*<\s*svg(?:\s|>)/)||(e="<svg>"+e+"</svg>",n=!1),s.innerHTML=e,e=s.getElementsByTagName("svg")[0])if(n)t=e;else for(;e.firstChild;)t.appendChild(e.firstChild);return new M(t)},t.fragment=function(){for(var e=Array.prototype.slice.call(arguments,0),n=r.doc.createDocumentFragment(),i=0,s=e.length;i<s;i++){var a=e[i];a.node&&a.node.nodeType&&n.appendChild(a.node),a.nodeType&&n.appendChild(a),"string"==typeof a&&n.appendChild(t.parse(a).node)}return new M(n)},t._.make=V,t._.wrap=G,j.prototype.el=function(e,t){var r=V(e,this.node);return t&&r.attr(t),r},F.prototype.children=function(){for(var e=[],r=this.node.childNodes,n=0,i=r.length;n<i;n++)e[n]=t(r[n]);return e},F.prototype.toJSON=function(){var e=[];return q([this],e),e[0]},eve.on("snap.util.getattr",(function(){var e=eve.nt(),t=(e=e.substring(e.lastIndexOf(".")+1)).replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()}));return H[n](t)?this.node.ownerDocument.defaultView.getComputedStyle(this.node,null).getPropertyValue(t):w(this.node,e)}));var H={"alignment-baseline":0,"baseline-shift":0,clip:0,"clip-path":0,"clip-rule":0,color:0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,cursor:0,direction:0,display:0,"dominant-baseline":0,"enable-background":0,fill:0,"fill-opacity":0,"fill-rule":0,filter:0,"flood-color":0,"flood-opacity":0,font:0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,kerning:0,"letter-spacing":0,"lighting-color":0,marker:0,"marker-end":0,"marker-mid":0,"marker-start":0,mask:0,opacity:0,overflow:0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,stroke:0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-anchor":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,visibility:0,"word-spacing":0,"writing-mode":0};eve.on("snap.util.attr",(function(e){var t=eve.nt(),r={};r[t=t.substring(t.lastIndexOf(".")+1)]=e;var i=t.replace(/-(\w)/gi,(function(e,t){return t.toUpperCase()})),s=t.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()}));H[n](s)?this.node.style[i]=null==e?"":e:w(this.node,r)})),j.prototype,t.ajax=function(e,t,r,n){var i=new XMLHttpRequest,s=R();if(i){if(C(t,"function"))n=r,r=t,t=null;else if(C(t,"object")){var a=[];for(var o in t)t.hasOwnProperty(o)&&a.push(encodeURIComponent(o)+"="+encodeURIComponent(t[o]));t=a.join("&")}return i.open(t?"POST":"GET",e,!0),t&&(i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.setRequestHeader("Content-type","application/x-www-form-urlencoded")),r&&(eve.once("snap.ajax."+s+".0",r),eve.once("snap.ajax."+s+".200",r),eve.once("snap.ajax."+s+".304",r)),i.onreadystatechange=function(){4==i.readyState&&eve("snap.ajax."+s+"."+i.status,n,i)},4==i.readyState?i:(i.send(t),i)}},t.load=function(e,r,n){t.ajax(e,(function(e){var i=t.parse(e.responseText);n?r.call(n,i):r(i)}))};return t.getElementByPoint=function(e,t){this.canvas;var n=r.doc.elementFromPoint(e,t);if(r.win.opera&&"svg"==n.tagName){var i=function(e){var t=e.getBoundingClientRect(),r=e.ownerDocument,n=r.body,i=r.documentElement,s=i.clientTop||n.clientTop||0,a=i.clientLeft||n.clientLeft||0;return{y:t.top+(g.win.pageYOffset||i.scrollTop||n.scrollTop)-s,x:t.left+(g.win.pageXOffset||i.scrollLeft||n.scrollLeft)-a}}(n),s=n.createSVGRect();s.x=e-i.x,s.y=t-i.y,s.width=s.height=1;var a=n.getIntersectionList(s,null);a.length&&(n=a[a.length-1])}return n?G(n):null},t.plugin=function(e){e(t,F,j,r,M)},r.win.Snap=t,t}(window||this);i.plugin((function(e,t,r,n,i){var s=t.prototype,a=e.is,o=String,l=e._unit2px,c=e._.$,u=e._.make,d=e._.getSomeDefs,f=e._.wrap;s.getBBox=function(t){if("tspan"==this.type)return e._.box(this.node.getClientRects().item(0));if(!e.Matrix||!e.path)return this.node.getBBox();var r=this,n=new e.Matrix;if(r.removed)return e._.box();for(;"use"==r.type;)if(t||(n=n.add(r.transform().localMatrix.translate(r.attr("x")||0,r.attr("y")||0))),r.original)r=r.original;else{var i=r.attr("xlink:href");r=r.original=r.node.ownerDocument.getElementById(i.substring(i.indexOf("#")+1))}var s=r._,a=e.path.get[r.type]||e.path.get.deflt;try{return t?(s.bboxwt=a?e.path.getBBox(r.realPath=a(r)):e._.box(r.node.getBBox()),e._.box(s.bboxwt)):(r.realPath=a(r),r.matrix=r.transform().localMatrix,s.bbox=e.path.getBBox(e.path.map(r.realPath,n.add(r.matrix))),e._.box(s.bbox))}catch(o){return e._.box()}};var p=function(){return this.string};function h(t,r){if(null==r){var n=!0;if(!(r="linearGradient"==t.type||"radialGradient"==t.type?t.node.getAttribute("gradientTransform"):"pattern"==t.type?t.node.getAttribute("patternTransform"):t.node.getAttribute("transform")))return new e.Matrix;r=e._.svgTransform2string(r)}else r=e._.rgTransform.test(r)?o(r).replace(/\.{3}|\u2026/g,t._.transform||""):e._.svgTransform2string(r),a(r,"array")&&(r=e.path?e.path.toString.call(r):o(r)),t._.transform=r;var i=e._.transform2matrix(r,t.getBBox(1));if(n)return i;t.matrix=i}s.transform=function(t){var r=this._;if(null==t){for(var n,i=this,s=new e.Matrix(this.node.getCTM()),a=h(this),l=[a],u=new e.Matrix,d=a.toTransformString(),f=o(a)==o(this.matrix)?o(r.transform):d;"svg"!=i.type&&(i=i.parent());)l.push(h(i));for(n=l.length;n--;)u.add(l[n]);return{string:f,globalMatrix:s,totalMatrix:u,localMatrix:a,diffMatrix:s.clone().add(a.invert()),global:s.toTransformString(),total:u.toTransformString(),local:d,toString:p}}return t instanceof e.Matrix?(this.matrix=t,this._.transform=t.toTransformString()):h(this,t),this.node&&("linearGradient"==this.type||"radialGradient"==this.type?c(this.node,{gradientTransform:this.matrix}):"pattern"==this.type?c(this.node,{patternTransform:this.matrix}):c(this.node,{transform:this.matrix})),this},s.parent=function(){return f(this.node.parentNode)},s.append=s.add=function(e){if(e){if("set"==e.type){var t=this;return e.forEach((function(e){t.add(e)})),this}e=f(e),this.node.appendChild(e.node),e.paper=this.paper}return this},s.appendTo=function(e){return e&&(e=f(e)).append(this),this},s.prepend=function(e){if(e){if("set"==e.type){var t,r=this;return e.forEach((function(e){t?t.after(e):r.prepend(e),t=e})),this}var n=(e=f(e)).parent();this.node.insertBefore(e.node,this.node.firstChild),this.add&&this.add(),e.paper=this.paper,this.parent()&&this.parent().add(),n&&n.add()}return this},s.prependTo=function(e){return(e=f(e)).prepend(this),this},s.before=function(e){if("set"==e.type){var t=this;return e.forEach((function(e){var r=e.parent();t.node.parentNode.insertBefore(e.node,t.node),r&&r.add()})),this.parent().add(),this}var r=(e=f(e)).parent();return this.node.parentNode.insertBefore(e.node,this.node),this.parent()&&this.parent().add(),r&&r.add(),e.paper=this.paper,this},s.after=function(e){var t=(e=f(e)).parent();return this.node.nextSibling?this.node.parentNode.insertBefore(e.node,this.node.nextSibling):this.node.parentNode.appendChild(e.node),this.parent()&&this.parent().add(),t&&t.add(),e.paper=this.paper,this},s.insertBefore=function(e){e=f(e);var t=this.parent();return e.node.parentNode.insertBefore(this.node,e.node),this.paper=e.paper,t&&t.add(),e.parent()&&e.parent().add(),this},s.insertAfter=function(e){e=f(e);var t=this.parent();return e.node.parentNode.insertBefore(this.node,e.node.nextSibling),this.paper=e.paper,t&&t.add(),e.parent()&&e.parent().add(),this},s.remove=function(){var e=this.parent();return this.node.parentNode&&this.node.parentNode.removeChild(this.node),delete this.paper,this.removed=!0,e&&e.add(),this},s.select=function(e){return f(this.node.querySelector(e))},s.selectAll=function(t){for(var r=this.node.querySelectorAll(t),n=(e.set||Array)(),i=0;i<r.length;i++)n.push(f(r[i]));return n},s.asPX=function(e,t){return null==t&&(t=this.attr(e)),+l(this,e,t)},s.use=function(){var e,t=this.node.id;return t||(t=this.id,c(this.node,{id:t})),e="linearGradient"==this.type||"radialGradient"==this.type||"pattern"==this.type?u(this.type,this.node.parentNode):u("use",this.node.parentNode),c(e.node,{"xlink:href":"#"+t}),e.original=this,e},s.clone=function(){var t=f(this.node.cloneNode(!0));return c(t.node,"id")&&c(t.node,{id:t.id}),function(t){var r,n=t.selectAll("*"),i=/^\s*url\(("|'|)(.*)\1\)\s*$/,s=[],a={};function o(t,r){var n=c(t.node,r);(n=(n=n&&n.match(i))&&n[2])&&"#"==n.charAt()&&(n=n.substring(1))&&(a[n]=(a[n]||[]).concat((function(n){var i={};i[r]=e.url(n),c(t.node,i)})))}function l(e){var t=c(e.node,"xlink:href");t&&"#"==t.charAt()&&(t=t.substring(1))&&(a[t]=(a[t]||[]).concat((function(t){e.attr("xlink:href","#"+t)})))}for(var u=0,d=n.length;u<d;u++){o(r=n[u],"fill"),o(r,"stroke"),o(r,"filter"),o(r,"mask"),o(r,"clip-path"),l(r);var f=c(r.node,"id");f&&(c(r.node,{id:r.id}),s.push({old:f,id:r.id}))}for(u=0,d=s.length;u<d;u++){var p=a[s[u].old];if(p)for(var h=0,m=p.length;h<m;h++)p[h](s[u].id)}}(t),t.insertAfter(this),t},s.toDefs=function(){return d(this).appendChild(this.node),this},s.pattern=s.toPattern=function(e,t,r,n){var i=u("pattern",d(this));return null==e&&(e=this.getBBox()),a(e,"object")&&"x"in e&&(t=e.y,r=e.width,n=e.height,e=e.x),c(i.node,{x:e,y:t,width:r,height:n,patternUnits:"userSpaceOnUse",id:i.id,viewBox:[e,t,r,n].join(" ")}),i.node.appendChild(this.node),i},s.marker=function(e,t,r,n,i,s){var o=u("marker",d(this));return null==e&&(e=this.getBBox()),a(e,"object")&&"x"in e&&(t=e.y,r=e.width,n=e.height,i=e.refX||e.cx,s=e.refY||e.cy,e=e.x),c(o.node,{viewBox:[e,t,r,n].join(" "),markerWidth:r,markerHeight:n,orient:"auto",refX:i||0,refY:s||0,id:o.id}),o.node.appendChild(this.node),o};var m={};function g(e){return function(){var t=e?"<"+this.type:"",r=this.node.attributes,n=this.node.childNodes;if(e)for(var i=0,s=r.length;i<s;i++)t+=" "+r[i].name+'="'+r[i].value.replace(/"/g,'\\"')+'"';if(n.length){for(e&&(t+=">"),i=0,s=n.length;i<s;i++)3==n[i].nodeType?t+=n[i].nodeValue:1==n[i].nodeType&&(t+=f(n[i]).toString());e&&(t+="</"+this.type+">")}else e&&(t+="/>");return t}}s.data=function(t,r){var n=m[this.id]=m[this.id]||{};if(0==arguments.length)return eve("snap.data.get."+this.id,this,n,null),n;if(1==arguments.length){if(e.is(t,"object")){for(var i in t)t.hasOwnProperty(i)&&this.data(i,t[i]);return this}return eve("snap.data.get."+this.id,this,n[t],t),n[t]}return n[t]=r,eve("snap.data.set."+this.id,this,r,t),this},s.removeData=function(e){return null==e?m[this.id]={}:m[this.id]&&delete m[this.id][e],this},s.outerSVG=s.toString=g(1),s.innerSVG=g(),s.toDataURL=function(){if(window&&window.btoa){var t=this.getBBox(),r=e.format('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="{width}" height="{height}" viewBox="{x} {y} {width} {height}">{contents}</svg>',{x:+t.x.toFixed(3),y:+t.y.toFixed(3),width:+t.width.toFixed(3),height:+t.height.toFixed(3),contents:this.outerSVG()});return"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(r)))}},i.prototype.select=s.select,i.prototype.selectAll=s.selectAll})),i.plugin((function(e,t,r,n,i){var s=Object.prototype.toString,a=String,o=Math;function l(e,t,r,n,i,a){if(null==t&&"[object SVGMatrix]"==s.call(e))return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.e=e.e,void(this.f=e.f);null!=e?(this.a=+e,this.b=+t,this.c=+r,this.d=+n,this.e=+i,this.f=+a):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}!function(t){function r(e){return e[0]*e[0]+e[1]*e[1]}function n(e){var t=o.sqrt(r(e));e[0]&&(e[0]/=t),e[1]&&(e[1]/=t)}t.add=function(e,t,r,n,i,s){if(e&&e instanceof l)return this.add(e.a,e.b,e.c,e.d,e.e,e.f);var a=e*this.a+t*this.c,o=e*this.b+t*this.d;return this.e+=i*this.a+s*this.c,this.f+=i*this.b+s*this.d,this.c=r*this.a+n*this.c,this.d=r*this.b+n*this.d,this.a=a,this.b=o,this},l.prototype.multLeft=function(e,t,r,n,i,s){if(e&&e instanceof l)return this.multLeft(e.a,e.b,e.c,e.d,e.e,e.f);var a=e*this.a+r*this.b,o=e*this.c+r*this.d,c=e*this.e+r*this.f+i;return this.b=t*this.a+n*this.b,this.d=t*this.c+n*this.d,this.f=t*this.e+n*this.f+s,this.a=a,this.c=o,this.e=c,this},t.invert=function(){var e=this,t=e.a*e.d-e.b*e.c;return new l(e.d/t,-e.b/t,-e.c/t,e.a/t,(e.c*e.f-e.d*e.e)/t,(e.b*e.e-e.a*e.f)/t)},t.clone=function(){return new l(this.a,this.b,this.c,this.d,this.e,this.f)},t.translate=function(e,t){return this.e+=e*this.a+t*this.c,this.f+=e*this.b+t*this.d,this},t.scale=function(e,t,r,n){return null==t&&(t=e),(r||n)&&this.translate(r,n),this.a*=e,this.b*=e,this.c*=t,this.d*=t,(r||n)&&this.translate(-r,-n),this},t.rotate=function(t,r,n){t=e.rad(t),r=r||0,n=n||0;var i=+o.cos(t).toFixed(9),s=+o.sin(t).toFixed(9);return this.add(i,s,-s,i,r,n),this.add(1,0,0,1,-r,-n)},t.skewX=function(e){return this.skew(e,0)},t.skewY=function(e){return this.skew(0,e)},t.skew=function(t,r){t=t||0,r=r||0,t=e.rad(t),r=e.rad(r);var n=o.tan(t).toFixed(9),i=o.tan(r).toFixed(9);return this.add(1,i,n,1,0,0)},t.x=function(e,t){return e*this.a+t*this.c+this.e},t.y=function(e,t){return e*this.b+t*this.d+this.f},t.get=function(e){return+this[a.fromCharCode(97+e)].toFixed(4)},t.toString=function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")"},t.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},t.determinant=function(){return this.a*this.d-this.b*this.c},t.split=function(){var t={};t.dx=this.e,t.dy=this.f;var i=[[this.a,this.b],[this.c,this.d]];t.scalex=o.sqrt(r(i[0])),n(i[0]),t.shear=i[0][0]*i[1][0]+i[0][1]*i[1][1],i[1]=[i[1][0]-i[0][0]*t.shear,i[1][1]-i[0][1]*t.shear],t.scaley=o.sqrt(r(i[1])),n(i[1]),t.shear/=t.scaley,this.determinant()<0&&(t.scalex=-t.scalex);var s=i[0][1],a=i[1][1];return a<0?(t.rotate=e.deg(o.acos(a)),s<0&&(t.rotate=360-t.rotate)):t.rotate=e.deg(o.asin(s)),t.isSimple=!+t.shear.toFixed(9)&&(t.scalex.toFixed(9)==t.scaley.toFixed(9)||!t.rotate),t.isSuperSimple=!+t.shear.toFixed(9)&&t.scalex.toFixed(9)==t.scaley.toFixed(9)&&!t.rotate,t.noRotation=!+t.shear.toFixed(9)&&!t.rotate,t},t.toTransformString=function(e){var t=e||this.split();return+t.shear.toFixed(9)?"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]:(t.scalex=+t.scalex.toFixed(4),t.scaley=+t.scaley.toFixed(4),t.rotate=+t.rotate.toFixed(4),(t.dx||t.dy?"t"+[+t.dx.toFixed(4),+t.dy.toFixed(4)]:"")+(t.rotate?"r"+[+t.rotate.toFixed(4),0,0]:"")+(1!=t.scalex||1!=t.scaley?"s"+[t.scalex,t.scaley,0,0]:""))}}(l.prototype),e.Matrix=l,e.matrix=function(e,t,r,n,i,s){return new l(e,t,r,n,i,s)}})),i.plugin((function(e,t,r,n,i){var s,a=e._.make,o=e._.wrap,l=e.is,c=e._.getSomeDefs,u=/^url\((['"]?)([^)]+)\1\)$/,d=e._.$,f=e.url,p=String,h=e._.separator;function m(r){return function(n){if(eve.stop(),n instanceof i&&1==n.node.childNodes.length&&("radialGradient"==n.node.firstChild.tagName||"linearGradient"==n.node.firstChild.tagName||"pattern"==n.node.firstChild.tagName)&&(n=n.node.firstChild,c(this).appendChild(n),n=o(n)),n instanceof t)if("radialGradient"==n.type||"linearGradient"==n.type||"pattern"==n.type){n.node.id||d(n.node,{id:n.id});var s=f(n.node.id)}else s=n.attr(r);else if((s=e.color(n)).error){var a=e(c(this).ownerSVGElement).gradient(n);a?(a.node.id||d(a.node,{id:a.id}),s=f(a.node.id)):s=n}else s=p(s);var l={};l[r]=s,d(this.node,l),this.node.style[r]=""}}e.deurl=function(e){var t=String(e).match(u);return t?t[2]:e},eve.on("snap.util.attr.mask",(function(e){if(e instanceof t||e instanceof i){if(eve.stop(),e instanceof i&&1==e.node.childNodes.length&&(e=e.node.firstChild,c(this).appendChild(e),e=o(e)),"mask"==e.type)var r=e;else(r=a("mask",c(this))).node.appendChild(e.node);!r.node.id&&d(r.node,{id:r.id}),d(this.node,{mask:f(r.id)})}})),s=function(e){if(e instanceof t||e instanceof i){eve.stop();for(var r,n=e.node;n;){if("clipPath"===n.nodeName){r=new t(n);break}if("svg"===n.nodeName){r=void 0;break}n=n.parentNode}r||((r=a("clipPath",c(this))).node.appendChild(e.node),!r.node.id&&d(r.node,{id:r.id})),d(this.node,{"clip-path":f(r.node.id||r.id)})}},eve.on("snap.util.attr.clip",s),eve.on("snap.util.attr.clip-path",s),eve.on("snap.util.attr.clipPath",s),eve.on("snap.util.attr.fill",m("fill")),eve.on("snap.util.attr.stroke",m("stroke"));var g=/^([lr])(?:\(([^)]*)\))?(.*)$/i;function y(e){eve.stop(),e==+e&&(e+="px"),this.node.style.fontSize=e}function v(e){for(var t=[],r=e.childNodes,n=0,i=r.length;n<i;n++){var s=r[n];3==s.nodeType&&t.push(s.nodeValue),"tspan"==s.tagName&&(1==s.childNodes.length&&3==s.firstChild.nodeType?t.push(s.firstChild.nodeValue):t.push(v(s)))}return t}function E(){return eve.stop(),this.node.style.fontSize}eve.on("snap.util.grad.parse",(function(e){var t=(e=p(e)).match(g);if(!t)return null;var r=t[1],n=t[2],i=t[3];1==(n=n.split(/\s*,\s*/).map((function(e){return+e==e?+e:e}))).length&&0==n[0]&&(n=[]);var s=(i=(i=i.split("-")).map((function(e){var t={color:(e=e.split(":"))[0]};return e[1]&&(t.offset=parseFloat(e[1])),t}))).length,a=0,o=0;function l(e,t){for(var r=(t-a)/(e-o),n=o;n<e;n++)i[n].offset=+(+a+r*(n-o)).toFixed(2);o=e,a=t}s--;for(var c=0;c<s;c++)"offset"in i[c]&&l(c,i[c].offset);return i[s].offset=i[s].offset||100,l(s,i[s].offset),{type:r,params:n,stops:i}})),eve.on("snap.util.attr.d",(function(t){eve.stop(),l(t,"array")&&l(t[0],"array")&&(t=e.path.toString.call(t)),(t=p(t)).match(/[ruo]/i)&&(t=e.path.toAbsolute(t)),d(this.node,{d:t})}))(-1),eve.on("snap.util.attr.#text",(function(e){eve.stop(),e=p(e);for(var t=n.doc.createTextNode(e);this.node.firstChild;)this.node.removeChild(this.node.firstChild);this.node.appendChild(t)}))(-1),eve.on("snap.util.attr.path",(function(e){eve.stop(),this.attr({d:e})}))(-1),eve.on("snap.util.attr.class",(function(e){eve.stop(),this.node.className.baseVal=e}))(-1),eve.on("snap.util.attr.viewBox",(function(e){var t;t=l(e,"object")&&"x"in e?[e.x,e.y,e.width,e.height].join(" "):l(e,"array")?e.join(" "):e,d(this.node,{viewBox:t}),eve.stop()}))(-1),eve.on("snap.util.attr.transform",(function(e){this.transform(e),eve.stop()}))(-1),eve.on("snap.util.attr.r",(function(e){"rect"==this.type&&(eve.stop(),d(this.node,{rx:e,ry:e}))}))(-1),eve.on("snap.util.attr.textpath",(function(e){if(eve.stop(),"text"==this.type){var r,n,i;if(!e&&this.textPath){for(n=this.textPath;n.node.firstChild;)this.node.appendChild(n.node.firstChild);return n.remove(),void delete this.textPath}if(l(e,"string")){var s=c(this),a=o(s.parentNode).path(e);s.appendChild(a.node),r=a.id,a.attr({id:r})}else(e=o(e))instanceof t&&((r=e.attr("id"))||(r=e.id,e.attr({id:r})));if(r)if(n=this.textPath,i=this.node,n)n.attr({"xlink:href":"#"+r});else{for(n=d("textPath",{"xlink:href":"#"+r});i.firstChild;)n.appendChild(i.firstChild);i.appendChild(n),this.textPath=o(n)}}}))(-1),eve.on("snap.util.attr.text",(function(e){if("text"==this.type){for(var t=this.node,r=function(e){var t=d("tspan");if(l(e,"array"))for(var i=0;i<e.length;i++)t.appendChild(r(e[i]));else t.appendChild(n.doc.createTextNode(e));return t.normalize&&t.normalize(),t};t.firstChild;)t.removeChild(t.firstChild);for(var i=r(e);i.firstChild;)t.appendChild(i.firstChild)}eve.stop()}))(-1),eve.on("snap.util.attr.fontSize",y)(-1),eve.on("snap.util.attr.font-size",y)(-1),eve.on("snap.util.getattr.transform",(function(){return eve.stop(),this.transform()}))(-1),eve.on("snap.util.getattr.textpath",(function(){return eve.stop(),this.textPath}))(-1),function(){function t(t){return function(){eve.stop();var r=n.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue("marker-"+t);return"none"==r?r:e(n.doc.getElementById(r.match(u)[1]))}}function r(e){return function(t){eve.stop();var r="marker"+e.charAt(0).toUpperCase()+e.substring(1);if(""!=t&&t){if("marker"==t.type){var n=t.node.id;return n||d(t.node,{id:t.id}),void(this.node.style[r]=f(n))}}else this.node.style[r]="none"}}eve.on("snap.util.getattr.marker-end",t("end"))(-1),eve.on("snap.util.getattr.markerEnd",t("end"))(-1),eve.on("snap.util.getattr.marker-start",t("start"))(-1),eve.on("snap.util.getattr.markerStart",t("start"))(-1),eve.on("snap.util.getattr.marker-mid",t("mid"))(-1),eve.on("snap.util.getattr.markerMid",t("mid"))(-1),eve.on("snap.util.attr.marker-end",r("end"))(-1),eve.on("snap.util.attr.markerEnd",r("end"))(-1),eve.on("snap.util.attr.marker-start",r("start"))(-1),eve.on("snap.util.attr.markerStart",r("start"))(-1),eve.on("snap.util.attr.marker-mid",r("mid"))(-1),eve.on("snap.util.attr.markerMid",r("mid"))(-1)}(),eve.on("snap.util.getattr.r",(function(){if("rect"==this.type&&d(this.node,"rx")==d(this.node,"ry"))return eve.stop(),d(this.node,"rx")}))(-1),eve.on("snap.util.getattr.text",(function(){if("text"==this.type||"tspan"==this.type){eve.stop();var e=v(this.node);return 1==e.length?e[0]:e}}))(-1),eve.on("snap.util.getattr.#text",(function(){return this.node.textContent}))(-1),eve.on("snap.util.getattr.fill",(function(t){if(!t){eve.stop();var r=eve("snap.util.getattr.fill",this,!0).firstDefined();return e(e.deurl(r))||r}}))(-1),eve.on("snap.util.getattr.stroke",(function(t){if(!t){eve.stop();var r=eve("snap.util.getattr.stroke",this,!0).firstDefined();return e(e.deurl(r))||r}}))(-1),eve.on("snap.util.getattr.viewBox",(function(){eve.stop();var t=d(this.node,"viewBox");return t?(t=t.split(h),e._.box(+t[0],+t[1],+t[2],+t[3])):void 0}))(-1),eve.on("snap.util.getattr.points",(function(){var e=d(this.node,"points");return eve.stop(),e?e.split(h):void 0}))(-1),eve.on("snap.util.getattr.path",(function(){var e=d(this.node,"d");return eve.stop(),e}))(-1),eve.on("snap.util.getattr.class",(function(){return this.node.className.baseVal}))(-1),eve.on("snap.util.getattr.fontSize",E)(-1),eve.on("snap.util.getattr.font-size",E)(-1)})),i.plugin((function(e,t,r,n,i){var s=/\S+/g,a=String,o=t.prototype;o.addClass=function(e){var t,r,n,i=a(e||"").match(s)||[],o=this.node,l=o.className.baseVal,c=l.match(s)||[];if(i.length){for(t=0;r=i[t++];)~c.indexOf(r)||c.push(r);l!=(n=c.join(" "))&&(o.className.baseVal=n)}return this},o.removeClass=function(e){var t,r,n,i,o=a(e||"").match(s)||[],l=this.node,c=l.className.baseVal,u=c.match(s)||[];if(u.length){for(t=0;n=o[t++];)~(r=u.indexOf(n))&&u.splice(r,1);c!=(i=u.join(" "))&&(l.className.baseVal=i)}return this},o.hasClass=function(e){return!!~(this.node.className.baseVal.match(s)||[]).indexOf(e)},o.toggleClass=function(e,t){if(null!=t)return t?this.addClass(e):this.removeClass(e);var r,n,i,a,o=(e||"").match(s)||[],l=this.node,c=l.className.baseVal,u=c.match(s)||[];for(r=0;i=o[r++];)~(n=u.indexOf(i))?u.splice(n,1):u.push(i);return c!=(a=u.join(" "))&&(l.className.baseVal=a),this}})),i.plugin((function(e,t,r,n,i){var s={"+":function(e,t){return e+t},"-":function(e,t){return e-t},"/":function(e,t){return e/t},"*":function(e,t){return e*t}},a=String,o=/[a-z]+$/i,l=/^\s*([+\-\/*])\s*=\s*([\d.eE+\-]+)\s*([^\d\s]+)?\s*$/;function c(e){return e}function u(e){return function(t){return+t.toFixed(3)+e}}eve.on("snap.util.attr",(function(e){var t=a(e).match(l);if(t){var r=eve.nt(),n=r.substring(r.lastIndexOf(".")+1),i=this.attr(n),c={};eve.stop();var u=t[3]||"",d=i.match(o),f=s[t[1]];if(d&&d==u?e=f(parseFloat(i),+t[2]):(i=this.asPX(n),e=f(this.asPX(n),this.asPX(n,t[2]+u))),isNaN(i)||isNaN(e))return;c[n]=e,this.attr(c)}}))(-10),eve.on("snap.util.equal",(function(e,t){var r=a(this.attr(e)||""),n=a(t).match(l);if(n){eve.stop();var i=n[3]||"",d=r.match(o),f=s[n[1]];return d&&d==i?{from:parseFloat(r),to:f(parseFloat(r),+n[2]),f:u(d)}:{from:r=this.asPX(e),to:f(r,this.asPX(e,n[2]+i)),f:c}}}))(-10)})),i.plugin((function(e,t,r,n,i){var s=r.prototype,a=e.is;s.rect=function(e,t,r,n,i,s){var o;return null==s&&(s=i),a(e,"object")&&"[object Object]"==e?o=e:null!=e&&(o={x:e,y:t,width:r,height:n},null!=i&&(o.rx=i,o.ry=s)),this.el("rect",o)},s.circle=function(e,t,r){var n;return a(e,"object")&&"[object Object]"==e?n=e:null!=e&&(n={cx:e,cy:t,r:r}),this.el("circle",n)};var o=function(){function e(){this.parentNode.removeChild(this)}return function(t,r){var i=n.doc.createElement("img"),s=n.doc.body;i.style.cssText="position:absolute;left:-9999em;top:-9999em",i.onload=function(){r.call(i),i.onload=i.onerror=null,s.removeChild(i)},i.onerror=e,s.appendChild(i),i.src=t}}();s.image=function(t,r,n,i,s){var l=this.el("image");if(a(t,"object")&&"src"in t)l.attr(t);else if(null!=t){var c={"xlink:href":t,preserveAspectRatio:"none"};null!=r&&null!=n&&(c.x=r,c.y=n),null!=i&&null!=s?(c.width=i,c.height=s):o(t,(function(){e._.$(l.node,{width:this.offsetWidth,height:this.offsetHeight})})),e._.$(l.node,c)}return l},s.ellipse=function(e,t,r,n){var i;return a(e,"object")&&"[object Object]"==e?i=e:null!=e&&(i={cx:e,cy:t,rx:r,ry:n}),this.el("ellipse",i)},s.path=function(e){var t;return a(e,"object")&&!a(e,"array")?t=e:e&&(t={d:e}),this.el("path",t)},s.group=s.g=function(e){var t=this.el("g");return 1==arguments.length&&e&&!e.type?t.attr(e):arguments.length&&t.add(Array.prototype.slice.call(arguments,0)),t},s.svg=function(e,t,r,n,i,s,o,l){var c={};return a(e,"object")&&null==t?c=e:(null!=e&&(c.x=e),null!=t&&(c.y=t),null!=r&&(c.width=r),null!=n&&(c.height=n),null!=i&&null!=s&&null!=o&&null!=l&&(c.viewBox=[i,s,o,l])),this.el("svg",c)},s.mask=function(e){var t=this.el("mask");return 1==arguments.length&&e&&!e.type?t.attr(e):arguments.length&&t.add(Array.prototype.slice.call(arguments,0)),t},s.ptrn=function(e,t,r,n,i,s,o,l){if(a(e,"object"))var c=e;else c={patternUnits:"userSpaceOnUse"},e&&(c.x=e),t&&(c.y=t),null!=r&&(c.width=r),null!=n&&(c.height=n),c.viewBox=null!=i&&null!=s&&null!=o&&null!=l?[i,s,o,l]:[e||0,t||0,r||0,n||0];return this.el("pattern",c)},s.use=function(r){return null!=r?(r instanceof t&&(r.attr("id")||r.attr({id:e._.id(r)}),r=r.attr("id")),"#"==String(r).charAt()&&(r=r.substring(1)),this.el("use",{"xlink:href":"#"+r})):t.prototype.use.call(this)},s.symbol=function(e,t,r,n){var i={};return null!=e&&null!=t&&null!=r&&null!=n&&(i.viewBox=[e,t,r,n]),this.el("symbol",i)},s.text=function(e,t,r){var n={};return a(e,"object")?n=e:null!=e&&(n={x:e,y:t,text:r||""}),this.el("text",n)},s.line=function(e,t,r,n){var i={};return a(e,"object")?i=e:null!=e&&(i={x1:e,x2:r,y1:t,y2:n}),this.el("line",i)},s.polyline=function(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments,0));var t={};return a(e,"object")&&!a(e,"array")?t=e:null!=e&&(t={points:e}),this.el("polyline",t)},s.polygon=function(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments,0));var t={};return a(e,"object")&&!a(e,"array")?t=e:null!=e&&(t={points:e}),this.el("polygon",t)},function(){var t=e._.$;function r(){return this.selectAll("stop")}function n(r,n){var i=t("stop"),s={offset:+n+"%"};r=e.color(r),s["stop-color"]=r.hex,r.opacity<1&&(s["stop-opacity"]=r.opacity),t(i,s);for(var a,o=this.stops(),l=0;l<o.length;l++){if(parseFloat(o[l].attr("offset"))>n){this.node.insertBefore(i,o[l].node),a=!0;break}}return a||this.node.appendChild(i),this}function i(){if("linearGradient"==this.type){var r=t(this.node,"x1")||0,n=t(this.node,"x2")||1,i=t(this.node,"y1")||0,s=t(this.node,"y2")||0;return e._.box(r,i,math.abs(n-r),math.abs(s-i))}var a=this.node.cx||.5,o=this.node.cy||.5,l=this.node.r||0;return e._.box(a-l,o-l,2*l,2*l)}function a(t){var r=t,n=this.stops();if("string"==typeof t&&(r=eve("snap.util.grad.parse",null,"l(0,0,0,1)"+t).firstDefined().stops),e.is(r,"array")){for(var i=0;i<n.length;i++)if(r[i]){var s=e.color(r[i].color),a={offset:r[i].offset+"%"};a["stop-color"]=s.hex,s.opacity<1&&(a["stop-opacity"]=s.opacity),n[i].attr(a)}else n[i].remove();for(i=n.length;i<r.length;i++)this.addStop(r[i].color,r[i].offset);return this}}function o(s,o,l,c,u){var d=e._.make("linearGradient",s);return d.stops=r,d.addStop=n,d.getBBox=i,d.setStops=a,null!=o&&t(d.node,{x1:o,y1:l,x2:c,y2:u}),d}function l(s,a,o,l,c,u){var d=e._.make("radialGradient",s);return d.stops=r,d.addStop=n,d.getBBox=i,null!=a&&t(d.node,{cx:a,cy:o,r:l}),null!=c&&null!=u&&t(d.node,{fx:c,fy:u}),d}s.gradient=function(e){return function(e,r){var n,i=eve("snap.util.grad.parse",null,r).firstDefined();if(!i)return null;i.params.unshift(e),n="l"==i.type.toLowerCase()?o.apply(0,i.params):l.apply(0,i.params),i.type!=i.type.toLowerCase()&&t(n.node,{gradientUnits:"userSpaceOnUse"});for(var s=i.stops,a=s.length,c=0;c<a;c++){var u=s[c];n.addStop(u.color,u.offset)}return n}(this.defs,e)},s.gradientLinear=function(e,t,r,n){return o(this.defs,e,t,r,n)},s.gradientRadial=function(e,t,r,n,i){return l(this.defs,e,t,r,n,i)},s.toString=function(){var t,r=this.node.ownerDocument,n=r.createDocumentFragment(),i=r.createElement("div"),s=this.node.cloneNode(!0);return n.appendChild(i),i.appendChild(s),e._.$(s,{xmlns:"http://www.w3.org/2000/svg"}),t=i.innerHTML,n.removeChild(n.firstChild),t},s.toDataURL=function(){if(window&&window.btoa)return"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(this)))},s.clear=function(){for(var e,t=this.node.firstChild;t;)e=t.nextSibling,"defs"!=t.tagName?t.parentNode.removeChild(t):s.clear.call({node:t}),t=e}}()})),i.plugin((function(e,t,r,n){var i=t.prototype,s=e.is,a=e._.clone,o="hasOwnProperty",l=/,?([a-z]),?/gi,c=parseFloat,u=Math,d=u.PI,f=u.min,p=u.max,h=u.pow,m=u.abs;function g(e){var t=g.ps=g.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout((function(){for(var r in t)t[o](r)&&r!=e&&(t[r].sleep--,!t[r].sleep&&delete t[r])})),t[e]}function y(e,t,r,n){return null==e&&(e=t=r=n=0),null==t&&(t=e.y,r=e.width,n=e.height,e=e.x),{x:e,y:t,width:r,w:r,height:n,h:n,x2:e+r,y2:t+n,cx:e+r/2,cy:t+n/2,r1:u.min(r,n)/2,r2:u.max(r,n)/2,r0:u.sqrt(r*r+n*n)/2,path:U(e,t,r,n),vb:[e,t,r,n].join(" ")}}function v(){return this.join(",").replace(l,"$1")}function E(e){var t=a(e);return t.toString=v,t}function b(e,t,r,n,i,s,a,o,l){return null==l?_(e,t,r,n,i,s,a,o):L(e,t,r,n,i,s,a,o,function(e,t,r,n,i,s,a,o,l){if(l<0||_(e,t,r,n,i,s,a,o)<l)return;var c,u=1,d=u/2,f=u-d,p=.01;c=_(e,t,r,n,i,s,a,o,f);for(;m(c-l)>p;)c=_(e,t,r,n,i,s,a,o,f+=(c<l?1:-1)*(d/=2));return f}(e,t,r,n,i,s,a,o,l))}function T(r,n){function i(e){return+(+e).toFixed(3)}return e._.cacher((function(e,s,a){e instanceof t&&(e=e.attr("d"));for(var o,l,c,u,d,f="",p={},h=0,m=0,g=(e=q(e)).length;m<g;m++){if("M"==(c=e[m])[0])o=+c[1],l=+c[2];else{if(h+(u=b(o,l,c[1],c[2],c[3],c[4],c[5],c[6]))>s){if(n&&!p.start){if(f+=["C"+i((d=b(o,l,c[1],c[2],c[3],c[4],c[5],c[6],s-h)).start.x),i(d.start.y),i(d.m.x),i(d.m.y),i(d.x),i(d.y)],a)return f;p.start=f,f=["M"+i(d.x),i(d.y)+"C"+i(d.n.x),i(d.n.y),i(d.end.x),i(d.end.y),i(c[5]),i(c[6])].join(),h+=u,o=+c[5],l=+c[6];continue}if(!r&&!n)return d=b(o,l,c[1],c[2],c[3],c[4],c[5],c[6],s-h)}h+=u,o=+c[5],l=+c[6]}f+=c.shift()+c}return p.end=f,d=r?h:n?p:L(o,l,c[0],c[1],c[2],c[3],c[4],c[5],1)}),null,e._.clone)}var R=T(1),S=T(),A=T(0,1);function L(e,t,r,n,i,s,a,o,l){var c=1-l,f=h(c,3),p=h(c,2),m=l*l,g=m*l,y=e+2*l*(r-e)+m*(i-2*r+e),v=t+2*l*(n-t)+m*(s-2*n+t),E=r+2*l*(i-r)+m*(a-2*i+r),b=n+2*l*(s-n)+m*(o-2*s+n);return{x:f*e+3*p*l*r+3*c*l*l*i+g*a,y:f*t+3*p*l*n+3*c*l*l*s+g*o,m:{x:y,y:v},n:{x:E,y:b},start:{x:c*e+l*r,y:c*t+l*n},end:{x:c*i+l*a,y:c*s+l*o},alpha:90-180*u.atan2(y-E,v-b)/d}}function w(t,r,n,i,s,a,o,l){e.is(t,"array")||(t=[t,r,n,i,s,a,o,l]);var c=G.apply(null,t);return y(c.min.x,c.min.y,c.max.x-c.min.x,c.max.y-c.min.y)}function C(e,t,r){return t>=e.x&&t<=e.x+e.width&&r>=e.y&&r<=e.y+e.height}function k(e,t){return e=y(e),C(t=y(t),e.x,e.y)||C(t,e.x2,e.y)||C(t,e.x,e.y2)||C(t,e.x2,e.y2)||C(e,t.x,t.y)||C(e,t.x2,t.y)||C(e,t.x,t.y2)||C(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}function x(e,t,r,n,i){return e*(e*(-3*t+9*r-9*n+3*i)+6*t-12*r+6*n)-3*t+3*r}function _(e,t,r,n,i,s,a,o,l){null==l&&(l=1);for(var c=(l=l>1?1:l<0?0:l)/2,d=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],f=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0,h=0;h<12;h++){var m=c*d[h]+c,g=x(m,e,r,i,a),y=x(m,t,n,s,o),v=g*g+y*y;p+=f[h]*u.sqrt(v)}return c*p}function D(e,t,r,n,i,s,a,o){if(!(p(e,r)<f(i,a)||f(e,r)>p(i,a)||p(t,n)<f(s,o)||f(t,n)>p(s,o))){var l=(e-r)*(s-o)-(t-n)*(i-a);if(l){var c=((e*n-t*r)*(i-a)-(e-r)*(i*o-s*a))/l,u=((e*n-t*r)*(s-o)-(t-n)*(i*o-s*a))/l,d=+c.toFixed(2),h=+u.toFixed(2);if(!(d<+f(e,r).toFixed(2)||d>+p(e,r).toFixed(2)||d<+f(i,a).toFixed(2)||d>+p(i,a).toFixed(2)||h<+f(t,n).toFixed(2)||h>+p(t,n).toFixed(2)||h<+f(s,o).toFixed(2)||h>+p(s,o).toFixed(2)))return{x:c,y:u}}}}function I(e,t,r){if(!k(w(e),w(t)))return r?0:[];for(var n=~~(_.apply(0,e)/8),i=~~(_.apply(0,t)/8),s=[],a=[],o={},l=r?0:[],c=0;c<n+1;c++){var u=L.apply(0,e.concat(c/n));s.push({x:u.x,y:u.y,t:c/n})}for(c=0;c<i+1;c++)u=L.apply(0,t.concat(c/i)),a.push({x:u.x,y:u.y,t:c/i});for(c=0;c<n;c++)for(var d=0;d<i;d++){var f=s[c],p=s[c+1],h=a[d],g=a[d+1],y=m(p.x-f.x)<.001?"y":"x",v=m(g.x-h.x)<.001?"y":"x",E=D(f.x,f.y,p.x,p.y,h.x,h.y,g.x,g.y);if(E){if(o[E.x.toFixed(4)]==E.y.toFixed(4))continue;o[E.x.toFixed(4)]=E.y.toFixed(4);var b=f.t+m((E[y]-f[y])/(p[y]-f[y]))*(p.t-f.t),T=h.t+m((E[v]-h[v])/(g[v]-h[v]))*(g.t-h.t);b>=0&&b<=1&&T>=0&&T<=1&&(r?l++:l.push({x:E.x,y:E.y,t1:b,t2:T}))}}return l}function B(e,t,r){e=q(e),t=q(t);for(var n,i,s,a,o,l,c,u,d,f,p=r?0:[],h=0,m=e.length;h<m;h++){var g=e[h];if("M"==g[0])n=o=g[1],i=l=g[2];else{"C"==g[0]?(d=[n,i].concat(g.slice(1)),n=d[6],i=d[7]):(d=[n,i,n,i,o,l,o,l],n=o,i=l);for(var y=0,v=t.length;y<v;y++){var E=t[y];if("M"==E[0])s=c=E[1],a=u=E[2];else{"C"==E[0]?(f=[s,a].concat(E.slice(1)),s=f[6],a=f[7]):(f=[s,a,s,a,c,u,c,u],s=c,a=u);var b=I(d,f,r);if(r)p+=b;else{for(var T=0,R=b.length;T<R;T++)b[T].segment1=h,b[T].segment2=y,b[T].bez1=d,b[T].bez2=f;p=p.concat(b)}}}}}return p}function P(e){var t=g(e);if(t.bbox)return a(t.bbox);if(!e)return y();for(var r,n=0,i=0,s=[],o=[],l=0,c=(e=q(e)).length;l<c;l++)if("M"==(r=e[l])[0])n=r[1],i=r[2],s.push(n),o.push(i);else{var u=G(n,i,r[1],r[2],r[3],r[4],r[5],r[6]);s=s.concat(u.min.x,u.max.x),o=o.concat(u.min.y,u.max.y),n=r[5],i=r[6]}var d=f.apply(0,s),h=f.apply(0,o),m=y(d,h,p.apply(0,s)-d,p.apply(0,o)-h);return t.bbox=a(m),m}function U(e,t,r,n,i){if(i)return[["M",+e+ +i,t],["l",r-2*i,0],["a",i,i,0,0,1,i,i],["l",0,n-2*i],["a",i,i,0,0,1,-i,i],["l",2*i-r,0],["a",i,i,0,0,1,-i,-i],["l",0,2*i-n],["a",i,i,0,0,1,i,-i],["z"]];var s=[["M",e,t],["l",r,0],["l",0,n],["l",-r,0],["z"]];return s.toString=v,s}function N(e,t,r,n,i){if(null==i&&null==n&&(n=r),e=+e,t=+t,r=+r,n=+n,null!=i)var s=Math.PI/180,a=e+r*Math.cos(-n*s),o=e+r*Math.cos(-i*s),l=[["M",a,t+r*Math.sin(-n*s)],["A",r,r,0,+(i-n>180),0,o,t+r*Math.sin(-i*s)]];else l=[["M",e,t],["m",0,-n],["a",r,n,0,1,1,0,2*n],["a",r,n,0,1,1,0,-2*n],["z"]];return l.toString=v,l}var O=e._unit2px,K={path:function(e){return e.attr("path")},circle:function(e){var t=O(e);return N(t.cx,t.cy,t.r)},ellipse:function(e){var t=O(e);return N(t.cx||0,t.cy||0,t.rx,t.ry)},rect:function(e){var t=O(e);return U(t.x||0,t.y||0,t.width,t.height,t.rx,t.ry)},image:function(e){var t=O(e);return U(t.x||0,t.y||0,t.width,t.height)},line:function(e){return"M"+[e.attr("x1")||0,e.attr("y1")||0,e.attr("x2"),e.attr("y2")]},polyline:function(e){return"M"+e.attr("points")},polygon:function(e){return"M"+e.attr("points")+"z"},deflt:function(e){var t=e.node.getBBox();return U(t.x,t.y,t.width,t.height)}};function F(t){var r=g(t);if(r.abs)return E(r.abs);if(s(t,"array")&&s(t&&t[0],"array")||(t=e.parsePathString(t)),!t||!t.length)return[["M",0,0]];var n,i=[],a=0,o=0,l=0,c=0,u=0;"M"==t[0][0]&&(l=a=+t[0][1],c=o=+t[0][2],u++,i[0]=["M",a,o]);for(var d,f,p=3==t.length&&"M"==t[0][0]&&"R"==t[1][0].toUpperCase()&&"Z"==t[2][0].toUpperCase(),h=u,m=t.length;h<m;h++){if(i.push(d=[]),(n=(f=t[h])[0])!=n.toUpperCase())switch(d[0]=n.toUpperCase(),d[0]){case"A":d[1]=f[1],d[2]=f[2],d[3]=f[3],d[4]=f[4],d[5]=f[5],d[6]=+f[6]+a,d[7]=+f[7]+o;break;case"V":d[1]=+f[1]+o;break;case"H":d[1]=+f[1]+a;break;case"R":for(var y=[a,o].concat(f.slice(1)),b=2,T=y.length;b<T;b++)y[b]=+y[b]+a,y[++b]=+y[b]+o;i.pop(),i=i.concat(H(y,p));break;case"O":i.pop(),(y=N(a,o,f[1],f[2])).push(y[0]),i=i.concat(y);break;case"U":i.pop(),i=i.concat(N(a,o,f[1],f[2],f[3])),d=["U"].concat(i[i.length-1].slice(-2));break;case"M":l=+f[1]+a,c=+f[2]+o;default:for(b=1,T=f.length;b<T;b++)d[b]=+f[b]+(b%2?a:o)}else if("R"==n)y=[a,o].concat(f.slice(1)),i.pop(),i=i.concat(H(y,p)),d=["R"].concat(f.slice(-2));else if("O"==n)i.pop(),(y=N(a,o,f[1],f[2])).push(y[0]),i=i.concat(y);else if("U"==n)i.pop(),i=i.concat(N(a,o,f[1],f[2],f[3])),d=["U"].concat(i[i.length-1].slice(-2));else for(var R=0,S=f.length;R<S;R++)d[R]=f[R];if("O"!=(n=n.toUpperCase()))switch(d[0]){case"Z":a=+l,o=+c;break;case"H":a=d[1];break;case"V":o=d[1];break;case"M":l=d[d.length-2],c=d[d.length-1];default:a=d[d.length-2],o=d[d.length-1]}}return i.toString=v,r.abs=E(i),i}function M(e,t,r,n){return[e,t,r,n,r,n]}function V(e,t,r,n,i,s){var a=1/3,o=2/3;return[a*e+o*r,a*t+o*n,a*i+o*r,a*s+o*n,i,s]}function j(t,r,n,i,s,a,o,l,c,f){var p,h=120*d/180,g=d/180*(+s||0),y=[],v=e._.cacher((function(e,t,r){return{x:e*u.cos(r)-t*u.sin(r),y:e*u.sin(r)+t*u.cos(r)}}));if(!n||!i)return[t,r,l,c,l,c];if(f)C=f[0],k=f[1],L=f[2],w=f[3];else{t=(p=v(t,r,-g)).x,r=p.y,l=(p=v(l,c,-g)).x,c=p.y;u.cos(d/180*s),u.sin(d/180*s);var E=(t-l)/2,b=(r-c)/2,T=E*E/(n*n)+b*b/(i*i);T>1&&(n*=T=u.sqrt(T),i*=T);var R=n*n,S=i*i,A=(a==o?-1:1)*u.sqrt(m((R*S-R*b*b-S*E*E)/(R*b*b+S*E*E))),L=A*n*b/i+(t+l)/2,w=A*-i*E/n+(r+c)/2,C=u.asin(((r-w)/i).toFixed(9)),k=u.asin(((c-w)/i).toFixed(9));(C=t<L?d-C:C)<0&&(C=2*d+C),(k=l<L?d-k:k)<0&&(k=2*d+k),o&&C>k&&(C-=2*d),!o&&k>C&&(k-=2*d)}var x=k-C;if(m(x)>h){var _=k,D=l,I=c;k=C+h*(o&&k>C?1:-1),y=j(l=L+n*u.cos(k),c=w+i*u.sin(k),n,i,s,0,o,D,I,[k,_,L,w])}x=k-C;var B=u.cos(C),P=u.sin(C),U=u.cos(k),N=u.sin(k),O=u.tan(x/4),K=4/3*n*O,F=4/3*i*O,M=[t,r],V=[t+K*P,r-F*B],G=[l+K*N,c-F*U],q=[l,c];if(V[0]=2*M[0]-V[0],V[1]=2*M[1]-V[1],f)return[V,G,q].concat(y);for(var H=[],X=0,z=(y=[V,G,q].concat(y).join().split(",")).length;X<z;X++)H[X]=X%2?v(y[X-1],y[X],g).y:v(y[X],y[X+1],g).x;return H}function G(e,t,r,n,i,s,a,o){for(var l,c,d,h,g,y,v,E,b=[],T=[[],[]],R=0;R<2;++R)if(0==R?(c=6*e-12*r+6*i,l=-3*e+9*r-9*i+3*a,d=3*r-3*e):(c=6*t-12*n+6*s,l=-3*t+9*n-9*s+3*o,d=3*n-3*t),m(l)<1e-12){if(m(c)<1e-12)continue;0<(h=-d/c)&&h<1&&b.push(h)}else v=c*c-4*d*l,E=u.sqrt(v),v<0||(0<(g=(-c+E)/(2*l))&&g<1&&b.push(g),0<(y=(-c-E)/(2*l))&&y<1&&b.push(y));for(var S,A=b.length,L=A;A--;)S=1-(h=b[A]),T[0][A]=S*S*S*e+3*S*S*h*r+3*S*h*h*i+h*h*h*a,T[1][A]=S*S*S*t+3*S*S*h*n+3*S*h*h*s+h*h*h*o;return T[0][L]=e,T[1][L]=t,T[0][L+1]=a,T[1][L+1]=o,T[0].length=T[1].length=L+2,{min:{x:f.apply(0,T[0]),y:f.apply(0,T[1])},max:{x:p.apply(0,T[0]),y:p.apply(0,T[1])}}}function q(e,t){var r=!t&&g(e);if(!t&&r.curve)return E(r.curve);for(var n=F(e),i=t&&F(t),s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o=function(e,t,r){var n,i;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(j.apply(0,[t.x,t.y].concat(e.slice(1))));break;case"S":"C"==r||"S"==r?(n=2*t.x-t.bx,i=2*t.y-t.by):(n=t.x,i=t.y),e=["C",n,i].concat(e.slice(1));break;case"T":"Q"==r||"T"==r?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"].concat(V(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(V(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(M(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat(M(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat(M(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat(M(t.x,t.y,t.X,t.Y))}return e},l=function(e,t){if(e[t].length>7){e[t].shift();for(var r=e[t];r.length;)d[t]="A",i&&(f[t]="A"),e.splice(t++,0,["C"].concat(r.splice(0,6)));e.splice(t,1),v=p(n.length,i&&i.length||0)}},u=function(e,t,r,s,a){e&&t&&"M"==e[a][0]&&"M"!=t[a][0]&&(t.splice(a,0,["M",s.x,s.y]),r.bx=0,r.by=0,r.x=e[a][1],r.y=e[a][2],v=p(n.length,i&&i.length||0))},d=[],f=[],h="",m="",y=0,v=p(n.length,i&&i.length||0);y<v;y++){n[y]&&(h=n[y][0]),"C"!=h&&(d[y]=h,y&&(m=d[y-1])),n[y]=o(n[y],s,m),"A"!=d[y]&&"C"==h&&(d[y]="C"),l(n,y),i&&(i[y]&&(h=i[y][0]),"C"!=h&&(f[y]=h,y&&(m=f[y-1])),i[y]=o(i[y],a,m),"A"!=f[y]&&"C"==h&&(f[y]="C"),l(i,y)),u(n,i,s,a,y),u(i,n,a,s,y);var b=n[y],T=i&&i[y],R=b.length,S=i&&T.length;s.x=b[R-2],s.y=b[R-1],s.bx=c(b[R-4])||s.x,s.by=c(b[R-3])||s.y,a.bx=i&&(c(T[S-4])||a.x),a.by=i&&(c(T[S-3])||a.y),a.x=i&&T[S-2],a.y=i&&T[S-1]}return i||(r.curve=E(n)),i?[n,i]:n}function H(e,t){for(var r=[],n=0,i=e.length;i-2*!t>n;n+=2){var s=[{x:+e[n-2],y:+e[n-1]},{x:+e[n],y:+e[n+1]},{x:+e[n+2],y:+e[n+3]},{x:+e[n+4],y:+e[n+5]}];t?n?i-4==n?s[3]={x:+e[0],y:+e[1]}:i-2==n&&(s[2]={x:+e[0],y:+e[1]},s[3]={x:+e[2],y:+e[3]}):s[0]={x:+e[i-2],y:+e[i-1]}:i-4==n?s[3]=s[2]:n||(s[0]={x:+e[n],y:+e[n+1]}),r.push(["C",(-s[0].x+6*s[1].x+s[2].x)/6,(-s[0].y+6*s[1].y+s[2].y)/6,(s[1].x+6*s[2].x-s[3].x)/6,(s[1].y+6*s[2].y-s[3].y)/6,s[2].x,s[2].y])}return r}e.path=g,e.path.getTotalLength=R,e.path.getPointAtLength=S,e.path.getSubpath=function(e,t,r){if(this.getTotalLength(e)-r<1e-6)return A(e,t).end;var n=A(e,r,1);return t?A(n,t).end:n},i.getTotalLength=function(){if(this.node.getTotalLength)return this.node.getTotalLength()},i.getPointAtLength=function(e){return S(this.attr("d"),e)},i.getSubpath=function(t,r){return e.path.getSubpath(this.attr("d"),t,r)},e._.box=y,e.path.findDotsAtSegment=L,e.path.bezierBBox=w,e.path.isPointInsideBBox=C,e.closest=function(t,r,n,i){for(var s=100,a=y(t-s/2,r-s/2,s,s),o=[],l=n[0].hasOwnProperty("x")?function(e){return{x:n[e].x,y:n[e].y}}:function(e){return{x:n[e],y:i[e]}},c=0;s<=1e6&&!c;){for(var u=0,d=n.length;u<d;u++){var f=l(u);if(C(a,f.x,f.y)){c++,o.push(f);break}}c||(a=y(t-(s*=2)/2,r-s/2,s,s))}if(1e6!=s){var p,h=1/0;for(u=0,d=o.length;u<d;u++){var m=e.len(t,r,o[u].x,o[u].y);h>m&&(h=m,o[u].len=m,p=o[u])}return p}},e.path.isBBoxIntersect=k,e.path.intersection=function(e,t){return B(e,t)},e.path.intersectionNumber=function(e,t){return B(e,t,1)},e.path.isPointInside=function(e,t,r){var n=P(e);return C(n,t,r)&&B(e,[["M",t,r],["H",n.x2+10]],1)%2==1},e.path.getBBox=P,e.path.get=K,e.path.toRelative=function(t){var r=g(t),n=String.prototype.toLowerCase;if(r.rel)return E(r.rel);e.is(t,"array")&&e.is(t&&t[0],"array")||(t=e.parsePathString(t));var i=[],s=0,a=0,o=0,l=0,c=0;"M"==t[0][0]&&(o=s=t[0][1],l=a=t[0][2],c++,i.push(["M",s,a]));for(var u=c,d=t.length;u<d;u++){var f=i[u]=[],p=t[u];if(p[0]!=n.call(p[0]))switch(f[0]=n.call(p[0]),f[0]){case"a":f[1]=p[1],f[2]=p[2],f[3]=p[3],f[4]=p[4],f[5]=p[5],f[6]=+(p[6]-s).toFixed(3),f[7]=+(p[7]-a).toFixed(3);break;case"v":f[1]=+(p[1]-a).toFixed(3);break;case"m":o=p[1],l=p[2];default:for(var h=1,m=p.length;h<m;h++)f[h]=+(p[h]-(h%2?s:a)).toFixed(3)}else{f=i[u]=[],"m"==p[0]&&(o=p[1]+s,l=p[2]+a);for(var y=0,b=p.length;y<b;y++)i[u][y]=p[y]}var T=i[u].length;switch(i[u][0]){case"z":s=o,a=l;break;case"h":s+=+i[u][T-1];break;case"v":a+=+i[u][T-1];break;default:s+=+i[u][T-2],a+=+i[u][T-1]}}return i.toString=v,r.rel=E(i),i},e.path.toAbsolute=F,e.path.toCubic=q,e.path.map=function(e,t){if(!t)return e;var r,n,i,s,a,o,l;for(i=0,a=(e=q(e)).length;i<a;i++)for(s=1,o=(l=e[i]).length;s<o;s+=2)r=t.x(l[s],l[s+1]),n=t.y(l[s],l[s+1]),l[s]=r,l[s+1]=n;return e},e.path.toString=v,e.path.clone=E})),i.plugin((function(e,t,r,i){var s=Math.max,a=Math.min,o=function(e){if(this.items=[],this.bindings={},this.length=0,this.type="set",e)for(var t=0,r=e.length;t<r;t++)e[t]&&(this[this.items.length]=this.items[this.items.length]=e[t],this.length++)},l=o.prototype;l.push=function(){for(var e,t,r=0,n=arguments.length;r<n;r++)(e=arguments[r])&&(this[t=this.items.length]=this.items[t]=e,this.length++);return this},l.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},l.forEach=function(e,t){for(var r=0,n=this.items.length;r<n;r++)if(!1===e.call(t,this.items[r],r))return this;return this},l.animate=function(t,r,i,s){"function"!=typeof i||i.length||(s=i,i=n.linear),t instanceof e._.Animation&&(s=t.callback,i=t.easing,r=i.dur,t=t.attr);var a=arguments;if(e.is(t,"array")&&e.is(a[a.length-1],"array"))var o=!0;var l,c=function(){l?this.b=l:l=this.b},u=0,d=this,f=s&&function(){++u==d.length&&s.call(this)};return this.forEach((function(e,n){eve.once("snap.animcreated."+e.id,c),o?a[n]&&e.animate.apply(e,a[n]):e.animate(t,r,i,f)}))},l.remove=function(){for(;this.length;)this.pop().remove();return this},l.bind=function(e,t,r){var n={};if("function"==typeof t)this.bindings[e]=t;else{var i=r||e;this.bindings[e]=function(e){n[i]=e,t.attr(n)}}return this},l.attr=function(e){var t={};for(var r in e)this.bindings[r]?this.bindings[r](e[r]):t[r]=e[r];for(var n=0,i=this.items.length;n<i;n++)this.items[n].attr(t);return this},l.clear=function(){for(;this.length;)this.pop()},l.splice=function(e,t,r){e=e<0?s(this.length+e,0):e,t=s(0,a(this.length-e,t));var n,i=[],l=[],c=[];for(n=2;n<arguments.length;n++)c.push(arguments[n]);for(n=0;n<t;n++)l.push(this[e+n]);for(;n<this.length-e;n++)i.push(this[e+n]);var u=c.length;for(n=0;n<u+i.length;n++)this.items[e+n]=this[e+n]=n<u?c[n]:i[n-u];for(n=this.items.length=this.length-=t-u;this[n];)delete this[n++];return new o(l)},l.exclude=function(e){for(var t=0,r=this.length;t<r;t++)if(this[t]==e)return this.splice(t,1),!0;return!1},l.insertAfter=function(e){for(var t=this.items.length;t--;)this.items[t].insertAfter(e);return this},l.getBBox=function(){for(var e=[],t=[],r=[],n=[],i=this.items.length;i--;)if(!this.items[i].removed){var o=this.items[i].getBBox();e.push(o.x),t.push(o.y),r.push(o.x+o.width),n.push(o.y+o.height)}return{x:e=a.apply(0,e),y:t=a.apply(0,t),x2:r=s.apply(0,r),y2:n=s.apply(0,n),width:r-e,height:n-t,cx:e+(r-e)/2,cy:t+(n-t)/2}},l.clone=function(e){e=new o;for(var t=0,r=this.items.length;t<r;t++)e.push(this.items[t].clone());return e},l.toString=function(){return"Snap\u2018s set"},l.type="set",e.Set=o,e.set=function(){var e=new o;return arguments.length&&e.push.apply(e,Array.prototype.slice.call(arguments,0)),e}})),i.plugin((function(e,t,r,n){var i={},s=/[%a-z]+$/i,a=String;function o(e){var t=e[0];switch(t.toLowerCase()){case"t":return[t,0,0];case"m":return[t,1,0,0,1,0,0];case"r":return 4==e.length?[t,0,e[2],e[3]]:[t,0];case"s":return 5==e.length?[t,1,1,e[3],e[4]]:3==e.length?[t,1,1]:[t,1]}}function l(e){return e}function c(e){return e.join(" ")}function u(t){return e.rgb(t[0],t[1],t[2],t[3])}function d(e){var t,r,n,i,s,a,o=0,l=[];for(t=0,r=e.length;t<r;t++){for(s="[",a=['"'+e[t][0]+'"'],n=1,i=e[t].length;n<i;n++)a[n]="val["+o+++"]";s+=a+"]",l[t]=s}return Function("val","return Snap.path.toString.call(["+l+"])")}function f(e){for(var t=[],r=0,n=e.length;r<n;r++)for(var i=1,s=e[r].length;i<s;i++)t.push(e[r][i]);return t}function p(e){return isFinite(e)}i.stroke=i.fill="colour",t.prototype.equal=function(e,t){return eve("snap.util.equal",this,e,t).firstDefined()},eve.on("snap.util.equal",(function(t,r){var n,h,m=a(this.attr(t)||""),g=this;if("colour"==i[t])return n=e.color(m),h=e.color(r),{from:[n.r,n.g,n.b,n.opacity],to:[h.r,h.g,h.b,h.opacity],f:u};if("viewBox"==t)return{from:n=this.attr(t).vb.split(" ").map(Number),to:h=r.split(" ").map(Number),f:c};if("transform"==t||"gradientTransform"==t||"patternTransform"==t)return"string"==typeof r&&(r=a(r).replace(/\.{3}|\u2026/g,m)),function(t,r,n){t=t||new e.Matrix,r=r||new e.Matrix,t=e.parseTransformString(t.toTransformString())||[],r=e.parseTransformString(r.toTransformString())||[];for(var i,s,a,l,c=Math.max(t.length,r.length),u=[],p=[],h=0;h<c;h++){if(a=t[h]||o(r[h]),l=r[h]||o(a),a[0]!=l[0]||"r"==a[0].toLowerCase()&&(a[2]!=l[2]||a[3]!=l[3])||"s"==a[0].toLowerCase()&&(a[3]!=l[3]||a[4]!=l[4])){t=e._.transform2matrix(t,n()),r=e._.transform2matrix(r,n()),u=[["m",t.a,t.b,t.c,t.d,t.e,t.f]],p=[["m",r.a,r.b,r.c,r.d,r.e,r.f]];break}for(u[h]=[],p[h]=[],i=0,s=Math.max(a.length,l.length);i<s;i++)i in a&&(u[h][i]=a[i]),i in l&&(p[h][i]=l[i])}return{from:f(u),to:f(p),f:d(u)}}(m=this.matrix,r=e._.rgTransform.test(r)?e._.transform2matrix(r,this.getBBox()):e._.transform2matrix(e._.svgTransform2string(r),this.getBBox()),(function(){return g.getBBox(1)}));if("d"==t||"path"==t)return{from:f((n=e.path.toCubic(m,r))[0]),to:f(n[1]),f:d(n[0])};if("points"==t)return{from:n=a(m).split(e._.separator),to:h=a(r).split(e._.separator),f:function(e){return e}};if(p(m)&&p(r))return{from:parseFloat(m),to:parseFloat(r),f:l};var y,v,E,b=m.match(s),T=a(r).match(s);return b&&(v=b,E=T,e.is(v,"array")&&e.is(E,"array")&&v.toString()==E.toString())?{from:parseFloat(m),to:parseFloat(r),f:(y=b,function(e){return+e.toFixed(3)+y})}:{from:this.asPX(t),to:this.asPX(t,r),f:l}}))})),i.plugin((function(e,t,r,n){for(var i=t.prototype,s=("createTouch"in n.doc),a=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","touchstart","touchmove","touchend","touchcancel"],o={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},l=function(e,t){var r="y"==e?"scrollTop":"scrollLeft",i=t&&t.node?t.node.ownerDocument:n.doc;return i[r in i.documentElement?"documentElement":"body"][r]},c=function(){return this.originalEvent.preventDefault()},u=function(){return this.originalEvent.stopPropagation()},d=function(e,t,r,n){var i=s&&o[t]?o[t]:t,a=function(i){var a=l("y",n),d=l("x",n);if(s&&o.hasOwnProperty(t))for(var f=0,p=i.targetTouches&&i.targetTouches.length;f<p;f++)if(i.targetTouches[f].target==e||e.contains(i.targetTouches[f].target)){var h=i;(i=i.targetTouches[f]).originalEvent=h,i.preventDefault=c,i.stopPropagation=u;break}var m=i.clientX+d,g=i.clientY+a;return r.call(n,i,m,g)};return t!==i&&e.addEventListener(t,a,!1),e.addEventListener(i,a,!1),function(){return t!==i&&e.removeEventListener(t,a,!1),e.removeEventListener(i,a,!1),!0}},f=[],p=function(e){for(var t,r=e.clientX,n=e.clientY,i=l("y"),a=l("x"),o=f.length;o--;){if(t=f[o],s){for(var c,u=e.touches&&e.touches.length;u--;)if((c=e.touches[u]).identifier==t.el._drag.id||t.el.node.contains(c.target)){r=c.clientX,n=c.clientY,(e.originalEvent?e.originalEvent:e).preventDefault();break}}else e.preventDefault();var d=t.el.node;d.nextSibling,d.parentNode,d.style.display;r+=a,n+=i,eve("snap.drag.move."+t.el.id,t.move_scope||t.el,r-t.el._drag.x,n-t.el._drag.y,r,n,e)}},h=function(t){e.unmousemove(p).unmouseup(h);for(var r,n=f.length;n--;)(r=f[n]).el._drag={},eve("snap.drag.end."+r.el.id,r.end_scope||r.start_scope||r.move_scope||r.el,t),eve.off("snap.drag.*."+r.el.id);f=[]},m=a.length;m--;)!function(t){e[t]=i[t]=function(r,n){if(e.is(r,"function"))this.events=this.events||[],this.events.push({name:t,f:r,unbind:d(this.node||document,t,r,n||this)});else for(var i=0,s=this.events.length;i<s;i++)if(this.events[i].name==t)try{this.events[i].f.call(this)}catch(a){}return this},e["un"+t]=i["un"+t]=function(e){for(var r=this.events||[],n=r.length;n--;)if(r[n].name==t&&(r[n].f==e||!e))return r[n].unbind(),r.splice(n,1),!r.length&&delete this.events,this;return this}}(a[m]);i.hover=function(e,t,r,n){return this.mouseover(e,r).mouseout(t,n||r)},i.unhover=function(e,t){return this.unmouseover(e).unmouseout(t)};var g=[];i.drag=function(t,r,n,i,s,a){var o,l=this;if(!arguments.length)return l.drag((function(e,t){this.attr({transform:o+(o?"T":"t")+[e,t]})}),(function(){o=this.transform().local}));function c(o,c,u){(o.originalEvent||o).preventDefault(),l._drag.x=c,l._drag.y=u,l._drag.id=o.identifier,!f.length&&e.mousemove(p).mouseup(h),f.push({el:l,move_scope:i,start_scope:s,end_scope:a}),r&&eve.on("snap.drag.start."+l.id,r),t&&eve.on("snap.drag.move."+l.id,t),n&&eve.on("snap.drag.end."+l.id,n),eve("snap.drag.start."+l.id,s||i||l,c,u,o)}function u(e,t,r){eve("snap.draginit."+l.id,l,e,t,r)}return eve.on("snap.draginit."+l.id,c),l._drag={},g.push({el:l,start:c,init:u}),l.mousedown(u),l},i.undrag=function(){for(var t=g.length;t--;)g[t].el==this&&(this.unmousedown(g[t].init),g.splice(t,1),eve.unbind("snap.drag.*."+this.id),eve.unbind("snap.draginit."+this.id));return!g.length&&e.unmousemove(p).unmouseup(h),this}})),i.plugin((function(e,t,r,n){t.prototype;var i=r.prototype,s=/^\s*url\((.+)\)/,a=String,o=e._.$;e.filter={},i.filter=function(r){var n=this;"svg"!=n.type&&(n=n.paper);var i=e.parse(a(r)),s=e._.id(),l=(n.node.offsetWidth,n.node.offsetHeight,o("filter"));return o(l,{id:s,filterUnits:"userSpaceOnUse"}),l.appendChild(i.node),n.defs.appendChild(l),new t(l)},eve.on("snap.util.getattr.filter",(function(){eve.stop();var t=o(this.node,"filter");if(t){var r=a(t).match(s);return r&&e.select(r[1])}})),eve.on("snap.util.attr.filter",(function(r){if(r instanceof t&&"filter"==r.type){eve.stop();var n=r.node.id;n||(o(r.node,{id:r.id}),n=r.id),o(this.node,{filter:e.url(n)})}r&&"none"!=r||(eve.stop(),this.node.removeAttribute("filter"))})),e.filter.blur=function(t,r){null==t&&(t=2);var n=null==r?t:[t,r];return e.format('<feGaussianBlur stdDeviation="{def}"/>',{def:n})},e.filter.blur.toString=function(){return this()},e.filter.shadow=function(t,r,n,i,s){return null==s&&(null==i?(s=n,n=4,i="#000"):(s=i,i=n,n=4)),null==n&&(n=4),null==s&&(s=1),null==t&&(t=0,r=2),null==r&&(r=t),i=e.color(i),e.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="{opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>',{color:i,dx:t,dy:r,blur:n,opacity:s})},e.filter.shadow.toString=function(){return this()},e.filter.grayscale=function(t){return null==t&&(t=1),e.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>',{a:.2126+.7874*(1-t),b:.7152-.7152*(1-t),c:.0722-.0722*(1-t),d:.2126-.2126*(1-t),e:.7152+.2848*(1-t),f:.0722-.0722*(1-t),g:.2126-.2126*(1-t),h:.0722+.9278*(1-t)})},e.filter.grayscale.toString=function(){return this()},e.filter.sepia=function(t){return null==t&&(t=1),e.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>',{a:.393+.607*(1-t),b:.769-.769*(1-t),c:.189-.189*(1-t),d:.349-.349*(1-t),e:.686+.314*(1-t),f:.168-.168*(1-t),g:.272-.272*(1-t),h:.534-.534*(1-t),i:.131+.869*(1-t)})},e.filter.sepia.toString=function(){return this()},e.filter.saturate=function(t){return null==t&&(t=1),e.format('<feColorMatrix type="saturate" values="{amount}"/>',{amount:1-t})},e.filter.saturate.toString=function(){return this()},e.filter.hueRotate=function(t){return t=t||0,e.format('<feColorMatrix type="hueRotate" values="{angle}"/>',{angle:t})},e.filter.hueRotate.toString=function(){return this()},e.filter.invert=function(t){return null==t&&(t=1),e.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/></feComponentTransfer>',{amount:t,amount2:1-t})},e.filter.invert.toString=function(){return this()},e.filter.brightness=function(t){return null==t&&(t=1),e.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/></feComponentTransfer>',{amount:t})},e.filter.brightness.toString=function(){return this()},e.filter.contrast=function(t){return null==t&&(t=1),e.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/></feComponentTransfer>',{amount:t,amount2:.5-t/2})},e.filter.contrast.toString=function(){return this()}})),i.plugin((function(e,t,r,n,i){var s=e._.box,a=e.is,o=/^[^a-z]*([tbmlrc])/i,l=function(){return"T"+this.dx+","+this.dy};t.prototype.getAlign=function(e,t){null==t&&a(e,"string")&&(t=e,e=null);var r=(e=e||this.paper).getBBox?e.getBBox():s(e),n=this.getBBox(),i={};switch(t=(t=t&&t.match(o))?t[1].toLowerCase():"c"){case"t":i.dx=0,i.dy=r.y-n.y;break;case"b":i.dx=0,i.dy=r.y2-n.y2;break;case"m":i.dx=0,i.dy=r.cy-n.cy;break;case"l":i.dx=r.x-n.x,i.dy=0;break;case"r":i.dx=r.x2-n.x2,i.dy=0;break;default:i.dx=r.cx-n.cx,i.dy=0}return i.toString=l,i},t.prototype.align=function(e,t){return this.transform("..."+this.getAlign(e,t))}})),i.plugin((function(e,t,r,i,s){var a=t.prototype,o=e.is,l=String,c="hasOwnProperty";function u(e,t,r){return function(n){var i=n.slice(e,t);return 1==i.length&&(i=i[0]),r?r(i):i}}var d=function(e,t,r,i){"function"!=typeof r||r.length||(i=r,r=n.linear),this.attr=e,this.dur=t,r&&(this.easing=r),i&&(this.callback=i)};e._.Animation=d,e.animation=function(e,t,r,n){return new d(e,t,r,n)},a.inAnim=function(){var e=this,t=[];for(var r in e.anims)e.anims[c](r)&&function(e){t.push({anim:new d(e._attrs,e.dur,e.easing,e._callback),mina:e,curStatus:e.status(),status:function(t){return e.status(t)},stop:function(){e.stop()}})}(e.anims[r]);return t},e.animate=function(e,t,r,i,s,a){"function"!=typeof s||s.length||(a=s,s=n.linear);var o=n.time(),l=n(e,t,o,o+i,n.time,r,s);return a&&eve.once("mina.finish."+l.id,a),l},a.stop=function(){for(var e=this.inAnim(),t=0,r=e.length;t<r;t++)e[t].stop();return this},a.animate=function(e,t,r,i){"function"!=typeof r||r.length||(i=r,r=n.linear),e instanceof d&&(i=e.callback,r=e.easing,t=e.dur,e=e.attr);var s,a,f,p,h=[],m=[],g={},y=this;for(var v in e)if(e[c](v)){y.equal?(s=(p=y.equal(v,l(e[v]))).from,a=p.to,f=p.f):(s=+y.attr(v),a=+e[v]);var E=o(s,"array")?s.length:1;g[v]=u(h.length,h.length+E,f),h=h.concat(s),m=m.concat(a)}var b=n.time(),T=n(h,m,b,b+t,n.time,(function(e){var t={};for(var r in g)g[c](r)&&(t[r]=g[r](e));y.attr(t)}),r);return y.anims[T.id]=T,T._attrs=e,T._callback=i,eve("snap.animcreated."+y.id,T),eve.once("mina.finish."+T.id,(function(){eve.off("mina.*."+T.id),delete y.anims[T.id],i&&i.call(y)})),eve.once("mina.stop."+T.id,(function(){eve.off("mina.*."+T.id),delete y.anims[T.id]})),y}})),i.plugin((function(e,t,r,n){function i(e){e=e.split(/(?=#)/);var t=new String(e[5]);return t[50]=e[0],t[100]=e[1],t[200]=e[2],t[300]=e[3],t[400]=e[4],t[500]=e[5],t[600]=e[6],t[700]=e[7],t[800]=e[8],t[900]=e[9],e[10]&&(t.A100=e[10],t.A200=e[11],t.A400=e[12],t.A700=e[13]),t}e.mui={},e.flat={},e.mui.red=i("#ffebee#ffcdd2#ef9a9a#e57373#ef5350#f44336#e53935#d32f2f#c62828#b71c1c#ff8a80#ff5252#ff1744#d50000"),e.mui.pink=i("#FCE4EC#F8BBD0#F48FB1#F06292#EC407A#E91E63#D81B60#C2185B#AD1457#880E4F#FF80AB#FF4081#F50057#C51162"),e.mui.purple=i("#F3E5F5#E1BEE7#CE93D8#BA68C8#AB47BC#9C27B0#8E24AA#7B1FA2#6A1B9A#4A148C#EA80FC#E040FB#D500F9#AA00FF"),e.mui.deeppurple=i("#EDE7F6#D1C4E9#B39DDB#9575CD#7E57C2#673AB7#5E35B1#512DA8#4527A0#311B92#B388FF#7C4DFF#651FFF#6200EA"),e.mui.indigo=i("#E8EAF6#C5CAE9#9FA8DA#7986CB#5C6BC0#3F51B5#3949AB#303F9F#283593#1A237E#8C9EFF#536DFE#3D5AFE#304FFE"),e.mui.blue=i("#E3F2FD#BBDEFB#90CAF9#64B5F6#64B5F6#2196F3#1E88E5#1976D2#1565C0#0D47A1#82B1FF#448AFF#2979FF#2962FF"),e.mui.lightblue=i("#E1F5FE#B3E5FC#81D4FA#4FC3F7#29B6F6#03A9F4#039BE5#0288D1#0277BD#01579B#80D8FF#40C4FF#00B0FF#0091EA"),e.mui.cyan=i("#E0F7FA#B2EBF2#80DEEA#4DD0E1#26C6DA#00BCD4#00ACC1#0097A7#00838F#006064#84FFFF#18FFFF#00E5FF#00B8D4"),e.mui.teal=i("#E0F2F1#B2DFDB#80CBC4#4DB6AC#26A69A#009688#00897B#00796B#00695C#004D40#A7FFEB#64FFDA#1DE9B6#00BFA5"),e.mui.green=i("#E8F5E9#C8E6C9#A5D6A7#81C784#66BB6A#4CAF50#43A047#388E3C#2E7D32#1B5E20#B9F6CA#69F0AE#00E676#00C853"),e.mui.lightgreen=i("#F1F8E9#DCEDC8#C5E1A5#AED581#9CCC65#8BC34A#7CB342#689F38#558B2F#33691E#CCFF90#B2FF59#76FF03#64DD17"),e.mui.lime=i("#F9FBE7#F0F4C3#E6EE9C#DCE775#D4E157#CDDC39#C0CA33#AFB42B#9E9D24#827717#F4FF81#EEFF41#C6FF00#AEEA00"),e.mui.yellow=i("#FFFDE7#FFF9C4#FFF59D#FFF176#FFEE58#FFEB3B#FDD835#FBC02D#F9A825#F57F17#FFFF8D#FFFF00#FFEA00#FFD600"),e.mui.amber=i("#FFF8E1#FFECB3#FFE082#FFD54F#FFCA28#FFC107#FFB300#FFA000#FF8F00#FF6F00#FFE57F#FFD740#FFC400#FFAB00"),e.mui.orange=i("#FFF3E0#FFE0B2#FFCC80#FFB74D#FFA726#FF9800#FB8C00#F57C00#EF6C00#E65100#FFD180#FFAB40#FF9100#FF6D00"),e.mui.deeporange=i("#FBE9E7#FFCCBC#FFAB91#FF8A65#FF7043#FF5722#F4511E#E64A19#D84315#BF360C#FF9E80#FF6E40#FF3D00#DD2C00"),e.mui.brown=i("#EFEBE9#D7CCC8#BCAAA4#A1887F#8D6E63#795548#6D4C41#5D4037#4E342E#3E2723"),e.mui.grey=i("#FAFAFA#F5F5F5#EEEEEE#E0E0E0#BDBDBD#9E9E9E#757575#616161#424242#212121"),e.mui.bluegrey=i("#ECEFF1#CFD8DC#B0BEC5#90A4AE#78909C#607D8B#546E7A#455A64#37474F#263238"),e.flat.turquoise="#1abc9c",e.flat.greensea="#16a085",e.flat.sunflower="#f1c40f",e.flat.orange="#f39c12",e.flat.emerland="#2ecc71",e.flat.nephritis="#27ae60",e.flat.carrot="#e67e22",e.flat.pumpkin="#d35400",e.flat.peterriver="#3498db",e.flat.belizehole="#2980b9",e.flat.alizarin="#e74c3c",e.flat.pomegranate="#c0392b",e.flat.amethyst="#9b59b6",e.flat.wisteria="#8e44ad",e.flat.clouds="#ecf0f1",e.flat.silver="#bdc3c7",e.flat.wetasphalt="#34495e",e.flat.midnightblue="#2c3e50",e.flat.concrete="#95a5a6",e.flat.asbestos="#7f8c8d",e.importMUIColors=function(){for(var t in e.mui)e.mui.hasOwnProperty(t)&&(window[t]=e.mui[t])}})),e.exports=i},7101:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(4561),s=(n=i)&&n.__esModule?n:{default:n};t.default={pauseVideo:{acceptableStates:[s.default.ENDED,s.default.PAUSED],stateChangeRequired:!1},playVideo:{acceptableStates:[s.default.ENDED,s.default.PLAYING],stateChangeRequired:!1},seekTo:{acceptableStates:[s.default.ENDED,s.default.PLAYING,s.default.PAUSED],stateChangeRequired:!0,timeout:3e3}},e.exports=t.default},1750:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(9429)),i=o(r(7866)),s=o(r(144)),a=o(r(7101));function o(e){return e&&e.__esModule?e:{default:e}}var l=(0,n.default)("youtube-player"),c={proxyEvents:function(e){var t={},r=function(r){var n="on"+r.slice(0,1).toUpperCase()+r.slice(1);t[n]=function(t){l('event "%s"',n,t),e.trigger(r,t)}},n=!0,i=!1,a=void 0;try{for(var o,c=s.default[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){r(o.value)}}catch(u){i=!0,a=u}finally{try{!n&&c.return&&c.return()}finally{if(i)throw a}}return t},promisifyPlayer:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r={},n=function(n){t&&a.default[n]?r[n]=function(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];return e.then((function(e){var t=a.default[n],i=e.getPlayerState(),s=e[n].apply(e,r);return t.stateChangeRequired||Array.isArray(t.acceptableStates)&&-1===t.acceptableStates.indexOf(i)?new Promise((function(r){e.addEventListener("onStateChange",(function n(){var i=e.getPlayerState(),s=void 0;"number"===typeof t.timeout&&(s=setTimeout((function(){e.removeEventListener("onStateChange",n),r()}),t.timeout)),Array.isArray(t.acceptableStates)&&-1!==t.acceptableStates.indexOf(i)&&(e.removeEventListener("onStateChange",n),clearTimeout(s),r())}))})).then((function(){return s})):s}))}:r[n]=function(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];return e.then((function(e){return e[n].apply(e,r)}))}},s=!0,o=!1,l=void 0;try{for(var c,u=i.default[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){n(c.value)}}catch(d){o=!0,l=d}finally{try{!s&&u.return&&u.return()}finally{if(o)throw l}}return r}};t.default=c,e.exports=t.default},4561:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={BUFFERING:3,ENDED:0,PAUSED:2,PLAYING:1,UNSTARTED:-1,VIDEO_CUED:5},e.exports=t.default},144:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=["ready","stateChange","playbackQualityChange","playbackRateChange","error","apiChange","volumeChange"],e.exports=t.default},7866:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=["cueVideoById","loadVideoById","cueVideoByUrl","loadVideoByUrl","playVideo","pauseVideo","stopVideo","getVideoLoadedFraction","cuePlaylist","loadPlaylist","nextVideo","previousVideo","playVideoAt","setShuffle","setLoop","getPlaylist","getPlaylistIndex","setOption","mute","unMute","isMuted","setVolume","getVolume","seekTo","getPlayerState","getPlaybackRate","setPlaybackRate","getAvailablePlaybackRates","getPlaybackQuality","setPlaybackQuality","getAvailableQualityLevels","getCurrentTime","getDuration","removeEventListener","getVideoUrl","getVideoEmbedCode","getOptions","getOption","addEventListener","destroy","setSize","getIframe"],e.exports=t.default},7282:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=o(r(6345)),s=o(r(4151)),a=o(r(1750));function o(e){return e&&e.__esModule?e:{default:e}}var l=void 0;t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=(0,i.default)();if(l||(l=(0,s.default)(o)),t.events)throw new Error("Event handlers cannot be overwritten.");if("string"===typeof e&&!document.getElementById(e))throw new Error('Element "'+e+'" does not exist.');t.events=a.default.proxyEvents(o);var c=new Promise((function(r){"object"===("undefined"===typeof e?"undefined":n(e))&&e.playVideo instanceof Function?r(e):l.then((function(n){var i=new n.Player(e,t);return o.on("ready",(function(){r(i)})),null}))})),u=a.default.promisifyPlayer(c,r);return u.on=o.on,u.off=o.off,u},e.exports=t.default},4151:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(3452),s=(n=i)&&n.__esModule?n:{default:n};t.default=function(e){return new Promise((function(t){if(window.YT&&window.YT.Player&&window.YT.Player instanceof Function)t(window.YT);else{var r="http:"===window.location.protocol?"http:":"https:";(0,s.default)(r+"//www.youtube.com/iframe_api",(function(t){t&&e.trigger("error",t)}));var n=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=function(){n&&n(),t(window.YT)}}}))},e.exports=t.default},9429:(e,t,r)=>{function n(){var e;try{e=t.storage.debug}catch(r){}return!e&&"undefined"!==typeof process&&"env"in process&&(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.DEBUG),e}(t=e.exports=r(8826)).log=function(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),!r)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var i=0,s=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(i++,"%c"===e&&(s=i))})),e.splice(s,0,n)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(r){}},t.load=n,t.useColors=function(){if("undefined"!==typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},t.enable(n())},8826:(e,t,r)=>{var n;function i(e){function r(){if(r.enabled){var e=r,i=+new Date,s=i-(n||i);e.diff=s,e.prev=n,e.curr=i,n=i;for(var a=new Array(arguments.length),o=0;o<a.length;o++)a[o]=arguments[o];a[0]=t.coerce(a[0]),"string"!==typeof a[0]&&a.unshift("%O");var l=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,(function(r,n){if("%%"===r)return r;l++;var i=t.formatters[n];if("function"===typeof i){var s=a[l];r=i.call(e,s),a.splice(l,1),l--}return r})),t.formatArgs.call(e,a),(r.log||t.log||console.log.bind(console)).apply(e,a)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var r,n=0;for(r in e)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]}(e),"function"===typeof t.init&&t.init(r),r}(t=e.exports=i.debug=i.default=i).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var r=("string"===typeof e?e:"").split(/[\s,]+/),n=r.length,i=0;i<n;i++)r[i]&&("-"===(e=r[i].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(8445),t.names=[],t.skips=[],t.formatters={}},8445:e=>{var t=1e3,r=60*t,n=60*r,i=24*n,s=365.25*i;function a(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}e.exports=function(e,o){o=o||{};var l,c=typeof e;if("string"===c&&e.length>0)return function(e){if((e=String(e)).length>100)return;var a=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!a)return;var o=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return o*s;case"days":case"day":case"d":return o*i;case"hours":case"hour":case"hrs":case"hr":case"h":return o*n;case"minutes":case"minute":case"mins":case"min":case"m":return o*r;case"seconds":case"second":case"secs":case"sec":case"s":return o*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}(e);if("number"===c&&!1===isNaN(e))return o.long?a(l=e,i,"day")||a(l,n,"hour")||a(l,r,"minute")||a(l,t,"second")||l+" ms":function(e){if(e>=i)return Math.round(e/i)+"d";if(e>=n)return Math.round(e/n)+"h";if(e>=r)return Math.round(e/r)+"m";if(e>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,r),s.exports}r.m=e,r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;r.t=function(n,i){if(1&i&&(n=this(n)),8&i)return n;if("object"===typeof n&&n){if(4&i&&n.__esModule)return n;if(16&i&&"function"===typeof n.then)return n}var s=Object.create(null);r.r(s);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&i&&n;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((e=>a[e]=()=>n[e]));return a.default=()=>n,r.d(s,a),s}})(),r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce(((t,n)=>(r.f[n](e,t),t)),[])),r.u=e=>"static/js/"+e+".116e59db.chunk.js",r.miniCssF=e=>{},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="reverendcrush:";r.l=(n,i,s,a)=>{if(e[n])e[n].push(i);else{var o,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==n||d.getAttribute("data-webpack")==t+s){o=d;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,r.nc&&o.setAttribute("nonce",r.nc),o.setAttribute("data-webpack",t+s),o.src=n),e[n]=[i];var f=(t,r)=>{o.onerror=o.onload=null,clearTimeout(p);var i=e[n];if(delete e[n],o.parentNode&&o.parentNode.removeChild(o),i&&i.forEach((e=>e(r))),t)return t(r)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=f.bind(null,o.onerror),o.onload=f.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="/",(()=>{var e={792:0};r.f.j=(t,n)=>{var i=r.o(e,t)?e[t]:void 0;if(0!==i)if(i)n.push(i[2]);else{var s=new Promise(((r,n)=>i=e[t]=[r,n]));n.push(i[2]=s);var a=r.p+r.u(t),o=new Error;r.l(a,(n=>{if(r.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+a+")",o.name="ChunkLoadError",o.type=s,o.request=a,i[1](o)}}),"chunk-"+t,t)}};var t=(t,n)=>{var i,s,a=n[0],o=n[1],l=n[2],c=0;if(a.some((t=>0!==e[t]))){for(i in o)r.o(o,i)&&(r.m[i]=o[i]);if(l)l(r)}for(t&&t(n);c<a.length;c++)s=a[c],r.o(e,s)&&e[s]&&e[s][0](),e[s]=0},n=self.webpackChunkreverendcrush=self.webpackChunkreverendcrush||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),(()=>{"use strict";var e=r(5043),t=r.t(e,2),n=r(4391),i=r(5173),s=r.n(i),a=r(8161),o=r.n(a),l=r(6366),c=r.n(l),u=r(2123),d=r.n(u),f="bodyAttributes",p="htmlAttributes",h="titleAttributes",m={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"},g=(Object.keys(m).map((function(e){return m[e]})),"charset"),y="cssText",v="href",E="http-equiv",b="innerHTML",T="itemprop",R="name",S="property",A="rel",L="src",w="target",C={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},k="defaultTitle",x="defer",_="encodeSpecialCharacters",D="onChangeClientState",I="titleTemplate",B=Object.keys(C).reduce((function(e,t){return e[C[t]]=t,e}),{}),P=[m.NOSCRIPT,m.SCRIPT,m.STYLE],U="data-react-helmet",N="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),K=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},F=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r},M=function(e){return!1===(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},V=function(e){var t=X(e,m.TITLE),r=X(e,I);if(r&&t)return r.replace(/%s/g,(function(){return Array.isArray(t)?t.join(""):t}));var n=X(e,k);return t||n||void 0},j=function(e){return X(e,D)||function(){}},G=function(e,t){return t.filter((function(t){return"undefined"!==typeof t[e]})).map((function(t){return t[e]})).reduce((function(e,t){return K({},e,t)}),{})},q=function(e,t){return t.filter((function(e){return"undefined"!==typeof e[m.BASE]})).map((function(e){return e[m.BASE]})).reverse().reduce((function(t,r){if(!t.length)for(var n=Object.keys(r),i=0;i<n.length;i++){var s=n[i].toLowerCase();if(-1!==e.indexOf(s)&&r[s])return t.concat(r)}return t}),[])},H=function(e,t,r){var n={};return r.filter((function(t){return!!Array.isArray(t[e])||("undefined"!==typeof t[e]&&Z("Helmet: "+e+' should be of type "Array". Instead found type "'+N(t[e])+'"'),!1)})).map((function(t){return t[e]})).reverse().reduce((function(e,r){var i={};r.filter((function(e){for(var r=void 0,s=Object.keys(e),a=0;a<s.length;a++){var o=s[a],l=o.toLowerCase();-1===t.indexOf(l)||r===A&&"canonical"===e[r].toLowerCase()||l===A&&"stylesheet"===e[l].toLowerCase()||(r=l),-1===t.indexOf(o)||o!==b&&o!==y&&o!==T||(r=o)}if(!r||!e[r])return!1;var c=e[r].toLowerCase();return n[r]||(n[r]={}),i[r]||(i[r]={}),!n[r][c]&&(i[r][c]=!0,!0)})).reverse().forEach((function(t){return e.push(t)}));for(var s=Object.keys(i),a=0;a<s.length;a++){var o=s[a],l=d()({},n[o],i[o]);n[o]=l}return e}),[]).reverse()},X=function(e,t){for(var r=e.length-1;r>=0;r--){var n=e[r];if(n.hasOwnProperty(t))return n[t]}return null},z=function(){var e=Date.now();return function(t){var r=Date.now();r-e>16?(e=r,t(r)):setTimeout((function(){z(t)}),0)}}(),$=function(e){return clearTimeout(e)},W="undefined"!==typeof window?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||z:r.g.requestAnimationFrame||z,Y="undefined"!==typeof window?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||$:r.g.cancelAnimationFrame||$,Z=function(e){return console&&"function"===typeof console.warn&&console.warn(e)},Q=null,J=function(e,t){var r=e.baseTag,n=e.bodyAttributes,i=e.htmlAttributes,s=e.linkTags,a=e.metaTags,o=e.noscriptTags,l=e.onChangeClientState,c=e.scriptTags,u=e.styleTags,d=e.title,f=e.titleAttributes;re(m.BODY,n),re(m.HTML,i),te(d,f);var p={baseTag:ne(m.BASE,r),linkTags:ne(m.LINK,s),metaTags:ne(m.META,a),noscriptTags:ne(m.NOSCRIPT,o),scriptTags:ne(m.SCRIPT,c),styleTags:ne(m.STYLE,u)},h={},g={};Object.keys(p).forEach((function(e){var t=p[e],r=t.newTags,n=t.oldTags;r.length&&(h[e]=r),n.length&&(g[e]=p[e].oldTags)})),t&&t(),l(e,h,g)},ee=function(e){return Array.isArray(e)?e.join(""):e},te=function(e,t){"undefined"!==typeof e&&document.title!==e&&(document.title=ee(e)),re(m.TITLE,t)},re=function(e,t){var r=document.getElementsByTagName(e)[0];if(r){for(var n=r.getAttribute(U),i=n?n.split(","):[],s=[].concat(i),a=Object.keys(t),o=0;o<a.length;o++){var l=a[o],c=t[l]||"";r.getAttribute(l)!==c&&r.setAttribute(l,c),-1===i.indexOf(l)&&i.push(l);var u=s.indexOf(l);-1!==u&&s.splice(u,1)}for(var d=s.length-1;d>=0;d--)r.removeAttribute(s[d]);i.length===s.length?r.removeAttribute(U):r.getAttribute(U)!==a.join(",")&&r.setAttribute(U,a.join(","))}},ne=function(e,t){var r=document.head||document.querySelector(m.HEAD),n=r.querySelectorAll(e+"["+U+"]"),i=Array.prototype.slice.call(n),s=[],a=void 0;return t&&t.length&&t.forEach((function(t){var r=document.createElement(e);for(var n in t)if(t.hasOwnProperty(n))if(n===b)r.innerHTML=t.innerHTML;else if(n===y)r.styleSheet?r.styleSheet.cssText=t.cssText:r.appendChild(document.createTextNode(t.cssText));else{var o="undefined"===typeof t[n]?"":t[n];r.setAttribute(n,o)}r.setAttribute(U,"true"),i.some((function(e,t){return a=t,r.isEqualNode(e)}))?i.splice(a,1):s.push(r)})),i.forEach((function(e){return e.parentNode.removeChild(e)})),s.forEach((function(e){return r.appendChild(e)})),{oldTags:i,newTags:s}},ie=function(e){return Object.keys(e).reduce((function(t,r){var n="undefined"!==typeof e[r]?r+'="'+e[r]+'"':""+r;return t?t+" "+n:n}),"")},se=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce((function(t,r){return t[C[r]||r]=e[r],t}),t)},ae=function(t,r,n){switch(t){case m.TITLE:return{toComponent:function(){return function(t,r,n){var i,s=((i={key:r})[U]=!0,i),a=se(n,s);return[e.createElement(m.TITLE,a,r)]}(0,r.title,r.titleAttributes)},toString:function(){return function(e,t,r,n){var i=ie(r),s=ee(t);return i?"<"+e+" "+U+'="true" '+i+">"+M(s,n)+"</"+e+">":"<"+e+" "+U+'="true">'+M(s,n)+"</"+e+">"}(t,r.title,r.titleAttributes,n)}};case f:case p:return{toComponent:function(){return se(r)},toString:function(){return ie(r)}};default:return{toComponent:function(){return function(t,r){return r.map((function(r,n){var i,s=((i={key:n})[U]=!0,i);return Object.keys(r).forEach((function(e){var t=C[e]||e;if(t===b||t===y){var n=r.innerHTML||r.cssText;s.dangerouslySetInnerHTML={__html:n}}else s[t]=r[e]})),e.createElement(t,s)}))}(t,r)},toString:function(){return function(e,t,r){return t.reduce((function(t,n){var i=Object.keys(n).filter((function(e){return!(e===b||e===y)})).reduce((function(e,t){var i="undefined"===typeof n[t]?t:t+'="'+M(n[t],r)+'"';return e?e+" "+i:i}),""),s=n.innerHTML||n.cssText||"",a=-1===P.indexOf(e);return t+"<"+e+" "+U+'="true" '+i+(a?"/>":">"+s+"</"+e+">")}),"")}(t,r,n)}}}},oe=function(e){var t=e.baseTag,r=e.bodyAttributes,n=e.encode,i=e.htmlAttributes,s=e.linkTags,a=e.metaTags,o=e.noscriptTags,l=e.scriptTags,c=e.styleTags,u=e.title,d=void 0===u?"":u,h=e.titleAttributes;return{base:ae(m.BASE,t,n),bodyAttributes:ae(f,r,n),htmlAttributes:ae(p,i,n),link:ae(m.LINK,s,n),meta:ae(m.META,a,n),noscript:ae(m.NOSCRIPT,o,n),script:ae(m.SCRIPT,l,n),style:ae(m.STYLE,c,n),title:ae(m.TITLE,{title:d,titleAttributes:h},n)}},le=function(t){var r,n;return n=r=function(r){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,r.apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,r),n.prototype.shouldComponentUpdate=function(e){return!c()(this.props,e)},n.prototype.mapNestedChildrenToProps=function(e,t){if(!t)return null;switch(e.type){case m.SCRIPT:case m.NOSCRIPT:return{innerHTML:t};case m.STYLE:return{cssText:t}}throw new Error("<"+e.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},n.prototype.flattenArrayTypeChildren=function(e){var t,r=e.child,n=e.arrayTypeChildren,i=e.newChildProps,s=e.nestedChildren;return K({},n,((t={})[r.type]=[].concat(n[r.type]||[],[K({},i,this.mapNestedChildrenToProps(r,s))]),t))},n.prototype.mapObjectTypeChildren=function(e){var t,r,n=e.child,i=e.newProps,s=e.newChildProps,a=e.nestedChildren;switch(n.type){case m.TITLE:return K({},i,((t={})[n.type]=a,t.titleAttributes=K({},s),t));case m.BODY:return K({},i,{bodyAttributes:K({},s)});case m.HTML:return K({},i,{htmlAttributes:K({},s)})}return K({},i,((r={})[n.type]=K({},s),r))},n.prototype.mapArrayTypeChildrenToProps=function(e,t){var r=K({},t);return Object.keys(e).forEach((function(t){var n;r=K({},r,((n={})[t]=e[t],n))})),r},n.prototype.warnOnInvalidChildren=function(e,t){return!0},n.prototype.mapChildrenToProps=function(t,r){var n=this,i={};return e.Children.forEach(t,(function(e){if(e&&e.props){var t=e.props,s=t.children,a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce((function(t,r){return t[B[r]||r]=e[r],t}),t)}(F(t,["children"]));switch(n.warnOnInvalidChildren(e,s),e.type){case m.LINK:case m.META:case m.NOSCRIPT:case m.SCRIPT:case m.STYLE:i=n.flattenArrayTypeChildren({child:e,arrayTypeChildren:i,newChildProps:a,nestedChildren:s});break;default:r=n.mapObjectTypeChildren({child:e,newProps:r,newChildProps:a,nestedChildren:s})}}})),r=this.mapArrayTypeChildrenToProps(i,r)},n.prototype.render=function(){var r=this.props,n=r.children,i=F(r,["children"]),s=K({},i);return n&&(s=this.mapChildrenToProps(n,s)),e.createElement(t,s)},O(n,null,[{key:"canUseDOM",set:function(e){t.canUseDOM=e}}]),n}(e.Component),r.propTypes={base:s().object,bodyAttributes:s().object,children:s().oneOfType([s().arrayOf(s().node),s().node]),defaultTitle:s().string,defer:s().bool,encodeSpecialCharacters:s().bool,htmlAttributes:s().object,link:s().arrayOf(s().object),meta:s().arrayOf(s().object),noscript:s().arrayOf(s().object),onChangeClientState:s().func,script:s().arrayOf(s().object),style:s().arrayOf(s().object),title:s().string,titleAttributes:s().object,titleTemplate:s().string},r.defaultProps={defer:!0,encodeSpecialCharacters:!0},r.peek=t.peek,r.rewind=function(){var e=t.rewind();return e||(e=oe({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),e},n}(o()((function(e){return{baseTag:q([v,w],e),bodyAttributes:G(f,e),defer:X(e,x),encode:X(e,_),htmlAttributes:G(p,e),linkTags:H(m.LINK,[A,v],e),metaTags:H(m.META,[R,g,E,S,T],e),noscriptTags:H(m.NOSCRIPT,[b],e),onChangeClientState:j(e),scriptTags:H(m.SCRIPT,[L,b],e),styleTags:H(m.STYLE,[y],e),title:V(e),titleAttributes:G(h,e)}}),(function(e){Q&&Y(Q),e.defer?Q=W((function(){J(e,(function(){Q=null}))})):(J(e),Q=null)}),oe)((function(){return null})));le.renderStatic=le.rewind;function ce(){return ce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ce.apply(this,arguments)}var ue;!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(ue||(ue={}));const de="popstate";function fe(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function pe(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(Pt){}}}function he(e,t){return{usr:e.state,key:e.key,idx:t}}function me(e,t,r,n){return void 0===r&&(r=null),ce({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?ye(t):t,{state:r,key:t&&t.key||n||Math.random().toString(36).substr(2,8)})}function ge(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&"?"!==r&&(t+="?"===r.charAt(0)?r:"?"+r),n&&"#"!==n&&(t+="#"===n.charAt(0)?n:"#"+n),t}function ye(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function ve(e,t,r,n){void 0===n&&(n={});let{window:i=document.defaultView,v5Compat:s=!1}=n,a=i.history,o=ue.Pop,l=null,c=u();function u(){return(a.state||{idx:null}).idx}function d(){o=ue.Pop;let e=u(),t=null==e?null:e-c;c=e,l&&l({action:o,location:p.location,delta:t})}function f(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,r="string"===typeof e?e:ge(e);return fe(t,"No window.location.(origin|href) available to create URL for href: "+r),new URL(r,t)}null==c&&(c=0,a.replaceState(ce({},a.state,{idx:c}),""));let p={get action(){return o},get location(){return e(i,a)},listen(e){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(de,d),l=e,()=>{i.removeEventListener(de,d),l=null}},createHref:e=>t(i,e),createURL:f,encodeLocation(e){let t=f(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){o=ue.Push;let n=me(p.location,e,t);r&&r(n,e),c=u()+1;let d=he(n,c),f=p.createHref(n);try{a.pushState(d,"",f)}catch(h){if(h instanceof DOMException&&"DataCloneError"===h.name)throw h;i.location.assign(f)}s&&l&&l({action:o,location:p.location,delta:1})},replace:function(e,t){o=ue.Replace;let n=me(p.location,e,t);r&&r(n,e),c=u();let i=he(n,c),d=p.createHref(n);a.replaceState(i,"",d),s&&l&&l({action:o,location:p.location,delta:0})},go:e=>a.go(e)};return p}var Ee;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(Ee||(Ee={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function be(e,t,r){void 0===r&&(r="/");let n=Pe(("string"===typeof t?ye(t):t).pathname||"/",r);if(null==n)return null;let i=Te(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let r=e.length===t.length&&e.slice(0,-1).every(((e,r)=>e===t[r]));return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let s=null;for(let a=0;null==s&&a<i.length;++a)s=De(i[a],Be(n));return s}function Te(e,t,r,n){void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===n&&(n="");let i=(e,i,s)=>{let a={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(fe(a.relativePath.startsWith(n),'Absolute route path "'+a.relativePath+'" nested under path "'+n+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(n.length));let o=Fe([n,a.relativePath]),l=r.concat(a);e.children&&e.children.length>0&&(fe(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),Te(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:_e(o,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var r;if(""!==e.path&&null!=(r=e.path)&&r.includes("?"))for(let n of Re(e.path))i(e,t,n);else i(e,t)})),t}function Re(e){let t=e.split("/");if(0===t.length)return[];let[r,...n]=t,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(0===n.length)return i?[s,""]:[s];let a=Re(n.join("/")),o=[];return o.push(...a.map((e=>""===e?s:[s,e].join("/")))),i&&o.push(...a),o.map((t=>e.startsWith("/")&&""===t?"/":t))}const Se=/^:[\w-]+$/,Ae=3,Le=2,we=1,Ce=10,ke=-2,xe=e=>"*"===e;function _e(e,t){let r=e.split("/"),n=r.length;return r.some(xe)&&(n+=ke),t&&(n+=Le),r.filter((e=>!xe(e))).reduce(((e,t)=>e+(Se.test(t)?Ae:""===t?we:Ce)),n)}function De(e,t){let{routesMeta:r}=e,n={},i="/",s=[];for(let a=0;a<r.length;++a){let e=r[a],o=a===r.length-1,l="/"===i?t:t.slice(i.length)||"/",c=Ie({path:e.relativePath,caseSensitive:e.caseSensitive,end:o},l);if(!c)return null;Object.assign(n,c.params);let u=e.route;s.push({params:n,pathname:Fe([i,c.pathname]),pathnameBase:Me(Fe([i,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(i=Fe([i,c.pathnameBase]))}return s}function Ie(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=function(e,t,r){void 0===t&&(t=!1);void 0===r&&(r=!0);pe("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,r)=>(n.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(n.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,n]}(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:n.reduce(((e,t,r)=>{let{paramName:n,isOptional:i}=t;if("*"===n){let e=o[r]||"";a=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[r];return e[n]=i&&!l?void 0:function(e,t){try{return decodeURIComponent(e)}catch(r){return pe(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+r+")."),e}}(l||"",n),e}),{}),pathname:s,pathnameBase:a,pattern:e}}function Be(e){try{return decodeURI(e)}catch(t){return pe(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function Pe(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&"/"!==n?null:e.slice(r)||"/"}function Ue(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the `to."+r+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function Ne(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function Oe(e,t){let r=Ne(e);return t?r.map(((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)):r.map((e=>e.pathnameBase))}function Ke(e,t,r,n){let i;void 0===n&&(n=!1),"string"===typeof e?i=ye(e):(i=ce({},e),fe(!i.pathname||!i.pathname.includes("?"),Ue("?","pathname","search",i)),fe(!i.pathname||!i.pathname.includes("#"),Ue("#","pathname","hash",i)),fe(!i.search||!i.search.includes("#"),Ue("#","search","hash",i)));let s,a=""===e||""===i.pathname,o=a?"/":i.pathname;if(null==o)s=r;else{let e=t.length-1;if(!n&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:r,search:n="",hash:i=""}="string"===typeof e?ye(e):e,s=r?r.startsWith("/")?r:function(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)})),r.length>1?r.join("/"):"/"}(r,t):t;return{pathname:s,search:Ve(n),hash:je(i)}}(i,s),c=o&&"/"!==o&&o.endsWith("/"),u=(a||"."===o)&&r.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}const Fe=e=>e.join("/").replace(/\/\/+/g,"/"),Me=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Ve=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",je=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function Ge(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const qe=["post","put","patch","delete"],He=(new Set(qe),["get",...qe]);new Set(He),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function Xe(){return Xe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xe.apply(this,arguments)}const ze=e.createContext(null);const $e=e.createContext(null);const We=e.createContext(null);const Ye=e.createContext(null);const Ze=e.createContext({outlet:null,matches:[],isDataRoute:!1});const Qe=e.createContext(null);function Je(){return null!=e.useContext(Ye)}function et(){return Je()||fe(!1),e.useContext(Ye).location}function tt(t){e.useContext(We).static||e.useLayoutEffect(t)}function rt(){let{isDataRoute:t}=e.useContext(Ze);return t?function(){let{router:t}=ft(ut.UseNavigateStable),r=ht(dt.UseNavigateStable),n=e.useRef(!1);return tt((()=>{n.current=!0})),e.useCallback((function(e,i){void 0===i&&(i={}),n.current&&("number"===typeof e?t.navigate(e):t.navigate(e,Xe({fromRouteId:r},i)))}),[t,r])}():function(){Je()||fe(!1);let t=e.useContext(ze),{basename:r,future:n,navigator:i}=e.useContext(We),{matches:s}=e.useContext(Ze),{pathname:a}=et(),o=JSON.stringify(Oe(s,n.v7_relativeSplatPath)),l=e.useRef(!1);return tt((()=>{l.current=!0})),e.useCallback((function(e,n){if(void 0===n&&(n={}),!l.current)return;if("number"===typeof e)return void i.go(e);let s=Ke(e,JSON.parse(o),a,"path"===n.relative);null==t&&"/"!==r&&(s.pathname="/"===s.pathname?r:Fe([r,s.pathname])),(n.replace?i.replace:i.push)(s,n.state,n)}),[r,i,o,a,t])}()}function nt(t,r){let{relative:n}=void 0===r?{}:r,{future:i}=e.useContext(We),{matches:s}=e.useContext(Ze),{pathname:a}=et(),o=JSON.stringify(Oe(s,i.v7_relativeSplatPath));return e.useMemo((()=>Ke(t,JSON.parse(o),a,"path"===n)),[t,o,a,n])}function it(t,r,n,i){Je()||fe(!1);let{navigator:s}=e.useContext(We),{matches:a}=e.useContext(Ze),o=a[a.length-1],l=o?o.params:{},c=(o&&o.pathname,o?o.pathnameBase:"/");o&&o.route;let u,d=et();if(r){var f;let e="string"===typeof r?ye(r):r;"/"===c||(null==(f=e.pathname)?void 0:f.startsWith(c))||fe(!1),u=e}else u=d;let p=u.pathname||"/",h=be(t,{pathname:"/"===c?p:p.slice(c.length)||"/"});let m=ct(h&&h.map((e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:Fe([c,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:Fe([c,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,n,i);return r&&m?e.createElement(Ye.Provider,{value:{location:Xe({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:ue.Pop}},m):m}function st(){let t=function(){var t;let r=e.useContext(Qe),n=pt(dt.UseRouteError),i=ht(dt.UseRouteError);if(void 0!==r)return r;return null==(t=n.errors)?void 0:t[i]}(),r=Ge(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i};return e.createElement(e.Fragment,null,e.createElement("h2",null,"Unexpected Application Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},r),n?e.createElement("pre",{style:s},n):null,null)}const at=e.createElement(st,null);class ot extends e.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?e.createElement(Ze.Provider,{value:this.props.routeContext},e.createElement(Qe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function lt(t){let{routeContext:r,match:n,children:i}=t,s=e.useContext(ze);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),e.createElement(Ze.Provider,{value:r},i)}function ct(t,r,n,i){var s;if(void 0===r&&(r=[]),void 0===n&&(n=null),void 0===i&&(i=null),null==t){var a;if(null==(a=n)||!a.errors)return null;t=n.matches}let o=t,l=null==(s=n)?void 0:s.errors;if(null!=l){let e=o.findIndex((e=>e.route.id&&(null==l?void 0:l[e.route.id])));e>=0||fe(!1),o=o.slice(0,Math.min(o.length,e+1))}let c=!1,u=-1;if(n&&i&&i.v7_partialHydration)for(let e=0;e<o.length;e++){let t=o[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(u=e),t.route.id){let{loaderData:e,errors:r}=n,i=t.route.loader&&void 0===e[t.route.id]&&(!r||void 0===r[t.route.id]);if(t.route.lazy||i){c=!0,o=u>=0?o.slice(0,u+1):[o[0]];break}}}return o.reduceRight(((t,i,s)=>{let a,d=!1,f=null,p=null;var h;n&&(a=l&&i.route.id?l[i.route.id]:void 0,f=i.route.errorElement||at,c&&(u<0&&0===s?(h="route-fallback",!1||mt[h]||(mt[h]=!0),d=!0,p=null):u===s&&(d=!0,p=i.route.hydrateFallbackElement||null)));let m=r.concat(o.slice(0,s+1)),g=()=>{let r;return r=a?f:d?p:i.route.Component?e.createElement(i.route.Component,null):i.route.element?i.route.element:t,e.createElement(lt,{match:i,routeContext:{outlet:t,matches:m,isDataRoute:null!=n},children:r})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===s)?e.createElement(ot,{location:n.location,revalidation:n.revalidation,component:f,error:a,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var ut=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ut||{}),dt=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(dt||{});function ft(t){let r=e.useContext(ze);return r||fe(!1),r}function pt(t){let r=e.useContext($e);return r||fe(!1),r}function ht(t){let r=function(t){let r=e.useContext(Ze);return r||fe(!1),r}(),n=r.matches[r.matches.length-1];return n.route.id||fe(!1),n.route.id}const mt={};t.startTransition;function gt(e){fe(!1)}function yt(t){let{basename:r="/",children:n=null,location:i,navigationType:s=ue.Pop,navigator:a,static:o=!1,future:l}=t;Je()&&fe(!1);let c=r.replace(/^\/*/,"/"),u=e.useMemo((()=>({basename:c,navigator:a,static:o,future:Xe({v7_relativeSplatPath:!1},l)})),[c,l,a,o]);"string"===typeof i&&(i=ye(i));let{pathname:d="/",search:f="",hash:p="",state:h=null,key:m="default"}=i,g=e.useMemo((()=>{let e=Pe(d,c);return null==e?null:{location:{pathname:e,search:f,hash:p,state:h,key:m},navigationType:s}}),[c,d,f,p,h,m,s]);return null==g?null:e.createElement(We.Provider,{value:u},e.createElement(Ye.Provider,{children:n,value:g}))}function vt(e){let{children:t,location:r}=e;return it(Et(t),r)}new Promise((()=>{}));e.Component;function Et(t,r){void 0===r&&(r=[]);let n=[];return e.Children.forEach(t,((t,i)=>{if(!e.isValidElement(t))return;let s=[...r,i];if(t.type===e.Fragment)return void n.push.apply(n,Et(t.props.children,s));t.type!==gt&&fe(!1),t.props.index&&t.props.children&&fe(!1);let a={id:t.props.id||s.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(a.children=Et(t.props.children,s)),n.push(a)})),n}var bt=r(7950),Tt=r.t(bt,2);function Rt(){return Rt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rt.apply(this,arguments)}function St(e,t){if(null==e)return{};var r,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const At=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];try{window.__reactRouterVersion="6"}catch(Pt){}new Map;const Lt=t.startTransition;Tt.flushSync,t.useId;function wt(t){let{basename:r,children:n,future:i,window:s}=t,a=e.useRef();var o;null==a.current&&(a.current=(void 0===(o={window:s,v5Compat:!0})&&(o={}),ve((function(e,t){let{pathname:r,search:n,hash:i}=e.location;return me("",{pathname:r,search:n,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:ge(t)}),null,o)));let l=a.current,[c,u]=e.useState({action:l.action,location:l.location}),{v7_startTransition:d}=i||{},f=e.useCallback((e=>{d&&Lt?Lt((()=>u(e))):u(e)}),[u,d]);return e.useLayoutEffect((()=>l.listen(f)),[l,f]),e.createElement(yt,{basename:r,children:n,location:c.location,navigationType:c.action,navigator:l,future:i})}const Ct="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,kt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xt=e.forwardRef((function(t,r){let n,{onClick:i,relative:s,reloadDocument:a,replace:o,state:l,target:c,to:u,preventScrollReset:d,unstable_viewTransition:f}=t,p=St(t,At),{basename:h}=e.useContext(We),m=!1;if("string"===typeof u&&kt.test(u)&&(n=u,Ct))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),r=Pe(t.pathname,h);t.origin===e.origin&&null!=r?u=r+t.search+t.hash:m=!0}catch(Pt){}let g=function(t,r){let{relative:n}=void 0===r?{}:r;Je()||fe(!1);let{basename:i,navigator:s}=e.useContext(We),{hash:a,pathname:o,search:l}=nt(t,{relative:n}),c=o;return"/"!==i&&(c="/"===o?i:Fe([i,o])),s.createHref({pathname:c,search:l,hash:a})}(u,{relative:s}),y=function(t,r){let{target:n,replace:i,state:s,preventScrollReset:a,relative:o,unstable_viewTransition:l}=void 0===r?{}:r,c=rt(),u=et(),d=nt(t,{relative:o});return e.useCallback((e=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(e,n)){e.preventDefault();let r=void 0!==i?i:ge(u)===ge(d);c(t,{replace:r,state:s,preventScrollReset:a,relative:o,unstable_viewTransition:l})}}),[u,c,d,i,s,n,t,a,o,l])}(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:s,unstable_viewTransition:f});return e.createElement("a",Rt({},p,{href:n||g,onClick:m||a?i:function(e){i&&i(e),e.defaultPrevented||y(e)},ref:r,target:c}))}));var _t,Dt;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(_t||(_t={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Dt||(Dt={}));function It(){return It=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},It.apply(this,arguments)}var Bt={strings:["These are the default values...","You know what you should do?","Use your own!","Have a great day!"],stringsElement:null,typeSpeed:0,startDelay:0,backSpeed:0,smartBackspace:!0,shuffle:!1,backDelay:700,fadeOut:!1,fadeOutClass:"typed-fade-out",fadeOutDelay:500,loop:!1,loopCount:1/0,showCursor:!0,cursorChar:"|",autoInsertCss:!0,attr:null,bindInputFocusEvents:!1,contentType:"html",onBegin:function(e){},onComplete:function(e){},preStringTyped:function(e,t){},onStringTyped:function(e,t){},onLastStringBackspaced:function(e){},onTypingPaused:function(e,t){},onTypingResumed:function(e,t){},onReset:function(e){},onStop:function(e,t){},onStart:function(e,t){},onDestroy:function(e){}},Pt=new(function(){function e(){}var t=e.prototype;return t.load=function(e,t,r){if(e.el="string"==typeof r?document.querySelector(r):r,e.options=It({},Bt,t),e.isInput="input"===e.el.tagName.toLowerCase(),e.attr=e.options.attr,e.bindInputFocusEvents=e.options.bindInputFocusEvents,e.showCursor=!e.isInput&&e.options.showCursor,e.cursorChar=e.options.cursorChar,e.cursorBlinking=!0,e.elContent=e.attr?e.el.getAttribute(e.attr):e.el.textContent,e.contentType=e.options.contentType,e.typeSpeed=e.options.typeSpeed,e.startDelay=e.options.startDelay,e.backSpeed=e.options.backSpeed,e.smartBackspace=e.options.smartBackspace,e.backDelay=e.options.backDelay,e.fadeOut=e.options.fadeOut,e.fadeOutClass=e.options.fadeOutClass,e.fadeOutDelay=e.options.fadeOutDelay,e.isPaused=!1,e.strings=e.options.strings.map((function(e){return e.trim()})),e.stringsElement="string"==typeof e.options.stringsElement?document.querySelector(e.options.stringsElement):e.options.stringsElement,e.stringsElement){e.strings=[],e.stringsElement.style.cssText="clip: rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px;";var n=Array.prototype.slice.apply(e.stringsElement.children),i=n.length;if(i)for(var s=0;s<i;s+=1)e.strings.push(n[s].innerHTML.trim())}for(var a in e.strPos=0,e.currentElContent=this.getCurrentElContent(e),e.currentElContent&&e.currentElContent.length>0&&(e.strPos=e.currentElContent.length-1,e.strings.unshift(e.currentElContent)),e.sequence=[],e.strings)e.sequence[a]=a;e.arrayPos=0,e.stopNum=0,e.loop=e.options.loop,e.loopCount=e.options.loopCount,e.curLoop=0,e.shuffle=e.options.shuffle,e.pause={status:!1,typewrite:!0,curString:"",curStrPos:0},e.typingComplete=!1,e.autoInsertCss=e.options.autoInsertCss,e.autoInsertCss&&(this.appendCursorAnimationCss(e),this.appendFadeOutAnimationCss(e))},t.getCurrentElContent=function(e){return e.attr?e.el.getAttribute(e.attr):e.isInput?e.el.value:"html"===e.contentType?e.el.innerHTML:e.el.textContent},t.appendCursorAnimationCss=function(e){var t="data-typed-js-cursor-css";if(e.showCursor&&!document.querySelector("["+t+"]")){var r=document.createElement("style");r.setAttribute(t,"true"),r.innerHTML="\n        .typed-cursor{\n          opacity: 1;\n        }\n        .typed-cursor.typed-cursor--blink{\n          animation: typedjsBlink 0.7s infinite;\n          -webkit-animation: typedjsBlink 0.7s infinite;\n                  animation: typedjsBlink 0.7s infinite;\n        }\n        @keyframes typedjsBlink{\n          50% { opacity: 0.0; }\n        }\n        @-webkit-keyframes typedjsBlink{\n          0% { opacity: 1; }\n          50% { opacity: 0.0; }\n          100% { opacity: 1; }\n        }\n      ",document.body.appendChild(r)}},t.appendFadeOutAnimationCss=function(e){var t="data-typed-fadeout-js-css";if(e.fadeOut&&!document.querySelector("["+t+"]")){var r=document.createElement("style");r.setAttribute(t,"true"),r.innerHTML="\n        .typed-fade-out{\n          opacity: 0;\n          transition: opacity .25s;\n        }\n        .typed-cursor.typed-cursor--blink.typed-fade-out{\n          -webkit-animation: 0;\n          animation: 0;\n        }\n      ",document.body.appendChild(r)}},e}()),Ut=new(function(){function e(){}var t=e.prototype;return t.typeHtmlChars=function(e,t,r){if("html"!==r.contentType)return t;var n=e.substring(t).charAt(0);if("<"===n||"&"===n){var i;for(i="<"===n?">":";";e.substring(t+1).charAt(0)!==i&&!(1+ ++t>e.length););t++}return t},t.backSpaceHtmlChars=function(e,t,r){if("html"!==r.contentType)return t;var n=e.substring(t).charAt(0);if(">"===n||";"===n){var i;for(i=">"===n?"<":"&";e.substring(t-1).charAt(0)!==i&&!(--t<0););t--}return t},e}()),Nt=function(){function e(e,t){Pt.load(this,t,e),this.begin()}var t=e.prototype;return t.toggle=function(){this.pause.status?this.start():this.stop()},t.stop=function(){this.typingComplete||this.pause.status||(this.toggleBlinking(!0),this.pause.status=!0,this.options.onStop(this.arrayPos,this))},t.start=function(){this.typingComplete||this.pause.status&&(this.pause.status=!1,this.pause.typewrite?this.typewrite(this.pause.curString,this.pause.curStrPos):this.backspace(this.pause.curString,this.pause.curStrPos),this.options.onStart(this.arrayPos,this))},t.destroy=function(){this.reset(!1),this.options.onDestroy(this)},t.reset=function(e){void 0===e&&(e=!0),clearInterval(this.timeout),this.replaceText(""),this.cursor&&this.cursor.parentNode&&(this.cursor.parentNode.removeChild(this.cursor),this.cursor=null),this.strPos=0,this.arrayPos=0,this.curLoop=0,e&&(this.insertCursor(),this.options.onReset(this),this.begin())},t.begin=function(){var e=this;this.options.onBegin(this),this.typingComplete=!1,this.shuffleStringsIfNeeded(this),this.insertCursor(),this.bindInputFocusEvents&&this.bindFocusEvents(),this.timeout=setTimeout((function(){0===e.strPos?e.typewrite(e.strings[e.sequence[e.arrayPos]],e.strPos):e.backspace(e.strings[e.sequence[e.arrayPos]],e.strPos)}),this.startDelay)},t.typewrite=function(e,t){var r=this;this.fadeOut&&this.el.classList.contains(this.fadeOutClass)&&(this.el.classList.remove(this.fadeOutClass),this.cursor&&this.cursor.classList.remove(this.fadeOutClass));var n=this.humanizer(this.typeSpeed),i=1;!0!==this.pause.status?this.timeout=setTimeout((function(){t=Ut.typeHtmlChars(e,t,r);var n=0,s=e.substring(t);if("^"===s.charAt(0)&&/^\^\d+/.test(s)){var a=1;a+=(s=/\d+/.exec(s)[0]).length,n=parseInt(s),r.temporaryPause=!0,r.options.onTypingPaused(r.arrayPos,r),e=e.substring(0,t)+e.substring(t+a),r.toggleBlinking(!0)}if("`"===s.charAt(0)){for(;"`"!==e.substring(t+i).charAt(0)&&(i++,!(t+i>e.length)););var o=e.substring(0,t),l=e.substring(o.length+1,t+i),c=e.substring(t+i+1);e=o+l+c,i--}r.timeout=setTimeout((function(){r.toggleBlinking(!1),t>=e.length?r.doneTyping(e,t):r.keepTyping(e,t,i),r.temporaryPause&&(r.temporaryPause=!1,r.options.onTypingResumed(r.arrayPos,r))}),n)}),n):this.setPauseStatus(e,t,!0)},t.keepTyping=function(e,t,r){0===t&&(this.toggleBlinking(!1),this.options.preStringTyped(this.arrayPos,this));var n=e.substring(0,t+=r);this.replaceText(n),this.typewrite(e,t)},t.doneTyping=function(e,t){var r=this;this.options.onStringTyped(this.arrayPos,this),this.toggleBlinking(!0),this.arrayPos===this.strings.length-1&&(this.complete(),!1===this.loop||this.curLoop===this.loopCount)||(this.timeout=setTimeout((function(){r.backspace(e,t)}),this.backDelay))},t.backspace=function(e,t){var r=this;if(!0!==this.pause.status){if(this.fadeOut)return this.initFadeOut();this.toggleBlinking(!1);var n=this.humanizer(this.backSpeed);this.timeout=setTimeout((function(){t=Ut.backSpaceHtmlChars(e,t,r);var n=e.substring(0,t);if(r.replaceText(n),r.smartBackspace){var i=r.strings[r.arrayPos+1];r.stopNum=i&&n===i.substring(0,t)?t:0}t>r.stopNum?(t--,r.backspace(e,t)):t<=r.stopNum&&(r.arrayPos++,r.arrayPos===r.strings.length?(r.arrayPos=0,r.options.onLastStringBackspaced(),r.shuffleStringsIfNeeded(),r.begin()):r.typewrite(r.strings[r.sequence[r.arrayPos]],t))}),n)}else this.setPauseStatus(e,t,!1)},t.complete=function(){this.options.onComplete(this),this.loop?this.curLoop++:this.typingComplete=!0},t.setPauseStatus=function(e,t,r){this.pause.typewrite=r,this.pause.curString=e,this.pause.curStrPos=t},t.toggleBlinking=function(e){this.cursor&&(this.pause.status||this.cursorBlinking!==e&&(this.cursorBlinking=e,e?this.cursor.classList.add("typed-cursor--blink"):this.cursor.classList.remove("typed-cursor--blink")))},t.humanizer=function(e){return Math.round(Math.random()*e/2)+e},t.shuffleStringsIfNeeded=function(){this.shuffle&&(this.sequence=this.sequence.sort((function(){return Math.random()-.5})))},t.initFadeOut=function(){var e=this;return this.el.className+=" "+this.fadeOutClass,this.cursor&&(this.cursor.className+=" "+this.fadeOutClass),setTimeout((function(){e.arrayPos++,e.replaceText(""),e.strings.length>e.arrayPos?e.typewrite(e.strings[e.sequence[e.arrayPos]],0):(e.typewrite(e.strings[0],0),e.arrayPos=0)}),this.fadeOutDelay)},t.replaceText=function(e){this.attr?this.el.setAttribute(this.attr,e):this.isInput?this.el.value=e:"html"===this.contentType?this.el.innerHTML=e:this.el.textContent=e},t.bindFocusEvents=function(){var e=this;this.isInput&&(this.el.addEventListener("focus",(function(t){e.stop()})),this.el.addEventListener("blur",(function(t){e.el.value&&0!==e.el.value.length||e.start()})))},t.insertCursor=function(){this.showCursor&&(this.cursor||(this.cursor=document.createElement("span"),this.cursor.className="typed-cursor",this.cursor.setAttribute("aria-hidden",!0),this.cursor.innerHTML=this.cursorChar,this.el.parentNode&&this.el.parentNode.insertBefore(this.cursor,this.el.nextSibling)))},e}(),Ot=r(6723);const Kt=r.p+"static/media/dudeist_yinyang.f370ccd91e7d19228400.png";var Ft=r(579);function Mt(){const t=(0,e.useRef)(null),r=(0,e.useRef)(null);let n=et();const[i,s]=(0,e.useState)(!1),a=(0,e.useRef)([]);(0,e.useEffect)((()=>{const e=[{"/about":">> REVCRSH_BIO: A little about about me, Dr. Reverend Crush!","/projects":">> REVCRSH_FUN: UNDER CONSTRUCTION!","/contact":">> REVCRSH_SOC: All of my socials, plus more!","/":">> REVCRSH_HOM: Hey Duders! Enjoy your visit!"}[n.pathname]||">> //ERR0R ERR0R ERR0R ERR0R ERR0R ERR0R ERR0R ERR0R ERR0R"];return r.current=new Nt(t.current,{strings:e,typeSpeed:50,onComplete:e=>{const t=document.querySelector(".typed-cursor");t&&(t.style.display="inline")}}),()=>{r.current&&r.current.destroy()}}),[n.pathname]),(0,e.useEffect)((()=>{const e=()=>{a.current.forEach((e=>{e&&e.setAttribute("tabindex",i?"0":"-1")}))};e();const t=setTimeout(e,100);return()=>clearTimeout(t)}),[i]);const o=()=>{s(!1)};return(0,Ft.jsxs)("div",{className:"header",children:[(0,Ft.jsx)("div",{className:"autotext header_title",ref:t}),(0,Ft.jsx)("div",{className:"header_nav",children:(0,Ft.jsxs)(Ot.pushRotate,{right:!0,noOverlay:!0,width:"29.5%",height:"100%",isOpen:i,onStateChange:e=>{if(s(e.isOpen),e.isOpen){const e=window.scrollY;document.querySelector(".bm-menu-wrap").style.top="".concat(e,"px")}else document.querySelector(".bm-menu-wrap").style.top="0px"},pageWrapId:"page-wrap",outerContainerId:"outer-container",children:[(0,Ft.jsx)("img",{className:"nav-logo",src:Kt,alt:"ReverendCrush.com"}),(0,Ft.jsx)(xt,{ref:e=>a.current[0]=e,className:"nav_link",to:"/",onClick:o,children:"Main "}),(0,Ft.jsx)(xt,{ref:e=>a.current[1]=e,className:"nav_link",to:"/contact",onClick:o,children:"Socials"}),(0,Ft.jsx)(xt,{ref:e=>a.current[2]=e,className:"nav_link",to:"/projects",onClick:o,children:"For Fun"}),(0,Ft.jsx)(xt,{ref:e=>a.current[3]=e,className:"nav_link",to:"/about",onClick:o,children:"Bio"})]})})]})}function Vt(){return(0,Ft.jsx)("div",{className:"footer",children:(0,Ft.jsxs)("div",{className:"dev-credits",children:["Developed in React by ",(0,Ft.jsx)("a",{href:"https://mct630.com",target:"_blank",rel:"noreferrer",children:"MCT630.com"}),". (Rev helped!)"]})})}const jt=r.p+"static/media/dudecommission_hunty.ab933fe8bab1fad7de7d.jpg";const Gt=function(){return(0,e.useEffect)((()=>(document.body.classList.add("bio-page"),()=>{document.body.classList.remove("bio-page")})),[]),(0,Ft.jsx)(e.Fragment,{children:(0,Ft.jsxs)("section",{className:"bio",children:[(0,Ft.jsx)("h1",{children:"Bio"}),(0,Ft.jsx)("img",{className:"shitpic",src:jt,alt:'Poorly colored lineart of Reverend Crush yelling "SHIT!" at a glowing monitor with a stylized "GAME OVER" on the screen.'}),(0,Ft.jsxs)("p",{children:["Dr. Reverend Crush, PhD. ",'(formerly going under the screenname "Ichiban Crush")',', shortened to either "Rev", "Crush", or "dude over there", is just one very tiny voice that has been screaming in the Retrogaming scene since 1999. While he has been a part of many different projects, the only major thing of notice was some minor contributions to ',(0,Ft.jsx)("a",{href:"https://www.vgmuseum.com/",target:"_blank",rel:"noreferrer",children:"VGMuseum.com"})," in addition to the spritual predecessor to the ",(0,Ft.jsx)("a",{href:"https://gamehistory.org/",target:"_blank",rel:"noreferrer",children:"Video Game History Foundation"}),", ",(0,Ft.jsx)("b",{children:"Lost Levels"}),", as well as a few unsuccessful solo ventures until getting burned out in the early 2010's."]}),(0,Ft.jsxs)("p",{children:["After life getting in the way with marriage and returning to college after giving up on any kind of career in writing, he went on a bit of a spiritual journey that lead him to the path of becoming an ordained priest of the ",(0,Ft.jsx)("a",{href:"https://dudeism.com/",target:"_blank",rel:"noreferrer",children:"Church of the Latter-Day Dude"})," ","(Dudeism)",". Professionally, he works in web development, and wishes to someday use this platform to potentially showcase fun projects ","(hopefully with more collaborators)",". While he still has the same love of video games he always has, both modern and vintage, he doesn't wish to dedicate a career in the field, or even covering them, as he finds anything remotely involving the video game industry absolutely exhausting and overwhelming. Also, while he subscribes to the Dudeist philosophy, Reverend Crush has a very strong belief against going out of his way to convert folks, because while he's not lazy like The Dude, he doesn't have the time, or really desire, to do so. However, he is available for weddings if you're in the Atlanta metro area!"]}),(0,Ft.jsxs)("p",{children:["Reverend Crush also holds a PhD in the field of Pop Cultural Studies from ",(0,Ft.jsx)("a",{href:"https://aui.me/",target:"_blank",rel:"noreferrer",children:"Abide University"}),". Oh! For you old folks that remember him under his old screenname, he stopped drinking like a fish back in 2015. So while he's unable to enjoy the ceremonial White Russian strongly tied to his \"religion\"'s culture, he felt that it was time to switch away from a screenname best known to half the folks that knew of him for a short-lived MS Paint shitpost-webcomic he worked on during alcoholic benders right after 9/11 when none of the other webcomics were updating. He decided go with something that was more in line with his current spiritual beliefs... which honestly, is more about just taking it easy."]}),(0,Ft.jsxs)("p",{children:["These days, when he's not going absolutely ham on ",(0,Ft.jsx)("a",{href:"https://bsky.app/profile/reverendcrush.com",target:"_blank",rel:"noreferrer",children:"BlueSky"}),", he's playing something from his enormous backlog. He's a huge fan of FPGA gaming, and can often be found in his office with his MiSTerFPGA, playing some random PC Engine Super CD game or whatever latest arcade core... as long as it doesn't require him to turn his CRT television sideways. He still likes to dive in the world of Kusoge and Bakage ",'("shit game" and "dumb game" respectively)',' and "bootleg original" games, but he also has a deep appreciation for Baldur\'s Gate 3, as well as many other modern games that he thankfully has spared the copywriters writing this bio the pain of having to list.']}),(0,Ft.jsx)("p",{children:"Did you ever play the MegaMan games on NES and wonder why MegaMan wouldn't have all of the robot powers he obtained from previous games in any of the sequels? Want to learn more about the meme status of Culture Brain in Japan? Well Rev could probably help you with some of that, but we don't think he'll actually get around to doing that here."}),(0,Ft.jsx)("p",{children:(0,Ft.jsx)(xt,{to:"/",children:"BACK TO MAIN"})})]})})};var qt=r(1967),Ht=r(122),Xt=r.n(Ht),zt=r(7282),$t=r.n(zt),Wt=Object.defineProperty,Yt=Object.defineProperties,Zt=Object.getOwnPropertyDescriptors,Qt=Object.getOwnPropertySymbols,Jt=Object.prototype.hasOwnProperty,er=Object.prototype.propertyIsEnumerable,tr=(e,t,r)=>t in e?Wt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,rr=(e,t)=>{for(var r in t||(t={}))Jt.call(t,r)&&tr(e,r,t[r]);if(Qt)for(var r of Qt(t))er.call(t,r)&&tr(e,r,t[r]);return e},nr=(e,t)=>Yt(e,Zt(t));function ir(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return nr(rr({},e),{height:0,width:0,playerVars:nr(rr({},e.playerVars),{autoplay:0,start:0,end:0})})}var sr={videoId:s().string,id:s().string,className:s().string,iframeClassName:s().string,style:s().object,title:s().string,loading:s().oneOf(["lazy","eager"]),opts:s().objectOf(s().any),onReady:s().func,onError:s().func,onPlay:s().func,onPause:s().func,onEnd:s().func,onStateChange:s().func,onPlaybackRateChange:s().func,onPlaybackQualityChange:s().func},ar=class extends e.Component{constructor(e){super(e),this.destroyPlayerPromise=void 0,this.onPlayerReady=e=>{var t,r;return null==(r=(t=this.props).onReady)?void 0:r.call(t,e)},this.onPlayerError=e=>{var t,r;return null==(r=(t=this.props).onError)?void 0:r.call(t,e)},this.onPlayerStateChange=e=>{var t,r,n,i,s,a,o,l;switch(null==(r=(t=this.props).onStateChange)||r.call(t,e),e.data){case ar.PlayerState.ENDED:null==(i=(n=this.props).onEnd)||i.call(n,e);break;case ar.PlayerState.PLAYING:null==(a=(s=this.props).onPlay)||a.call(s,e);break;case ar.PlayerState.PAUSED:null==(l=(o=this.props).onPause)||l.call(o,e)}},this.onPlayerPlaybackRateChange=e=>{var t,r;return null==(r=(t=this.props).onPlaybackRateChange)?void 0:r.call(t,e)},this.onPlayerPlaybackQualityChange=e=>{var t,r;return null==(r=(t=this.props).onPlaybackQualityChange)?void 0:r.call(t,e)},this.destroyPlayer=()=>this.internalPlayer?(this.destroyPlayerPromise=this.internalPlayer.destroy().then((()=>this.destroyPlayerPromise=void 0)),this.destroyPlayerPromise):Promise.resolve(),this.createPlayer=()=>{if("undefined"===typeof document)return;if(this.destroyPlayerPromise)return void this.destroyPlayerPromise.then(this.createPlayer);const e=nr(rr({},this.props.opts),{videoId:this.props.videoId});this.internalPlayer=$t()(this.container,e),this.internalPlayer.on("ready",this.onPlayerReady),this.internalPlayer.on("error",this.onPlayerError),this.internalPlayer.on("stateChange",this.onPlayerStateChange),this.internalPlayer.on("playbackRateChange",this.onPlayerPlaybackRateChange),this.internalPlayer.on("playbackQualityChange",this.onPlayerPlaybackQualityChange),(this.props.title||this.props.loading)&&this.internalPlayer.getIframe().then((e=>{this.props.title&&e.setAttribute("title",this.props.title),this.props.loading&&e.setAttribute("loading",this.props.loading)}))},this.resetPlayer=()=>this.destroyPlayer().then(this.createPlayer),this.updatePlayer=()=>{var e;null==(e=this.internalPlayer)||e.getIframe().then((e=>{this.props.id?e.setAttribute("id",this.props.id):e.removeAttribute("id"),this.props.iframeClassName?e.setAttribute("class",this.props.iframeClassName):e.removeAttribute("class"),this.props.opts&&this.props.opts.width?e.setAttribute("width",this.props.opts.width.toString()):e.removeAttribute("width"),this.props.opts&&this.props.opts.height?e.setAttribute("height",this.props.opts.height.toString()):e.removeAttribute("height"),this.props.title?e.setAttribute("title",this.props.title):e.setAttribute("title","YouTube video player"),this.props.loading?e.setAttribute("loading",this.props.loading):e.removeAttribute("loading")}))},this.getInternalPlayer=()=>this.internalPlayer,this.updateVideo=()=>{var e,t,r,n;if("undefined"===typeof this.props.videoId||null===this.props.videoId)return void(null==(e=this.internalPlayer)||e.stopVideo());let i=!1;const s={videoId:this.props.videoId};(null==(t=this.props.opts)?void 0:t.playerVars)&&(i=1===this.props.opts.playerVars.autoplay,"start"in this.props.opts.playerVars&&(s.startSeconds=this.props.opts.playerVars.start),"end"in this.props.opts.playerVars&&(s.endSeconds=this.props.opts.playerVars.end)),i?null==(r=this.internalPlayer)||r.loadVideoById(s):null==(n=this.internalPlayer)||n.cueVideoById(s)},this.refContainer=e=>{this.container=e},this.container=null,this.internalPlayer=null}componentDidMount(){this.createPlayer()}componentDidUpdate(e){return t=this,r=null,n=function*(){(function(e,t){var r,n,i,s;return e.id!==t.id||e.className!==t.className||(null==(r=e.opts)?void 0:r.width)!==(null==(n=t.opts)?void 0:n.width)||(null==(i=e.opts)?void 0:i.height)!==(null==(s=t.opts)?void 0:s.height)||e.iframeClassName!==t.iframeClassName||e.title!==t.title})(e,this.props)&&this.updatePlayer(),function(e,t){return e.videoId!==t.videoId||!Xt()(ir(e.opts),ir(t.opts))}(e,this.props)&&(yield this.resetPlayer()),function(e,t){var r,n;if(e.videoId!==t.videoId)return!0;const i=(null==(r=e.opts)?void 0:r.playerVars)||{},s=(null==(n=t.opts)?void 0:n.playerVars)||{};return i.start!==s.start||i.end!==s.end}(e,this.props)&&this.updateVideo()},new Promise(((e,i)=>{var s=e=>{try{o(n.next(e))}catch(Pt){i(Pt)}},a=e=>{try{o(n.throw(e))}catch(Pt){i(Pt)}},o=t=>t.done?e(t.value):Promise.resolve(t.value).then(s,a);o((n=n.apply(t,r)).next())}));var t,r,n}componentWillUnmount(){this.destroyPlayer()}render(){return e.createElement("div",{className:this.props.className,style:this.props.style},e.createElement("div",{id:this.props.id,className:this.props.iframeClassName,ref:this.refContainer}))}},or=ar;or.propTypes=sr,or.defaultProps={videoId:"",id:"",className:"",iframeClassName:"",style:{},title:"",loading:void 0,opts:{},onReady:()=>{},onError:()=>{},onPlay:()=>{},onPause:()=>{},onEnd:()=>{},onStateChange:()=>{},onPlaybackRateChange:()=>{},onPlaybackQualityChange:()=>{}},or.PlayerState={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,CUED:5};var lr=or;const cr=r.p+"static/media/no_media_img.05ba700c797589a2ce7e.jpg";function ur(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var dr,fr={exports:{}};dr=fr,function(e){var t=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,r=/^(?=([^\/?#]*))\1([^]*)$/,n=/(?:\/|^)\.(?=\/)/g,i=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,s={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var i=s.parseURL(e);if(!i)throw new Error("Error trying to parse base URL.");return i.path=s.normalizePath(i.path),s.buildURLFromParts(i)}var a=s.parseURL(t);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return n.alwaysNormalize?(a.path=s.normalizePath(a.path),s.buildURLFromParts(a)):t;var o=s.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var l=r.exec(o.path);o.netLoc=l[1],o.path=l[2]}o.netLoc&&!o.path&&(o.path="/");var c={scheme:o.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(c.netLoc=o.netLoc,"/"!==a.path[0]))if(a.path){var u=o.path,d=u.substring(0,u.lastIndexOf("/")+1)+a.path;c.path=s.normalizePath(d)}else c.path=o.path,a.params||(c.params=o.params,a.query||(c.query=o.query));return null===c.path&&(c.path=n.alwaysNormalize?s.normalizePath(a.path):a.path),s.buildURLFromParts(c)},parseURL:function(e){var r=t.exec(e);return r?{scheme:r[1]||"",netLoc:r[2]||"",path:r[3]||"",params:r[4]||"",query:r[5]||"",fragment:r[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(n,"");e.length!==(e=e.replace(i,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};dr.exports=s}();var pr=fr.exports;function hr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function mr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hr(Object(r),!0).forEach((function(t){yr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function gr(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function yr(e,t,r){return(t=gr(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vr(){return vr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vr.apply(this,arguments)}const Er=Number.isFinite||function(e){return"number"===typeof e&&isFinite(e)},br=Number.isSafeInteger||function(e){return"number"===typeof e&&Math.abs(e)<=Tr},Tr=Number.MAX_SAFE_INTEGER||9007199254740991;let Rr=function(e){return e.MEDIA_ATTACHING="hlsMediaAttaching",e.MEDIA_ATTACHED="hlsMediaAttached",e.MEDIA_DETACHING="hlsMediaDetaching",e.MEDIA_DETACHED="hlsMediaDetached",e.BUFFER_RESET="hlsBufferReset",e.BUFFER_CODECS="hlsBufferCodecs",e.BUFFER_CREATED="hlsBufferCreated",e.BUFFER_APPENDING="hlsBufferAppending",e.BUFFER_APPENDED="hlsBufferAppended",e.BUFFER_EOS="hlsBufferEos",e.BUFFER_FLUSHING="hlsBufferFlushing",e.BUFFER_FLUSHED="hlsBufferFlushed",e.MANIFEST_LOADING="hlsManifestLoading",e.MANIFEST_LOADED="hlsManifestLoaded",e.MANIFEST_PARSED="hlsManifestParsed",e.LEVEL_SWITCHING="hlsLevelSwitching",e.LEVEL_SWITCHED="hlsLevelSwitched",e.LEVEL_LOADING="hlsLevelLoading",e.LEVEL_LOADED="hlsLevelLoaded",e.LEVEL_UPDATED="hlsLevelUpdated",e.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",e.LEVELS_UPDATED="hlsLevelsUpdated",e.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",e.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",e.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",e.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",e.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",e.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",e.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",e.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",e.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",e.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",e.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",e.CUES_PARSED="hlsCuesParsed",e.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",e.INIT_PTS_FOUND="hlsInitPtsFound",e.FRAG_LOADING="hlsFragLoading",e.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",e.FRAG_LOADED="hlsFragLoaded",e.FRAG_DECRYPTED="hlsFragDecrypted",e.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",e.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",e.FRAG_PARSING_METADATA="hlsFragParsingMetadata",e.FRAG_PARSED="hlsFragParsed",e.FRAG_BUFFERED="hlsFragBuffered",e.FRAG_CHANGED="hlsFragChanged",e.FPS_DROP="hlsFpsDrop",e.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",e.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",e.ERROR="hlsError",e.DESTROYING="hlsDestroying",e.KEY_LOADING="hlsKeyLoading",e.KEY_LOADED="hlsKeyLoaded",e.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",e.BACK_BUFFER_REACHED="hlsBackBufferReached",e.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",e}({}),Sr=function(e){return e.NETWORK_ERROR="networkError",e.MEDIA_ERROR="mediaError",e.KEY_SYSTEM_ERROR="keySystemError",e.MUX_ERROR="muxError",e.OTHER_ERROR="otherError",e}({}),Ar=function(e){return e.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",e.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",e.KEY_SYSTEM_NO_SESSION="keySystemNoSession",e.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",e.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",e.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",e.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",e.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",e.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",e.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",e.MANIFEST_LOAD_ERROR="manifestLoadError",e.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",e.MANIFEST_PARSING_ERROR="manifestParsingError",e.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",e.LEVEL_EMPTY_ERROR="levelEmptyError",e.LEVEL_LOAD_ERROR="levelLoadError",e.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",e.LEVEL_PARSING_ERROR="levelParsingError",e.LEVEL_SWITCH_ERROR="levelSwitchError",e.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",e.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",e.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",e.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",e.FRAG_LOAD_ERROR="fragLoadError",e.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",e.FRAG_DECRYPT_ERROR="fragDecryptError",e.FRAG_PARSING_ERROR="fragParsingError",e.FRAG_GAP="fragGap",e.REMUX_ALLOC_ERROR="remuxAllocError",e.KEY_LOAD_ERROR="keyLoadError",e.KEY_LOAD_TIMEOUT="keyLoadTimeOut",e.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",e.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",e.BUFFER_APPEND_ERROR="bufferAppendError",e.BUFFER_APPENDING_ERROR="bufferAppendingError",e.BUFFER_STALLED_ERROR="bufferStalledError",e.BUFFER_FULL_ERROR="bufferFullError",e.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",e.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",e.INTERNAL_EXCEPTION="internalException",e.INTERNAL_ABORTED="aborted",e.UNKNOWN="unknown",e}({});const Lr=function(){},wr={trace:Lr,debug:Lr,log:Lr,warn:Lr,info:Lr,error:Lr};let Cr=wr;function kr(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];r.forEach((function(t){Cr[t]=e[t]?e[t].bind(e):function(e){const t=self.console[e];return t?t.bind(self.console,"[".concat(e,"] >")):Lr}(t)}))}const xr=Cr,_r=/^(\d+)x(\d+)$/,Dr=/(.+?)=(".*?"|.*?)(?:,|$)/g;class Ir{constructor(e){"string"===typeof e&&(e=Ir.parseAttrList(e)),vr(this,e)}get clientAttrs(){return Object.keys(this).filter((e=>"X-"===e.substring(0,2)))}decimalInteger(e){const t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;const r=new Uint8Array(t.length/2);for(let e=0;e<t.length/2;e++)r[e]=parseInt(t.slice(2*e,2*e+2),16);return r}return null}hexadecimalIntegerAsNumber(e){const t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){const r=this[e];return r?parseFloat(r):t}enumeratedString(e){return this[e]}bool(e){return"YES"===this[e]}decimalResolution(e){const t=_r.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e){let t;const r={};for(Dr.lastIndex=0;null!==(t=Dr.exec(e));){let e=t[2];0===e.indexOf('"')&&e.lastIndexOf('"')===e.length-1&&(e=e.slice(1,-1));r[t[1].trim()]=e}return r}}function Br(e){return"SCTE35-OUT"===e||"SCTE35-IN"===e}class Pr{constructor(e,t){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,t){const r=t.attr;for(const t in r)if(Object.prototype.hasOwnProperty.call(e,t)&&e[t]!==r[t]){xr.warn('DATERANGE tag attribute: "'.concat(t,'" does not match for tags with ID: "').concat(e.ID,'"')),this._badValueForSameId=t;break}e=vr(new Ir({}),r,e)}if(this.attr=e,this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const e=new Date(this.attr["END-DATE"]);Er(e.getTime())&&(this._endDate=e)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get startDate(){return this._startDate}get endDate(){if(this._endDate)return this._endDate;const e=this.duration;return null!==e?new Date(this._startDate.getTime()+1e3*e):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(Er(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isValid(){return!!this.id&&!this._badValueForSameId&&Er(this.startDate.getTime())&&(null===this.duration||this.duration>=0)&&(!this.endOnNext||!!this.class)}}class Ur{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var Nr="audio",Or="video",Kr="audiovideo";class Fr{constructor(e){this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams={[Nr]:null,[Or]:null,[Kr]:null},this.baseurl=e}setByteRange(e,t){const r=e.split("@",2);let n;n=1===r.length?(null==t?void 0:t.byteRangeEndOffset)||0:parseInt(r[1]),this._byteRange=[n,parseInt(r[0])+n]}get byteRange(){return this._byteRange?this._byteRange:[]}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=pr.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}}class Mr extends Fr{constructor(e,t){super(t),this._decryptdata=null,this.rawProgramDateTime=null,this.programDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.stats=new Ur,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get decryptdata(){const{levelkeys:e}=this;if(!e&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const e=this.levelkeys.identity;if(e)this._decryptdata=e.getDecryptData(this.sn);else{const e=Object.keys(this.levelkeys);if(1===e.length)return this._decryptdata=this.levelkeys[e[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(null===this.programDateTime)return null;if(!Er(this.programDateTime))return null;const e=Er(this.duration)?this.duration:0;return this.programDateTime+1e3*e}get encrypted(){var e;if(null!=(e=this._decryptdata)&&e.encrypted)return!0;if(this.levelkeys){const e=Object.keys(this.levelkeys),t=e.length;if(t>1||1===t&&this.levelkeys[e[0]].encrypted)return!0}return!1}setKeyFormat(e){if(this.levelkeys){const t=this.levelkeys[e];t&&!this._decryptdata&&(this._decryptdata=t.getDecryptData(this.sn))}}abortRequests(){var e,t;null==(e=this.loader)||e.abort(),null==(t=this.keyLoader)||t.abort()}setElementaryStreamInfo(e,t,r,n,i){let s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const{elementaryStreams:a}=this,o=a[e];o?(o.startPTS=Math.min(o.startPTS,t),o.endPTS=Math.max(o.endPTS,r),o.startDTS=Math.min(o.startDTS,n),o.endDTS=Math.max(o.endDTS,i)):a[e]={startPTS:t,endPTS:r,startDTS:n,endDTS:i,partial:s}}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[Nr]=null,e[Or]=null,e[Kr]=null}}class Vr extends Fr{constructor(e,t,r,n,i){super(r),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.stats=new Ur,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=t,this.index=n;const s=e.enumeratedString("BYTERANGE");s&&this.setByteRange(s,i),i&&(this.fragOffset=i.fragOffset+i.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}class jr{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e)return this.advanced=!0,void(this.updated=!0);const t=this.lastPartSn-e.lastPartSn,r=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!r||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||0===t&&r>0,this.updated||this.advanced?this.misses=Math.floor(.6*e.misses):this.misses=e.misses+1,this.availabilityDelay=e.availabilityDelay}get hasProgramDateTime(){return!!this.fragments.length&&Er(this.fragments[this.fragments.length-1].programDateTime)}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||10}get drift(){const e=this.driftEndTime-this.driftStartTime;if(e>0){return 1e3*(this.driftEnd-this.driftStart)/e}return 1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var e;return null!=(e=this.fragments)&&e.length?this.fragments[this.fragments.length-1].end:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].index:-1}get lastPartSn(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}function Gr(e){return Uint8Array.from(atob(e),(e=>e.charCodeAt(0)))}function qr(e){const t=e.split(":");let r=null;if("data"===t[0]&&2===t.length){const e=t[1].split(";"),n=e[e.length-1].split(",");if(2===n.length){const t="base64"===n[0],i=n[1];t?(e.splice(-1,1),r=Gr(i)):r=function(e){const t=Hr(e).subarray(0,16),r=new Uint8Array(16);return r.set(t,16-t.length),r}(i)}}return r}function Hr(e){return Uint8Array.from(unescape(encodeURIComponent(e)),(e=>e.charCodeAt(0)))}const Xr="undefined"!==typeof self?self:void 0;var zr={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},$r="org.w3.clearkey",Wr="com.apple.streamingkeydelivery",Yr="com.microsoft.playready",Zr="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";function Qr(e){switch(e){case Wr:return zr.FAIRPLAY;case Yr:return zr.PLAYREADY;case Zr:return zr.WIDEVINE;case $r:return zr.CLEARKEY}}var Jr="1077efecc0b24d02ace33c1e52e2fb4b",en="e2719d58a985b3c9781ab030af78d30e",tn="9a04f07998404286ab92e65be0885f95",rn="edef8ba979d64acea3c827dcd51d21ed";function nn(e){return e===rn?zr.WIDEVINE:e===tn?zr.PLAYREADY:e===Jr||e===en?zr.CLEARKEY:void 0}function sn(e){switch(e){case zr.FAIRPLAY:return Wr;case zr.PLAYREADY:return Yr;case zr.WIDEVINE:return Zr;case zr.CLEARKEY:return $r}}function an(e){const{drmSystems:t,widevineLicenseUrl:r}=e,n=t?[zr.FAIRPLAY,zr.WIDEVINE,zr.PLAYREADY,zr.CLEARKEY].filter((e=>!!t[e])):[];return!n[zr.WIDEVINE]&&r&&n.push(zr.WIDEVINE),n}const on=null!=Xr&&null!=(ln=Xr.navigator)&&ln.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;var ln;function cn(e,t,r){return Uint8Array.prototype.slice?e.slice(t,r):new Uint8Array(Array.prototype.slice.call(e,t,r))}const un=(e,t)=>t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128,dn=(e,t)=>t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128,fn=(e,t)=>{const r=t;let n=0;for(;un(e,t);){n+=10;n+=pn(e,t+6),dn(e,t+10)&&(n+=10),t+=n}if(n>0)return e.subarray(r,r+n)},pn=(e,t)=>{let r=0;return r=(127&e[t])<<21,r|=(127&e[t+1])<<14,r|=(127&e[t+2])<<7,r|=127&e[t+3],r},hn=(e,t)=>un(e,t)&&pn(e,t+6)+10<=e.length-t,mn=e=>{const t=vn(e);for(let r=0;r<t.length;r++){const e=t[r];if(gn(e))return Sn(e)}},gn=e=>e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info,yn=e=>{const t=String.fromCharCode(e[0],e[1],e[2],e[3]),r=pn(e,4);return{type:t,size:r,data:e.subarray(10,10+r)}},vn=e=>{let t=0;const r=[];for(;un(e,t);){const n=pn(e,t+6);t+=10;const i=t+n;for(;t+8<i;){const n=yn(e.subarray(t)),i=En(n);i&&r.push(i),t+=n.size+10}dn(e,t)&&(t+=10)}return r},En=e=>"PRIV"===e.type?bn(e):"W"===e.type[0]?Rn(e):Tn(e),bn=e=>{if(e.size<2)return;const t=An(e.data,!0),r=new Uint8Array(e.data.subarray(t.length+1));return{key:e.type,info:t,data:r.buffer}},Tn=e=>{if(e.size<2)return;if("TXXX"===e.type){let t=1;const r=An(e.data.subarray(t),!0);t+=r.length+1;const n=An(e.data.subarray(t));return{key:e.type,info:r,data:n}}const t=An(e.data.subarray(1));return{key:e.type,data:t}},Rn=e=>{if("WXXX"===e.type){if(e.size<2)return;let t=1;const r=An(e.data.subarray(t),!0);t+=r.length+1;const n=An(e.data.subarray(t));return{key:e.type,info:r,data:n}}const t=An(e.data);return{key:e.type,data:t}},Sn=e=>{if(8===e.data.byteLength){const t=new Uint8Array(e.data),r=1&t[3];let n=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return n/=45,r&&(n+=47721858.84),Math.round(n)}},An=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=wn();if(r){const n=r.decode(e);if(t){const e=n.indexOf("\0");return-1!==e?n.substring(0,e):n}return n.replace(/\0/g,"")}const n=e.length;let i,s,a,o="",l=0;for(;l<n;){if(i=e[l++],0===i&&t)return o;if(0!==i&&3!==i)switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=String.fromCharCode(i);break;case 12:case 13:s=e[l++],o+=String.fromCharCode((31&i)<<6|63&s);break;case 14:s=e[l++],a=e[l++],o+=String.fromCharCode((15&i)<<12|(63&s)<<6|(63&a)<<0)}}return o};let Ln;function wn(){if(!navigator.userAgent.includes("PlayStation 4"))return Ln||"undefined"===typeof self.TextDecoder||(Ln=new self.TextDecoder("utf-8")),Ln}const Cn={hexDump:function(e){let t="";for(let r=0;r<e.length;r++){let n=e[r].toString(16);n.length<2&&(n="0"+n),t+=n}return t}},kn=Math.pow(2,32)-1,xn=[].push,_n={video:1,audio:2,id3:3,text:4};function Dn(e){return String.fromCharCode.apply(null,e)}function In(e,t){const r=e[t]<<8|e[t+1];return r<0?65536+r:r}function Bn(e,t){const r=Un(e,t);return r<0?4294967296+r:r}function Pn(e,t){let r=Bn(e,t);return r*=Math.pow(2,32),r+=Bn(e,t+4),r}function Un(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function Nn(e,t,r){e[t]=r>>24,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r}function On(e,t){const r=[];if(!t.length)return r;const n=e.byteLength;for(let i=0;i<n;){const s=Bn(e,i),a=s>1?i+s:n;if(Dn(e.subarray(i+4,i+8))===t[0])if(1===t.length)r.push(e.subarray(i+8,a));else{const n=On(e.subarray(i+8,a),t.slice(1));n.length&&xn.apply(r,n)}i=a}return r}function Kn(e){const t=[],r=e[0];let n=8;const i=Bn(e,n);n+=4;let s=0,a=0;0===r?(s=Bn(e,n),a=Bn(e,n+4),n+=8):(s=Pn(e,n),a=Pn(e,n+8),n+=16),n+=2;let o=e.length+a;const l=In(e,n);n+=2;for(let c=0;c<l;c++){let r=n;const s=Bn(e,r);r+=4;const a=2147483647&s;if(1===(2147483648&s)>>>31)return xr.warn("SIDX has hierarchical references (not supported)"),null;const l=Bn(e,r);r+=4,t.push({referenceSize:a,subsegmentDuration:l,info:{duration:l/i,start:o,end:o+a-1}}),o+=a,r+=4,n=r}return{earliestPresentationTime:s,timescale:i,version:r,referencesCount:l,references:t}}function Fn(e){const t=[],r=On(e,["moov","trak"]);for(let n=0;n<r.length;n++){const e=r[n],i=On(e,["tkhd"])[0];if(i){let r=i[0];const n=Bn(i,0===r?12:20),s=On(e,["mdia","mdhd"])[0];if(s){r=s[0];const i=Bn(s,0===r?12:20),a=On(e,["mdia","hdlr"])[0];if(a){const r=Dn(a.subarray(8,12)),s={soun:Nr,vide:Or}[r];if(s){const r=Mn(On(e,["mdia","minf","stbl","stsd"])[0]);t[n]={timescale:i,type:s},t[s]=mr({timescale:i,id:n},r)}}}}}return On(e,["moov","mvex","trex"]).forEach((e=>{const r=Bn(e,4),n=t[r];n&&(n.default={duration:Bn(e,12),flags:Bn(e,20)})})),t}function Mn(e){const t=e.subarray(8),r=t.subarray(86),n=Dn(t.subarray(4,8));let i=n;const s="enca"===n||"encv"===n;if(s){const e=On(t,[n])[0];On(e.subarray("enca"===n?28:78),["sinf"]).forEach((e=>{const t=On(e,["schm"])[0];if(t){const r=Dn(t.subarray(4,8));if("cbcs"===r||"cenc"===r){const t=On(e,["frma"])[0];t&&(i=Dn(t))}}}))}switch(i){case"avc1":case"avc2":case"avc3":case"avc4":{const e=On(r,["avcC"])[0];i+="."+jn(e[1])+jn(e[2])+jn(e[3]);break}case"mp4a":{const e=On(t,[n])[0],r=On(e.subarray(28),["esds"])[0];if(r&&r.length>12){let e=4;if(3!==r[e++])break;e=Vn(r,e),e+=2;const t=r[e++];if(128&t&&(e+=2),64&t&&(e+=r[e++]),4!==r[e++])break;e=Vn(r,e);const n=r[e++];if(64!==n)break;if(i+="."+jn(n),e+=12,5!==r[e++])break;e=Vn(r,e);const s=r[e++];let a=(248&s)>>3;31===a&&(a+=1+((7&s)<<3)+((224&r[e])>>5)),i+="."+a}break}case"hvc1":case"hev1":{const e=On(r,["hvcC"])[0],t=e[1],n=["","A","B","C"][t>>6],s=31&t,a=Bn(e,2),o=(32&t)>>5?"H":"L",l=e[12],c=e.subarray(6,12);i+="."+n+s,i+="."+a.toString(16).toUpperCase(),i+="."+o+l;let u="";for(let r=c.length;r--;){const e=c[r];if(e||u){u="."+e.toString(16).toUpperCase()+u}}i+=u;break}case"dvh1":case"dvhe":{const e=On(r,["dvcC"])[0],t=e[2]>>1&127,n=e[2]<<5&32|e[3]>>3&31;i+="."+Gn(t)+"."+Gn(n);break}case"vp09":{const e=On(r,["vpcC"])[0],t=e[4],n=e[5],s=e[6]>>4&15;i+="."+Gn(t)+"."+Gn(n)+"."+Gn(s);break}case"av01":{const e=On(r,["av1C"])[0],t=e[1]>>>5,n=31&e[1],s=e[2]>>>7?"H":"M",a=(64&e[2])>>6,o=(32&e[2])>>5,l=2===t&&a?o?12:10:a?10:8,c=(16&e[2])>>4,u=(8&e[2])>>3,d=(4&e[2])>>2,f=3&e[2],p=1,h=1,m=1,g=0;i+="."+t+"."+Gn(n)+s+"."+Gn(l)+"."+c+"."+u+d+f+"."+Gn(p)+"."+Gn(h)+"."+Gn(m)+"."+g;break}}return{codec:i,encrypted:s}}function Vn(e,t){const r=t+5;for(;128&e[t++]&&t<r;);return t}function jn(e){return("0"+e.toString(16).toUpperCase()).slice(-2)}function Gn(e){return(e<10?"0":"")+e}function qn(e){const t=On(e,["schm"])[0];if(t){const r=Dn(t.subarray(4,8));if("cbcs"===r||"cenc"===r)return On(e,["schi","tenc"])[0]}return null}function Hn(e){const t=Bn(e,0);let r=8;1&t&&(r+=4),4&t&&(r+=4);let n=0;const i=Bn(e,4);for(let s=0;s<i;s++){if(256&t){n+=Bn(e,r),r+=4}512&t&&(r+=4),1024&t&&(r+=4),2048&t&&(r+=4)}return n}function Xn(e,t){const r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}function zn(e,t){const r=[],n=t.samples,i=t.timescale,s=t.id;let a=!1;return On(n,["moof"]).map((o=>{const l=o.byteOffset-8;On(o,["traf"]).map((o=>{const c=On(o,["tfdt"]).map((e=>{const t=e[0];let r=Bn(e,4);return 1===t&&(r*=Math.pow(2,32),r+=Bn(e,8)),r/i}))[0];return void 0!==c&&(e=c),On(o,["tfhd"]).map((c=>{const u=Bn(c,4),d=16777215&Bn(c,0);let f=0;const p=0!==(16&d);let h=0;const m=0!==(32&d);let g=8;u===s&&(0!==(1&d)&&(g+=8),0!==(2&d)&&(g+=4),0!==(8&d)&&(f=Bn(c,g),g+=4),p&&(h=Bn(c,g),g+=4),m&&(g+=4),"video"===t.type&&(a=function(e){if(!e)return!1;const t=e.indexOf("."),r=t<0?e:e.substring(0,t);return"hvc1"===r||"hev1"===r||"dvh1"===r||"dvhe"===r}(t.codec)),On(o,["trun"]).map((s=>{const o=s[0],c=16777215&Bn(s,0),u=0!==(1&c);let d=0;const p=0!==(4&c),m=0!==(256&c);let g=0;const y=0!==(512&c);let v=0;const E=0!==(1024&c),b=0!==(2048&c);let T=0;const R=Bn(s,4);let S=8;u&&(d=Bn(s,S),S+=4),p&&(S+=4);let A=d+l;for(let l=0;l<R;l++){if(m?(g=Bn(s,S),S+=4):g=f,y?(v=Bn(s,S),S+=4):v=h,E&&(S+=4),b&&(T=0===o?Bn(s,S):Un(s,S),S+=4),t.type===Or){let t=0;for(;t<v;){const s=Bn(n,A);if(A+=4,$n(a,n[A])){Wn(n.subarray(A,A+s),a?2:1,e+T/i,r)}A+=s,t+=s+4}}e+=g/i}})))}))}))})),r}function $n(e,t){if(e){const e=t>>1&63;return 39===e||40===e}return 6===(31&t)}function Wn(e,t,r,n){const i=Yn(e);let s=0;s+=t;let a=0,o=0,l=0;for(;s<i.length;){a=0;do{if(s>=i.length)break;l=i[s++],a+=l}while(255===l);o=0;do{if(s>=i.length)break;l=i[s++],o+=l}while(255===l);const e=i.length-s;let t=s;if(o<e)s+=o;else if(o>e){xr.error("Malformed SEI payload. ".concat(o," is too small, only ").concat(e," bytes left to parse."));break}if(4===a){if(181===i[t++]){const e=In(i,t);if(t+=2,49===e){const e=Bn(i,t);if(t+=4,1195456820===e){const e=i[t++];if(3===e){const s=i[t++],o=64&s,l=o?2+3*(31&s):0,c=new Uint8Array(l);if(o){c[0]=s;for(let e=1;e<l;e++)c[e]=i[t++]}n.push({type:e,payloadType:a,pts:r,bytes:c})}}}}}else if(5===a&&o>16){const e=[];for(let r=0;r<16;r++){const n=i[t++].toString(16);e.push(1==n.length?"0"+n:n),3!==r&&5!==r&&7!==r&&9!==r||e.push("-")}const s=o-16,l=new Uint8Array(s);for(let r=0;r<s;r++)l[r]=i[t++];n.push({payloadType:a,pts:r,uuid:e.join(""),userData:An(l),userDataBytes:l})}}}function Yn(e){const t=e.byteLength,r=[];let n=1;for(;n<t-2;)0===e[n]&&0===e[n+1]&&3===e[n+2]?(r.push(n+2),n+=2):n++;if(0===r.length)return e;const i=t-r.length,s=new Uint8Array(i);let a=0;for(n=0;n<i;a++,n++)a===r[0]&&(a++,r.shift()),s[n]=e[a];return s}function Zn(e,t,r){if(16!==e.byteLength)throw new RangeError("Invalid system id");let n,i,s;if(t){n=1,i=new Uint8Array(16*t.length);for(let e=0;e<t.length;e++){const r=t[e];if(16!==r.byteLength)throw new RangeError("Invalid key");i.set(r,16*e)}}else n=0,i=new Uint8Array;n>0?(s=new Uint8Array(4),t.length>0&&new DataView(s.buffer).setUint32(0,t.length,!1)):s=new Uint8Array;const a=new Uint8Array(4);return r&&r.byteLength>0&&new DataView(a.buffer).setUint32(0,r.byteLength,!1),function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];const i=r.length;let s=8,a=i;for(;a--;)s+=r[a].byteLength;const o=new Uint8Array(s);for(o[0]=s>>24&255,o[1]=s>>16&255,o[2]=s>>8&255,o[3]=255&s,o.set(e,4),a=0,s=8;a<i;a++)o.set(r[a],s),s+=r[a].byteLength;return o}([112,115,115,104],new Uint8Array([n,0,0,0]),e,s,i,a,r||new Uint8Array)}function Qn(e){const t=e.getUint32(0),r=e.byteOffset,n=e.byteLength;if(n<t)return{offset:r,size:n};if(1886614376!==e.getUint32(4))return{offset:r,size:t};const i=e.getUint32(8)>>>24;if(0!==i&&1!==i)return{offset:r,size:t};const s=e.buffer,a=Cn.hexDump(new Uint8Array(s,r+12,16)),o=e.getUint32(28);let l=null,c=null;if(0===i){if(t-32<o||o<22)return{offset:r,size:t};c=new Uint8Array(s,r+32,o)}else if(1===i){if(!o||n<r+32+16*o+16)return{offset:r,size:t};l=[];for(let e=0;e<o;e++)l.push(new Uint8Array(s,r+32+16*e,16))}return{version:i,systemId:a,kids:l,data:c,offset:r,size:t}}let Jn={};class ei{static clearKeyUriToKeyIdMap(){Jn={}}constructor(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=r,this.keyFormatVersions=n,this.iv=i,this.encrypted=!!e&&"NONE"!==e,this.isCommonEncryption=this.encrypted&&"AES-128"!==e}isSupported(){if(this.method){if("AES-128"===this.method||"NONE"===this.method)return!0;if("identity"===this.keyFormat)return"SAMPLE-AES"===this.method;switch(this.keyFormat){case Wr:case Zr:case Yr:case $r:return-1!==["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)}}return!1}getDecryptData(e){if(!this.encrypted||!this.uri)return null;if("AES-128"===this.method&&this.uri&&!this.iv){"number"!==typeof e&&("AES-128"!==this.method||this.iv||xr.warn('missing IV for initialization segment with method="'.concat(this.method,'" - compliance issue')),e=0);const t=function(e){const t=new Uint8Array(16);for(let r=12;r<16;r++)t[r]=e>>8*(15-r)&255;return t}(e);return new ei(this.method,this.uri,"identity",this.keyFormatVersions,t)}const t=qr(this.uri);if(t)switch(this.keyFormat){case Zr:this.pssh=t,t.length>=22&&(this.keyId=t.subarray(t.length-22,t.length-6));break;case Yr:{const e=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=Zn(e,null,t);const r=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2),n=String.fromCharCode.apply(null,Array.from(r)),i=n.substring(n.indexOf("<"),n.length),s=(new DOMParser).parseFromString(i,"text/xml").getElementsByTagName("KID")[0];if(s){const e=s.childNodes[0]?s.childNodes[0].nodeValue:s.getAttribute("VALUE");if(e){const t=Gr(e).subarray(0,16);!function(e){const t=function(e,t,r){const n=e[t];e[t]=e[r],e[r]=n};t(e,0,3),t(e,1,2),t(e,4,5),t(e,6,7)}(t),this.keyId=t}}break}default:{let e=t.subarray(0,16);if(16!==e.length){const t=new Uint8Array(16);t.set(e,16-e.length),e=t}this.keyId=e;break}}if(!this.keyId||16!==this.keyId.byteLength){let e=Jn[this.uri];if(!e){const t=Object.keys(Jn).length%Number.MAX_SAFE_INTEGER;e=new Uint8Array(16);new DataView(e.buffer,12,4).setUint32(0,t),Jn[this.uri]=e}this.keyId=e}return this}}const ti=/\{\$([a-zA-Z0-9-_]+)\}/g;function ri(e){return ti.test(e)}function ni(e,t,r){if(null!==e.variableList||e.hasVariableRefs)for(let n=r.length;n--;){const i=r[n],s=t[i];s&&(t[i]=ii(e,s))}}function ii(e,t){if(null!==e.variableList||e.hasVariableRefs){const r=e.variableList;return t.replace(ti,(t=>{const n=t.substring(2,t.length-1),i=null==r?void 0:r[n];return void 0===i?(e.playlistParsingError||(e.playlistParsingError=new Error('Missing preceding EXT-X-DEFINE tag for Variable Reference: "'.concat(n,'"'))),t):i}))}return t}function si(e,t,r){let n,i,s=e.variableList;if(s||(e.variableList=s={}),"QUERYPARAM"in t){n=t.QUERYPARAM;try{const e=new self.URL(r).searchParams;if(!e.has(n))throw new Error('"'.concat(n,'" does not match any query parameter in URI: "').concat(r,'"'));i=e.get(n)}catch(a){e.playlistParsingError||(e.playlistParsingError=new Error("EXT-X-DEFINE QUERYPARAM: ".concat(a.message)))}}else n=t.NAME,i=t.VALUE;n in s?e.playlistParsingError||(e.playlistParsingError=new Error('EXT-X-DEFINE duplicate Variable Name declarations: "'.concat(n,'"'))):s[n]=i||""}function ai(e,t,r){const n=t.IMPORT;if(r&&n in r){let t=e.variableList;t||(e.variableList=t={}),t[n]=r[n]}else e.playlistParsingError||(e.playlistParsingError=new Error('EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "'.concat(n,'"')))}function oi(){if("undefined"===typeof self)return;return(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}const li={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function ci(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return!e.split(",").some((e=>!ui(e,t,r)))}function ui(e,t){var r;const n=oi(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]);return null!=(r=null==n?void 0:n.isTypeSupported(di(e,t)))&&r}function di(e,t){return"".concat(t,'/mp4;codecs="').concat(e,'"')}function fi(e){if(e){const t=e.substring(0,4);return li.video[t]}return 2}function pi(e){return e.split(",").reduce(((e,t)=>{const r=li.video[t];return r?(2*r+e)/(e?3:2):(li.audio[t]+e)/(e?2:1)}),0)}const hi={};const mi=/flac|opus/i;function gi(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.replace(mi,(e=>function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(hi[e])return hi[e];const r={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"]}[e];for(let n=0;n<r.length;n++)if(ui(r[n],"audio",t))return hi[e]=r[n],r[n];return e}(e.toLowerCase(),t)))}function yi(e,t){return e&&"mp4a"!==e?e:t?t.split(",")[0]:t}const vi=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,Ei=/#EXT-X-MEDIA:(.*)/g,bi=/^#EXT(?:INF|-X-TARGETDURATION):/m,Ti=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),Ri=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class Si{static findGroup(e,t){for(let r=0;r<e.length;r++){const n=e[r];if(n.id===t)return n}}static resolve(e,t){return pr.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return bi.test(e)}static parseMasterPlaylist(e,t){const r={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:ri(e)},n=[];let i;for(vi.lastIndex=0;null!=(i=vi.exec(e));)if(i[1]){var s;const e=new Ir(i[1]);ni(r,e,["CODECS","SUPPLEMENTAL-CODECS","ALLOWED-CPC","PATHWAY-ID","STABLE-VARIANT-ID","AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS","NAME"]);const a=ii(r,i[2]),o={attrs:e,bitrate:e.decimalInteger("BANDWIDTH")||e.decimalInteger("AVERAGE-BANDWIDTH"),name:e.NAME,url:Si.resolve(a,t)},l=e.decimalResolution("RESOLUTION");l&&(o.width=l.width,o.height=l.height),wi(e.CODECS,o),null!=(s=o.unknownCodecs)&&s.length||n.push(o),r.levels.push(o)}else if(i[3]){const e=i[3],n=i[4];switch(e){case"SESSION-DATA":{const e=new Ir(n);ni(r,e,["DATA-ID","LANGUAGE","VALUE","URI"]);const t=e["DATA-ID"];t&&(null===r.sessionData&&(r.sessionData={}),r.sessionData[t]=e);break}case"SESSION-KEY":{const e=Ai(n,t,r);e.encrypted&&e.isSupported()?(null===r.sessionKeys&&(r.sessionKeys=[]),r.sessionKeys.push(e)):xr.warn('[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "'.concat(n,'"'));break}case"DEFINE":{const e=new Ir(n);ni(r,e,["NAME","VALUE","QUERYPARAM"]),si(r,e,t)}break;case"CONTENT-STEERING":{const e=new Ir(n);ni(r,e,["SERVER-URI","PATHWAY-ID"]),r.contentSteering={uri:Si.resolve(e["SERVER-URI"],t),pathwayId:e["PATHWAY-ID"]||"."};break}case"START":r.startTimeOffset=Li(n)}}const a=n.length>0&&n.length<r.levels.length;return r.levels=a?n:r.levels,0===r.levels.length&&(r.playlistParsingError=new Error("no levels found in manifest")),r}static parseMasterPlaylistMedia(e,t,r){let n;const i={},s=r.levels,a={AUDIO:s.map((e=>({id:e.attrs.AUDIO,audioCodec:e.audioCodec}))),SUBTITLES:s.map((e=>({id:e.attrs.SUBTITLES,textCodec:e.textCodec}))),"CLOSED-CAPTIONS":[]};let o=0;for(Ei.lastIndex=0;null!==(n=Ei.exec(e));){const e=new Ir(n[1]),s=e.TYPE;if(s){const n=a[s],l=i[s]||[];i[s]=l,ni(r,e,["URI","GROUP-ID","LANGUAGE","ASSOC-LANGUAGE","STABLE-RENDITION-ID","NAME","INSTREAM-ID","CHARACTERISTICS","CHANNELS"]);const c=e.LANGUAGE,u=e["ASSOC-LANGUAGE"],d=e.CHANNELS,f=e.CHARACTERISTICS,p=e["INSTREAM-ID"],h={attrs:e,bitrate:0,id:o++,groupId:e["GROUP-ID"]||"",name:e.NAME||c||"",type:s,default:e.bool("DEFAULT"),autoselect:e.bool("AUTOSELECT"),forced:e.bool("FORCED"),lang:c,url:e.URI?Si.resolve(e.URI,t):""};if(u&&(h.assocLang=u),d&&(h.channels=d),f&&(h.characteristics=f),p&&(h.instreamId=p),null!=n&&n.length){const e=Si.findGroup(n,h.groupId)||n[0];Ci(h,e,"audioCodec"),Ci(h,e,"textCodec")}l.push(h)}}return i}static parseLevelPlaylist(e,t,r,n,i,s){const a=new jr(t),o=a.fragments;let l,c,u,d=null,f=0,p=0,h=0,m=0,g=null,y=new Mr(n,t),v=-1,E=!1,b=null;for(Ti.lastIndex=0,a.m3u8=e,a.hasVariableRefs=ri(e);null!==(l=Ti.exec(e));){E&&(E=!1,y=new Mr(n,t),y.start=h,y.sn=f,y.cc=m,y.level=r,d&&(y.initSegment=d,y.rawProgramDateTime=d.rawProgramDateTime,d.rawProgramDateTime=null,b&&(y.setByteRange(b),b=null)));const e=l[1];if(e){y.duration=parseFloat(e);const t=(" "+l[2]).slice(1);y.title=t||null,y.tagList.push(t?["INF",e,t]:["INF",e])}else if(l[3]){if(Er(y.duration)){y.start=h,u&&_i(y,u,a),y.sn=f,y.level=r,y.cc=m,o.push(y);const e=(" "+l[3]).slice(1);y.relurl=ii(a,e),ki(y,g),g=y,h+=y.duration,f++,p=0,E=!0}}else if(l[4]){const e=(" "+l[4]).slice(1);g?y.setByteRange(e,g):y.setByteRange(e)}else if(l[5])y.rawProgramDateTime=(" "+l[5]).slice(1),y.tagList.push(["PROGRAM-DATE-TIME",y.rawProgramDateTime]),-1===v&&(v=o.length);else{if(l=l[0].match(Ri),!l){xr.warn("No matches on slow regex match for level playlist!");continue}for(c=1;c<l.length&&"undefined"===typeof l[c];c++);const e=(" "+l[c]).slice(1),i=(" "+l[c+1]).slice(1),h=l[c+2]?(" "+l[c+2]).slice(1):"";switch(e){case"PLAYLIST-TYPE":a.type=i.toUpperCase();break;case"MEDIA-SEQUENCE":f=a.startSN=parseInt(i);break;case"SKIP":{const e=new Ir(i);ni(a,e,["RECENTLY-REMOVED-DATERANGES"]);const t=e.decimalInteger("SKIPPED-SEGMENTS");if(Er(t)){a.skippedSegments=t;for(let e=t;e--;)o.unshift(null);f+=t}const r=e.enumeratedString("RECENTLY-REMOVED-DATERANGES");r&&(a.recentlyRemovedDateranges=r.split("\t"));break}case"TARGETDURATION":a.targetduration=Math.max(parseInt(i),1);break;case"VERSION":a.version=parseInt(i);break;case"INDEPENDENT-SEGMENTS":case"EXTM3U":break;case"ENDLIST":a.live=!1;break;case"#":(i||h)&&y.tagList.push(h?[i,h]:[i]);break;case"DISCONTINUITY":m++,y.tagList.push(["DIS"]);break;case"GAP":y.gap=!0,y.tagList.push([e]);break;case"BITRATE":y.tagList.push([e,i]);break;case"DATERANGE":{const e=new Ir(i);ni(a,e,["ID","CLASS","START-DATE","END-DATE","SCTE35-CMD","SCTE35-OUT","SCTE35-IN"]),ni(a,e,e.clientAttrs);const t=new Pr(e,a.dateRanges[e.ID]);t.isValid||a.skippedSegments?a.dateRanges[t.id]=t:xr.warn('Ignoring invalid DATERANGE tag: "'.concat(i,'"')),y.tagList.push(["EXT-X-DATERANGE",i]);break}case"DEFINE":{const e=new Ir(i);ni(a,e,["NAME","VALUE","IMPORT","QUERYPARAM"]),"IMPORT"in e?ai(a,e,s):si(a,e,t)}break;case"DISCONTINUITY-SEQUENCE":m=parseInt(i);break;case"KEY":{const e=Ai(i,t,a);if(e.isSupported()){if("NONE"===e.method){u=void 0;break}u||(u={}),u[e.keyFormat]&&(u=vr({},u)),u[e.keyFormat]=e}else xr.warn('[Keys] Ignoring invalid EXT-X-KEY tag: "'.concat(i,'"'));break}case"START":a.startTimeOffset=Li(i);break;case"MAP":{const e=new Ir(i);if(ni(a,e,["BYTERANGE","URI"]),y.duration){const i=new Mr(n,t);xi(i,e,r,u),d=i,y.initSegment=d,d.rawProgramDateTime&&!y.rawProgramDateTime&&(y.rawProgramDateTime=d.rawProgramDateTime)}else{const t=y.byteRangeEndOffset;if(t){const e=y.byteRangeStartOffset;b="".concat(t-e,"@").concat(e)}else b=null;xi(y,e,r,u),d=y,E=!0}break}case"SERVER-CONTROL":{const e=new Ir(i);a.canBlockReload=e.bool("CAN-BLOCK-RELOAD"),a.canSkipUntil=e.optionalFloat("CAN-SKIP-UNTIL",0),a.canSkipDateRanges=a.canSkipUntil>0&&e.bool("CAN-SKIP-DATERANGES"),a.partHoldBack=e.optionalFloat("PART-HOLD-BACK",0),a.holdBack=e.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{const e=new Ir(i);a.partTarget=e.decimalFloatingPoint("PART-TARGET");break}case"PART":{let e=a.partList;e||(e=a.partList=[]);const r=p>0?e[e.length-1]:void 0,n=p++,s=new Ir(i);ni(a,s,["BYTERANGE","URI"]);const o=new Vr(s,y,t,n,r);e.push(o),y.duration+=o.duration;break}case"PRELOAD-HINT":{const e=new Ir(i);ni(a,e,["URI"]),a.preloadHint=e;break}case"RENDITION-REPORT":{const e=new Ir(i);ni(a,e,["URI"]),a.renditionReports=a.renditionReports||[],a.renditionReports.push(e);break}default:xr.warn("line parsed but not handled: ".concat(l))}}}g&&!g.relurl?(o.pop(),h-=g.duration,a.partList&&(a.fragmentHint=g)):a.partList&&(ki(y,g),y.cc=m,a.fragmentHint=y,u&&_i(y,u,a));const T=o.length,R=o[0],S=o[T-1];if(h+=a.skippedSegments*a.targetduration,h>0&&T&&S){a.averagetargetduration=h/T;const e=S.sn;a.endSN="initSegment"!==e?e:0,a.live||(S.endList=!0),R&&(a.startCC=R.cc)}else a.endSN=0,a.startCC=0;return a.fragmentHint&&(h+=a.fragmentHint.duration),a.totalduration=h,a.endCC=m,v>0&&function(e,t){let r=e[t];for(let n=t;n--;){const t=e[n];if(!t)return;t.programDateTime=r.programDateTime-1e3*t.duration,r=t}}(o,v),a}}function Ai(e,t,r){var n,i;const s=new Ir(e);ni(r,s,["KEYFORMAT","KEYFORMATVERSIONS","URI","IV","URI"]);const a=null!=(n=s.METHOD)?n:"",o=s.URI,l=s.hexadecimalInteger("IV"),c=s.KEYFORMATVERSIONS,u=null!=(i=s.KEYFORMAT)?i:"identity";o&&s.IV&&!l&&xr.error("Invalid IV: ".concat(s.IV));const d=o?Si.resolve(o,t):"",f=(c||"1").split("/").map(Number).filter(Number.isFinite);return new ei(a,d,u,f,l)}function Li(e){const t=new Ir(e).decimalFloatingPoint("TIME-OFFSET");return Er(t)?t:null}function wi(e,t){let r=(e||"").split(/[ ,]+/).filter((e=>e));["video","audio","text"].forEach((e=>{const n=r.filter((t=>function(e,t){const r=li[t];return!!r&&!!r[e.slice(0,4)]}(t,e)));n.length&&(t["".concat(e,"Codec")]=n.join(","),r=r.filter((e=>-1===n.indexOf(e))))})),t.unknownCodecs=r}function Ci(e,t,r){const n=t[r];n&&(e[r]=n)}function ki(e,t){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):null!=t&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime),Er(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}function xi(e,t,r,n){e.relurl=t.URI,t.BYTERANGE&&e.setByteRange(t.BYTERANGE),e.level=r,e.sn="initSegment",n&&(e.levelkeys=n),e.initSegment=null}function _i(e,t,r){e.levelkeys=t;const{encryptedFragments:n}=r;n.length&&n[n.length-1].levelkeys===t||!Object.keys(t).some((e=>t[e].isCommonEncryption))||n.push(e)}var Di="manifest",Ii="level",Bi="audioTrack",Pi="subtitleTrack",Ui="main",Ni="audio",Oi="subtitle";function Ki(e){const{type:t}=e;switch(t){case Bi:return Ni;case Pi:return Oi;default:return Ui}}function Fi(e,t){let r=e.url;return void 0!==r&&0!==r.indexOf("data:")||(r=t.url),r}class Mi{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(Rr.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Rr.LEVEL_LOADING,this.onLevelLoading,this),e.on(Rr.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(Rr.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}unregisterListeners(){const{hls:e}=this;e.off(Rr.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Rr.LEVEL_LOADING,this.onLevelLoading,this),e.off(Rr.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(Rr.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}createInternalLoader(e){const t=this.hls.config,r=t.pLoader,n=t.loader,i=new(r||n)(t);return this.loaders[e.type]=i,i}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,t){const{url:r}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:Di,url:r,deliveryDirectives:null})}onLevelLoading(e,t){const{id:r,level:n,pathwayId:i,url:s,deliveryDirectives:a}=t;this.load({id:r,level:n,pathwayId:i,responseType:"text",type:Ii,url:s,deliveryDirectives:a})}onAudioTrackLoading(e,t){const{id:r,groupId:n,url:i,deliveryDirectives:s}=t;this.load({id:r,groupId:n,level:null,responseType:"text",type:Bi,url:i,deliveryDirectives:s})}onSubtitleTrackLoading(e,t){const{id:r,groupId:n,url:i,deliveryDirectives:s}=t;this.load({id:r,groupId:n,level:null,responseType:"text",type:Pi,url:i,deliveryDirectives:s})}load(e){var t;const r=this.hls.config;let n,i=this.getInternalLoader(e);if(i){const t=i.context;if(t&&t.url===e.url&&t.level===e.level)return void xr.trace("[playlist-loader]: playlist request ongoing");xr.log("[playlist-loader]: aborting previous loader for type: ".concat(e.type)),i.abort()}if(n=e.type===Di?r.manifestLoadPolicy.default:vr({},r.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),i=this.createInternalLoader(e),Er(null==(t=e.deliveryDirectives)?void 0:t.part)){let t;if(e.type===Ii&&null!==e.level?t=this.hls.levels[e.level].details:e.type===Bi&&null!==e.id?t=this.hls.audioTracks[e.id].details:e.type===Pi&&null!==e.id&&(t=this.hls.subtitleTracks[e.id].details),t){const e=t.partTarget,r=t.targetduration;if(e&&r){const t=1e3*Math.max(3*e,.8*r);n=vr({},n,{maxTimeToFirstByteMs:Math.min(t,n.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(t,n.maxTimeToFirstByteMs)})}}}const s=n.errorRetry||n.timeoutRetry||{},a={loadPolicy:n,timeout:n.maxLoadTimeMs,maxRetry:s.maxNumRetry||0,retryDelay:s.retryDelayMs||0,maxRetryDelay:s.maxRetryDelayMs||0},o={onSuccess:(e,t,r,n)=>{const i=this.getInternalLoader(r);this.resetInternalLoader(r.type);const s=e.data;0===s.indexOf("#EXTM3U")?(t.parsing.start=performance.now(),Si.isMediaPlaylist(s)?this.handleTrackOrLevelPlaylist(e,t,r,n||null,i):this.handleMasterPlaylist(e,t,r,n)):this.handleManifestParsingError(e,r,new Error("no EXTM3U delimiter"),n||null,t)},onError:(e,t,r,n)=>{this.handleNetworkError(t,r,!1,e,n)},onTimeout:(e,t,r)=>{this.handleNetworkError(t,r,!0,void 0,e)}};i.load(e,a,o)}handleMasterPlaylist(e,t,r,n){const i=this.hls,s=e.data,a=Fi(e,r),o=Si.parseMasterPlaylist(s,a);if(o.playlistParsingError)return void this.handleManifestParsingError(e,r,o.playlistParsingError,n,t);const{contentSteering:l,levels:c,sessionData:u,sessionKeys:d,startTimeOffset:f,variableList:p}=o;this.variableList=p;const{AUDIO:h=[],SUBTITLES:m,"CLOSED-CAPTIONS":g}=Si.parseMasterPlaylistMedia(s,a,o);if(h.length){h.some((e=>!e.url))||!c[0].audioCodec||c[0].attrs.AUDIO||(xr.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),h.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new Ir({}),bitrate:0,url:""}))}i.trigger(Rr.MANIFEST_LOADED,{levels:c,audioTracks:h,subtitles:m,captions:g,contentSteering:l,url:a,stats:t,networkDetails:n,sessionData:u,sessionKeys:d,startTimeOffset:f,variableList:p})}handleTrackOrLevelPlaylist(e,t,r,n,i){const s=this.hls,{id:a,level:o,type:l}=r,c=Fi(e,r),u=Er(o)?o:Er(a)?a:0,d=Ki(r),f=Si.parseLevelPlaylist(e.data,c,u,d,0,this.variableList);if(l===Di){const e={attrs:new Ir({}),bitrate:0,details:f,name:"",url:c};s.trigger(Rr.MANIFEST_LOADED,{levels:[e],audioTracks:[],url:c,stats:t,networkDetails:n,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),r.levelDetails=f,this.handlePlaylistLoaded(f,e,t,r,n,i)}handleManifestParsingError(e,t,r,n,i){this.hls.trigger(Rr.ERROR,{type:Sr.NETWORK_ERROR,details:Ar.MANIFEST_PARSING_ERROR,fatal:t.type===Di,url:e.url,err:r,error:r,reason:r.message,response:e,context:t,networkDetails:n,stats:i})}handleNetworkError(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,s="A network ".concat(r?"timeout":"error"+(n?" (status "+n.code+")":"")," occurred while loading ").concat(e.type);e.type===Ii?s+=": ".concat(e.level," id: ").concat(e.id):e.type!==Bi&&e.type!==Pi||(s+=" id: ".concat(e.id,' group-id: "').concat(e.groupId,'"'));const a=new Error(s);xr.warn("[playlist-loader]: ".concat(s));let o=Ar.UNKNOWN,l=!1;const c=this.getInternalLoader(e);switch(e.type){case Di:o=r?Ar.MANIFEST_LOAD_TIMEOUT:Ar.MANIFEST_LOAD_ERROR,l=!0;break;case Ii:o=r?Ar.LEVEL_LOAD_TIMEOUT:Ar.LEVEL_LOAD_ERROR,l=!1;break;case Bi:o=r?Ar.AUDIO_TRACK_LOAD_TIMEOUT:Ar.AUDIO_TRACK_LOAD_ERROR,l=!1;break;case Pi:o=r?Ar.SUBTITLE_TRACK_LOAD_TIMEOUT:Ar.SUBTITLE_LOAD_ERROR,l=!1}c&&this.resetInternalLoader(e.type);const u={type:Sr.NETWORK_ERROR,details:o,fatal:l,url:e.url,loader:c,context:e,error:a,networkDetails:t,stats:i};if(n){const r=(null==t?void 0:t.url)||e.url;u.response=mr({url:r,data:void 0},n)}this.hls.trigger(Rr.ERROR,u)}handlePlaylistLoaded(e,t,r,n,i,s){const a=this.hls,{type:o,level:l,id:c,groupId:u,deliveryDirectives:d}=n,f=Fi(t,n),p=Ki(n),h="number"===typeof n.level&&p===Ui?l:void 0;if(!e.fragments.length){const e=new Error("No Segments found in Playlist");return void a.trigger(Rr.ERROR,{type:Sr.NETWORK_ERROR,details:Ar.LEVEL_EMPTY_ERROR,fatal:!1,url:f,error:e,reason:e.message,response:t,context:n,level:h,parent:p,networkDetails:i,stats:r})}e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));const m=e.playlistParsingError;if(m)a.trigger(Rr.ERROR,{type:Sr.NETWORK_ERROR,details:Ar.LEVEL_PARSING_ERROR,fatal:!1,url:f,error:m,reason:m.message,response:t,context:n,level:h,parent:p,networkDetails:i,stats:r});else switch(e.live&&s&&(s.getCacheAge&&(e.ageHeader=s.getCacheAge()||0),s.getCacheAge&&!isNaN(e.ageHeader)||(e.ageHeader=0)),o){case Di:case Ii:a.trigger(Rr.LEVEL_LOADED,{details:e,level:h||0,id:c||0,stats:r,networkDetails:i,deliveryDirectives:d});break;case Bi:a.trigger(Rr.AUDIO_TRACK_LOADED,{details:e,id:c||0,groupId:u||"",stats:r,networkDetails:i,deliveryDirectives:d});break;case Pi:a.trigger(Rr.SUBTITLE_TRACK_LOADED,{details:e,id:c||0,groupId:u||"",stats:r,networkDetails:i,deliveryDirectives:d})}}}function Vi(e,t){let r;try{r=new Event("addtrack")}catch(n){r=document.createEvent("Event"),r.initEvent("addtrack",!1,!1)}r.track=e,t.dispatchEvent(r)}function ji(e,t){const r=e.mode;if("disabled"===r&&(e.mode="hidden"),e.cues&&!e.cues.getCueById(t.id))try{if(e.addCue(t),!e.cues.getCueById(t.id))throw new Error("addCue is failed for: ".concat(t))}catch(n){xr.debug("[texttrack-utils]: ".concat(n));try{const r=new self.TextTrackCue(t.startTime,t.endTime,t.text);r.id=t.id,e.addCue(r)}catch(i){xr.debug("[texttrack-utils]: Legacy TextTrackCue fallback failed: ".concat(i))}}"disabled"===r&&(e.mode=r)}function Gi(e){const t=e.mode;if("disabled"===t&&(e.mode="hidden"),e.cues)for(let r=e.cues.length;r--;)e.removeCue(e.cues[r]);"disabled"===t&&(e.mode=t)}function qi(e,t,r,n){const i=e.mode;if("disabled"===i&&(e.mode="hidden"),e.cues&&e.cues.length>0){const i=function(e,t,r){const n=[],i=function(e,t){if(t<e[0].startTime)return 0;const r=e.length-1;if(t>e[r].endTime)return-1;let n=0,i=r;for(;n<=i;){const s=Math.floor((i+n)/2);if(t<e[s].startTime)i=s-1;else{if(!(t>e[s].startTime&&n<r))return s;n=s+1}}return e[n].startTime-t<t-e[i].startTime?n:i}(e,t);if(i>-1)for(let s=i,a=e.length;s<a;s++){const i=e[s];if(i.startTime>=t&&i.endTime<=r)n.push(i);else if(i.startTime>r)return n}return n}(e.cues,t,r);for(let t=0;t<i.length;t++)n&&!n(i[t])||e.removeCue(i[t])}"disabled"===i&&(e.mode=i)}function Hi(e){const t=[];for(let r=0;r<e.length;r++){const n=e[r];"subtitles"!==n.kind&&"captions"!==n.kind||!n.label||t.push(e[r])}return t}var Xi="org.id3",zi="com.apple.quicktime.HLS",$i="https://aomedia.org/emsg/ID3";function Wi(){if("undefined"!==typeof self)return self.VTTCue||self.TextTrackCue}function Yi(e,t,r,n,i){let s=new e(t,r,"");try{s.value=n,i&&(s.type=i)}catch(Pt){s=new e(t,r,JSON.stringify(i?mr({type:i},n):n))}return s}const Zi=(()=>{const e=Wi();try{e&&new e(0,Number.POSITIVE_INFINITY,"")}catch(Pt){return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();function Qi(e,t){return e.getTime()/1e3-t}class Ji{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null}_registerListeners(){const{hls:e}=this;e.on(Rr.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Rr.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Rr.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Rr.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(Rr.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(Rr.LEVEL_UPDATED,this.onLevelUpdated,this)}_unregisterListeners(){const{hls:e}=this;e.off(Rr.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Rr.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Rr.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Rr.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(Rr.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(Rr.LEVEL_UPDATED,this.onLevelUpdated,this)}onMediaAttached(e,t){this.media=t.media}onMediaDetaching(){this.id3Track&&(Gi(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const t=this.getID3Track(e.textTracks);return t.mode="hidden",t}getID3Track(e){if(this.media){for(let t=0;t<e.length;t++){const r=e[t];if("metadata"===r.kind&&"id3"===r.label)return Vi(r,this.media),r}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,t){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:r,enableID3MetadataCues:n}}}=this;if(!r&&!n)return;const{samples:i}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));const s=Wi();if(s)for(let a=0;a<i.length;a++){const e=i[a].type;if(e===$i&&!r||!n)continue;const t=vn(i[a].data);if(t){const r=i[a].pts;let n=r+i[a].duration;n>Zi&&(n=Zi);n-r<=0&&(n=r+.25);for(let i=0;i<t.length;i++){const a=t[i];if(!gn(a)){this.updateId3CueEnds(r,e);const t=Yi(s,r,n,a,e);t&&this.id3Track.addCue(t)}}}}}updateId3CueEnds(e,t){var r;const n=null==(r=this.id3Track)?void 0:r.cues;if(n)for(let i=n.length;i--;){const r=n[i];r.type===t&&r.startTime<e&&r.endTime===Zi&&(r.endTime=e)}}onBufferFlushing(e,t){let{startOffset:r,endOffset:n,type:i}=t;const{id3Track:s,hls:a}=this;if(!a)return;const{config:{enableEmsgMetadataCues:o,enableID3MetadataCues:l}}=a;if(s&&(o||l)){let e;e="audio"===i?e=>e.type===Xi&&l:"video"===i?e=>e.type===$i&&o:e=>e.type===Xi&&l||e.type===$i&&o,qi(s,r,n,e)}}onLevelUpdated(e,t){let{details:r}=t;if(!this.media||!r.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{dateRangeCuesAppended:n,id3Track:i}=this,{dateRanges:s}=r,a=Object.keys(s);if(i){const e=Object.keys(n).filter((e=>!a.includes(e)));for(let t=e.length;t--;){const r=e[t];Object.keys(n[r].cues).forEach((e=>{i.removeCue(n[r].cues[e])})),delete n[r]}}const o=r.fragments[r.fragments.length-1];if(0===a.length||!Er(null==o?void 0:o.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const l=o.programDateTime/1e3-o.start,c=Wi();for(let f=0;f<a.length;f++){const e=a[f],t=s[e],r=Qi(t.startDate,l),i=n[e],o=(null==i?void 0:i.cues)||{};let p=(null==i?void 0:i.durationKnown)||!1,h=Zi;const m=t.endDate;if(m)h=Qi(m,l),p=!0;else if(t.endOnNext&&!p){const e=a.reduce(((e,r)=>{if(r!==t.id){const n=s[r];if(n.class===t.class&&n.startDate>t.startDate&&(!e||t.startDate<e.startDate))return n}return e}),null);e&&(h=Qi(e.startDate,l),p=!0)}const g=Object.keys(t.attr);for(let n=0;n<g.length;n++){const s=g[n];if("ID"===(d=s)||"CLASS"===d||"START-DATE"===d||"DURATION"===d||"END-DATE"===d||"END-ON-NEXT"===d)continue;const a=o[s];if(a)p&&!i.durationKnown&&(a.endTime=h);else if(c){let n=t.attr[s];Br(s)&&(u=n,n=Uint8Array.from(u.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer);const i=Yi(c,r,h,{key:s,data:n},zi);i&&(i.id=e,this.id3Track.addCue(i),o[s]=i)}}n[e]={cues:o,dateRange:t,durationKnown:p}}var u,d}}class es{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=()=>this.timeupdate(),this.hls=e,this.config=e.config,this.registerListeners()}get latency(){return this._latency||0}get maxLatency(){const{config:e,levelDetails:t}=this;return void 0!==e.liveMaxLatencyDuration?e.liveMaxLatencyDuration:t?e.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){const{levelDetails:e}=this;if(null===e)return null;const{holdBack:t,partHoldBack:r,targetduration:n}=e,{liveSyncDuration:i,liveSyncDurationCount:s,lowLatencyMode:a}=this.config,o=this.hls.userConfig;let l=a&&r||t;(o.liveSyncDuration||o.liveSyncDurationCount||0===l)&&(l=void 0!==i?i:s*n);const c=n;return l+Math.min(1*this.stallCount,c)}get liveSyncPosition(){const e=this.estimateLiveEdge(),t=this.targetLatency,r=this.levelDetails;if(null===e||null===t||null===r)return null;const n=r.edge,i=e-t-this.edgeStalled,s=n-r.totalduration,a=n-(this.config.lowLatencyMode&&r.partTarget||r.targetduration);return Math.min(Math.max(s,i),a)}get drift(){const{levelDetails:e}=this;return null===e?1:e.drift}get edgeStalled(){const{levelDetails:e}=this;if(null===e)return 0;const t=3*(this.config.lowLatencyMode&&e.partTarget||e.targetduration);return Math.max(e.age-t,0)}get forwardBufferLength(){const{media:e,levelDetails:t}=this;if(!e||!t)return 0;const r=e.buffered.length;return(r?e.buffered.end(r-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null}registerListeners(){this.hls.on(Rr.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(Rr.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(Rr.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(Rr.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(Rr.ERROR,this.onError,this)}unregisterListeners(){this.hls.off(Rr.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(Rr.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(Rr.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(Rr.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(Rr.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)}onManifestLoading(){this.levelDetails=null,this._latency=null,this.stallCount=0}onLevelUpdated(e,t){let{details:r}=t;this.levelDetails=r,r.advanced&&this.timeupdate(),!r.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)}onError(e,t){var r;t.details===Ar.BUFFER_STALLED_ERROR&&(this.stallCount++,null!=(r=this.levelDetails)&&r.live&&xr.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))}timeupdate(){const{media:e,levelDetails:t}=this;if(!e||!t)return;this.currentTime=e.currentTime;const r=this.computeLatency();if(null===r)return;this._latency=r;const{lowLatencyMode:n,maxLiveSyncPlaybackRate:i}=this.config;if(!n||1===i||!t.live)return;const s=this.targetLatency;if(null===s)return;const a=r-s;if(a<Math.min(this.maxLatency,s+t.targetduration)&&a>.05&&this.forwardBufferLength>1){const t=Math.min(2,Math.max(1,i)),r=Math.round(2/(1+Math.exp(-.75*a-this.edgeStalled))*20)/20;e.playbackRate=Math.min(t,Math.max(1,r))}else 1!==e.playbackRate&&0!==e.playbackRate&&(e.playbackRate=1)}estimateLiveEdge(){const{levelDetails:e}=this;return null===e?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return null===e?null:e-this.currentTime}}const ts=["NONE","TYPE-0","TYPE-1",null];const rs=["SDR","PQ","HLG"];var ns="",is="YES",ss="v2";function as(e){const{canSkipUntil:t,canSkipDateRanges:r,age:n}=e;return t&&n<t/2?r?ss:is:ns}class os{constructor(e,t,r){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=r}addDirectives(e){const t=new self.URL(e);return void 0!==this.msn&&t.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class ls{constructor(e){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter((e=>!!e)).map((e=>e.substring(0,4))).join(","),this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return cs(this._audioGroups,e)}hasSubtitleGroup(e){return cs(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,t){if(t)if("audio"===e){let e=this._audioGroups;e||(e=this._audioGroups=[]),-1===e.indexOf(t)&&e.push(t)}else if("text"===e){let e=this._subtitleGroups;e||(e=this._subtitleGroups=[]),-1===e.indexOf(t)&&e.push(t)}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return null==(e=this.audioGroups)?void 0:e[0]}get textGroupId(){var e;return null==(e=this.subtitleGroups)?void 0:e[0]}addFallback(){}}function cs(e,t){return!(!t||!e)&&-1!==e.indexOf(t)}function us(e,t){const r=t.startPTS;if(Er(r)){let n,i=0;t.sn>e.sn?(i=r-e.start,n=e):(i=e.start-r,n=t),n.duration!==i&&(n.duration=i)}else if(t.sn>e.sn){e.cc===t.cc&&e.minEndPTS?t.start=e.start+(e.minEndPTS-e.start):t.start=e.start+e.duration}else t.start=Math.max(e.start-t.duration,0)}function ds(e,t,r,n,i,s){n-r<=0&&(xr.warn("Fragment should have a positive duration",t),n=r+t.duration,s=i+t.duration);let a=r,o=n;const l=t.startPTS,c=t.endPTS;if(Er(l)){const e=Math.abs(l-r);Er(t.deltaPTS)?t.deltaPTS=Math.max(e,t.deltaPTS):t.deltaPTS=e,a=Math.max(r,l),r=Math.min(r,l),i=Math.min(i,t.startDTS),o=Math.min(n,c),n=Math.max(n,c),s=Math.max(s,t.endDTS)}const u=r-t.start;0!==t.start&&(t.start=r),t.duration=n-t.start,t.startPTS=r,t.maxStartPTS=a,t.startDTS=i,t.endPTS=n,t.minEndPTS=o,t.endDTS=s;const d=t.sn;if(!e||d<e.startSN||d>e.endSN)return 0;let f;const p=d-e.startSN,h=e.fragments;for(h[p]=t,f=p;f>0;f--)us(h[f],h[f-1]);for(f=p;f<h.length-1;f++)us(h[f],h[f+1]);return e.fragmentHint&&us(h[h.length-1],e.fragmentHint),e.PTSKnown=e.alignedSliding=!0,u}function fs(e,t){let r=null;const n=e.fragments;for(let l=n.length-1;l>=0;l--){const e=n[l].initSegment;if(e){r=e;break}}e.fragmentHint&&delete e.fragmentHint.endPTS;let i,s=0;if(function(e,t,r){const n=t.skippedSegments,i=Math.max(e.startSN,t.startSN)-t.startSN,s=(e.fragmentHint?1:0)+(n?t.endSN:Math.min(e.endSN,t.endSN))-t.startSN,a=t.startSN-e.startSN,o=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,l=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments;for(let c=i;c<=s;c++){const e=l[a+c];let i=o[c];n&&!i&&c<n&&(i=t.fragments[c]=e),e&&i&&r(e,i)}}(e,t,((e,n)=>{e.relurl&&(s=e.cc-n.cc),Er(e.startPTS)&&Er(e.endPTS)&&(n.start=n.startPTS=e.startPTS,n.startDTS=e.startDTS,n.maxStartPTS=e.maxStartPTS,n.endPTS=e.endPTS,n.endDTS=e.endDTS,n.minEndPTS=e.minEndPTS,n.duration=e.endPTS-e.startPTS,n.duration&&(i=n),t.PTSKnown=t.alignedSliding=!0),n.elementaryStreams=e.elementaryStreams,n.loader=e.loader,n.stats=e.stats,e.initSegment&&(n.initSegment=e.initSegment,r=e.initSegment)})),r){(t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments).forEach((e=>{var t;!e||e.initSegment&&e.initSegment.relurl!==(null==(t=r)?void 0:t.relurl)||(e.initSegment=r)}))}if(t.skippedSegments)if(t.deltaUpdateFailed=t.fragments.some((e=>!e)),t.deltaUpdateFailed){xr.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let e=t.skippedSegments;e--;)t.fragments.shift();t.startSN=t.fragments[0].sn,t.startCC=t.fragments[0].cc}else t.canSkipDateRanges&&(t.dateRanges=function(e,t,r){const n=vr({},e);r&&r.forEach((e=>{delete n[e]}));return Object.keys(t).forEach((e=>{const r=new Pr(t[e].attr,n[e]);r.isValid?n[e]=r:xr.warn('Ignoring invalid Playlist Delta Update DATERANGE tag: "'.concat(JSON.stringify(t[e].attr),'"'))})),n}(e.dateRanges,t.dateRanges,t.recentlyRemovedDateranges));const a=t.fragments;if(s){xr.warn("discontinuity sliding from playlist, take drift into account");for(let e=0;e<a.length;e++)a[e].cc+=s}t.skippedSegments&&(t.startCC=t.fragments[0].cc),function(e,t,r){if(e&&t){let n=0;for(let i=0,s=e.length;i<=s;i++){const s=e[i],a=t[i+n];s&&a&&s.index===a.index&&s.fragment.sn===a.fragment.sn?r(s,a):n--}}}(e.partList,t.partList,((e,t)=>{t.elementaryStreams=e.elementaryStreams,t.stats=e.stats})),i?ds(t,i,i.startPTS,i.endPTS,i.startDTS,i.endDTS):ps(e,t),a.length&&(t.totalduration=t.edge-a[0].start),t.driftStartTime=e.driftStartTime,t.driftStart=e.driftStart;const o=t.advancedDateTime;if(t.advanced&&o){const e=t.edge;t.driftStart||(t.driftStartTime=o,t.driftStart=e),t.driftEndTime=o,t.driftEnd=e}else t.driftEndTime=e.driftEndTime,t.driftEnd=e.driftEnd,t.advancedDateTime=e.advancedDateTime}function ps(e,t){const r=t.startSN+t.skippedSegments-e.startSN,n=e.fragments;r<0||r>=n.length||hs(t,n[r].start)}function hs(e,t){if(t){const r=e.fragments;for(let n=e.skippedSegments;n<r.length;n++)r[n].start+=t;e.fragmentHint&&(e.fragmentHint.start+=t)}}function ms(e,t,r){var n;return null!=e&&e.details?gs(null==(n=e.details)?void 0:n.partList,t,r):null}function gs(e,t,r){if(e)for(let n=e.length;n--;){const i=e[n];if(i.index===r&&i.fragment.sn===t)return i}return null}function ys(e){e.forEach(((e,t)=>{const{details:r}=e;null!=r&&r.fragments&&r.fragments.forEach((e=>{e.level=t}))}))}function vs(e){switch(e.details){case Ar.FRAG_LOAD_TIMEOUT:case Ar.KEY_LOAD_TIMEOUT:case Ar.LEVEL_LOAD_TIMEOUT:case Ar.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function Es(e,t){const r=vs(t);return e.default["".concat(r?"timeout":"error","Retry")]}function bs(e,t){const r="linear"===e.backoff?1:Math.pow(2,t);return Math.min(r*e.retryDelayMs,e.maxRetryDelayMs)}function Ts(e){return mr(mr({},e),{errorRetry:null,timeoutRetry:null})}function Rs(e,t,r,n){if(!e)return!1;const i=null==n?void 0:n.code,s=t<e.maxNumRetry&&(function(e){return 0===e&&!1===navigator.onLine||!!e&&(e<400||e>499)}(i)||!!r);return e.shouldRetry?e.shouldRetry(e,t,r,n,s):s}const Ss=function(e,t){let r=0,n=e.length-1,i=null,s=null;for(;r<=n;){i=(r+n)/2|0,s=e[i];const a=t(s);if(a>0)r=i+1;else{if(!(a<0))return s;n=i-1}}return null};function As(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.005,s=null;if(e){s=t[e.sn-t[0].sn+1]||null;const n=e.endDTS-r;n>0&&n<15e-7&&(r+=15e-7)}else 0===r&&0===t[0].start&&(s=t[0]);if(s&&((!e||e.level===s.level)&&0===Ls(r,n,s)||function(e,t,r){if(t&&0===t.start&&t.level<e.level&&(t.endPTS||0)>0){const n=t.tagList.reduce(((e,t)=>("INF"===t[0]&&(e+=parseFloat(t[1])),e)),r);return e.start<=n}return!1}(s,e,Math.min(i,n))))return s;const a=Ss(t,Ls.bind(null,r,n));return!a||a===e&&s?s:a}function Ls(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;if(r.start<=e&&r.start+r.duration>e)return 0;const n=Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.start+r.duration-n<=e?1:r.start-n>e&&r.start?-1:0}function ws(e,t,r){const n=1e3*Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return(r.endProgramDateTime||0)-n>e}var Cs=0,ks=2,xs=3,_s=5,Ds=0,Is=1,Bs=2;class Ps{constructor(e,t){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=xr.log.bind(xr,"".concat(t,":")),this.warn=xr.warn.bind(xr,"".concat(t,":")),this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){-1!==this.timer&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t,r){const n=null==t?void 0:t.renditionReports;if(n){let s=-1;for(let r=0;r<n.length;r++){const a=n[r];let o;try{o=new self.URL(a.URI,t.url).href}catch(i){xr.warn("Could not construct new URL for Rendition Report: ".concat(i)),o=a.URI||""}if(o===e){s=r;break}o===e.substring(0,o.length)&&(s=r)}if(-1!==s){const e=n[s],i=parseInt(e["LAST-MSN"])||(null==t?void 0:t.lastPartSn);let a=parseInt(e["LAST-PART"])||(null==t?void 0:t.lastPartIndex);if(this.hls.config.lowLatencyMode){const e=Math.min(t.age-t.partTarget,t.targetduration);a>=0&&e>t.partTarget&&(a+=1)}const o=r&&as(r);return new os(i,a>=0?a:void 0,o)}}}loadPlaylist(e){-1===this.requestScheduled&&(this.requestScheduled=self.performance.now())}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}shouldReloadPlaylist(e){return-1===this.timer&&-1===this.requestScheduled&&this.shouldLoadPlaylist(e)}playlistLoaded(e,t,r){const{details:n,stats:i}=t,s=self.performance.now(),a=i.loading.first?Math.max(0,s-i.loading.first):0;if(n.advancedDateTime=Date.now()-a,n.live||null!=r&&r.live){if(n.reloaded(r),r&&this.log("live playlist ".concat(e," ").concat(n.advanced?"REFRESHED "+n.lastPartSn+"-"+n.lastPartIndex:n.updated?"UPDATED":"MISSED")),r&&n.fragments.length>0&&fs(r,n),!this.canLoad||!n.live)return;let a,o,l;if(n.canBlockReload&&n.endSN&&n.advanced){const e=this.hls.config.lowLatencyMode,i=n.lastPartSn,s=n.endSN,c=n.lastPartIndex,u=i===s;-1!==c?(o=u?s+1:i,l=u?e?0:c:c+1):o=s+1;const d=n.age,f=d+n.ageHeader;let p=Math.min(f-n.partTarget,1.5*n.targetduration);if(p>0){if(r&&p>r.tuneInGoal)this.warn("CDN Tune-in goal increased from: ".concat(r.tuneInGoal," to: ").concat(p," with playlist age: ").concat(n.age)),p=0;else{const e=Math.floor(p/n.targetduration);if(o+=e,void 0!==l){l+=Math.round(p%n.targetduration/n.partTarget)}this.log("CDN Tune-in age: ".concat(n.ageHeader,"s last advanced ").concat(d.toFixed(2),"s goal: ").concat(p," skip sn ").concat(e," to part ").concat(l))}n.tuneInGoal=p}if(a=this.getDeliveryDirectives(n,t.deliveryDirectives,o,l),e||!u)return void this.loadPlaylist(a)}else(n.canBlockReload||n.canSkipUntil)&&(a=this.getDeliveryDirectives(n,t.deliveryDirectives,o,l));const c=this.hls.mainForwardBufferInfo,u=c?c.end-c.len:0,d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,r=1e3*e.targetduration;if(e.updated){const n=e.fragments,i=4;if(n.length&&r*i>t){const e=1e3*n[n.length-1].duration;e<r&&(r=e)}}else r/=2;return Math.round(r)}(n,1e3*(n.edge-u));n.updated&&s>this.requestScheduled+d&&(this.requestScheduled=i.loading.start),void 0!==o&&n.canBlockReload?this.requestScheduled=i.loading.first+d-(1e3*n.partTarget||1e3):-1===this.requestScheduled||this.requestScheduled+d<s?this.requestScheduled=s:this.requestScheduled-s<=0&&(this.requestScheduled+=d);let f=this.requestScheduled-s;f=Math.max(0,f),this.log("reload live playlist ".concat(e," in ").concat(Math.round(f)," ms")),this.timer=self.setTimeout((()=>this.loadPlaylist(a)),f)}else this.clearTimer()}getDeliveryDirectives(e,t,r,n){let i=as(e);return null!=t&&t.skip&&e.deltaUpdateFailed&&(r=t.msn,n=t.part,i=ns),new os(r,n,i)}checkRetry(e){const t=e.details,r=vs(e),n=e.errorAction,{action:i,retryCount:s=0,retryConfig:a}=n||{},o=!!n&&!!a&&(i===_s||!n.resolved&&i===ks);if(o){var l;if(this.requestScheduled=-1,s>=a.maxNumRetry)return!1;if(r&&null!=(l=e.context)&&l.deliveryDirectives)this.warn("Retrying playlist loading ".concat(s+1,"/").concat(a.maxNumRetry,' after "').concat(t,'" without delivery-directives')),this.loadPlaylist();else{const e=bs(a,s);this.timer=self.setTimeout((()=>this.loadPlaylist()),e),this.warn("Retrying playlist loading ".concat(s+1,"/").concat(a.maxNumRetry,' after "').concat(t,'" in ').concat(e,"ms"))}e.levelRetry=!0,n.resolved=!0}return o}}class Us{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=r}sample(e,t){const r=Math.pow(this.alpha_,e);this.estimate_=t*(1-r)+r*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class Ns{constructor(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Us(e),this.fast_=new Us(t),this.defaultTTFB_=n,this.ttfb_=new Us(e)}update(e,t){const{slow_:r,fast_:n,ttfb_:i}=this;r.halfLife!==e&&(this.slow_=new Us(e,r.getEstimate(),r.getTotalWeight())),n.halfLife!==t&&(this.fast_=new Us(t,n.getEstimate(),n.getTotalWeight())),i.halfLife!==e&&(this.ttfb_=new Us(e,i.getEstimate(),i.getTotalWeight()))}sample(e,t){const r=(e=Math.max(e,this.minDelayMs_))/1e3,n=8*t/r;this.fast_.sample(r,n),this.slow_.sample(r,n)}sampleTTFB(e){const t=e/1e3,r=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(r,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}destroy(){}}const Os={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]},Ks={};function Fs(e,t,r,n,i,s){const a=e.audioCodec?e.audioGroups:null,o=null==s?void 0:s.audioCodec,l=null==s?void 0:s.channels,c=l?parseInt(l):o?1/0:2;let u=null;if(null!=a&&a.length)try{u=1===a.length&&a[0]?t.groups[a[0]].channels:a.reduce(((e,r)=>{if(r){const n=t.groups[r];if(!n)throw new Error("Audio track group ".concat(r," not found"));Object.keys(n.channels).forEach((t=>{e[t]=(e[t]||0)+n.channels[t]}))}return e}),{2:0})}catch(d){return!0}return void 0!==e.videoCodec&&(e.width>1920&&e.height>1088||e.height>1920&&e.width>1088||e.frameRate>Math.max(n,30)||"SDR"!==e.videoRange&&e.videoRange!==r||e.bitrate>Math.max(i,8e6))||!!u&&Er(c)&&Object.keys(u).some((e=>parseInt(e)>c))}function Ms(e,t,r){const n=e.videoCodec,i=e.audioCodec;if(!n||!i||!r)return Promise.resolve(Os);const s={width:e.width,height:e.height,bitrate:Math.ceil(Math.max(.9*e.bitrate,e.averageBitrate)),framerate:e.frameRate||30},a=e.videoRange;"SDR"!==a&&(s.transferFunction=a.toLowerCase());const o=n.split(",").map((e=>({type:"media-source",video:mr(mr({},s),{},{contentType:di(e,"video")})})));return i&&e.audioGroups&&e.audioGroups.forEach((e=>{var r;e&&(null==(r=t.groups[e])||r.tracks.forEach((t=>{if(t.groupId===e){const e=t.channels||"",r=parseFloat(e);Er(r)&&r>2&&o.push.apply(o,i.split(",").map((e=>({type:"media-source",audio:{contentType:di(e,"audio"),channels:""+r}}))))}})))})),Promise.all(o.map((e=>{const t=function(e){const{audio:t,video:r}=e,n=r||t;if(n){const e=n.contentType.split('"')[1];if(r)return"r".concat(r.height,"x").concat(r.width,"f").concat(Math.ceil(r.framerate)).concat(r.transferFunction||"sd","_").concat(e,"_").concat(Math.ceil(r.bitrate/1e5));if(t)return"c".concat(t.channels).concat(t.spatialRendering?"s":"n","_").concat(e)}return""}(e);return Ks[t]||(Ks[t]=r.decodingInfo(e))}))).then((e=>({supported:!e.some((e=>!e.supported)),configurations:o,decodingInfoResults:e}))).catch((e=>({supported:!1,configurations:o,decodingInfoResults:[],error:e})))}function Vs(e,t){let r=!1,n=[];return e&&(r="SDR"!==e,n=[e]),t&&(n=t.allowedVideoRanges||rs.slice(0),r=void 0!==t.preferHDR?t.preferHDR:function(){if("function"===typeof matchMedia){const e=matchMedia("(dynamic-range: high)"),t=matchMedia("bad query");if(e.media!==t.media)return!0===e.matches}return!1}(),n=r?n.filter((e=>"SDR"!==e)):["SDR"]),{preferHDR:r,allowedVideoRanges:n}}function js(e,t){xr.log('[abr] start candidates with "'.concat(e,'" ignored because ').concat(t))}function Gs(e,t,r){if("attrs"in e){const r=t.indexOf(e);if(-1!==r)return r}for(let n=0;n<t.length;n++){if(qs(e,t[n],r))return n}return-1}function qs(e,t,r){const{groupId:n,name:i,lang:s,assocLang:a,characteristics:o,default:l}=e,c=e.forced;return(void 0===n||t.groupId===n)&&(void 0===i||t.name===i)&&(void 0===s||t.lang===s)&&(void 0===s||t.assocLang===a)&&(void 0===l||t.default===l)&&(void 0===c||t.forced===c)&&(void 0===o||function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const r=e.split(","),n=t.split(",");return r.length===n.length&&!r.some((e=>-1===n.indexOf(e)))}(o,t.characteristics))&&(void 0===r||r(e,t))}function Hs(e,t){const{audioCodec:r,channels:n}=e;return(void 0===r||(t.audioCodec||"").substring(0,4)===r.substring(0,4))&&(void 0===n||n===(t.channels||"2"))}function Xs(e,t,r){for(let n=t;n;n--)if(r(e[n]))return n;for(let n=t+1;n<e.length;n++)if(r(e[n]))return n;return-1}class zs{constructor(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return!this._tickInterval&&(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)}clearNextTick(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)}tick(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}var $s="NOT_LOADED",Ws="APPENDING",Ys="PARTIAL",Zs="OK";class Qs{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(Rr.BUFFER_APPENDED,this.onBufferAppended,this),e.on(Rr.FRAG_BUFFERED,this.onFragBuffered,this),e.on(Rr.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:e}=this;e.off(Rr.BUFFER_APPENDED,this.onBufferAppended,this),e.off(Rr.FRAG_BUFFERED,this.onFragBuffered,this),e.off(Rr.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,t){const r=this.activePartLists[t];if(r)for(let n=r.length;n--;){const t=r[n];if(!t)break;const i=t.end;if(t.start<=e&&null!==i&&e<=i)return t}return this.getBufferedFrag(e,t)}getBufferedFrag(e,t){const{fragments:r}=this,n=Object.keys(r);for(let i=n.length;i--;){const s=r[n[i]];if((null==s?void 0:s.body.type)===t&&s.buffered){const t=s.body;if(t.start<=e&&e<=t.end)return t}}return null}detectEvictedFragments(e,t,r,n){this.timeRanges&&(this.timeRanges[e]=t);const i=(null==n?void 0:n.fragment.sn)||-1;Object.keys(this.fragments).forEach((n=>{const s=this.fragments[n];if(!s)return;if(i>=s.body.sn)return;if(!s.buffered&&!s.loaded)return void(s.body.type===r&&this.removeFragment(s.body));const a=s.range[e];a&&a.time.some((e=>{const r=!this.isTimeBuffered(e.startPTS,e.endPTS,t);return r&&this.removeFragment(s.body),r}))}))}detectPartialFragments(e){const t=this.timeRanges,{frag:r,part:n}=e;if(!t||"initSegment"===r.sn)return;const i=ea(r),s=this.fragments[i];if(!s||s.buffered&&r.gap)return;const a=!r.relurl;if(Object.keys(t).forEach((e=>{const i=r.elementaryStreams[e];if(!i)return;const o=t[e],l=a||!0===i.partial;s.range[e]=this.getBufferedTimes(r,n,l,o)})),s.loaded=null,Object.keys(s.range).length){s.buffered=!0;(s.body.endList=r.endList||s.body.endList)&&(this.endListFragments[s.body.type]=s),Js(s)||this.removeParts(r.sn-1,r.type)}else this.removeFragment(s.body)}removeParts(e,t){const r=this.activePartLists[t];r&&(this.activePartLists[t]=r.filter((t=>t.fragment.sn>=e)))}fragBuffered(e,t){const r=ea(e);let n=this.fragments[r];!n&&t&&(n=this.fragments[r]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),n&&(n.loaded=null,n.buffered=!0)}getBufferedTimes(e,t,r,n){const i={time:[],partial:r},s=e.start,a=e.end,o=e.minEndPTS||a,l=e.maxStartPTS||s;for(let c=0;c<n.length;c++){const e=n.start(c)-this.bufferPadding,t=n.end(c)+this.bufferPadding;if(l>=e&&o<=t){i.time.push({startPTS:Math.max(s,n.start(c)),endPTS:Math.min(a,n.end(c))});break}if(s<t&&a>e){const e=Math.max(s,n.start(c)),t=Math.min(a,n.end(c));t>e&&(i.partial=!0,i.time.push({startPTS:e,endPTS:t}))}else if(a<=e)break}return i}getPartialFragment(e){let t,r,n,i=null,s=0;const{bufferPadding:a,fragments:o}=this;return Object.keys(o).forEach((l=>{const c=o[l];c&&Js(c)&&(r=c.body.start-a,n=c.body.end+a,e>=r&&e<=n&&(t=Math.min(e-r,n-e),s<=t&&(i=c.body,s=t)))})),i}isEndListAppended(e){const t=this.endListFragments[e];return void 0!==t&&(t.buffered||Js(t))}getState(e){const t=ea(e),r=this.fragments[t];return r?r.buffered?Js(r)?Ys:Zs:Ws:$s}isTimeBuffered(e,t,r){let n,i;for(let s=0;s<r.length;s++){if(n=r.start(s)-this.bufferPadding,i=r.end(s)+this.bufferPadding,e>=n&&t<=i)return!0;if(t<=n)return!1}return!1}onFragLoaded(e,t){const{frag:r,part:n}=t;if("initSegment"===r.sn||r.bitrateTest)return;const i=n?null:t,s=ea(r);this.fragments[s]={body:r,appendedPTS:null,loaded:i,buffered:!1,range:Object.create(null)}}onBufferAppended(e,t){const{frag:r,part:n,timeRanges:i}=t;if("initSegment"===r.sn)return;const s=r.type;if(n){let e=this.activePartLists[s];e||(this.activePartLists[s]=e=[]),e.push(n)}this.timeRanges=i,Object.keys(i).forEach((e=>{const t=i[e];this.detectEvictedFragments(e,t,s,n)}))}onFragBuffered(e,t){this.detectPartialFragments(t)}hasFragment(e){const t=ea(e);return!!this.fragments[t]}hasParts(e){var t;return!(null==(t=this.activePartLists[e])||!t.length)}removeFragmentsInRange(e,t,r,n,i){n&&!this.hasGaps||Object.keys(this.fragments).forEach((s=>{const a=this.fragments[s];if(!a)return;const o=a.body;o.type!==r||n&&!o.gap||o.start<t&&o.end>e&&(a.buffered||i)&&this.removeFragment(o)}))}removeFragment(e){const t=ea(e);e.stats.loaded=0,e.clearElementaryStreamInfo();const r=this.activePartLists[e.type];if(r){const t=e.sn;this.activePartLists[e.type]=r.filter((e=>e.fragment.sn!==t))}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1}}function Js(e){var t,r,n;return e.buffered&&(e.body.gap||(null==(t=e.range.video)?void 0:t.partial)||(null==(r=e.range.audio)?void 0:r.partial)||(null==(n=e.range.audiovideo)?void 0:n.partial))}function ea(e){return"".concat(e.type,"_").concat(e.level,"_").concat(e.sn)}const ta={length:0,start:()=>0,end:()=>0};class ra{static isBuffered(e,t){try{if(e){const r=ra.getBuffered(e);for(let e=0;e<r.length;e++)if(t>=r.start(e)&&t<=r.end(e))return!0}}catch(r){}return!1}static bufferInfo(e,t,r){try{if(e){const n=ra.getBuffered(e),i=[];let s;for(s=0;s<n.length;s++)i.push({start:n.start(s),end:n.end(s)});return this.bufferedInfo(i,t,r)}}catch(n){}return{len:0,start:t,end:t,nextStart:void 0}}static bufferedInfo(e,t,r){t=Math.max(0,t),e.sort((function(e,t){const r=e.start-t.start;return r||t.end-e.end}));let n=[];if(r)for(let l=0;l<e.length;l++){const t=n.length;if(t){const i=n[t-1].end;e[l].start-i<r?e[l].end>i&&(n[t-1].end=e[l].end):n.push(e[l])}else n.push(e[l])}else n=e;let i,s=0,a=t,o=t;for(let l=0;l<n.length;l++){const e=n[l].start,c=n[l].end;if(t+r>=e&&t<c)a=e,o=c,s=o-t;else if(t+r<e){i=e;break}}return{len:s,start:a||0,end:o||0,nextStart:i}}static getBuffered(e){try{return e.buffered}catch(Pt){return xr.log("failed to get media.buffered",Pt),ta}}}class na{constructor(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=e,this.sn=t,this.id=r,this.size=n,this.part=i,this.partial=s}}function ia(e,t){for(let n=0,i=e.length;n<i;n++){var r;if((null==(r=e[n])?void 0:r.cc)===t)return e[n]}return null}function sa(e,t){if(e){const r=e.start+t;e.start=e.startPTS=r,e.endPTS=r+e.duration}}function aa(e,t){const r=t.fragments;for(let n=0,i=r.length;n<i;n++)sa(r[n],e);t.fragmentHint&&sa(t.fragmentHint,e),t.alignedSliding=!0}function oa(e,t,r){t&&(!function(e,t,r){if(function(e,t,r){return!(!t||!(r.endCC>r.startCC||e&&e.cc<r.startCC))}(e,r,t)){const e=function(e,t){const r=e.fragments,n=t.fragments;if(!n.length||!r.length)return void xr.log("No fragments to align");const i=ia(r,n[0].cc);if(i&&(!i||i.startPTS))return i;xr.log("No frag in previous level to align on")}(r,t);e&&Er(e.start)&&(xr.log("Adjusting PTS using last level due to CC increase within current level ".concat(t.url)),aa(e.start,t))}}(e,r,t),!r.alignedSliding&&t&&la(r,t),r.alignedSliding||!t||r.skippedSegments||ps(t,r))}function la(e,t){if(!e.hasProgramDateTime||!t.hasProgramDateTime)return;const r=e.fragments,n=t.fragments;if(!r.length||!n.length)return;let i,s;const a=Math.min(t.endCC,e.endCC);t.startCC<a&&e.startCC<a&&(i=ia(n,a),s=ia(r,a)),i&&s||(i=n[Math.floor(n.length/2)],s=ia(r,i.cc)||r[Math.floor(r.length/2)]);const o=i.programDateTime,l=s.programDateTime;if(!o||!l)return;aa((l-o)/1e3-(s.start-i.start),e)}const ca=Math.pow(2,17);class ua{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){const r=e.url;if(!r)return Promise.reject(new pa({type:Sr.NETWORK_ERROR,details:Ar.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error("Fragment does not have a ".concat(r?"part list":"url")),networkDetails:null}));this.abort();const n=this.config,i=n.fLoader,s=n.loader;return new Promise(((a,o)=>{if(this.loader&&this.loader.destroy(),e.gap){if(e.tagList.some((e=>"GAP"===e[0])))return void o(fa(e));e.gap=!1}const l=this.loader=e.loader=i?new i(n):new s(n),c=da(e),u=Ts(n.fragLoadPolicy.default),d={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:"initSegment"===e.sn?1/0:ca};e.stats=l.stats,l.load(c,d,{onSuccess:(t,r,n,i)=>{this.resetLoader(e,l);let s=t.data;n.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(s.slice(0,16)),s=s.slice(16)),a({frag:e,part:null,payload:s,networkDetails:i})},onError:(t,n,i,s)=>{this.resetLoader(e,l),o(new pa({type:Sr.NETWORK_ERROR,details:Ar.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:mr({url:r,data:void 0},t),error:new Error("HTTP Error ".concat(t.code," ").concat(t.text)),networkDetails:i,stats:s}))},onAbort:(t,r,n)=>{this.resetLoader(e,l),o(new pa({type:Sr.NETWORK_ERROR,details:Ar.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:n,stats:t}))},onTimeout:(t,r,n)=>{this.resetLoader(e,l),o(new pa({type:Sr.NETWORK_ERROR,details:Ar.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error("Timeout after ".concat(d.timeout,"ms")),networkDetails:n,stats:t}))},onProgress:(r,n,i,s)=>{t&&t({frag:e,part:null,payload:i,networkDetails:s})}})}))}loadPart(e,t,r){this.abort();const n=this.config,i=n.fLoader,s=n.loader;return new Promise(((a,o)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap)return void o(fa(e,t));const l=this.loader=e.loader=i?new i(n):new s(n),c=da(e,t),u=Ts(n.fragLoadPolicy.default),d={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:ca};t.stats=l.stats,l.load(c,d,{onSuccess:(n,i,s,o)=>{this.resetLoader(e,l),this.updateStatsFromPart(e,t);const c={frag:e,part:t,payload:n.data,networkDetails:o};r(c),a(c)},onError:(r,n,i,s)=>{this.resetLoader(e,l),o(new pa({type:Sr.NETWORK_ERROR,details:Ar.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:mr({url:c.url,data:void 0},r),error:new Error("HTTP Error ".concat(r.code," ").concat(r.text)),networkDetails:i,stats:s}))},onAbort:(r,n,i)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,l),o(new pa({type:Sr.NETWORK_ERROR,details:Ar.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:i,stats:r}))},onTimeout:(r,n,i)=>{this.resetLoader(e,l),o(new pa({type:Sr.NETWORK_ERROR,details:Ar.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error("Timeout after ".concat(d.timeout,"ms")),networkDetails:i,stats:r}))}})}))}updateStatsFromPart(e,t){const r=e.stats,n=t.stats,i=n.total;if(r.loaded+=n.loaded,i){const n=Math.round(e.duration/t.duration),s=Math.min(Math.round(r.loaded/i),n),a=(n-s)*Math.round(r.loaded/s);r.total=r.loaded+a}else r.total=Math.max(r.loaded,r.total);const s=r.loading,a=n.loading;s.start?s.first+=a.first-a.start:(s.start=a.start,s.first=a.first),s.end=a.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function da(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const r=t||e,n={frag:e,part:t,responseType:"arraybuffer",url:r.url,headers:{},rangeStart:0,rangeEnd:0},i=r.byteRangeStartOffset,s=r.byteRangeEndOffset;if(Er(i)&&Er(s)){var a;let t=i,r=s;if("initSegment"===e.sn&&"AES-128"===(null==(a=e.decryptdata)?void 0:a.method)){const e=s-i;e%16&&(r=s+(16-e%16)),0!==i&&(n.resetIV=!0,t=i-16)}n.rangeStart=t,n.rangeEnd=r}return n}function fa(e,t){const r=new Error("GAP ".concat(e.gap?"tag":"attribute"," found")),n={type:Sr.MEDIA_ERROR,details:Ar.FRAG_GAP,fatal:!1,frag:e,error:r,networkDetails:null};return t&&(n.part=t),(t||e).stats.aborted=!0,new pa(n)}class pa extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class ha{constructor(e,t){this.subtle=void 0,this.aesIV=void 0,this.subtle=e,this.aesIV=t}decrypt(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)}}class ma{constructor(e,t){this.subtle=void 0,this.key=void 0,this.subtle=e,this.key=t}expandKey(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}class ga{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const t=new DataView(e),r=new Uint32Array(4);for(let n=0;n<4;n++)r[n]=t.getUint32(4*n);return r}initTable(){const e=this.sBox,t=this.invSBox,r=this.subMix,n=r[0],i=r[1],s=r[2],a=r[3],o=this.invSubMix,l=o[0],c=o[1],u=o[2],d=o[3],f=new Uint32Array(256);let p=0,h=0,m=0;for(m=0;m<256;m++)f[m]=m<128?m<<1:m<<1^283;for(m=0;m<256;m++){let r=h^h<<1^h<<2^h<<3^h<<4;r=r>>>8^255&r^99,e[p]=r,t[r]=p;const o=f[p],m=f[o],g=f[m];let y=257*f[r]^16843008*r;n[p]=y<<24|y>>>8,i[p]=y<<16|y>>>16,s[p]=y<<8|y>>>24,a[p]=y,y=16843009*g^65537*m^257*o^16843008*p,l[r]=y<<24|y>>>8,c[r]=y<<16|y>>>16,u[r]=y<<8|y>>>24,d[r]=y,p?(p=o^f[f[f[g^o]]],h^=f[f[h]]):p=h=1}}expandKey(e){const t=this.uint8ArrayToUint32Array_(e);let r=!0,n=0;for(;n<t.length&&r;)r=t[n]===this.key[n],n++;if(r)return;this.key=t;const i=this.keySize=t.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);const s=this.ksRows=4*(i+6+1);let a,o;const l=this.keySchedule=new Uint32Array(s),c=this.invKeySchedule=new Uint32Array(s),u=this.sBox,d=this.rcon,f=this.invSubMix,p=f[0],h=f[1],m=f[2],g=f[3];let y,v;for(a=0;a<s;a++)a<i?y=l[a]=t[a]:(v=y,a%i===0?(v=v<<8|v>>>24,v=u[v>>>24]<<24|u[v>>>16&255]<<16|u[v>>>8&255]<<8|u[255&v],v^=d[a/i|0]<<24):i>6&&a%i===4&&(v=u[v>>>24]<<24|u[v>>>16&255]<<16|u[v>>>8&255]<<8|u[255&v]),l[a]=y=(l[a-i]^v)>>>0);for(o=0;o<s;o++)a=s-o,v=3&o?l[a]:l[a-4],c[o]=o<4||a<=4?v:p[u[v>>>24]]^h[u[v>>>16&255]]^m[u[v>>>8&255]]^g[u[255&v]],c[o]=c[o]>>>0}networkToHostOrderSwap(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}decrypt(e,t,r){const n=this.keySize+6,i=this.invKeySchedule,s=this.invSBox,a=this.invSubMix,o=a[0],l=a[1],c=a[2],u=a[3],d=this.uint8ArrayToUint32Array_(r);let f=d[0],p=d[1],h=d[2],m=d[3];const g=new Int32Array(e),y=new Int32Array(g.length);let v,E,b,T,R,S,A,L,w,C,k,x,_,D;const I=this.networkToHostOrderSwap;for(;t<g.length;){for(w=I(g[t]),C=I(g[t+1]),k=I(g[t+2]),x=I(g[t+3]),R=w^i[0],S=x^i[1],A=k^i[2],L=C^i[3],_=4,D=1;D<n;D++)v=o[R>>>24]^l[S>>16&255]^c[A>>8&255]^u[255&L]^i[_],E=o[S>>>24]^l[A>>16&255]^c[L>>8&255]^u[255&R]^i[_+1],b=o[A>>>24]^l[L>>16&255]^c[R>>8&255]^u[255&S]^i[_+2],T=o[L>>>24]^l[R>>16&255]^c[S>>8&255]^u[255&A]^i[_+3],R=v,S=E,A=b,L=T,_+=4;v=s[R>>>24]<<24^s[S>>16&255]<<16^s[A>>8&255]<<8^s[255&L]^i[_],E=s[S>>>24]<<24^s[A>>16&255]<<16^s[L>>8&255]<<8^s[255&R]^i[_+1],b=s[A>>>24]<<24^s[L>>16&255]<<16^s[R>>8&255]<<8^s[255&S]^i[_+2],T=s[L>>>24]<<24^s[R>>16&255]<<16^s[S>>8&255]<<8^s[255&A]^i[_+3],y[t]=I(v^f),y[t+1]=I(T^p),y[t+2]=I(b^h),y[t+3]=I(E^m),f=w,p=C,h=k,m=x,t+=4}return y.buffer}}class ya{constructor(e){let{removePKCS7Padding:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const e=self.crypto;e&&(this.subtle=e.subtle||e.webkitSubtle)}catch(Pt){}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;const r=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?function(e){const t=e.byteLength,r=t&&new DataView(e.buffer).getUint8(t-1);return r?cn(e,0,t-r):e}(r):r}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,r){return this.useSoftware?new Promise(((n,i)=>{this.softwareDecrypt(new Uint8Array(e),t,r);const s=this.flush();s?n(s.buffer):i(new Error("[softwareDecrypt] Failed to decrypt data"))})):this.webCryptoDecrypt(new Uint8Array(e),t,r)}softwareDecrypt(e,t,r){const{currentIV:n,currentResult:i,remainderData:s}=this;this.logOnce("JS AES decrypt"),s&&(e=Xn(s,e),this.remainderData=null);const a=this.getValidChunk(e);if(!a.length)return null;n&&(r=n);let o=this.softwareDecrypter;o||(o=this.softwareDecrypter=new ga),o.expandKey(t);const l=i;return this.currentResult=o.decrypt(a.buffer,0,r),this.currentIV=cn(a,-16).buffer,l||null}webCryptoDecrypt(e,t,r){if(this.key!==t||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,t,r));this.key=t,this.fastAesKey=new ma(this.subtle,t)}return this.fastAesKey.expandKey().then((t=>{if(!this.subtle)return Promise.reject(new Error("web crypto not initialized"));this.logOnce("WebCrypto AES decrypt");return new ha(this.subtle,new Uint8Array(r)).decrypt(e.buffer,t)})).catch((n=>(xr.warn("[decrypter]: WebCrypto Error, disable WebCrypto API, ".concat(n.name,": ").concat(n.message)),this.onWebCryptoError(e,t,r))))}onWebCryptoError(e,t,r){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,r);const n=this.flush();if(n)return n.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")}getValidChunk(e){let t=e;const r=e.length-e.length%16;return r!==e.length&&(t=cn(e,0,r),this.remainderData=cn(e,r)),t}logOnce(e){this.logEnabled&&(xr.log("[decrypter]: ".concat(e)),this.logEnabled=!1)}}const va=function(e){let t="";const r=e.length;for(let n=0;n<r;n++)t+="[".concat(e.start(n).toFixed(3),"-").concat(e.end(n).toFixed(3),"]");return t},Ea="STOPPED",ba="IDLE",Ta="KEY_LOADING",Ra="FRAG_LOADING",Sa="FRAG_LOADING_WAITING_RETRY",Aa="WAITING_TRACK",La="PARSING",wa="PARSED",Ca="ENDED",ka="ERROR",xa="WAITING_INIT_PTS",_a="WAITING_LEVEL";class Da extends zs{constructor(e,t,r,n,i){super(),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=Ea,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.loadedmetadata=!1,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.onvseeking=null,this.onvended=null,this.logPrefix="",this.log=void 0,this.warn=void 0,this.playlistType=i,this.logPrefix=n,this.log=xr.log.bind(xr,"".concat(n,":")),this.warn=xr.warn.bind(xr,"".concat(n,":")),this.hls=e,this.fragmentLoader=new ua(e.config),this.keyLoader=r,this.fragmentTracker=t,this.config=e.config,this.decrypter=new ya(e.config),e.on(Rr.MANIFEST_LOADED,this.onManifestLoaded,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;null!=e&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=Ea}_streamEnded(e,t){if(t.live||e.nextStart||!e.end||!this.media)return!1;const r=t.partList;if(null!=r&&r.length){const e=r[r.length-1];return ra.isBuffered(this.media,e.start+e.duration/2)}const n=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(n)}getLevelDetails(){var e;if(this.levels&&null!==this.levelLastLoaded)return null==(e=this.levelLastLoaded)?void 0:e.details}onMediaAttached(e,t){const r=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),r.addEventListener("seeking",this.onvseeking),r.addEventListener("ended",this.onvended);const n=this.config;this.levels&&n.autoStartLoad&&this.state===Ea&&this.startLoad(n.startPosition)}onMediaDetaching(){const e=this.media;null!=e&&e.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&this.onvseeking&&this.onvended&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}onMediaSeeking(){const{config:e,fragCurrent:t,media:r,mediaBuffer:n,state:i}=this,s=r?r.currentTime:0,a=ra.bufferInfo(n||r,s,e.maxBufferHole);if(this.log("media seeking to ".concat(Er(s)?s.toFixed(3):s,", state: ").concat(i)),this.state===Ca)this.resetLoadingState();else if(t){const r=e.maxFragLookUpTolerance,n=t.start-r,i=t.start+t.duration+r;if(!a.len||i<a.start||n>a.end){const e=s>i;(s<n||e)&&(e&&t.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),t.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}r&&(this.fragmentTracker.removeFragmentsInRange(s,1/0,this.playlistType,!0),this.lastCurrentTime=s),this.loadedmetadata||a.len||(this.nextLoadPosition=this.startPosition=s),this.tickImmediate()}onMediaEnded(){this.startPosition=this.lastCurrentTime=0}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset,this.initPTS=[]}onHandlerDestroying(){this.hls.off(Rr.MANIFEST_LOADED,this.onManifestLoaded,this),this.stopLoad(),super.onHandlerDestroying(),this.hls=null}onHandlerDestroyed(){this.state=Ea,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,r){this._loadFragForPlayback(e,t,r)}_loadFragForPlayback(e,t,r){this._doFragLoad(e,t,r,(t=>{if(this.fragContextChanged(e))return this.warn("Fragment ".concat(e.sn).concat(t.part?" p: "+t.part.index:""," of level ").concat(e.level," was dropped during download.")),void this.fragmentTracker.removeFragment(e);e.stats.chunkCount++,this._handleFragmentLoadProgress(t)})).then((t=>{if(!t)return;const r=this.state;this.fragContextChanged(e)?(r===Ra||!this.fragCurrent&&r===La)&&(this.fragmentTracker.removeFragment(e),this.state=ba):("payload"in t&&(this.log("Loaded fragment ".concat(e.sn," of level ").concat(e.level)),this.hls.trigger(Rr.FRAG_LOADED,t)),this._handleFragmentLoadComplete(t))})).catch((t=>{this.state!==Ea&&this.state!==ka&&(this.warn("Frag error: ".concat((null==t?void 0:t.message)||t)),this.resetFragmentLoading(e))}))}clearTrackerIfNeeded(e){var t;const{fragmentTracker:r}=this;if(r.getState(e)===Ws){const t=e.type,n=this.getFwdBufferInfo(this.mediaBuffer,t),i=Math.max(e.duration,n?n.len:this.config.maxBufferLength),s=this.backtrackFragment;(1===(s?e.sn-s.sn:0)||this.reduceMaxBufferLength(i,e.duration))&&r.removeFragment(e)}else 0===(null==(t=this.mediaBuffer)?void 0:t.buffered.length)?r.removeAllFragments():r.hasParts(e.type)&&(r.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),r.getState(e)===Ys&&r.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}flushMainBuffer(e,t){if(!(e-t))return;const r={startOffset:e,endOffset:t,type:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null};this.hls.trigger(Rr.BUFFER_FLUSHING,r)}_loadInitSegment(e,t){this._doFragLoad(e,t).then((t=>{if(!t||this.fragContextChanged(e)||!this.levels)throw new Error("init load aborted");return t})).then((t=>{const{hls:r}=this,{payload:n}=t,i=e.decryptdata;if(n&&n.byteLength>0&&null!=i&&i.key&&i.iv&&"AES-128"===i.method){const s=self.performance.now();return this.decrypter.decrypt(new Uint8Array(n),i.key.buffer,i.iv.buffer).catch((t=>{throw r.trigger(Rr.ERROR,{type:Sr.MEDIA_ERROR,details:Ar.FRAG_DECRYPT_ERROR,fatal:!1,error:t,reason:t.message,frag:e}),t})).then((n=>{const i=self.performance.now();return r.trigger(Rr.FRAG_DECRYPTED,{frag:e,payload:n,stats:{tstart:s,tdecrypt:i}}),t.payload=n,this.completeInitSegmentLoad(t)}))}return this.completeInitSegmentLoad(t)})).catch((t=>{this.state!==Ea&&this.state!==ka&&(this.warn(t),this.resetFragmentLoading(e))}))}completeInitSegmentLoad(e){const{levels:t}=this;if(!t)throw new Error("init load aborted, missing levels");const r=e.frag.stats;this.state=ba,e.frag.data=new Uint8Array(e.payload),r.parsing.start=r.buffering.start=self.performance.now(),r.parsing.end=r.buffering.end=self.performance.now(),this.tick()}fragContextChanged(e){const{fragCurrent:t}=this;return!e||!t||e.sn!==t.sn||e.level!==t.level}fragBufferedComplete(e,t){var r,n,i,s;const a=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log("Buffered ".concat(e.type," sn: ").concat(e.sn).concat(t?" part: "+t.index:""," of ").concat(this.playlistType===Ui?"level":"track"," ").concat(e.level," (frag:[").concat((null!=(r=e.startPTS)?r:NaN).toFixed(3),"-").concat((null!=(n=e.endPTS)?n:NaN).toFixed(3),"] > buffer:").concat(a?va(ra.getBuffered(a)):"(detached)",")")),"initSegment"!==e.sn){var o;if(e.type!==Oi){const t=e.elementaryStreams;if(!Object.keys(t).some((e=>!!t[e])))return void(this.state=ba)}const t=null==(o=this.levels)?void 0:o[e.level];null!=t&&t.fragmentError&&(this.log("Resetting level fragment error count of ".concat(t.fragmentError," on frag buffered")),t.fragmentError=0)}this.state=ba,a&&(!this.loadedmetadata&&e.type==Ui&&a.buffered.length&&(null==(i=this.fragCurrent)?void 0:i.sn)===(null==(s=this.fragPrevious)?void 0:s.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())}seekToStartPos(){}_handleFragmentLoadComplete(e){const{transmuxer:t}=this;if(!t)return;const{frag:r,part:n,partsLoaded:i}=e,s=!i||0===i.length||i.some((e=>!e)),a=new na(r.level,r.sn,r.stats.chunkCount+1,0,n?n.index:-1,!s);t.flush(a)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3?arguments[3]:void 0;var i;const s=null==t?void 0:t.details;if(!this.levels||!s)throw new Error("frag load aborted, missing level".concat(s?"":" detail","s"));let a=null;if(!e.encrypted||null!=(i=e.decryptdata)&&i.key?!e.encrypted&&s.encryptedFragments.length&&this.keyLoader.loadClear(e,s.encryptedFragments):(this.log("Loading key for ".concat(e.sn," of [").concat(s.startSN,"-").concat(s.endSN,"], ").concat("[stream-controller]"===this.logPrefix?"level":"track"," ").concat(e.level)),this.state=Ta,this.fragCurrent=e,a=this.keyLoader.load(e).then((e=>{if(!this.fragContextChanged(e.frag))return this.hls.trigger(Rr.KEY_LOADED,e),this.state===Ta&&(this.state=ba),e})),this.hls.trigger(Rr.KEY_LOADING,{frag:e}),null===this.fragCurrent&&(a=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))),r=Math.max(e.start,r||0),this.config.lowLatencyMode&&"initSegment"!==e.sn){const i=s.partList;if(i&&n){r>e.end&&s.fragmentHint&&(e=s.fragmentHint);const o=this.getNextPart(i,e,r);if(o>-1){const l=i[o];let c;return this.log("Loading part sn: ".concat(e.sn," p: ").concat(l.index," cc: ").concat(e.cc," of playlist [").concat(s.startSN,"-").concat(s.endSN,"] parts [0-").concat(o,"-").concat(i.length-1,"] ").concat("[stream-controller]"===this.logPrefix?"level":"track",": ").concat(e.level,", target: ").concat(parseFloat(r.toFixed(3)))),this.nextLoadPosition=l.start+l.duration,this.state=Ra,c=a?a.then((r=>!r||this.fragContextChanged(r.frag)?null:this.doFragPartsLoad(e,l,t,n))).catch((e=>this.handleFragLoadError(e))):this.doFragPartsLoad(e,l,t,n).catch((e=>this.handleFragLoadError(e))),this.hls.trigger(Rr.FRAG_LOADING,{frag:e,part:l,targetBufferTime:r}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):c}if(!e.url||this.loadedEndOfParts(i,r))return Promise.resolve(null)}}this.log("Loading fragment ".concat(e.sn," cc: ").concat(e.cc," ").concat(s?"of ["+s.startSN+"-"+s.endSN+"] ":"").concat("[stream-controller]"===this.logPrefix?"level":"track",": ").concat(e.level,", target: ").concat(parseFloat(r.toFixed(3)))),Er(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=Ra;const o=this.config.progressive;let l;return l=o&&a?a.then((t=>!t||this.fragContextChanged(null==t?void 0:t.frag)?null:this.fragmentLoader.load(e,n))).catch((e=>this.handleFragLoadError(e))):Promise.all([this.fragmentLoader.load(e,o?n:void 0),a]).then((e=>{let[t]=e;return!o&&t&&n&&n(t),t})).catch((e=>this.handleFragLoadError(e))),this.hls.trigger(Rr.FRAG_LOADING,{frag:e,targetBufferTime:r}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):l}doFragPartsLoad(e,t,r,n){return new Promise(((i,s)=>{var a;const o=[],l=null==(a=r.details)?void 0:a.partList,c=t=>{this.fragmentLoader.loadPart(e,t,n).then((n=>{o[t.index]=n;const s=n.part;this.hls.trigger(Rr.FRAG_LOADED,n);const a=ms(r,e.sn,t.index+1)||gs(l,e.sn,t.index+1);if(!a)return i({frag:e,part:s,partsLoaded:o});c(a)})).catch(s)};c(t)}))}handleFragLoadError(e){if("data"in e){const t=e.data;e.data&&t.details===Ar.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger(Rr.ERROR,t)}else this.hls.trigger(Rr.ERROR,{type:Sr.OTHER_ERROR,details:Ar.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const t=this.getCurrentContext(e);if(!t||this.state!==La)return void(this.fragCurrent||this.state===Ea||this.state===ka||(this.state=ba));const{frag:r,part:n,level:i}=t,s=self.performance.now();r.stats.parsing.end=s,n&&(n.stats.parsing.end=s),this.updateLevelTiming(r,n,i,e.partial)}getCurrentContext(e){const{levels:t,fragCurrent:r}=this,{level:n,sn:i,part:s}=e;if(null==t||!t[n])return this.warn("Levels object was unset while buffering fragment ".concat(i," of level ").concat(n,". The current chunk will not be buffered.")),null;const a=t[n],o=s>-1?ms(a,i,s):null,l=o?o.fragment:function(e,t,r){if(null==e||!e.details)return null;const n=e.details;let i=n.fragments[t-n.startSN];return i||(i=n.fragmentHint,i&&i.sn===t?i:t<n.startSN&&r&&r.sn===t?r:null)}(a,i,r);return l?(r&&r!==l&&(l.stats=r.stats),{frag:l,part:o,level:a}):null}bufferFragmentData(e,t,r,n,i){var s;if(!e||this.state!==La)return;const{data1:a,data2:o}=e;let l=a;if(a&&o&&(l=Xn(a,o)),null==(s=l)||!s.length)return;const c={type:e.type,frag:t,part:r,chunkMeta:n,parent:t.type,data:l};if(this.hls.trigger(Rr.BUFFER_APPENDING,c),e.dropped&&e.independent&&!r){if(i)return;this.flushBufferGap(t)}}flushBufferGap(e){const t=this.media;if(!t)return;if(!ra.isBuffered(t,t.currentTime))return void this.flushMainBuffer(0,e.start);const r=t.currentTime,n=ra.bufferInfo(t,r,0),i=e.duration,s=Math.min(2*this.config.maxFragLookUpTolerance,.25*i),a=Math.max(Math.min(e.start-s,n.end-s),r+s);e.start-a>s&&this.flushMainBuffer(a,e.start)}getFwdBufferInfo(e,t){const r=this.getLoadPosition();return Er(r)?this.getFwdBufferInfoAtPos(e,r,t):null}getFwdBufferInfoAtPos(e,t,r){const{config:{maxBufferHole:n}}=this,i=ra.bufferInfo(e,t,n);if(0===i.len&&void 0!==i.nextStart){const s=this.fragmentTracker.getBufferedFrag(t,r);if(s&&i.nextStart<s.end)return ra.bufferInfo(e,t,Math.max(i.nextStart,n))}return i}getMaxBufferLength(e){const{config:t}=this;let r;return r=e?Math.max(8*t.maxBufferSize/e,t.maxBufferLength):t.maxBufferLength,Math.min(r,t.maxMaxBufferLength)}reduceMaxBufferLength(e,t){const r=this.config,n=Math.max(Math.min(e-t,r.maxBufferLength),t),i=Math.max(e-3*t,r.maxMaxBufferLength/2,n);return i>=n&&(r.maxMaxBufferLength=i,this.warn("Reduce max buffer length to ".concat(i,"s")),!0)}getAppendedFrag(e){const t=this.fragmentTracker.getAppendedFrag(e,Ui);return t&&"fragment"in t?t.fragment:t}getNextFragment(e,t){const r=t.fragments,n=r.length;if(!n)return null;const{config:i}=this,s=r[0].start;let a;if(t.live){const o=i.initialLiveManifestSize;if(n<o)return this.warn("Not enough fragments to start playback (have: ".concat(n,", need: ").concat(o,")")),null;(!t.PTSKnown&&!this.startFragRequested&&-1===this.startPosition||e<s)&&(a=this.getInitialLiveFragment(t,r),this.startPosition=this.nextLoadPosition=a?this.hls.liveSyncPosition||a.start:e)}else e<=s&&(a=r[0]);if(!a){const r=i.lowLatencyMode?t.partEnd:t.fragmentEnd;a=this.getFragmentAtPosition(e,r,t)}return this.mapToInitFragWhenRequired(a)}isLoopLoading(e,t){const r=this.fragmentTracker.getState(e);return(r===Zs||r===Ys&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,r,n,i){const s=e.gap,a=this.getNextFragment(this.nextLoadPosition,t);if(null===a)return a;if(e=a,s&&e&&!e.gap&&r.nextStart){const t=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,r.nextStart,n);if(null!==t&&r.len+t.len>=i)return this.log('buffer full after gaps in "'.concat(n,'" playlist starting at sn: ').concat(e.sn)),null}return e}mapToInitFragWhenRequired(e){return null==e||!e.initSegment||null!=e&&e.initSegment.data||this.bitrateTest?e:e.initSegment}getNextPart(e,t,r){let n=-1,i=!1,s=!0;for(let a=0,o=e.length;a<o;a++){const o=e[a];if(s=s&&!o.independent,n>-1&&r<o.start)break;const l=o.loaded;l?n=-1:(i||o.independent||s)&&o.fragment===t&&(n=a),i=l}return n}loadedEndOfParts(e,t){const r=e[e.length-1];return r&&t>r.start&&r.loaded}getInitialLiveFragment(e,t){const r=this.fragPrevious;let n=null;if(r){if(e.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: ".concat(r.programDateTime)),n=function(e,t,r){if(null===t||!Array.isArray(e)||!e.length||!Er(t))return null;if(t<(e[0].programDateTime||0))return null;if(t>=(e[e.length-1].endProgramDateTime||0))return null;r=r||0;for(let n=0;n<e.length;++n){const i=e[n];if(ws(t,r,i))return i}return null}(t,r.endProgramDateTime,this.config.maxFragLookUpTolerance)),!n){const i=r.sn+1;if(i>=e.startSN&&i<=e.endSN){const s=t[i-e.startSN];r.cc===s.cc&&(n=s,this.log("Live playlist, switching playlist, load frag with next SN: ".concat(n.sn)))}n||(n=function(e,t){return Ss(e,(e=>e.cc<t?1:e.cc>t?-1:0))}(t,r.cc),n&&this.log("Live playlist, switching playlist, load frag with same CC: ".concat(n.sn)))}}else{const t=this.hls.liveSyncPosition;null!==t&&(n=this.getFragmentAtPosition(t,this.bitrateTest?e.fragmentEnd:e.edge,e))}return n}getFragmentAtPosition(e,t,r){const{config:n}=this;let{fragPrevious:i}=this,{fragments:s,endSN:a}=r;const{fragmentHint:o}=r,{maxFragLookUpTolerance:l}=n,c=r.partList,u=!!(n.lowLatencyMode&&null!=c&&c.length&&o);let d;if(u&&o&&!this.bitrateTest&&(s=s.concat(o),a=o.sn),e<t){d=As(i,s,e,e>t-l?0:l)}else d=s[s.length-1];if(d){const e=d.sn-r.startSN,t=this.fragmentTracker.getState(d);if((t===Zs||t===Ys&&d.gap)&&(i=d),i&&d.sn===i.sn&&(!u||c[0].fragment.sn>d.sn)){if(i&&d.level===i.level){const t=s[e+1];d=d.sn<a&&this.fragmentTracker.getState(t)!==Zs?t:null}}}return d}synchronizeToLiveEdge(e){const{config:t,media:r}=this;if(!r)return;const n=this.hls.liveSyncPosition,i=r.currentTime,s=e.fragments[0].start,a=e.edge,o=i>=s-t.maxFragLookUpTolerance&&i<=a;if(null!==n&&r.duration>n&&(i<n||!o)){const s=void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;(!o&&r.readyState<4||i<a-s)&&(this.loadedmetadata||(this.nextLoadPosition=n),r.readyState&&(this.warn("Playback: ".concat(i.toFixed(3)," is located too far from the end of live sliding playlist: ").concat(a,", reset currentTime to : ").concat(n.toFixed(3))),r.currentTime=n))}}alignPlaylists(e,t,r){const n=e.fragments.length;if(!n)return this.warn("No fragments in live playlist"),0;const i=e.fragments[0].start,s=!t,a=e.alignedSliding&&Er(i);if(s||!a&&!i){const{fragPrevious:i}=this;oa(i,r,e);const s=e.fragments[0].start;return this.log("Live playlist sliding: ".concat(s.toFixed(2)," start-sn: ").concat(t?t.startSN:"na","->").concat(e.startSN," prev-sn: ").concat(i?i.sn:"na"," fragments: ").concat(n)),s}return i}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,3*e.partTarget)}setStartPosition(e,t){let r=this.startPosition;if(r<t&&(r=-1),-1===r||-1===this.lastCurrentTime){const n=null!==this.startTimeOffset,i=n?this.startTimeOffset:e.startTimeOffset;null!==i&&Er(i)?(r=t+i,i<0&&(r+=e.totalduration),r=Math.min(Math.max(t,r),t+e.totalduration),this.log("Start time offset ".concat(i," found in ").concat(n?"multivariant":"media"," playlist, adjust startPosition to ").concat(r)),this.startPosition=r):e.live?r=this.hls.liveSyncPosition||t:this.startPosition=r=0,this.lastCurrentTime=r}this.nextLoadPosition=r}getLoadPosition(){const{media:e}=this;let t=0;return this.loadedmetadata&&e?t=e.currentTime:this.nextLoadPosition&&(t=this.nextLoadPosition),t}handleFragLoadAborted(e,t){this.transmuxer&&"initSegment"!==e.sn&&e.stats.aborted&&(this.warn("Fragment ".concat(e.sn).concat(t?" part "+t.index:""," of level ").concat(e.level," was aborted")),this.resetFragmentLoading(e))}resetFragmentLoading(e){this.fragCurrent&&(this.fragContextChanged(e)||this.state===Sa)||(this.state=ba)}onFragmentOrKeyLoadError(e,t){if(t.chunkMeta&&!t.frag){const e=this.getCurrentContext(t.chunkMeta);e&&(t.frag=e.frag)}const r=t.frag;if(!r||r.type!==e||!this.levels)return;var n;if(this.fragContextChanged(r))return void this.warn("Frag load error must match current frag to retry ".concat(r.url," > ").concat(null==(n=this.fragCurrent)?void 0:n.url));const i=t.details===Ar.FRAG_GAP;i&&this.fragmentTracker.fragBuffered(r,!0);const s=t.errorAction,{action:a,retryCount:o=0,retryConfig:l}=s||{};if(s&&a===_s&&l){this.resetStartWhenNotLoaded(this.levelLastLoaded);const n=bs(l,o);this.warn("Fragment ".concat(r.sn," of ").concat(e," ").concat(r.level," errored with ").concat(t.details,", retrying loading ").concat(o+1,"/").concat(l.maxNumRetry," in ").concat(n,"ms")),s.resolved=!0,this.retryDate=self.performance.now()+n,this.state=Sa}else if(l&&s){if(this.resetFragmentErrors(e),!(o<l.maxNumRetry))return void xr.warn("".concat(t.details," reached or exceeded max retry (").concat(o,")"));i||a===xs||(s.resolved=!0)}else(null==s?void 0:s.action)===ks?this.state=_a:this.state=ka;this.tickImmediate()}reduceLengthAndFlushBuffer(e){if(this.state===La||this.state===wa){const t=e.frag,r=e.parent,n=this.getFwdBufferInfo(this.mediaBuffer,r),i=n&&n.len>.5;i&&this.reduceMaxBufferLength(n.len,(null==t?void 0:t.duration)||10);const s=!i;return s&&this.warn("Buffer full error while media.currentTime is not buffered, flush ".concat(r," buffer")),t&&(this.fragmentTracker.removeFragment(t),this.nextLoadPosition=t.start),this.resetLoadingState(),s}return!1}resetFragmentErrors(e){e===Ni&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==Ea&&(this.state=ba)}afterBufferFlushed(e,t,r){if(!e)return;const n=ra.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,n,r),this.state===Ca&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=ba}resetStartWhenNotLoaded(e){if(!this.loadedmetadata){this.startFragRequested=!1;const t=e?e.details:null;null!=t&&t.live?(this.startPosition=-1,this.setStartPosition(t,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.warn("The loading context changed while buffering fragment ".concat(e.sn," of level ").concat(e.level,". This chunk will not be buffered.")),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()}removeUnbufferedFrags(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,r,n){var i;const s=r.details;if(!s)return void this.warn("level.details undefined");if(!Object.keys(e.elementaryStreams).reduce(((t,i)=>{const a=e.elementaryStreams[i];if(a){const o=a.endPTS-a.startPTS;if(o<=0)return this.warn("Could not parse fragment ".concat(e.sn," ").concat(i," duration reliably (").concat(o,")")),t||!1;const l=n?0:ds(s,e,a.startPTS,a.endPTS,a.startDTS,a.endDTS);return this.hls.trigger(Rr.LEVEL_PTS_UPDATED,{details:s,level:r,drift:l,type:i,frag:e,start:a.startPTS,end:a.endPTS}),!0}return t}),!1)&&null===(null==(i=this.transmuxer)?void 0:i.error)){const t=new Error("Found no media in fragment ".concat(e.sn," of level ").concat(e.level," resetting transmuxer to fallback to playlist timing"));if(0===r.fragmentError&&(r.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)),this.warn(t.message),this.hls.trigger(Rr.ERROR,{type:Sr.MEDIA_ERROR,details:Ar.FRAG_PARSING_ERROR,fatal:!1,error:t,frag:e,reason:"Found no media in msn ".concat(e.sn,' of level "').concat(r.url,'"')}),!this.hls)return;this.resetTransmuxer()}this.state=wa,this.hls.trigger(Rr.FRAG_PARSED,{frag:e,part:t})}resetTransmuxer(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)}recoverWorkerError(e){"demuxerWorker"===e.event&&(this.fragmentTracker.removeAllFragments(),this.resetTransmuxer(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())}set state(e){const t=this._state;t!==e&&(this._state=e,this.log("".concat(t,"->").concat(e)))}get state(){return this._state}}class Ia{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:t}=this;let r;return e.length?(r=1===e.length?e[0]:function(e,t){const r=new Uint8Array(t);let n=0;for(let i=0;i<e.length;i++){const t=e[i];r.set(t,n),n+=t.length}return r}(e,t),this.reset(),r):new Uint8Array(0)}reset(){this.chunks.length=0,this.dataLength=0}}function Ba(){return{type:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",id:-1,pid:-1,inputTimeScale:arguments.length>1&&void 0!==arguments[1]?arguments[1]:9e4,sequenceNumber:-1,samples:[],dropped:0}}class Pa{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,r,n){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,r){}demux(e,t){this.cachedData&&(e=Xn(this.cachedData,e),this.cachedData=null);let r,n=fn(e,0),i=n?n.length:0;const s=this._audioTrack,a=this._id3Track,o=n?mn(n):void 0,l=e.length;for((null===this.basePTS||0===this.frameIndex&&Er(o))&&(this.basePTS=Ua(o,t,this.initPTS),this.lastPTS=this.basePTS),null===this.lastPTS&&(this.lastPTS=this.basePTS),n&&n.length>0&&a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:Xi,duration:Number.POSITIVE_INFINITY});i<l;){if(this.canParse(e,i)){const t=this.appendFrame(s,e,i);t?(this.frameIndex++,this.lastPTS=t.sample.pts,i+=t.length,r=i):i=l}else hn(e,i)?(n=fn(e,i),a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:Xi,duration:Number.POSITIVE_INFINITY}),i+=n.length,r=i):i++;if(i===l&&r!==l){const t=cn(e,r);this.cachedData?this.cachedData=Xn(this.cachedData,t):this.cachedData=t}}return{audioTrack:s,videoTrack:Ba(),id3Track:a,textTrack:Ba()}}demuxSampleAes(e,t,r){return Promise.reject(new Error("[".concat(this,"] This demuxer does not support Sample-AES decryption")))}flush(e){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:Ba(),id3Track:this._id3Track,textTrack:Ba()}}destroy(){}}const Ua=(e,t,r)=>{if(Er(e))return 90*e;return 9e4*t+(r?9e4*r.baseTime/r.timescale:0)};function Na(e,t){return 255===e[t]&&240===(246&e[t+1])}function Oa(e,t){return 1&e[t+1]?7:9}function Ka(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function Fa(e,t){return t+1<e.length&&Na(e,t)}function Ma(e,t){if(Fa(e,t)){const r=Oa(e,t);if(t+r>=e.length)return!1;const n=Ka(e,t);if(n<=r)return!1;const i=t+n;return i===e.length||Fa(e,i)}return!1}function Va(e,t,r,n,i){if(!e.samplerate){const s=function(e,t,r,n){let i,s,a,o;const l=navigator.userAgent.toLowerCase(),c=n,u=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];i=1+((192&t[r+2])>>>6);const d=(60&t[r+2])>>>2;if(!(d>u.length-1))return a=(1&t[r+2])<<2,a|=(192&t[r+3])>>>6,xr.log("manifest codec:".concat(n,", ADTS type:").concat(i,", samplingIndex:").concat(d)),/firefox/i.test(l)?d>=6?(i=5,o=new Array(4),s=d-3):(i=2,o=new Array(2),s=d):-1!==l.indexOf("android")?(i=2,o=new Array(2),s=d):(i=5,o=new Array(4),n&&(-1!==n.indexOf("mp4a.40.29")||-1!==n.indexOf("mp4a.40.5"))||!n&&d>=6?s=d-3:((n&&-1!==n.indexOf("mp4a.40.2")&&(d>=6&&1===a||/vivaldi/i.test(l))||!n&&1===a)&&(i=2,o=new Array(2)),s=d)),o[0]=i<<3,o[0]|=(14&d)>>1,o[1]|=(1&d)<<7,o[1]|=a<<3,5===i&&(o[1]|=(14&s)>>1,o[2]=(1&s)<<7,o[2]|=8,o[3]=0),{config:o,samplerate:u[d],channelCount:a,codec:"mp4a.40."+i,manifestCodec:c};{const t=new Error("invalid ADTS sampling index:".concat(d));e.emit(Rr.ERROR,Rr.ERROR,{type:Sr.MEDIA_ERROR,details:Ar.FRAG_PARSING_ERROR,fatal:!0,error:t,reason:t.message})}}(t,r,n,i);if(!s)return;e.config=s.config,e.samplerate=s.samplerate,e.channelCount=s.channelCount,e.codec=s.codec,e.manifestCodec=s.manifestCodec,xr.log("parsed codec:".concat(e.codec,", rate:").concat(s.samplerate,", channels:").concat(s.channelCount))}}function ja(e){return 9216e4/e}function Ga(e,t,r,n,i){const s=n+i*ja(e.samplerate),a=function(e,t){const r=Oa(e,t);if(t+r<=e.length){const n=Ka(e,t)-r;if(n>0)return{headerLength:r,frameLength:n}}}(t,r);let o;if(a){const{frameLength:n,headerLength:i}=a,l=i+n,c=Math.max(0,r+l-t.length);c?(o=new Uint8Array(l-i),o.set(t.subarray(r+i,t.length),0)):o=t.subarray(r+i,r+l);const u={unit:o,pts:s};return c||e.samples.push(u),{sample:u,length:l,missing:c}}const l=t.length-r;o=new Uint8Array(l),o.set(t.subarray(r,t.length),0);return{sample:{unit:o,pts:s},length:l,missing:-1}}let qa=null;const Ha=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],Xa=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],za=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],$a=[0,1,1,4];function Wa(e,t,r,n,i){if(r+24>t.length)return;const s=Ya(t,r);if(s&&r+s.frameLength<=t.length){const a=n+i*(9e4*s.samplesPerFrame/s.sampleRate),o={unit:t.subarray(r,r+s.frameLength),pts:a,dts:a};return e.config=[],e.channelCount=s.channelCount,e.samplerate=s.sampleRate,e.samples.push(o),{sample:o,length:s.frameLength,missing:0}}}function Ya(e,t){const r=e[t+1]>>3&3,n=e[t+1]>>1&3,i=e[t+2]>>4&15,s=e[t+2]>>2&3;if(1!==r&&0!==i&&15!==i&&3!==s){const a=e[t+2]>>1&1,o=e[t+3]>>6,l=1e3*Ha[14*(3===r?3-n:3===n?3:4)+i-1],c=Xa[3*(3===r?0:2===r?1:2)+s],u=3===o?1:2,d=za[r][n],f=$a[n],p=8*d*f,h=Math.floor(d*l/c+a)*f;if(null===qa){const e=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);qa=e?parseInt(e[1]):0}return!!qa&&qa<=87&&2===n&&l>=224e3&&0===o&&(e[t+3]=128|e[t+3]),{sampleRate:c,channelCount:u,frameLength:h,samplesPerFrame:p}}}function Za(e,t){return 255===e[t]&&224===(224&e[t+1])&&0!==(6&e[t+1])}function Qa(e,t){return t+1<e.length&&Za(e,t)}function Ja(e,t){if(t+1<e.length&&Za(e,t)){const r=4,n=Ya(e,t);let i=r;null!=n&&n.frameLength&&(i=n.frameLength);const s=t+i;return s===e.length||Qa(e,s)}return!1}const eo=/\/emsg[-/]ID3/i;const to=(e,t)=>{let r=0,n=5;t+=n;const i=new Uint32Array(1),s=new Uint32Array(1),a=new Uint8Array(1);for(;n>0;){a[0]=e[t];const o=Math.min(n,8),l=8-o;s[0]=4278190080>>>24+l<<l,i[0]=(a[0]&s[0])>>l,r=r?r<<o|i[0]:i[0],t+=1,n-=o}return r};class ro extends Pa{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,t,r,n){super.resetInitSegment(e,t,r,n),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:t,duration:n,inputTimeScale:9e4,dropped:0}}canParse(e,t){return t+64<e.length}appendFrame(e,t,r){const n=no(e,t,r,this.basePTS,this.frameIndex);if(-1!==n){return{sample:e.samples[e.samples.length-1],length:n,missing:0}}}static probe(e){if(!e)return!1;const t=fn(e,0);if(!t)return!1;const r=t.length;return 11===e[r]&&119===e[r+1]&&void 0!==mn(t)&&to(e,r)<16}}function no(e,t,r,n,i){if(r+8>t.length)return-1;if(11!==t[r]||119!==t[r+1])return-1;const s=t[r+4]>>6;if(s>=3)return-1;const a=[48e3,44100,32e3][s],o=63&t[r+4],l=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*o+s];if(r+l>t.length)return-1;const c=t[r+6]>>5;let u=0;2===c?u+=2:(1&c&&1!==c&&(u+=2),4&c&&(u+=2));const d=(t[r+6]<<8|t[r+7])>>12-u&1,f=[2,1,2,3,3,4,4,5][c]+d,p=t[r+5]>>3,h=7&t[r+5],m=new Uint8Array([s<<6|p<<1|h>>2,(3&h)<<6|c<<3|d<<2|o>>4,o<<4&224]),g=n+i*(1536/a*9e4),y=t.subarray(r,r+l);return e.config=m,e.channelCount=f,e.samplerate=a,e.samples.push({unit:y,pts:g}),l}class io{constructor(){this.VideoSample=null}createVideoSample(e,t,r,n){return{key:e,frame:!1,pts:t,dts:r,units:[],debug:n,length:0}}getLastNalUnit(e){var t;let r,n=this.VideoSample;if(n&&0!==n.units.length||(n=e[e.length-1]),null!=(t=n)&&t.units){const e=n.units;r=e[e.length-1]}return r}pushAccessUnit(e,t){if(e.units.length&&e.frame){if(void 0===e.pts){const r=t.samples,n=r.length;if(!n)return void t.dropped++;{const t=r[n-1];e.pts=t.pts,e.dts=t.dts}}t.samples.push(e)}e.debug.length&&xr.log(e.pts+"/"+e.dts+":"+e.debug)}}class so{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,t=this.bytesAvailable,r=e.byteLength-t,n=new Uint8Array(4),i=Math.min(4,t);if(0===i)throw new Error("no bytes available");n.set(e.subarray(r,r+i)),this.word=new DataView(n.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i}skipBits(e){let t;e=Math.min(e,8*this.bytesAvailable+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(t=(e-=this.bitsAvailable)>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e);const r=this.word>>>32-t;if(e>32&&xr.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else{if(!(this.bytesAvailable>0))throw new Error("no bits available");this.loadWord()}return t=e-t,t>0&&this.bitsAvailable?r<<t|this.readBits(t):r}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if(0!==(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return 1===this.readBits(1)}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}skipScalingList(e){let t,r=8,n=8;for(let i=0;i<e;i++)0!==n&&(t=this.readEG(),n=(r+t+256)%256),r=0===n?r:n}readSPS(){let e,t,r,n=0,i=0,s=0,a=0;const o=this.readUByte.bind(this),l=this.readBits.bind(this),c=this.readUEG.bind(this),u=this.readBoolean.bind(this),d=this.skipBits.bind(this),f=this.skipEG.bind(this),p=this.skipUEG.bind(this),h=this.skipScalingList.bind(this);o();const m=o();if(l(5),d(3),o(),p(),100===m||110===m||122===m||244===m||44===m||83===m||86===m||118===m||128===m){const e=c();if(3===e&&d(1),p(),p(),d(1),u())for(t=3!==e?8:12,r=0;r<t;r++)u()&&h(r<6?16:64)}p();const g=c();if(0===g)c();else if(1===g)for(d(1),f(),f(),e=c(),r=0;r<e;r++)f();p(),d(1);const y=c(),v=c(),E=l(1);0===E&&d(1),d(1),u()&&(n=c(),i=c(),s=c(),a=c());let b=[1,1];if(u()&&u()){switch(o()){case 1:b=[1,1];break;case 2:b=[12,11];break;case 3:b=[10,11];break;case 4:b=[16,11];break;case 5:b=[40,33];break;case 6:b=[24,11];break;case 7:b=[20,11];break;case 8:b=[32,11];break;case 9:b=[80,33];break;case 10:b=[18,11];break;case 11:b=[15,11];break;case 12:b=[64,33];break;case 13:b=[160,99];break;case 14:b=[4,3];break;case 15:b=[3,2];break;case 16:b=[2,1];break;case 255:b=[o()<<8|o(),o()<<8|o()]}}return{width:Math.ceil(16*(y+1)-2*n-2*i),height:(2-E)*(v+1)*16-(E?2:4)*(s+a),pixelRatio:b}}readSliceType(){return this.readUByte(),this.readUEG(),this.readUEG()}}class ao extends io{parseAVCPES(e,t,r,n,i){const s=this.parseAVCNALu(e,r.data);let a,o=this.VideoSample,l=!1;r.data=null,o&&s.length&&!e.audFound&&(this.pushAccessUnit(o,e),o=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts,"")),s.forEach((n=>{var s;switch(n.type){case 1:{let t=!1;a=!0;const i=n.data;if(l&&i.length>4){const e=new so(i).readSliceType();2!==e&&4!==e&&7!==e&&9!==e||(t=!0)}var c;if(t)null!=(c=o)&&c.frame&&!o.key&&(this.pushAccessUnit(o,e),o=this.VideoSample=null);o||(o=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts,"")),o.frame=!0,o.key=t;break}case 5:a=!0,null!=(s=o)&&s.frame&&!o.key&&(this.pushAccessUnit(o,e),o=this.VideoSample=null),o||(o=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts,"")),o.key=!0,o.frame=!0;break;case 6:a=!0,Wn(n.data,1,r.pts,t.samples);break;case 7:{var u,d;a=!0,l=!0;const t=n.data,r=new so(t).readSPS();if(!e.sps||e.width!==r.width||e.height!==r.height||(null==(u=e.pixelRatio)?void 0:u[0])!==r.pixelRatio[0]||(null==(d=e.pixelRatio)?void 0:d[1])!==r.pixelRatio[1]){e.width=r.width,e.height=r.height,e.pixelRatio=r.pixelRatio,e.sps=[t],e.duration=i;const n=t.subarray(1,4);let s="avc1.";for(let e=0;e<3;e++){let t=n[e].toString(16);t.length<2&&(t="0"+t),s+=t}e.codec=s}break}case 8:a=!0,e.pps=[n.data];break;case 9:a=!0,e.audFound=!0,o&&this.pushAccessUnit(o,e),o=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts,"");break;case 12:a=!0;break;default:a=!1,o&&(o.debug+="unknown NAL "+n.type+" ")}if(o&&a){o.units.push(n)}})),n&&o&&(this.pushAccessUnit(o,e),this.VideoSample=null)}parseAVCNALu(e,t){const r=t.byteLength;let n=e.naluState||0;const i=n,s=[];let a,o,l,c=0,u=-1,d=0;for(-1===n&&(u=0,d=31&t[0],n=0,c=1);c<r;)if(a=t[c++],n)if(1!==n)if(a)if(1===a){if(o=c-n-1,u>=0){const e={data:t.subarray(u,o),type:d};s.push(e)}else{const r=this.getLastNalUnit(e.samples);r&&(i&&c<=4-i&&r.state&&(r.data=r.data.subarray(0,r.data.byteLength-i)),o>0&&(r.data=Xn(r.data,t.subarray(0,o)),r.state=0))}c<r?(l=31&t[c],u=c,d=l,n=0):n=-1}else n=0;else n=3;else n=a?0:2;else n=a?0:1;if(u>=0&&n>=0){const e={data:t.subarray(u,r),type:d,state:n};s.push(e)}if(0===s.length){const r=this.getLastNalUnit(e.samples);r&&(r.data=Xn(r.data,t))}return e.naluState=n,s}}class oo{constructor(e,t,r){this.keyData=void 0,this.decrypter=void 0,this.keyData=r,this.decrypter=new ya(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer)}decryptAacSample(e,t,r){const n=e[t].unit;if(n.length<=16)return;const i=n.subarray(16,n.length-n.length%16),s=i.buffer.slice(i.byteOffset,i.byteOffset+i.length);this.decryptBuffer(s).then((i=>{const s=new Uint8Array(i);n.set(s,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,r)}))}decryptAacSamples(e,t,r){for(;;t++){if(t>=e.length)return void r();if(!(e[t].unit.length<32)&&(this.decryptAacSample(e,t,r),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const t=16*Math.floor((e.length-48)/160)+16,r=new Int8Array(t);let n=0;for(let i=32;i<e.length-16;i+=160,n+=16)r.set(e.subarray(i,i+16),n);return r}getAvcDecryptedUnit(e,t){const r=new Uint8Array(t);let n=0;for(let i=32;i<e.length-16;i+=160,n+=16)e.set(r.subarray(n,n+16),i);return e}decryptAvcSample(e,t,r,n,i){const s=Yn(i.data),a=this.getAvcEncryptedData(s);this.decryptBuffer(a.buffer).then((a=>{i.data=this.getAvcDecryptedUnit(s,a),this.decrypter.isSync()||this.decryptAvcSamples(e,t,r+1,n)}))}decryptAvcSamples(e,t,r,n){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,r=0){if(t>=e.length)return void n();const i=e[t].units;for(;!(r>=i.length);r++){const s=i[r];if(!(s.data.length<=48||1!==s.type&&5!==s.type)&&(this.decryptAvcSample(e,t,r,n,s),!this.decrypter.isSync()))return}}}}const lo=188;class co{constructor(e,t,r){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=t,this.typeSupported=r,this.videoParser=new ao}static probe(e){const t=co.syncOffset(e);return t>0&&xr.warn("MPEG2-TS detected but first sync word found @ offset ".concat(t)),-1!==t}static syncOffset(e){const t=e.length;let r=Math.min(940,t-lo)+1,n=0;for(;n<r;){let i=!1,s=-1,a=0;for(let o=n;o<t;o+=lo){if(71!==e[o]||t-o!==lo&&71!==e[o+lo]){if(a)return-1;break}if(a++,-1===s&&(s=o,0!==s&&(r=Math.min(s+18612,e.length-lo)+1)),i||(i=0===uo(e,o)),i&&a>1&&(0===s&&a>2||o+lo>r))return s}n++}return-1}static createTrack(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:_n[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===e?t:void 0}}resetInitSegment(e,t,r,n){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=co.createTrack("video"),this._audioTrack=co.createTrack("audio",n),this._id3Track=co.createTrack("id3"),this._txtTrack=co.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=r,this._duration=n}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:t,_id3Track:r}=this;e&&(e.pesData=null),t&&(t.pesData=null),r&&(r.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,t){let r,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];n||(this.sampleAes=null);const s=this._videoTrack,a=this._audioTrack,o=this._id3Track,l=this._txtTrack;let c=s.pid,u=s.pesData,d=a.pid,f=o.pid,p=a.pesData,h=o.pesData,m=null,g=this.pmtParsed,y=this._pmtId,v=e.length;if(this.remainderData&&(v=(e=Xn(this.remainderData,e)).length,this.remainderData=null),v<lo&&!i)return this.remainderData=e,{audioTrack:a,videoTrack:s,id3Track:o,textTrack:l};const E=Math.max(0,co.syncOffset(e));v-=(v-E)%lo,v<e.byteLength&&!i&&(this.remainderData=new Uint8Array(e.buffer,v,e.buffer.byteLength-v));let b=0;for(let R=E;R<v;R+=lo)if(71===e[R]){const t=!!(64&e[R+1]),i=uo(e,R);let v;if((48&e[R+3])>>4>1){if(v=R+5+e[R+4],v===R+lo)continue}else v=R+4;switch(i){case c:t&&(u&&(r=go(u))&&this.videoParser.parseAVCPES(s,l,r,!1,this._duration),u={data:[],size:0}),u&&(u.data.push(e.subarray(v,R+lo)),u.size+=R+lo-v);break;case d:if(t){if(p&&(r=go(p)))switch(a.segmentCodec){case"aac":this.parseAACPES(a,r);break;case"mp3":this.parseMPEGPES(a,r);break;case"ac3":this.parseAC3PES(a,r)}p={data:[],size:0}}p&&(p.data.push(e.subarray(v,R+lo)),p.size+=R+lo-v);break;case f:t&&(h&&(r=go(h))&&this.parseID3PES(o,r),h={data:[],size:0}),h&&(h.data.push(e.subarray(v,R+lo)),h.size+=R+lo-v);break;case 0:t&&(v+=e[v]+1),y=this._pmtId=fo(e,v);break;case y:{t&&(v+=e[v]+1);const r=po(e,v,this.typeSupported,n,this.observer);c=r.videoPid,c>0&&(s.pid=c,s.segmentCodec=r.segmentVideoCodec),d=r.audioPid,d>0&&(a.pid=d,a.segmentCodec=r.segmentAudioCodec),f=r.id3Pid,f>0&&(o.pid=f),null===m||g||(xr.warn("MPEG-TS PMT found at ".concat(R," after unknown PID '").concat(m,"'. Backtracking to sync byte @").concat(E," to parse all TS packets.")),m=null,R=E-188),g=this.pmtParsed=!0;break}case 17:case 8191:break;default:m=i}}else b++;b>0&&ho(this.observer,new Error("Found ".concat(b," TS packet/s that do not start with 0x47"))),s.pesData=u,a.pesData=p,o.pesData=h;const T={audioTrack:a,videoTrack:s,id3Track:o,textTrack:l};return i&&this.extractRemainingSamples(T),T}flush(){const{remainderData:e}=this;let t;return this.remainderData=null,t=e?this.demux(e,-1,!1,!0):{videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(e){const{audioTrack:t,videoTrack:r,id3Track:n,textTrack:i}=e,s=r.pesData,a=t.pesData,o=n.pesData;let l;if(s&&(l=go(s))?(this.videoParser.parseAVCPES(r,i,l,!0,this._duration),r.pesData=null):r.pesData=s,a&&(l=go(a))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,l);break;case"mp3":this.parseMPEGPES(t,l);break;case"ac3":this.parseAC3PES(t,l)}t.pesData=null}else null!=a&&a.size&&xr.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=a;o&&(l=go(o))?(this.parseID3PES(n,l),n.pesData=null):n.pesData=o}demuxSampleAes(e,t,r){const n=this.demux(e,r,!0,!this.config.progressive),i=this.sampleAes=new oo(this.observer,this.config,t);return this.decrypt(n,i)}decrypt(e,t){return new Promise((r=>{const{audioTrack:n,videoTrack:i}=e;n.samples&&"aac"===n.segmentCodec?t.decryptAacSamples(n.samples,0,(()=>{i.samples?t.decryptAvcSamples(i.samples,0,0,(()=>{r(e)})):r(e)})):i.samples&&t.decryptAvcSamples(i.samples,0,0,(()=>{r(e)}))}))}destroy(){this._duration=0}parseAACPES(e,t){let r=0;const n=this.aacOverFlow;let i,s,a,o=t.data;if(n){this.aacOverFlow=null;const t=n.missing,i=n.sample.unit.byteLength;if(-1===t)o=Xn(n.sample.unit,o);else{const s=i-t;n.sample.unit.set(o.subarray(0,t),s),e.samples.push(n.sample),r=n.missing}}for(i=r,s=o.length;i<s-1&&!Fa(o,i);i++);if(i!==r){let e;const t=i<s-1;if(e=t?"AAC PES did not start with ADTS header,offset:".concat(i):"No ADTS header found in AAC PES",ho(this.observer,new Error(e),t),!t)return}if(Va(e,this.observer,o,i,this.audioCodec),void 0!==t.pts)a=t.pts;else{if(!n)return void xr.warn("[tsdemuxer]: AAC PES unknown PTS");{const t=ja(e.samplerate);a=n.sample.pts+t}}let l,c=0;for(;i<s;){if(l=Ga(e,o,i,a,c),i+=l.length,l.missing){this.aacOverFlow=l;break}for(c++;i<s-1&&!Fa(o,i);i++);}}parseMPEGPES(e,t){const r=t.data,n=r.length;let i=0,s=0;const a=t.pts;if(void 0!==a)for(;s<n;)if(Qa(r,s)){const t=Wa(e,r,s,a,i);if(!t)break;s+=t.length,i++}else s++;else xr.warn("[tsdemuxer]: MPEG PES unknown PTS")}parseAC3PES(e,t){{const r=t.data,n=t.pts;if(void 0===n)return void xr.warn("[tsdemuxer]: AC3 PES unknown PTS");const i=r.length;let s,a=0,o=0;for(;o<i&&(s=no(e,r,o,n,a++))>0;)o+=s}}parseID3PES(e,t){if(void 0===t.pts)return void xr.warn("[tsdemuxer]: ID3 PES unknown PTS");const r=vr({},t,{type:this._videoTrack?$i:Xi,duration:Number.POSITIVE_INFINITY});e.samples.push(r)}}function uo(e,t){return((31&e[t+1])<<8)+e[t+2]}function fo(e,t){return(31&e[t+10])<<8|e[t+11]}function po(e,t,r,n,i){const s={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},a=t+3+((15&e[t+1])<<8|e[t+2])-4;for(t+=12+((15&e[t+10])<<8|e[t+11]);t<a;){const a=uo(e,t),o=(15&e[t+3])<<8|e[t+4];switch(e[t]){case 207:if(!n){mo("ADTS AAC");break}case 15:-1===s.audioPid&&(s.audioPid=a);break;case 21:-1===s.id3Pid&&(s.id3Pid=a);break;case 219:if(!n){mo("H.264");break}case 27:-1===s.videoPid&&(s.videoPid=a,s.segmentVideoCodec="avc");break;case 3:case 4:r.mpeg||r.mp3?-1===s.audioPid&&(s.audioPid=a,s.segmentAudioCodec="mp3"):xr.log("MPEG audio found, not supported in this browser");break;case 193:if(!n){mo("AC-3");break}case 129:r.ac3?-1===s.audioPid&&(s.audioPid=a,s.segmentAudioCodec="ac3"):xr.log("AC-3 audio found, not supported in this browser");break;case 6:if(-1===s.audioPid&&o>0){let n=t+5,i=o;for(;i>2;){if(106===e[n])!0!==r.ac3?xr.log("AC-3 audio found, not supported in this browser for now"):(s.audioPid=a,s.segmentAudioCodec="ac3");const t=e[n+1]+2;n+=t,i-=t}}break;case 194:case 135:return ho(i,new Error("Unsupported EC-3 in M2TS found")),s;case 36:return ho(i,new Error("Unsupported HEVC in M2TS found")),s}t+=o+5}return s}function ho(e,t,r){xr.warn("parsing error: ".concat(t.message)),e.emit(Rr.ERROR,Rr.ERROR,{type:Sr.MEDIA_ERROR,details:Ar.FRAG_PARSING_ERROR,fatal:!1,levelRetry:r,error:t,reason:t.message})}function mo(e){xr.log("".concat(e," with AES-128-CBC encryption found in unencrypted stream"))}function go(e){let t,r,n,i,s,a=0;const o=e.data;if(!e||0===e.size)return null;for(;o[0].length<19&&o.length>1;)o[0]=Xn(o[0],o[1]),o.splice(1,1);t=o[0];if(1===(t[0]<<16)+(t[1]<<8)+t[2]){if(r=(t[4]<<8)+t[5],r&&r>e.size-6)return null;const l=t[7];192&l&&(i=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,64&l?(s=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2,i-s>54e5&&(xr.warn("".concat(Math.round((i-s)/9e4),"s delta between PTS and DTS, align them")),i=s)):s=i),n=t[8];let c=n+9;if(e.size<=c)return null;e.size-=c;const u=new Uint8Array(e.size);for(let e=0,r=o.length;e<r;e++){t=o[e];let r=t.byteLength;if(c){if(c>r){c-=r;continue}t=t.subarray(c),r-=c,c=0}u.set(t,a),a+=r}return r&&(r-=n+3),{data:u,pts:i,dts:s,len:r}}return null}class yo{static getSilentFrame(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}}}const vo=Math.pow(2,32)-1;class Eo{static init(){let e;for(e in Eo.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},Eo.types)Eo.types.hasOwnProperty(e)&&(Eo.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);Eo.HDLR_TYPES={video:t,audio:r};const n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),i=new Uint8Array([0,0,0,0,0,0,0,0]);Eo.STTS=Eo.STSC=Eo.STCO=i,Eo.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Eo.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),Eo.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),Eo.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const s=new Uint8Array([105,115,111,109]),a=new Uint8Array([97,118,99,49]),o=new Uint8Array([0,0,0,1]);Eo.FTYP=Eo.box(Eo.types.ftyp,s,o,s,a),Eo.DINF=Eo.box(Eo.types.dinf,Eo.box(Eo.types.dref,n))}static box(e){let t=8;for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];let s=n.length;const a=s;for(;s--;)t+=n[s].byteLength;const o=new Uint8Array(t);for(o[0]=t>>24&255,o[1]=t>>16&255,o[2]=t>>8&255,o[3]=255&t,o.set(e,4),s=0,t=8;s<a;s++)o.set(n[s],t),t+=n[s].byteLength;return o}static hdlr(e){return Eo.box(Eo.types.hdlr,Eo.HDLR_TYPES[e])}static mdat(e){return Eo.box(Eo.types.mdat,e)}static mdhd(e,t){t*=e;const r=Math.floor(t/(vo+1)),n=Math.floor(t%(vo+1));return Eo.box(Eo.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,r>>24,r>>16&255,r>>8&255,255&r,n>>24,n>>16&255,n>>8&255,255&n,85,196,0,0]))}static mdia(e){return Eo.box(Eo.types.mdia,Eo.mdhd(e.timescale,e.duration),Eo.hdlr(e.type),Eo.minf(e))}static mfhd(e){return Eo.box(Eo.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))}static minf(e){return"audio"===e.type?Eo.box(Eo.types.minf,Eo.box(Eo.types.smhd,Eo.SMHD),Eo.DINF,Eo.stbl(e)):Eo.box(Eo.types.minf,Eo.box(Eo.types.vmhd,Eo.VMHD),Eo.DINF,Eo.stbl(e))}static moof(e,t,r){return Eo.box(Eo.types.moof,Eo.mfhd(e),Eo.traf(r,t))}static moov(e){let t=e.length;const r=[];for(;t--;)r[t]=Eo.trak(e[t]);return Eo.box.apply(null,[Eo.types.moov,Eo.mvhd(e[0].timescale,e[0].duration)].concat(r).concat(Eo.mvex(e)))}static mvex(e){let t=e.length;const r=[];for(;t--;)r[t]=Eo.trex(e[t]);return Eo.box.apply(null,[Eo.types.mvex,...r])}static mvhd(e,t){t*=e;const r=Math.floor(t/(vo+1)),n=Math.floor(t%(vo+1)),i=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,r>>24,r>>16&255,r>>8&255,255&r,n>>24,n>>16&255,n>>8&255,255&n,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return Eo.box(Eo.types.mvhd,i)}static sdtp(e){const t=e.samples||[],r=new Uint8Array(4+t.length);let n,i;for(n=0;n<t.length;n++)i=t[n].flags,r[n+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return Eo.box(Eo.types.sdtp,r)}static stbl(e){return Eo.box(Eo.types.stbl,Eo.stsd(e),Eo.box(Eo.types.stts,Eo.STTS),Eo.box(Eo.types.stsc,Eo.STSC),Eo.box(Eo.types.stsz,Eo.STSZ),Eo.box(Eo.types.stco,Eo.STCO))}static avc1(e){let t,r,n,i=[],s=[];for(t=0;t<e.sps.length;t++)r=e.sps[t],n=r.byteLength,i.push(n>>>8&255),i.push(255&n),i=i.concat(Array.prototype.slice.call(r));for(t=0;t<e.pps.length;t++)r=e.pps[t],n=r.byteLength,s.push(n>>>8&255),s.push(255&n),s=s.concat(Array.prototype.slice.call(r));const a=Eo.box(Eo.types.avcC,new Uint8Array([1,i[3],i[4],i[5],255,224|e.sps.length].concat(i).concat([e.pps.length]).concat(s))),o=e.width,l=e.height,c=e.pixelRatio[0],u=e.pixelRatio[1];return Eo.box(Eo.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,o>>8&255,255&o,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a,Eo.box(Eo.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),Eo.box(Eo.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,u>>24,u>>16&255,u>>8&255,255&u])))}static esds(e){const t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))}static audioStsd(e){const t=e.samplerate;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0])}static mp4a(e){return Eo.box(Eo.types.mp4a,Eo.audioStsd(e),Eo.box(Eo.types.esds,Eo.esds(e)))}static mp3(e){return Eo.box(Eo.types[".mp3"],Eo.audioStsd(e))}static ac3(e){return Eo.box(Eo.types["ac-3"],Eo.audioStsd(e),Eo.box(Eo.types.dac3,e.config))}static stsd(e){return"audio"===e.type?"mp3"===e.segmentCodec&&"mp3"===e.codec?Eo.box(Eo.types.stsd,Eo.STSD,Eo.mp3(e)):"ac3"===e.segmentCodec?Eo.box(Eo.types.stsd,Eo.STSD,Eo.ac3(e)):Eo.box(Eo.types.stsd,Eo.STSD,Eo.mp4a(e)):Eo.box(Eo.types.stsd,Eo.STSD,Eo.avc1(e))}static tkhd(e){const t=e.id,r=e.duration*e.timescale,n=e.width,i=e.height,s=Math.floor(r/(vo+1)),a=Math.floor(r%(vo+1));return Eo.box(Eo.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,a>>24,a>>16&255,a>>8&255,255&a,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>8&255,255&n,0,0,i>>8&255,255&i,0,0]))}static traf(e,t){const r=Eo.sdtp(e),n=e.id,i=Math.floor(t/(vo+1)),s=Math.floor(t%(vo+1));return Eo.box(Eo.types.traf,Eo.box(Eo.types.tfhd,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n])),Eo.box(Eo.types.tfdt,new Uint8Array([1,0,0,0,i>>24,i>>16&255,i>>8&255,255&i,s>>24,s>>16&255,s>>8&255,255&s])),Eo.trun(e,r.length+16+20+8+16+8+8),r)}static trak(e){return e.duration=e.duration||4294967295,Eo.box(Eo.types.trak,Eo.tkhd(e),Eo.mdia(e))}static trex(e){const t=e.id;return Eo.box(Eo.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){const r=e.samples||[],n=r.length,i=12+16*n,s=new Uint8Array(i);let a,o,l,c,u,d;for(t+=8+i,s.set(["video"===e.type?1:0,0,15,1,n>>>24&255,n>>>16&255,n>>>8&255,255&n,t>>>24&255,t>>>16&255,t>>>8&255,255&t],0),a=0;a<n;a++)o=r[a],l=o.duration,c=o.size,u=o.flags,d=o.cts,s.set([l>>>24&255,l>>>16&255,l>>>8&255,255&l,c>>>24&255,c>>>16&255,c>>>8&255,255&c,u.isLeading<<2|u.dependsOn,u.isDependedOn<<6|u.hasRedundancy<<4|u.paddingValue<<1|u.isNonSync,61440&u.degradPrio,15&u.degradPrio,d>>>24&255,d>>>16&255,d>>>8&255,255&d],12+16*a);return Eo.box(Eo.types.trun,s)}static initSegment(e){Eo.types||Eo.init();const t=Eo.moov(e);return Xn(Eo.FTYP,t)}}Eo.types=void 0,Eo.HDLR_TYPES=void 0,Eo.STTS=void 0,Eo.STSC=void 0,Eo.STCO=void 0,Eo.STSZ=void 0,Eo.VMHD=void 0,Eo.SMHD=void 0,Eo.STSD=void 0,Eo.FTYP=void 0,Eo.DINF=void 0;const bo=9e4;function To(e,t){const r=e*t*(arguments.length>2&&void 0!==arguments[2]?arguments[2]:1);return arguments.length>3&&void 0!==arguments[3]&&arguments[3]?Math.round(r):r}function Ro(e){return To(e,1e3,1/bo,arguments.length>1&&void 0!==arguments[1]&&arguments[1])}let So,Ao=null,Lo=null;class wo{constructor(e,t,r){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=t,this.typeSupported=r,this.ISGenerated=!1,null===Ao){const e=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Ao=e?parseInt(e[1]):0}if(null===Lo){const e=navigator.userAgent.match(/Safari\/(\d+)/i);Lo=e?parseInt(e[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){xr.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e}resetNextTimestamp(){xr.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){xr.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let t=!1;const r=e.reduce(((e,r)=>{const n=r.pts-e;return n<-4294967296?(t=!0,Co(e,r.pts)):n>0?e:r.pts}),e[0].pts);return t&&xr.debug("PTS rollover detected"),r}remux(e,t,r,n,i,s,a,o){let l,c,u,d,f,p,h=i,m=i;const g=e.pid>-1,y=t.pid>-1,v=t.samples.length,E=e.samples.length>0,b=a&&v>0||v>1;if((!g||E)&&(!y||b)||this.ISGenerated||a){if(this.ISGenerated){var T,R,S,A;const e=this.videoTrackConfig;!e||t.width===e.width&&t.height===e.height&&(null==(T=t.pixelRatio)?void 0:T[0])===(null==(R=e.pixelRatio)?void 0:R[0])&&(null==(S=t.pixelRatio)?void 0:S[1])===(null==(A=e.pixelRatio)?void 0:A[1])||this.resetInitSegment()}else u=this.generateIS(e,t,i,s);const r=this.isVideoContiguous;let n,a=-1;if(b&&(a=function(e){for(let t=0;t<e.length;t++)if(e[t].key)return t;return-1}(t.samples),!r&&this.config.forceKeyFrameOnDiscontinuity))if(p=!0,a>0){xr.warn("[mp4-remuxer]: Dropped ".concat(a," out of ").concat(v," video samples due to a missing keyframe"));const e=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(a),t.dropped+=a,m+=(t.samples[0].pts-e)/t.inputTimeScale,n=m}else-1===a&&(xr.warn("[mp4-remuxer]: No keyframe found out of ".concat(v," video samples")),p=!1);if(this.ISGenerated){if(E&&b){const r=this.getVideoStartPts(t.samples),n=(Co(e.samples[0].pts,r)-r)/t.inputTimeScale;h+=Math.max(0,n),m+=Math.max(0,-n)}if(E){if(e.samplerate||(xr.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),u=this.generateIS(e,t,i,s)),c=this.remuxAudio(e,h,this.isAudioContiguous,s,y||b||o===Ni?m:void 0),b){const n=c?c.endPTS-c.startPTS:0;t.inputTimeScale||(xr.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),u=this.generateIS(e,t,i,s)),l=this.remuxVideo(t,m,r,n)}}else b&&(l=this.remuxVideo(t,m,r,0));l&&(l.firstKeyFrame=a,l.independent=-1!==a,l.firstKeyFramePTS=n)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(r.samples.length&&(f=ko(r,i,this._initPTS,this._initDTS)),n.samples.length&&(d=xo(n,i,this._initPTS))),{audio:c,video:l,initSegment:u,independent:p,text:d,id3:f}}generateIS(e,t,r,n){const i=e.samples,s=t.samples,a=this.typeSupported,o={},l=this._initPTS;let c,u,d,f=!l||n,p="audio/mp4";if(f&&(c=u=1/0),e.config&&i.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":a.mpeg?(p="audio/mpeg",e.codec=""):a.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3"}o.audio={id:"audio",container:p,codec:e.codec,initSegment:"mp3"===e.segmentCodec&&a.mpeg?new Uint8Array(0):Eo.initSegment([e]),metadata:{channelCount:e.channelCount}},f&&(d=e.inputTimeScale,l&&d===l.timescale?f=!1:c=u=i[0].pts-Math.round(d*r))}if(t.sps&&t.pps&&s.length){if(t.timescale=t.inputTimeScale,o.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:Eo.initSegment([t]),metadata:{width:t.width,height:t.height}},f)if(d=t.inputTimeScale,l&&d===l.timescale)f=!1;else{const e=this.getVideoStartPts(s),t=Math.round(d*r);u=Math.min(u,Co(s[0].dts,e)-t),c=Math.min(c,e-t)}this.videoTrackConfig={width:t.width,height:t.height,pixelRatio:t.pixelRatio}}if(Object.keys(o).length)return this.ISGenerated=!0,f?(this._initPTS={baseTime:c,timescale:d},this._initDTS={baseTime:u,timescale:d}):c=d=void 0,{tracks:o,initPTS:c,timescale:d}}remuxVideo(e,t,r,n){const i=e.inputTimeScale,s=e.samples,a=[],o=s.length,l=this._initPTS;let c,u,d=this.nextAvcDts,f=8,p=this.videoSampleDuration,h=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY,g=!1;if(!r||null===d){const e=t*i,n=s[0].pts-Co(s[0].dts,s[0].pts);Ao&&null!==d&&Math.abs(e-n-d)<15e3?r=!0:d=e-n}const y=l.baseTime*i/l.timescale;for(let B=0;B<o;B++){const e=s[B];e.pts=Co(e.pts-y,d),e.dts=Co(e.dts-y,d),e.dts<s[B>0?B-1:B].dts&&(g=!0)}g&&s.sort((function(e,t){const r=e.dts-t.dts,n=e.pts-t.pts;return r||n})),c=s[0].dts,u=s[s.length-1].dts;const v=u-c,E=v?Math.round(v/(o-1)):p||e.inputTimeScale/30;if(r){const e=c-d,r=e>E,n=e<-1;if((r||n)&&(r?xr.warn("AVC: ".concat(Ro(e,!0)," ms (").concat(e,"dts) hole between fragments detected at ").concat(t.toFixed(3))):xr.warn("AVC: ".concat(Ro(-e,!0)," ms (").concat(e,"dts) overlapping between fragments detected at ").concat(t.toFixed(3))),!n||d>=s[0].pts||Ao)){c=d;const t=s[0].pts-e;if(r)s[0].dts=c,s[0].pts=t;else for(let r=0;r<s.length&&!(s[r].dts>t);r++)s[r].dts-=e,s[r].pts-=e;xr.log("Video: Initial PTS/DTS adjusted: ".concat(Ro(t,!0),"/").concat(Ro(c,!0),", delta: ").concat(Ro(e,!0)," ms"))}}c=Math.max(0,c);let b=0,T=0,R=c;for(let B=0;B<o;B++){const e=s[B],t=e.units,r=t.length;let n=0;for(let i=0;i<r;i++)n+=t[i].data.length;T+=n,b+=r,e.length=n,e.dts<R?(e.dts=R,R+=E/4|0||1):R=e.dts,h=Math.min(e.pts,h),m=Math.max(e.pts,m)}u=s[o-1].dts;const S=T+4*b+8;let A;try{A=new Uint8Array(S)}catch(I){return void this.observer.emit(Rr.ERROR,Rr.ERROR,{type:Sr.MUX_ERROR,details:Ar.REMUX_ALLOC_ERROR,fatal:!1,error:I,bytes:S,reason:"fail allocating video mdat ".concat(S)})}const L=new DataView(A.buffer);L.setUint32(0,S),A.set(Eo.types.mdat,4);let w=!1,C=Number.POSITIVE_INFINITY,k=Number.POSITIVE_INFINITY,x=Number.NEGATIVE_INFINITY,_=Number.NEGATIVE_INFINITY;for(let B=0;B<o;B++){const e=s[B],t=e.units;let r,l=0;for(let n=0,i=t.length;n<i;n++){const e=t[n],r=e.data,i=e.data.byteLength;L.setUint32(f,i),f+=4,A.set(r,f),f+=i,l+=4+i}if(B<o-1)p=s[B+1].dts-e.dts,r=s[B+1].pts-e.pts;else{const t=this.config,a=B>0?e.dts-s[B-1].dts:E;if(r=B>0?e.pts-s[B-1].pts:E,t.stretchShortVideoTrack&&null!==this.nextAudioPts){const r=Math.floor(t.maxBufferHole*i),s=(n?h+n*i:this.nextAudioPts)-e.pts;s>r?(p=s-a,p<0?p=a:w=!0,xr.log("[mp4-remuxer]: It is approximately ".concat(s/90," ms to the next segment; using duration ").concat(p/90," ms for the last video frame."))):p=a}else p=a}const c=Math.round(e.pts-e.dts);C=Math.min(C,p),x=Math.max(x,p),k=Math.min(k,r),_=Math.max(_,r),a.push(new _o(e.key,p,l,c))}if(a.length)if(Ao){if(Ao<70){const e=a[0].flags;e.dependsOn=2,e.isNonSync=0}}else if(Lo&&_-k<x-C&&E/x<.025&&0===a[0].cts){xr.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let e=c;for(let t=0,r=a.length;t<r;t++){const n=e+a[t].duration,i=e+a[t].cts;if(t<r-1){const e=n+a[t+1].cts;a[t].duration=e-i}else a[t].duration=t?a[t-1].duration:E;a[t].cts=0,e=n}}p=w||!p?E:p,this.nextAvcDts=d=u+p,this.videoSampleDuration=p,this.isVideoContiguous=!0;const D={data1:Eo.moof(e.sequenceNumber++,c,vr({},e,{samples:a})),data2:A,startPTS:h/i,endPTS:(m+p)/i,startDTS:c/i,endDTS:d/i,type:"video",hasAudio:!1,hasVideo:!0,nb:a.length,dropped:e.dropped};return e.samples=[],e.dropped=0,D}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return 1152;case"ac3":return 1536;default:return 1024}}remuxAudio(e,t,r,n,i){const s=e.inputTimeScale,a=s/(e.samplerate?e.samplerate:s),o=this.getSamplesPerFrame(e),l=o*a,c=this._initPTS,u="mp3"===e.segmentCodec&&this.typeSupported.mpeg,d=[],f=void 0!==i;let p=e.samples,h=u?0:8,m=this.nextAudioPts||-1;const g=t*s,y=c.baseTime*s/c.timescale;if(this.isAudioContiguous=r=r||p.length&&m>0&&(n&&Math.abs(g-m)<9e3||Math.abs(Co(p[0].pts-y,g)-m)<20*l),p.forEach((function(e){e.pts=Co(e.pts-y,g)})),!r||m<0){if(p=p.filter((e=>e.pts>=0)),!p.length)return;m=0===i?0:n&&!f?Math.max(0,g):p[0].pts}if("aac"===e.segmentCodec){const t=this.config.maxAudioFramesDrift;for(let r=0,n=m;r<p.length;r++){const i=p[r],a=i.pts,o=a-n,c=Math.abs(1e3*o/s);if(o<=-t*l&&f)0===r&&(xr.warn("Audio frame @ ".concat((a/s).toFixed(3),"s overlaps nextAudioPts by ").concat(Math.round(1e3*o/s)," ms.")),this.nextAudioPts=m=n=a);else if(o>=t*l&&c<1e4&&f){let t=Math.round(o/l);n=a-t*l,n<0&&(t--,n+=l),0===r&&(this.nextAudioPts=m=n),xr.warn("[mp4-remuxer]: Injecting ".concat(t," audio frame @ ").concat((n/s).toFixed(3),"s due to ").concat(Math.round(1e3*o/s)," ms gap."));for(let s=0;s<t;s++){const t=Math.max(n,0);let s=yo.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);s||(xr.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),s=i.unit.subarray()),p.splice(r,0,{unit:s,pts:t}),n+=l,r++}}i.pts=n,n+=l}}let v,E=null,b=null,T=0,R=p.length;for(;R--;)T+=p[R].unit.byteLength;for(let _=0,D=p.length;_<D;_++){const t=p[_],n=t.unit;let i=t.pts;if(null!==b){d[_-1].duration=Math.round((i-b)/a)}else{if(r&&"aac"===e.segmentCodec&&(i=m),E=i,!(T>0))return;T+=h;try{v=new Uint8Array(T)}catch(x){return void this.observer.emit(Rr.ERROR,Rr.ERROR,{type:Sr.MUX_ERROR,details:Ar.REMUX_ALLOC_ERROR,fatal:!1,error:x,bytes:T,reason:"fail allocating audio mdat ".concat(T)})}if(!u){new DataView(v.buffer).setUint32(0,T),v.set(Eo.types.mdat,4)}}v.set(n,h);const s=n.byteLength;h+=s,d.push(new _o(!0,o,s,0)),b=i}const S=d.length;if(!S)return;const A=d[d.length-1];this.nextAudioPts=m=b+a*A.duration;const L=u?new Uint8Array(0):Eo.moof(e.sequenceNumber++,E/a,vr({},e,{samples:d}));e.samples=[];const w=E/s,C=m/s,k={data1:L,data2:v,startPTS:w,endPTS:C,startDTS:w,endDTS:C,type:"audio",hasAudio:!0,hasVideo:!1,nb:S};return this.isAudioContiguous=!0,k}remuxEmptyAudio(e,t,r,n){const i=e.inputTimeScale,s=i/(e.samplerate?e.samplerate:i),a=this.nextAudioPts,o=this._initDTS,l=9e4*o.baseTime/o.timescale,c=(null!==a?a:n.startDTS*i)+l,u=n.endDTS*i+l,d=1024*s,f=Math.ceil((u-c)/d),p=yo.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(xr.warn("[mp4-remuxer]: remux empty Audio"),!p)return void xr.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");const h=[];for(let m=0;m<f;m++){const e=c+m*d;h.push({unit:p,pts:e,dts:e})}return e.samples=h,this.remuxAudio(e,t,r,!1)}}function Co(e,t){let r;if(null===t)return e;for(r=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=r;return e}function ko(e,t,r,n){const i=e.samples.length;if(!i)return;const s=e.inputTimeScale;for(let o=0;o<i;o++){const i=e.samples[o];i.pts=Co(i.pts-r.baseTime*s/r.timescale,t*s)/s,i.dts=Co(i.dts-n.baseTime*s/n.timescale,t*s)/s}const a=e.samples;return e.samples=[],{samples:a}}function xo(e,t,r){const n=e.samples.length;if(!n)return;const i=e.inputTimeScale;for(let a=0;a<n;a++){const n=e.samples[a];n.pts=Co(n.pts-r.baseTime*i/r.timescale,t*i)/i}e.samples.sort(((e,t)=>e.pts-t.pts));const s=e.samples;return e.samples=[],{samples:s}}class _o{constructor(e,t,r,n){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=t,this.size=r,this.cts=n,this.flags={isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:e?2:1,isNonSync:e?0:1}}}function Do(e,t){const r=null==e?void 0:e.codec;if(r&&r.length>4)return r;if(t===Nr){if("ec-3"===r||"ac-3"===r||"alac"===r)return r;if("fLaC"===r||"Opus"===r){return gi(r,!1)}const e="mp4a.40.5";return xr.info('Parsed audio codec "'.concat(r,'" or audio object type not handled. Using "').concat(e,'"')),e}return xr.warn('Unhandled video codec "'.concat(r,'"')),"hvc1"===r||"hev1"===r?"hvc1.1.6.L120.90":"av01"===r?"av01.0.04M.08":"avc1.42e01e"}try{So=self.performance.now.bind(self.performance)}catch(pu){xr.debug("Unable to use Performance API on this environment"),So=null==Xr?void 0:Xr.Date.now}const Io=[{demux:class{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,r,n){const i=this.videoTrack=Ba("video",1),s=this.audioTrack=Ba("audio",1),a=this.txtTrack=Ba("text",1);if(this.id3Track=Ba("id3",1),this.timeOffset=0,null==e||!e.byteLength)return;const o=Fn(e);if(o.video){const{id:e,timescale:t,codec:r}=o.video;i.id=e,i.timescale=a.timescale=t,i.codec=r}if(o.audio){const{id:e,timescale:t,codec:r}=o.audio;s.id=e,s.timescale=t,s.codec=r}a.id=_n.text,i.sampleDuration=0,i.duration=s.duration=n}resetContiguity(){this.remainderData=null}static probe(e){return function(e){const t=e.byteLength;for(let r=0;r<t;){const n=Bn(e,r);if(n>8&&109===e[r+4]&&111===e[r+5]&&111===e[r+6]&&102===e[r+7])return!0;r=n>1?r+n:t}return!1}(e)}demux(e,t){this.timeOffset=t;let r=e;const n=this.videoTrack,i=this.txtTrack;if(this.config.progressive){this.remainderData&&(r=Xn(this.remainderData,e));const t=function(e){const t={valid:null,remainder:null},r=On(e,["moof"]);if(r.length<2)return t.remainder=e,t;const n=r[r.length-1];return t.valid=cn(e,0,n.byteOffset-8),t.remainder=cn(e,n.byteOffset-8),t}(r);this.remainderData=t.remainder,n.samples=t.valid||new Uint8Array}else n.samples=r;const s=this.extractID3Track(n,t);return i.samples=zn(t,n),{videoTrack:n,audioTrack:this.audioTrack,id3Track:s,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,t=this.videoTrack,r=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const n=this.extractID3Track(t,this.timeOffset);return r.samples=zn(e,t),{videoTrack:t,audioTrack:Ba(),id3Track:n,textTrack:Ba()}}extractID3Track(e,t){const r=this.id3Track;if(e.samples.length){const n=On(e.samples,["emsg"]);n&&n.forEach((e=>{const n=function(e){const t=e[0];let r="",n="",i=0,s=0,a=0,o=0,l=0,c=0;if(0===t){for(;"\0"!==Dn(e.subarray(c,c+1));)r+=Dn(e.subarray(c,c+1)),c+=1;for(r+=Dn(e.subarray(c,c+1)),c+=1;"\0"!==Dn(e.subarray(c,c+1));)n+=Dn(e.subarray(c,c+1)),c+=1;n+=Dn(e.subarray(c,c+1)),c+=1,i=Bn(e,12),s=Bn(e,16),o=Bn(e,20),l=Bn(e,24),c=28}else if(1===t){c+=4,i=Bn(e,c),c+=4;const t=Bn(e,c);c+=4;const s=Bn(e,c);for(c+=4,a=2**32*t+s,br(a)||(a=Number.MAX_SAFE_INTEGER,xr.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),o=Bn(e,c),c+=4,l=Bn(e,c),c+=4;"\0"!==Dn(e.subarray(c,c+1));)r+=Dn(e.subarray(c,c+1)),c+=1;for(r+=Dn(e.subarray(c,c+1)),c+=1;"\0"!==Dn(e.subarray(c,c+1));)n+=Dn(e.subarray(c,c+1)),c+=1;n+=Dn(e.subarray(c,c+1)),c+=1}return{schemeIdUri:r,value:n,timeScale:i,presentationTime:a,presentationTimeDelta:s,eventDuration:o,id:l,payload:e.subarray(c,e.byteLength)}}(e);if(eo.test(n.schemeIdUri)){const e=Er(n.presentationTime)?n.presentationTime/n.timeScale:t+n.presentationTimeDelta/n.timeScale;let i=4294967295===n.eventDuration?Number.POSITIVE_INFINITY:n.eventDuration/n.timeScale;i<=.001&&(i=Number.POSITIVE_INFINITY);const s=n.payload;r.samples.push({data:s,len:s.byteLength,dts:e,pts:e,type:$i,duration:i})}}))}return r}demuxSampleAes(e,t,r){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){}},remux:class{constructor(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}destroy(){}resetTimeStamp(e){this.initPTS=e,this.lastEndTime=null}resetNextTimestamp(){this.lastEndTime=null}resetInitSegment(e,t,r,n){this.audioCodec=t,this.videoCodec=r,this.generateInitSegment(function(e,t){if(!e||!t)return e;const r=t.keyId;r&&t.isCommonEncryption&&On(e,["moov","trak"]).forEach((e=>{const t=On(e,["mdia","minf","stbl","stsd"])[0].subarray(8);let n=On(t,["enca"]);const i=n.length>0;i||(n=On(t,["encv"])),n.forEach((e=>{On(i?e.subarray(28):e.subarray(78),["sinf"]).forEach((e=>{const t=qn(e);if(t){const e=t.subarray(8,24);e.some((e=>0!==e))||(xr.log("[eme] Patching keyId in 'enc".concat(i?"a":"v",">sinf>>tenc' box: ").concat(Cn.hexDump(e)," -> ").concat(Cn.hexDump(r))),t.set(r,8))}}))}))}));return e}(e,n)),this.emitInitSegment=!0}generateInitSegment(e){let{audioCodec:t,videoCodec:r}=this;if(null==e||!e.byteLength)return this.initTracks=void 0,void(this.initData=void 0);const n=this.initData=Fn(e);n.audio&&(t=Do(n.audio,Nr)),n.video&&(r=Do(n.video,Or));const i={};n.audio&&n.video?i.audiovideo={container:"video/mp4",codec:t+","+r,initSegment:e,id:"main"}:n.audio?i.audio={container:"audio/mp4",codec:t,initSegment:e,id:"audio"}:n.video?i.video={container:"video/mp4",codec:r,initSegment:e,id:"main"}:xr.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=i}remux(e,t,r,n,i,s){var a,o;let{initPTS:l,lastEndTime:c}=this;const u={audio:void 0,video:void 0,text:n,id3:r,initSegment:void 0};Er(c)||(c=this.lastEndTime=i||0);const d=t.samples;if(null==d||!d.length)return u;const f={initPTS:void 0,timescale:1};let p=this.initData;if(null!=(a=p)&&a.length||(this.generateInitSegment(d),p=this.initData),null==(o=p)||!o.length)return xr.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),u;this.emitInitSegment&&(f.tracks=this.initTracks,this.emitInitSegment=!1);const h=function(e,t){let r=0,n=0,i=0;const s=On(e,["moof","traf"]);for(let a=0;a<s.length;a++){const e=s[a],o=On(e,["tfhd"])[0],l=t[Bn(o,4)];if(!l)continue;const c=l.default,u=Bn(o,0)|(null==c?void 0:c.flags);let d=null==c?void 0:c.duration;8&u&&(d=Bn(o,2&u?12:8));const f=l.timescale||9e4,p=On(e,["trun"]);for(let t=0;t<p.length;t++)r=Hn(p[t]),!r&&d&&(r=d*Bn(p[t],4)),l.type===Or?n+=r/f:l.type===Nr&&(i+=r/f)}if(0===n&&0===i){let t=1/0,r=0,n=0;const i=On(e,["sidx"]);for(let e=0;e<i.length;e++){const s=Kn(i[e]);if(null!=s&&s.references){t=Math.min(t,s.earliestPresentationTime/s.timescale);const e=s.references.reduce(((e,t)=>e+t.info.duration||0),0);r=Math.max(r,e+s.earliestPresentationTime/s.timescale),n=r-t}}if(n&&Er(n))return n}return n||i}(d,p),m=function(e,t){return On(t,["moof","traf"]).reduce(((t,r)=>{const n=On(r,["tfdt"])[0],i=n[0],s=On(r,["tfhd"]).reduce(((t,r)=>{const s=Bn(r,4),a=e[s];if(a){let e=Bn(n,4);if(1===i){if(e===kn)return xr.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),t;e*=kn+1,e+=Bn(n,8)}const r=e/(a.timescale||9e4);if(Er(r)&&(null===t||r<t))return r}return t}),null);return null!==s&&Er(s)&&(null===t||s<t)?s:t}),null)}(p,d),g=null===m?i:m;(function(e,t,r,n){if(null===e)return!0;const i=Math.max(n,1),s=t-e.baseTime/e.timescale;return Math.abs(s-r)>i}(l,g,i,h)||f.timescale!==l.timescale&&s)&&(f.initPTS=g-i,l&&1===l.timescale&&xr.warn("Adjusting initPTS by ".concat(f.initPTS-l.baseTime)),this.initPTS=l={baseTime:f.initPTS,timescale:1});const y=e?g-l.baseTime/l.timescale:c,v=y+h;!function(e,t,r){On(t,["moof","traf"]).forEach((t=>{On(t,["tfhd"]).forEach((n=>{const i=Bn(n,4),s=e[i];if(!s)return;const a=s.timescale||9e4;On(t,["tfdt"]).forEach((e=>{const t=e[0],n=r*a;if(n){let r=Bn(e,4);if(0===t)r-=n,r=Math.max(r,0),Nn(e,4,r);else{r*=Math.pow(2,32),r+=Bn(e,8),r-=n,r=Math.max(r,0);const t=Math.floor(r/(kn+1)),i=Math.floor(r%(kn+1));Nn(e,4,t),Nn(e,8,i)}}}))}))}))}(p,d,l.baseTime/l.timescale),h>0?this.lastEndTime=v:(xr.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const E=!!p.audio,b=!!p.video;let T="";E&&(T+="audio"),b&&(T+="video");const R={data1:d,startPTS:y,startDTS:y,endPTS:v,endDTS:v,type:T,hasAudio:E,hasVideo:b,nb:1,dropped:0};return u.audio="audio"===R.type?R:void 0,u.video="audio"!==R.type?R:void 0,u.initSegment=f,u.id3=ko(r,i,l,l),n.samples.length&&(u.text=xo(n,i,l)),u}}},{demux:co,remux:wo},{demux:class extends Pa{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,r,n){super.resetInitSegment(e,t,r,n),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:n,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=fn(e,0);let r=(null==t?void 0:t.length)||0;if(Ja(e,r))return!1;for(let n=e.length;r<n;r++)if(Ma(e,r))return xr.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return function(e,t){return function(e,t){return t+5<e.length}(e,t)&&Na(e,t)&&Ka(e,t)<=e.length-t}(e,t)}appendFrame(e,t,r){Va(e,this.observer,t,r,e.manifestCodec);const n=Ga(e,t,r,this.basePTS,this.frameIndex);if(n&&0===n.missing)return n}},remux:wo},{demux:class extends Pa{resetInitSegment(e,t,r,n){super.resetInitSegment(e,t,r,n),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:n,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=fn(e,0);let r=(null==t?void 0:t.length)||0;if(t&&11===e[r]&&119===e[r+1]&&void 0!==mn(t)&&to(e,r)<=16)return!1;for(let n=e.length;r<n;r++)if(Ja(e,r))return xr.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return function(e,t){return Za(e,t)&&4<=e.length-t}(e,t)}appendFrame(e,t,r){if(null!==this.basePTS)return Wa(e,t,r,this.basePTS,this.frameIndex)}},remux:wo}];Io.splice(2,0,{demux:ro,remux:wo});class Bo{constructor(e,t,r,n,i){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=r,this.vendor=n,this.id=i}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,r,n){const i=r.transmuxing;i.executeStart=So();let s=new Uint8Array(e);const{currentTransmuxState:a,transmuxConfig:o}=this;n&&(this.currentTransmuxState=n);const{contiguous:l,discontinuity:c,trackSwitch:u,accurateTimeOffset:d,timeOffset:f,initSegmentChange:p}=n||a,{audioCodec:h,videoCodec:m,defaultInitPts:g,duration:y,initSegmentData:v}=o,E=function(e,t){let r=null;e.byteLength>0&&null!=(null==t?void 0:t.key)&&null!==t.iv&&null!=t.method&&(r=t);return r}(s,t);if(E&&"AES-128"===E.method){const e=this.getDecrypter();if(!e.isSync())return this.decryptionPromise=e.webCryptoDecrypt(s,E.key.buffer,E.iv.buffer).then((e=>{const t=this.push(e,null,r);return this.decryptionPromise=null,t})),this.decryptionPromise;{let t=e.softwareDecrypt(s,E.key.buffer,E.iv.buffer);if(r.part>-1&&(t=e.flush()),!t)return i.executeEnd=So(),Po(r);s=new Uint8Array(t)}}const b=this.needsProbing(c,u);if(b){const e=this.configureTransmuxer(s);if(e)return xr.warn("[transmuxer] ".concat(e.message)),this.observer.emit(Rr.ERROR,Rr.ERROR,{type:Sr.MEDIA_ERROR,details:Ar.FRAG_PARSING_ERROR,fatal:!1,error:e,reason:e.message}),i.executeEnd=So(),Po(r)}(c||u||p||b)&&this.resetInitSegment(v,h,m,y,t),(c||p||b)&&this.resetInitialTimestamp(g),l||this.resetContiguity();const T=this.transmux(s,E,f,d,r),R=this.currentTransmuxState;return R.contiguous=!0,R.discontinuity=!1,R.trackSwitch=!1,i.executeEnd=So(),T}flush(e){const t=e.transmuxing;t.executeStart=So();const{decrypter:r,currentTransmuxState:n,decryptionPromise:i}=this;if(i)return i.then((()=>this.flush(e)));const s=[],{timeOffset:a}=n;if(r){const t=r.flush();t&&s.push(this.push(t,null,e))}const{demuxer:o,remuxer:l}=this;if(!o||!l)return t.executeEnd=So(),[Po(e)];const c=o.flush(a);return Uo(c)?c.then((t=>(this.flushRemux(s,t,e),s))):(this.flushRemux(s,c,e),s)}flushRemux(e,t,r){const{audioTrack:n,videoTrack:i,id3Track:s,textTrack:a}=t,{accurateTimeOffset:o,timeOffset:l}=this.currentTransmuxState;xr.log("[transmuxer.ts]: Flushed fragment ".concat(r.sn).concat(r.part>-1?" p: "+r.part:""," of level ").concat(r.level));const c=this.remuxer.remux(n,i,s,a,l,o,!0,this.id);e.push({remuxResult:c,chunkMeta:r}),r.transmuxing.executeEnd=So()}resetInitialTimestamp(e){const{demuxer:t,remuxer:r}=this;t&&r&&(t.resetTimeStamp(e),r.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:t}=this;e&&t&&(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,r,n,i){const{demuxer:s,remuxer:a}=this;s&&a&&(s.resetInitSegment(e,t,r,n),a.resetInitSegment(e,t,r,i))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,r,n,i){let s;return s=t&&"SAMPLE-AES"===t.method?this.transmuxSampleAes(e,t,r,n,i):this.transmuxUnencrypted(e,r,n,i),s}transmuxUnencrypted(e,t,r,n){const{audioTrack:i,videoTrack:s,id3Track:a,textTrack:o}=this.demuxer.demux(e,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(i,s,a,o,t,r,!1,this.id),chunkMeta:n}}transmuxSampleAes(e,t,r,n,i){return this.demuxer.demuxSampleAes(e,t,r).then((e=>({remuxResult:this.remuxer.remux(e.audioTrack,e.videoTrack,e.id3Track,e.textTrack,r,n,!1,this.id),chunkMeta:i})))}configureTransmuxer(e){const{config:t,observer:r,typeSupported:n,vendor:i}=this;let s;for(let d=0,f=Io.length;d<f;d++){var a;if(null!=(a=Io[d].demux)&&a.probe(e)){s=Io[d];break}}if(!s)return new Error("Failed to find demuxer by probing fragment data");const o=this.demuxer,l=this.remuxer,c=s.remux,u=s.demux;l&&l instanceof c||(this.remuxer=new c(r,t,n,i)),o&&o instanceof u||(this.demuxer=new u(r,t,n),this.probe=u.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new ya(this.config)),e}}const Po=e=>({remuxResult:{},chunkMeta:e});function Uo(e){return"then"in e&&e.then instanceof Function}class No{constructor(e,t,r,n,i){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=r,this.duration=n,this.defaultInitPts=i||null}}class Oo{constructor(e,t,r,n,i,s){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=r,this.trackSwitch=n,this.timeOffset=i,this.initSegmentChange=s}}var Ko={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,n,s,a){if("function"!==typeof n)throw new TypeError("The listener must be a function");var o=new i(n,s||e,a),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function a(e,t){0===--e._eventsCount?e._events=new n:delete e._events[t]}function o(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),o.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},o.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,a=new Array(s);i<s;i++)a[i]=n[i].fn;return a},o.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},o.prototype.emit=function(e,t,n,i,s,a){var o=r?r+e:e;if(!this._events[o])return!1;var l,c,u=this._events[o],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,i),!0;case 5:return u.fn.call(u.context,t,n,i,s),!0;case 6:return u.fn.call(u.context,t,n,i,s,a),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var f,p=u.length;for(c=0;c<p;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,n);break;case 4:u[c].fn.call(u[c].context,t,n,i);break;default:if(!l)for(f=1,l=new Array(d-1);f<d;f++)l[f-1]=arguments[f];u[c].fn.apply(u[c].context,l)}}return!0},o.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},o.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},o.prototype.removeListener=function(e,t,n,i){var s=r?r+e:e;if(!this._events[s])return this;if(!t)return a(this,s),this;var o=this._events[s];if(o.fn)o.fn!==t||i&&!o.once||n&&o.context!==n||a(this,s);else{for(var l=0,c=[],u=o.length;l<u;l++)(o[l].fn!==t||i&&!o[l].once||n&&o[l].context!==n)&&c.push(o[l]);c.length?this._events[s]=1===c.length?c[0]:c:a(this,s)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&a(this,t)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o}(Ko);var Fo=ur(Ko.exports);class Mo{constructor(e,t,r,n){this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;const i=e.config;this.hls=e,this.id=t,this.useWorker=!!i.enableWorker,this.onTransmuxComplete=r,this.onFlush=n;const s=(e,t)=>{(t=t||{}).frag=this.frag,t.id=this.id,e===Rr.ERROR&&(this.error=t.error),this.hls.trigger(e,t)};this.observer=new Fo,this.observer.on(Rr.FRAG_DECRYPTED,s),this.observer.on(Rr.ERROR,s);const a=oi(i.preferManagedMediaSource)||{isTypeSupported:()=>!1},o={mpeg:a.isTypeSupported("audio/mpeg"),mp3:a.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:a.isTypeSupported('audio/mp4; codecs="ac-3"')};if(this.useWorker&&"undefined"!==typeof Worker){if(i.workerPath||"function"===typeof __HLS_WORKER_BUNDLE__){try{i.workerPath?(xr.log("loading Web Worker ".concat(i.workerPath,' for "').concat(t,'"')),this.workerContext=function(e){const t=new self.URL(e,self.location.href).href;return{worker:new self.Worker(t),scriptURL:t}}(i.workerPath)):(xr.log('injecting Web Worker for "'.concat(t,'"')),this.workerContext=function(){const e=new self.Blob(["var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(".concat(__HLS_WORKER_BUNDLE__.toString(),")(true);")],{type:"text/javascript"}),t=self.URL.createObjectURL(e);return{worker:new self.Worker(t),objectURL:t}}()),this.onwmsg=e=>this.onWorkerMessage(e);const{worker:e}=this.workerContext;e.addEventListener("message",this.onwmsg),e.onerror=e=>{const r=new Error("".concat(e.message,"  (").concat(e.filename,":").concat(e.lineno,")"));i.enableWorker=!1,xr.warn('Error in "'.concat(t,'" Web Worker, fallback to inline')),this.hls.trigger(Rr.ERROR,{type:Sr.OTHER_ERROR,details:Ar.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:r})},e.postMessage({cmd:"init",typeSupported:o,vendor:"",id:t,config:JSON.stringify(i)})}catch(pu){xr.warn('Error setting up "'.concat(t,'" Web Worker, fallback to inline'),pu),this.resetWorker(),this.error=null,this.transmuxer=new Bo(this.observer,o,i,"",t)}return}}this.transmuxer=new Bo(this.observer,o,i,"",t)}resetWorker(){if(this.workerContext){const{worker:e,objectURL:t}=this.workerContext;t&&self.URL.revokeObjectURL(t),e.removeEventListener("message",this.onwmsg),e.onerror=null,e.terminate(),this.workerContext=null}}destroy(){if(this.workerContext)this.resetWorker(),this.onwmsg=void 0;else{const e=this.transmuxer;e&&(e.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null}push(e,t,r,n,i,s,a,o,l,c){var u,d;l.transmuxing.start=self.performance.now();const{transmuxer:f}=this,p=s?s.start:i.start,h=i.decryptdata,m=this.frag,g=!(m&&i.cc===m.cc),y=!(m&&l.level===m.level),v=m?l.sn-m.sn:-1,E=this.part?l.part-this.part.index:-1,b=0===v&&l.id>1&&l.id===(null==m?void 0:m.stats.chunkCount),T=!y&&(1===v||0===v&&(1===E||b&&E<=0)),R=self.performance.now();(y||v||0===i.stats.parsing.start)&&(i.stats.parsing.start=R),!s||!E&&T||(s.stats.parsing.start=R);const S=!(m&&(null==(u=i.initSegment)?void 0:u.url)===(null==(d=m.initSegment)?void 0:d.url)),A=new Oo(g,T,o,y,p,S);if(!T||g||S){xr.log("[transmuxer-interface, ".concat(i.type,"]: Starting new transmux session for sn: ").concat(l.sn," p: ").concat(l.part," level: ").concat(l.level," id: ").concat(l.id,"\n        discontinuity: ").concat(g,"\n        trackSwitch: ").concat(y,"\n        contiguous: ").concat(T,"\n        accurateTimeOffset: ").concat(o,"\n        timeOffset: ").concat(p,"\n        initSegmentChange: ").concat(S));const e=new No(r,n,t,a,c);this.configureTransmuxer(e)}if(this.frag=i,this.part=s,this.workerContext)this.workerContext.worker.postMessage({cmd:"demux",data:e,decryptdata:h,chunkMeta:l,state:A},e instanceof ArrayBuffer?[e]:[]);else if(f){const t=f.push(e,h,l,A);Uo(t)?(f.async=!0,t.then((e=>{this.handleTransmuxComplete(e)})).catch((e=>{this.transmuxerError(e,l,"transmuxer-interface push error")}))):(f.async=!1,this.handleTransmuxComplete(t))}}flush(e){e.transmuxing.start=self.performance.now();const{transmuxer:t}=this;if(this.workerContext)this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:e});else if(t){let r=t.flush(e);Uo(r)||t.async?(Uo(r)||(r=Promise.resolve(r)),r.then((t=>{this.handleFlushResult(t,e)})).catch((t=>{this.transmuxerError(t,e,"transmuxer-interface flush error")}))):this.handleFlushResult(r,e)}}transmuxerError(e,t,r){this.hls&&(this.error=e,this.hls.trigger(Rr.ERROR,{type:Sr.MEDIA_ERROR,details:Ar.FRAG_PARSING_ERROR,chunkMeta:t,frag:this.frag||void 0,fatal:!1,error:e,err:e,reason:r}))}handleFlushResult(e,t){e.forEach((e=>{this.handleTransmuxComplete(e)})),this.onFlush(t)}onWorkerMessage(e){const t=e.data;if(null==t||!t.event)return void xr.warn("worker message received with no ".concat(t?"event name":"data"));const r=this.hls;if(this.hls)switch(t.event){case"init":{var n;const e=null==(n=this.workerContext)?void 0:n.objectURL;e&&self.URL.revokeObjectURL(e);break}case"transmuxComplete":this.handleTransmuxComplete(t.data);break;case"flush":this.onFlush(t.data);break;case"workerLog":xr[t.data.logType]&&xr[t.data.logType](t.data.message);break;default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,r.trigger(t.event,t.data)}}configureTransmuxer(e){const{transmuxer:t}=this;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:e}):t&&t.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}function Vo(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!jo(e[r].attrs,t[r].attrs))return!1;return!0}function jo(e,t,r){const n=e["STABLE-RENDITION-ID"];return n&&!r?n===t["STABLE-RENDITION-ID"]:!(r||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some((r=>e[r]!==t[r]))}function Go(e,t){return t.label.toLowerCase()===e.name.toLowerCase()&&(!t.language||t.language.toLowerCase()===(e.lang||"").toLowerCase())}class qo{constructor(e){this.buffered=void 0;const t=(t,r,n)=>{if((r>>>=0)>n-1)throw new DOMException("Failed to execute '".concat(t,"' on 'TimeRanges': The index provided (").concat(r,") is greater than the maximum bound (").concat(n,")"));return e[r][t]};this.buffered={get length(){return e.length},end:r=>t("end",r,e.length),start:r=>t("start",r,e.length)}}}class Ho{constructor(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e}append(e,t,r){const n=this.queues[t];n.push(e),1!==n.length||r||this.executeNext(t)}insertAbort(e,t){this.queues[t].unshift(e),this.executeNext(t)}appendBlocker(e){let t;const r=new Promise((e=>{t=e})),n={execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};return this.append(n,e),r}executeNext(e){const t=this.queues[e];if(t.length){const n=t[0];try{n.execute()}catch(r){xr.warn('[buffer-operation-queue]: Exception executing "'.concat(e,'" SourceBuffer operation: ').concat(r)),n.onError(r);const t=this.buffers[e];null!=t&&t.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues[e].shift(),this.executeNext(e)}current(e){return this.queues[e][0]}}const Xo=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/;function zo(e){const t=e.querySelectorAll("source");[].slice.call(t).forEach((t=>{e.removeChild(t)}))}const $o={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},Wo=e=>String.fromCharCode($o[e]||e),Yo=15,Zo=100,Qo={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Jo={17:2,18:4,21:6,22:8,23:10,19:13,20:15},el={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},tl={25:2,26:4,29:6,30:8,31:10,27:13,28:15},rl=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class nl{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){const r="function"===typeof t?t():t;xr.log("".concat(this.time," [").concat(e,"] ").concat(r))}}}const il=function(e){const t=[];for(let r=0;r<e.length;r++)t.push(e[r].toString(16));return t};class sl{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const t=["foreground","underline","italics","background","flash"];for(let r=0;r<t.length;r++){const n=t[r];e.hasOwnProperty(n)&&(this[n]=e[n])}}isDefault(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class al{constructor(){this.uchar=" ",this.penState=new sl}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return" "===this.uchar&&this.penState.isDefault()}}class ol{constructor(e){this.chars=[],this.pos=0,this.currPenState=new sl,this.cueStartTime=null,this.logger=void 0;for(let t=0;t<Zo;t++)this.chars.push(new al);this.logger=e}equals(e){for(let t=0;t<Zo;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0}copy(e){for(let t=0;t<Zo;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<Zo;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>Zo&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=Zo)}moveCursor(e){const t=this.pos+e;if(e>1)for(let r=this.pos+1;r<t+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const t=Wo(e);this.pos>=Zo?this.logger.log(0,(()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!")):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))}clearFromPos(e){let t;for(t=e;t<Zo;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let t=!0;for(let r=0;r<Zo;r++){const n=this.chars[r].uchar;" "!==n&&(t=!1),e.push(n)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e);this.chars[this.pos].setPenState(this.currPenState)}}class ll{constructor(e){this.rows=[],this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let t=0;t<Yo;t++)this.rows.push(new ol(e));this.logger=e}reset(){for(let e=0;e<Yo;e++)this.rows[e].clear();this.currRow=14}equals(e){let t=!0;for(let r=0;r<Yo;r++)if(!this.rows[r].equals(e.rows[r])){t=!1;break}return t}copy(e){for(let t=0;t<Yo;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<Yo;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e);this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,(()=>"pacData = "+JSON.stringify(e)));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let t=0;t<Yo;t++)this.rows[t].clear();const e=this.currRow+1-this.nrRollUpRows,r=this.lastOutputScreen;if(r){const n=r.rows[e].cueStartTime,i=this.logger.time;if(null!==n&&null!==i&&n<i)for(let s=0;s<this.nrRollUpRows;s++)this.rows[t-this.nrRollUpRows+s+1].copy(r.rows[e+s])}}this.currRow=t;const r=this.rows[this.currRow];if(null!==e.indent){const t=e.indent,n=Math.max(t-1,0);r.setCursor(e.indent),e.color=r.chars[n].penState.foreground}const n={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(n)}setBkgData(e){this.logger.log(2,(()=>"bkgData = "+JSON.stringify(e))),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(null===this.nrRollUpRows)return void this.logger.log(3,"roll_up but nrRollUpRows not set yet");this.logger.log(1,(()=>this.getDisplayText()));const e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const t=[];let r="",n=-1;for(let i=0;i<Yo;i++){const r=this.rows[i].getTextString();r&&(n=i+1,e?t.push("Row "+n+": '"+r+"'"):t.push(r.trim()))}return t.length>0&&(r=e?"["+t.join(" | ")+"]":t.join("\n")),r}getTextAndFormat(){return this.rows}}class cl{constructor(e,t,r){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new ll(r),this.nonDisplayedMemory=new ll(r),this.lastOutputScreen=new ll(r),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=r}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,(()=>"MODE="+e)),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let r=0;r<e.length;r++)this.writeScreen.insertChar(e[r]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,(()=>t+": "+this.writeScreen.getDisplayText(!0))),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(1,(()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0))),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,(()=>"DISP: "+this.displayedMemory.getDisplayText()))}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{const r=Math.floor(e/2)-16,n=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=n[r]}this.logger.log(2,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)}outputDataUpdate(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class ul{constructor(e,t,r){this.channels=void 0,this.currentChannel=0,this.cmdHistory={a:null,b:null},this.logger=void 0;const n=this.logger=new nl;this.channels=[null,new cl(e,t,n),new cl(e+1,r,n)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){this.logger.time=e;for(let r=0;r<t.length;r+=2){const e=127&t[r],n=127&t[r+1];let i=!1,s=null;if(0===e&&0===n)continue;this.logger.log(3,(()=>"["+il([t[r],t[r+1]])+"] -> ("+il([e,n])+")"));const a=this.cmdHistory;if(e>=16&&e<=31){if(fl(e,n,a)){dl(null,null,a),this.logger.log(3,(()=>"Repeated command ("+il([e,n])+") is dropped"));continue}dl(e,n,this.cmdHistory),i=this.parseCmd(e,n),i||(i=this.parseMidrow(e,n)),i||(i=this.parsePAC(e,n)),i||(i=this.parseBackgroundAttributes(e,n))}else dl(null,null,a);if(!i&&(s=this.parseChars(e,n),s)){const e=this.currentChannel;if(e&&e>0){this.channels[e].insertChars(s)}else this.logger.log(2,"No channel found yet. TEXT-MODE?")}i||s||this.logger.log(2,(()=>"Couldn't parse cleaned data "+il([e,n])+" orig: "+il([t[r],t[r+1]])))}}parseCmd(e,t){if(!((20===e||28===e||21===e||29===e)&&t>=32&&t<=47)&&!((23===e||31===e)&&t>=33&&t<=35))return!1;const r=20===e||21===e||23===e?1:2,n=this.channels[r];return 20===e||21===e||28===e||29===e?32===t?n.ccRCL():33===t?n.ccBS():34===t?n.ccAOF():35===t?n.ccAON():36===t?n.ccDER():37===t?n.ccRU(2):38===t?n.ccRU(3):39===t?n.ccRU(4):40===t?n.ccFON():41===t?n.ccRDC():42===t?n.ccTR():43===t?n.ccRTD():44===t?n.ccEDM():45===t?n.ccCR():46===t?n.ccENM():47===t&&n.ccEOC():n.ccTO(t-32),this.currentChannel=r,!0}parseMidrow(e,t){let r=0;if((17===e||25===e)&&t>=32&&t<=47){if(r=17===e?1:2,r!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const n=this.channels[r];return!!n&&(n.ccMIDROW(t),this.logger.log(3,(()=>"MIDROW ("+il([e,t])+")")),!0)}return!1}parsePAC(e,t){let r;if(!((e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127)&&!((16===e||24===e)&&t>=64&&t<=95))return!1;const n=e<=23?1:2;r=t>=64&&t<=95?1===n?Qo[e]:el[e]:1===n?Jo[e]:tl[e];const i=this.channels[n];return!!i&&(i.setPAC(this.interpretPAC(r,t)),this.currentChannel=n,!0)}interpretPAC(e,t){let r;const n={color:null,italics:!1,indent:null,underline:!1,row:e};return r=t>95?t-96:t-64,n.underline=1===(1&r),r<=13?n.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(n.italics=!0,n.color="white"):n.indent=4*Math.floor((r-16)/2),n}parseChars(e,t){let r,n=null,i=null;if(e>=25?(r=2,i=e-8):(r=1,i=e),i>=17&&i<=19){let e;e=17===i?t+80:18===i?t+112:t+144,this.logger.log(2,(()=>"Special char '"+Wo(e)+"' in channel "+r)),n=[e]}else e>=32&&e<=127&&(n=0===t?[e]:[e,t]);return n&&this.logger.log(3,(()=>"Char codes =  "+il(n).join(","))),n}parseBackgroundAttributes(e,t){if(!((16===e||24===e)&&t>=32&&t<=47)&&!((23===e||31===e)&&t>=45&&t<=47))return!1;let r;const n={};16===e||24===e?(r=Math.floor((t-32)/2),n.background=rl[r],t%2===1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0));const i=e<=23?1:2;return this.channels[i].setBkgData(n),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const t=this.channels[e];t&&t.reset()}dl(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){const r=this.channels[t];r&&r.cueSplitAtTime(e)}}}function dl(e,t,r){r.a=e,r.b=t}function fl(e,t,r){return r.a===e&&r.b===t}class pl{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,r){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}var hl=function(){if(null!=Xr&&Xr.VTTCue)return self.VTTCue;const e=["","lr","rl"],t=["start","middle","end","left","right"];function r(e,t){if("string"!==typeof t)return!1;if(!Array.isArray(e))return!1;const r=t.toLowerCase();return!!~e.indexOf(r)&&r}function n(e){return r(t,e)}function i(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];let i=1;for(;i<arguments.length;i++){const t=arguments[i];for(const r in t)e[r]=t[r]}return e}function s(t,s,a){const o=this,l={enumerable:!0};o.hasBeenReset=!1;let c="",u=!1,d=t,f=s,p=a,h=null,m="",g=!0,y="auto",v="start",E=50,b="middle",T=50,R="middle";Object.defineProperty(o,"id",i({},l,{get:function(){return c},set:function(e){c=""+e}})),Object.defineProperty(o,"pauseOnExit",i({},l,{get:function(){return u},set:function(e){u=!!e}})),Object.defineProperty(o,"startTime",i({},l,{get:function(){return d},set:function(e){if("number"!==typeof e)throw new TypeError("Start time must be set to a number.");d=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"endTime",i({},l,{get:function(){return f},set:function(e){if("number"!==typeof e)throw new TypeError("End time must be set to a number.");f=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"text",i({},l,{get:function(){return p},set:function(e){p=""+e,this.hasBeenReset=!0}})),Object.defineProperty(o,"region",i({},l,{get:function(){return h},set:function(e){h=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"vertical",i({},l,{get:function(){return m},set:function(t){const n=function(t){return r(e,t)}(t);if(!1===n)throw new SyntaxError("An invalid or illegal string was specified.");m=n,this.hasBeenReset=!0}})),Object.defineProperty(o,"snapToLines",i({},l,{get:function(){return g},set:function(e){g=!!e,this.hasBeenReset=!0}})),Object.defineProperty(o,"line",i({},l,{get:function(){return y},set:function(e){if("number"!==typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");y=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"lineAlign",i({},l,{get:function(){return v},set:function(e){const t=n(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");v=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"position",i({},l,{get:function(){return E},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");E=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"positionAlign",i({},l,{get:function(){return b},set:function(e){const t=n(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");b=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"size",i({},l,{get:function(){return T},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");T=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"align",i({},l,{get:function(){return R},set:function(e){const t=n(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");R=t,this.hasBeenReset=!0}})),o.displayState=void 0}return s.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},s}();class ml{decode(e,t){if(!e)return"";if("string"!==typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function gl(e){function t(e,t,r,n){return 3600*(0|e)+60*(0|t)+(0|r)+parseFloat(n||0)}const r=e.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return r?parseFloat(r[2])>59?t(r[2],r[3],0,r[4]):t(r[1],r[2],r[3],r[4]):null}class yl{constructor(){this.values=Object.create(null)}set(e,t){this.get(e)||""===t||(this.values[e]=t)}get(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,r){for(let n=0;n<r.length;++n)if(t===r[n]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const r=parseFloat(t);if(r>=0&&r<=100)return this.set(e,r),!0}return!1}}function vl(e,t,r,n){const i=n?e.split(n):[e];for(const s in i){if("string"!==typeof i[s])continue;const e=i[s].split(r);if(2!==e.length)continue;t(e[0],e[1])}}const El=new hl(0,0,""),bl="middle"===El.align?"middle":"center";function Tl(e,t,r){const n=e;function i(){const t=gl(e);if(null===t)throw new Error("Malformed timestamp: "+n);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function s(){e=e.replace(/^\s+/,"")}if(s(),t.startTime=i(),s(),"--\x3e"!==e.slice(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+n);e=e.slice(3),s(),t.endTime=i(),s(),function(e,t){const n=new yl;vl(e,(function(e,t){let i;switch(e){case"region":for(let i=r.length-1;i>=0;i--)if(r[i].id===t){n.set(e,r[i].region);break}break;case"vertical":n.alt(e,t,["rl","lr"]);break;case"line":i=t.split(","),n.integer(e,i[0]),n.percent(e,i[0])&&n.set("snapToLines",!1),n.alt(e,i[0],["auto"]),2===i.length&&n.alt("lineAlign",i[1],["start",bl,"end"]);break;case"position":i=t.split(","),n.percent(e,i[0]),2===i.length&&n.alt("positionAlign",i[1],["start",bl,"end","line-left","line-right","auto"]);break;case"size":n.percent(e,t);break;case"align":n.alt(e,t,["start",bl,"end","left","right"])}}),/:/,/\s/),t.region=n.get("region",null),t.vertical=n.get("vertical","");let i=n.get("line","auto");"auto"===i&&-1===El.line&&(i=-1),t.line=i,t.lineAlign=n.get("lineAlign","start"),t.snapToLines=n.get("snapToLines",!0),t.size=n.get("size",100),t.align=n.get("align",bl);let s=n.get("position","auto");"auto"===s&&50===El.position&&(s="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=s}(e,t)}function Rl(e){return e.replace(/<br(?: \/)?>/gi,"\n")}class Sl{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new ml,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const t=this;function r(){let e=t.buffer,r=0;for(e=Rl(e);r<e.length&&"\r"!==e[r]&&"\n"!==e[r];)++r;const n=e.slice(0,r);return"\r"===e[r]&&++r,"\n"===e[r]&&++r,t.buffer=e.slice(r),n}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{let e="";if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;e=r();const n=e.match(/^(\xef\xbb\xbf)?WEBVTT([ \t].*)?$/);if(null==n||!n[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let n=!1;for(;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(n?n=!1:e=r(),t.state){case"HEADER":/:/.test(e)?vl(e,(function(e,t){}),/:/):e||(t.state="ID");continue;case"NOTE":e||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(e)){t.state="NOTE";break}if(!e)continue;if(t.cue=new hl(0,0,""),t.state="CUE",-1===e.indexOf("--\x3e")){t.cue.id=e;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{Tl(e,t.cue,t.regionList)}catch(Pt){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const r=-1!==e.indexOf("--\x3e");if(!e||r&&(n=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(null===t.cue)continue;t.cue.text&&(t.cue.text+="\n"),t.cue.text+=e}continue;case"BADCUE":e||(t.state="ID")}}}catch(Pt){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state||"BADWEBVTT"===e.state)throw new Error("Malformed WebVTT signature.")}catch(Pt){e.onparsingerror&&e.onparsingerror(Pt)}return e.onflush&&e.onflush(),this}}const Al=/\r\n|\n\r|\n|\r/g,Ll=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e.slice(r,r+t.length)===t},wl=function(e){let t=5381,r=e.length;for(;r;)t=33*t^e.charCodeAt(--r);return(t>>>0).toString()};function Cl(e,t,r){return wl(e.toString())+wl(t.toString())+wl(r)}function kl(e,t,r,n,i,s,a){const o=new Sl,l=An(new Uint8Array(e)).trim().replace(Al,"\n").split("\n"),c=[],u=t?function(e){return To(e,bo,1/(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1))}(t.baseTime,t.timescale):0;let d,f="00:00.000",p=0,h=0,m=!0;o.oncue=function(e){const s=r[n];let a=r.ccOffset;const o=(p-u)/9e4;if(null!=s&&s.new&&(void 0!==h?a=r.ccOffset=s.start:function(e,t,r){let n=e[t],i=e[n.prevCC];if(!i||!i.new&&n.new)return e.ccOffset=e.presentationOffset=n.start,void(n.new=!1);for(;null!=(s=i)&&s.new;){var s;e.ccOffset+=n.start-i.start,n.new=!1,n=i,i=e[n.prevCC]}e.presentationOffset=r}(r,n,o)),o){if(!t)return void(d=new Error("Missing initPTS for VTT MPEGTS"));a=o-r.presentationOffset}const l=e.endTime-e.startTime,f=Co(9e4*(e.startTime+a-h),9e4*i)/9e4;e.startTime=Math.max(f,0),e.endTime=Math.max(f+l,0);const m=e.text.trim();e.text=decodeURIComponent(encodeURIComponent(m)),e.id||(e.id=Cl(e.startTime,e.endTime,m)),e.endTime>0&&c.push(e)},o.onparsingerror=function(e){d=e},o.onflush=function(){d?a(d):s(c)},l.forEach((e=>{if(m){if(Ll(e,"X-TIMESTAMP-MAP=")){m=!1,e.slice(16).split(",").forEach((e=>{Ll(e,"LOCAL:")?f=e.slice(6):Ll(e,"MPEGTS:")&&(p=parseInt(e.slice(7)))}));try{h=function(e){let t=parseInt(e.slice(-3));const r=parseInt(e.slice(-6,-4)),n=parseInt(e.slice(-9,-7)),i=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!Er(t)||!Er(r)||!Er(n)||!Er(i))throw Error("Malformed X-TIMESTAMP-MAP: Local:".concat(e));return t+=1e3*r,t+=6e4*n,t+=36e5*i,t}(f)/1e3}catch(t){d=t}return}""===e&&(m=!1)}o.parse(e+"\n")})),o.flush()}const xl="stpp.ttml.im1t",_l=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Dl=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,Il={left:"start",center:"center",right:"end",start:"start",end:"end"};function Bl(e,t,r,n){const i=On(new Uint8Array(e),["mdat"]);if(0===i.length)return void n(new Error("Could not parse IMSC1 mdat"));const s=i.map((e=>An(e))),a=function(e,t){return To(e,t,1/(arguments.length>2&&void 0!==arguments[2]?arguments[2]:1),arguments.length>3&&void 0!==arguments[3]&&arguments[3])}(t.baseTime,1,t.timescale);try{s.forEach((e=>r(function(e,t){const r=(new DOMParser).parseFromString(e,"text/xml"),n=r.getElementsByTagName("tt")[0];if(!n)throw new Error("Invalid ttml");const i={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},s=Object.keys(i).reduce(((e,t)=>(e[t]=n.getAttribute("ttp:".concat(t))||i[t],e)),{}),a="preserve"!==n.getAttribute("xml:space"),o=Ul(Pl(n,"styling","style")),l=Ul(Pl(n,"layout","region")),c=Pl(n,"body","[begin]");return[].map.call(c,(e=>{const r=Nl(e,a);if(!r||!e.hasAttribute("begin"))return null;const n=Fl(e.getAttribute("begin"),s),i=Fl(e.getAttribute("dur"),s);let c=Fl(e.getAttribute("end"),s);if(null===n)throw Kl(e);if(null===c){if(null===i)throw Kl(e);c=n+i}const u=new hl(n-t,c-t,r);u.id=Cl(u.startTime,u.endTime,u.text);const d=function(e,t,r){const n="http://www.w3.org/ns/ttml#styling";let i=null;const s=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],a=null!=e&&e.hasAttribute("style")?e.getAttribute("style"):null;a&&r.hasOwnProperty(a)&&(i=r[a]);return s.reduce(((r,s)=>{const a=Ol(t,n,s)||Ol(e,n,s)||Ol(i,n,s);return a&&(r[s]=a),r}),{})}(l[e.getAttribute("region")],o[e.getAttribute("style")],o),{textAlign:f}=d;if(f){const e=Il[f];e&&(u.lineAlign=e),u.align=f}return vr(u,d),u})).filter((e=>null!==e))}(e,a))))}catch(o){n(o)}}function Pl(e,t,r){const n=e.getElementsByTagName(t)[0];return n?[].slice.call(n.querySelectorAll(r)):[]}function Ul(e){return e.reduce(((e,t)=>{const r=t.getAttribute("xml:id");return r&&(e[r]=t),e}),{})}function Nl(e,t){return[].slice.call(e.childNodes).reduce(((e,r,n)=>{var i;return"br"===r.nodeName&&n?e+"\n":null!=(i=r.childNodes)&&i.length?Nl(r,t):t?e+r.textContent.trim().replace(/\s+/g," "):e+r.textContent}),"")}function Ol(e,t,r){return e&&e.hasAttributeNS(t,r)?e.getAttributeNS(t,r):null}function Kl(e){return new Error("Could not parse ttml timestamp ".concat(e))}function Fl(e,t){if(!e)return null;let r=gl(e);return null===r&&(_l.test(e)?r=function(e,t){const r=_l.exec(e),n=(0|r[4])+(0|r[5])/t.subFrameRate;return 3600*(0|r[1])+60*(0|r[2])+(0|r[3])+n/t.frameRate}(e,t):Dl.test(e)&&(r=function(e,t){const r=Dl.exec(e),n=Number(r[1]);switch(r[2]){case"h":return 3600*n;case"m":return 60*n;case"ms":return 1e3*n;case"f":return n/t.frameRate;case"t":return n/t.tickRate}return n}(e,t))),r}function Ml(e){return e.characteristics&&/transcribes-spoken-dialog/gi.test(e.characteristics)&&/describes-music-and-sound/gi.test(e.characteristics)?"captions":"subtitles"}function Vl(e,t){return!!e&&e.kind===Ml(t)&&Go(t,e)}class jl{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(Rr.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(Rr.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(Rr.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Rr.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(Rr.BUFFER_CODECS,this.onBufferCodecs,this),e.on(Rr.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(Rr.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(Rr.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(Rr.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Rr.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(Rr.BUFFER_CODECS,this.onBufferCodecs,this),e.off(Rr.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){const r=this.hls.levels[t.droppedLevel];this.isLevelAllowed(r)&&this.restrictedLevels.push({bitrate:r.bitrate,height:r.height,width:r.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,t){const r=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,r.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onLevelsUpdated(e,t){this.timer&&Er(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping()}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0)return void(this.clientRect=null);const e=this.hls.levels;if(e.length){const t=this.hls,r=this.getMaxLevel(e.length-1);r!==this.autoLevelCapping&&xr.log("Setting autoLevelCapping to ".concat(r,": ").concat(e[r].height,"p@").concat(e[r].bitrate," for media ").concat(this.mediaWidth,"x").concat(this.mediaHeight)),t.autoLevelCapping=r,t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){const t=this.hls.levels;if(!t.length)return-1;const r=t.filter(((t,r)=>this.isLevelAllowed(t)&&r<=e));return this.clientRect=null,jl.getMaxLevelByMediaSize(r,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,t={width:0,height:0};if(e){const r=e.getBoundingClientRect();t.width=r.width,t.height=r.height,t.width||t.height||(t.width=r.right-r.left||e.width||0,t.height=r.bottom-r.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch(Pt){}return e}isLevelAllowed(e){return!this.restrictedLevels.some((t=>e.bitrate===t.bitrate&&e.width===t.width&&e.height===t.height))}static getMaxLevelByMediaSize(e,t,r){if(null==e||!e.length)return-1;let n=e.length-1;const i=Math.max(t,r);for(let o=0;o<e.length;o+=1){const t=e[o];if((t.width>=i||t.height>=i)&&(s=t,!(a=e[o+1])||s.width!==a.width||s.height!==a.height)){n=o;break}}var s,a;return n}}const Gl="[eme]";class ql{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=ql.CDMCleanupPromise?[ql.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=xr.debug.bind(xr,Gl),this.log=xr.log.bind(xr,Gl),this.warn=xr.warn.bind(xr,Gl),this.error=xr.error.bind(xr,Gl),this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.unregisterListeners(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null,this.config=null}registerListeners(){this.hls.on(Rr.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(Rr.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(Rr.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(Rr.MANIFEST_LOADED,this.onManifestLoaded,this)}unregisterListeners(){this.hls.off(Rr.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(Rr.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(Rr.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(Rr.MANIFEST_LOADED,this.onManifestLoaded,this)}getLicenseServerUrl(e){const{drmSystems:t,widevineLicenseUrl:r}=this.config,n=t[e];if(n)return n.licenseUrl;if(e===zr.WIDEVINE&&r)return r;throw new Error('no license server URL configured for key-system "'.concat(e,'"'))}getServerCertificateUrl(e){const{drmSystems:t}=this.config,r=t[e];if(r)return r.serverCertificateUrl;this.log('No Server Certificate in config.drmSystems["'.concat(e,'"]'))}attemptKeySystemAccess(e){const t=this.hls.levels,r=(e,t,r)=>!!e&&r.indexOf(e)===t,n=t.map((e=>e.audioCodec)).filter(r),i=t.map((e=>e.videoCodec)).filter(r);return n.length+i.length===0&&i.push("avc1.42e01e"),new Promise(((t,r)=>{const s=e=>{const a=e.shift();this.getMediaKeysPromise(a,n,i).then((e=>t({keySystem:a,mediaKeys:e}))).catch((t=>{e.length?s(e):r(t instanceof Hl?t:new Hl({type:Sr.KEY_SYSTEM_ERROR,details:Ar.KEY_SYSTEM_NO_ACCESS,error:t,fatal:!0},t.message))}))};s(e)}))}requestMediaKeySystemAccess(e,t){const{requestMediaKeySystemAccessFunc:r}=this.config;if("function"!==typeof r){let e="Configured requestMediaKeySystemAccess is not a function ".concat(r);return null===on&&"http:"===self.location.protocol&&(e="navigator.requestMediaKeySystemAccess is not available over insecure protocol ".concat(location.protocol)),Promise.reject(new Error(e))}return r(e,t)}getMediaKeysPromise(e,t,r){const n=function(e,t,r,n){let i;switch(e){case zr.FAIRPLAY:i=["cenc","sinf"];break;case zr.WIDEVINE:case zr.PLAYREADY:i=["cenc"];break;case zr.CLEARKEY:i=["cenc","keyids"];break;default:throw new Error("Unknown key-system: ".concat(e))}return function(e,t,r,n){return[{initDataTypes:e,persistentState:n.persistentState||"optional",distinctiveIdentifier:n.distinctiveIdentifier||"optional",sessionTypes:n.sessionTypes||[n.sessionType||"temporary"],audioCapabilities:t.map((e=>({contentType:'audio/mp4; codecs="'.concat(e,'"'),robustness:n.audioRobustness||"",encryptionScheme:n.audioEncryptionScheme||null}))),videoCapabilities:r.map((e=>({contentType:'video/mp4; codecs="'.concat(e,'"'),robustness:n.videoRobustness||"",encryptionScheme:n.videoEncryptionScheme||null})))}]}(i,t,r,n)}(e,t,r,this.config.drmSystemOptions),i=this.keySystemAccessPromises[e];let s=null==i?void 0:i.keySystemAccess;if(!s){this.log('Requesting encrypted media "'.concat(e,'" key-system access with config: ').concat(JSON.stringify(n))),s=this.requestMediaKeySystemAccess(e,n);const t=this.keySystemAccessPromises[e]={keySystemAccess:s};return s.catch((t=>{this.log('Failed to obtain access to key-system "'.concat(e,'": ').concat(t))})),s.then((r=>{this.log('Access for key-system "'.concat(r.keySystem,'" obtained'));const n=this.fetchServerCertificate(e);return this.log('Create media-keys for "'.concat(e,'"')),t.mediaKeys=r.createMediaKeys().then((t=>(this.log('Media-keys created for "'.concat(e,'"')),n.then((r=>r?this.setMediaKeysServerCertificate(t,e,r):t))))),t.mediaKeys.catch((t=>{this.error('Failed to create media-keys for "'.concat(e,'"}: ').concat(t))})),t.mediaKeys}))}return s.then((()=>i.mediaKeys))}createMediaKeySessionContext(e){let{decryptdata:t,keySystem:r,mediaKeys:n}=e;this.log('Creating key-system session "'.concat(r,'" keyId: ').concat(Cn.hexDump(t.keyId||[])));const i=n.createSession(),s={decryptdata:t,keySystem:r,mediaKeys:n,mediaKeysSession:i,keyStatus:"status-pending"};return this.mediaKeySessions.push(s),s}renewKeySession(e){const t=e.decryptdata;if(t.pssh){const r=this.createMediaKeySessionContext(e),n=this.getKeyIdString(t),i="cenc";this.keyIdToKeySessionPromise[n]=this.generateRequestWithPreferredKeySession(r,i,t.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}getKeyIdString(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(null===e.keyId)throw new Error("keyId is null");return Cn.hexDump(e.keyId)}updateKeySession(e,t){var r;const n=e.mediaKeysSession;return this.log('Updating key-session "'.concat(n.sessionId,'" for keyID ').concat(Cn.hexDump((null==(r=e.decryptdata)?void 0:r.keyId)||[]),"\n      } (data length: ").concat(t?t.byteLength:t,")")),n.update(t)}selectKeySystemFormat(e){const t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log("Selecting key-system from fragment (sn: ".concat(e.sn," ").concat(e.type,": ").concat(e.level,") key formats ").concat(t.join(", "))),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise}getKeyFormatPromise(e){return new Promise(((t,r)=>{const n=an(this.config),i=e.map(Qr).filter((e=>!!e&&-1!==n.indexOf(e)));return this.getKeySystemSelectionPromise(i).then((e=>{let{keySystem:n}=e;const i=sn(n);i?t(i):r(new Error('Unable to find format for key-system "'.concat(n,'"')))})).catch(r)}))}loadKey(e){const t=e.keyInfo.decryptdata,r=this.getKeyIdString(t),n="(keyId: ".concat(r,' format: "').concat(t.keyFormat,'" method: ').concat(t.method," uri: ").concat(t.uri,")");this.log("Starting session for key ".concat(n));let i=this.keyIdToKeySessionPromise[r];return i||(i=this.keyIdToKeySessionPromise[r]=this.getKeySystemForKeyPromise(t).then((r=>{let{keySystem:i,mediaKeys:s}=r;return this.throwIfDestroyed(),this.log("Handle encrypted media sn: ".concat(e.frag.sn," ").concat(e.frag.type,": ").concat(e.frag.level," using key ").concat(n)),this.attemptSetMediaKeys(i,s).then((()=>{this.throwIfDestroyed();const e=this.createMediaKeySessionContext({keySystem:i,mediaKeys:s,decryptdata:t});return this.generateRequestWithPreferredKeySession(e,"cenc",t.pssh,"playlist-key")}))})),i.catch((e=>this.handleError(e)))),i}throwIfDestroyed(){if(!this.hls)throw new Error("invalid state")}handleError(e){this.hls&&(this.error(e.message),e instanceof Hl?this.hls.trigger(Rr.ERROR,e.data):this.hls.trigger(Rr.ERROR,{type:Sr.KEY_SYSTEM_ERROR,details:Ar.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))}getKeySystemForKeyPromise(e){const t=this.getKeyIdString(e),r=this.keyIdToKeySessionPromise[t];if(!r){const t=Qr(e.keyFormat),r=t?[t]:an(this.config);return this.attemptKeySystemAccess(r)}return r}getKeySystemSelectionPromise(e){if(e.length||(e=an(this.config)),0===e.length)throw new Hl({type:Sr.KEY_SYSTEM_ERROR,details:Ar.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},"Missing key-system license configuration options ".concat(JSON.stringify({drmSystems:this.config.drmSystems})));return this.attemptKeySystemAccess(e)}_onMediaEncrypted(e){const{initDataType:t,initData:r}=e,n='"'.concat(e.type,'" event: init data type: "').concat(t,'"');if(this.debug(n),null===r)return;let i,s;if("sinf"===t&&this.config.drmSystems[zr.FAIRPLAY]){const e=Dn(new Uint8Array(r));try{const t=Gr(JSON.parse(e).sinf),r=qn(new Uint8Array(t));if(!r)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");i=r.subarray(8,24),s=zr.FAIRPLAY}catch(u){return void this.warn("".concat(n," Failed to parse sinf: ").concat(u))}}else{const e=function(e){const t=[];if(e instanceof ArrayBuffer){const r=e.byteLength;let n=0;for(;n+32<r;){const r=Qn(new DataView(e,n));t.push(r),n+=r.size}}return t}(r),t=e.filter((e=>e.systemId===rn))[0];if(!t)return void(0===e.length||e.some((e=>!e.systemId))?this.warn("".concat(n," contains incomplete or invalid pssh data")):this.log("ignoring ".concat(n," for ").concat(e.map((e=>nn(e.systemId))).join(",")," pssh data in favor of playlist keys")));if(s=nn(t.systemId),0===t.version&&t.data){const e=t.data.length-22;i=t.data.subarray(e,e+16)}}if(!s||!i)return;const a=Cn.hexDump(i),{keyIdToKeySessionPromise:o,mediaKeySessions:l}=this;let c=o[a];for(let d=0;d<l.length;d++){const e=l[d],n=e.decryptdata;if(!n.keyId)continue;const s=Cn.hexDump(n.keyId);if(a===s||-1!==n.uri.replace(/-/g,"").indexOf(a)){if(c=o[s],n.pssh)break;delete o[s],n.pssh=new Uint8Array(r),n.keyId=i,c=o[a]=c.then((()=>this.generateRequestWithPreferredKeySession(e,t,r,"encrypted-event-key-match")));break}}c||(c=o[a]=this.getKeySystemSelectionPromise([s]).then((e=>{let{keySystem:n,mediaKeys:s}=e;var o;this.throwIfDestroyed();const l=new ei("ISO-23001-7",a,null!=(o=sn(n))?o:"");return l.pssh=new Uint8Array(r),l.keyId=i,this.attemptSetMediaKeys(n,s).then((()=>{this.throwIfDestroyed();const e=this.createMediaKeySessionContext({decryptdata:l,keySystem:n,mediaKeys:s});return this.generateRequestWithPreferredKeySession(e,t,r,"encrypted-event-no-match")}))}))),c.catch((e=>this.handleError(e)))}_onWaitingForKey(e){this.log('"'.concat(e.type,'" event'))}attemptSetMediaKeys(e,t){const r=this.setMediaKeysQueue.slice();this.log('Setting media-keys for "'.concat(e,'"'));const n=Promise.all(r).then((()=>{if(!this.media)throw new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(t)}));return this.setMediaKeysQueue.push(n),n.then((()=>{this.log('Media-keys set for "'.concat(e,'"')),r.push(n),this.setMediaKeysQueue=this.setMediaKeysQueue.filter((e=>-1===r.indexOf(e)))}))}generateRequestWithPreferredKeySession(e,t,r,n){var i,s;const a=null==(i=this.config.drmSystems)||null==(s=i[e.keySystem])?void 0:s.generateRequest;if(a)try{const n=a.call(this.hls,t,r,e);if(!n)throw new Error("Invalid response from configured generateRequest filter");t=n.initDataType,r=e.decryptdata.pssh=n.initData?new Uint8Array(n.initData):null}catch(p){var o;if(this.warn(p.message),null!=(o=this.hls)&&o.config.debug)throw p}if(null===r)return this.log('Skipping key-session request for "'.concat(n,'" (no initData)')),Promise.resolve(e);const l=this.getKeyIdString(e.decryptdata);this.log('Generating key-session request for "'.concat(n,'": ').concat(l," (init data type: ").concat(t," length: ").concat(r?r.byteLength:null,")"));const c=new Fo,u=e._onmessage=t=>{const r=e.mediaKeysSession;if(!r)return void c.emit("error",new Error("invalid state"));const{messageType:n,message:i}=t;this.log('"'.concat(n,'" message event for session "').concat(r.sessionId,'" message size: ').concat(i.byteLength)),"license-request"===n||"license-renewal"===n?this.renewLicense(e,i).catch((e=>{this.handleError(e),c.emit("error",e)})):"license-release"===n?e.keySystem===zr.FAIRPLAY&&(this.updateKeySession(e,Hr("acknowledged")),this.removeSession(e)):this.warn('unhandled media key message type "'.concat(n,'"'))},d=e._onkeystatuseschange=t=>{if(!e.mediaKeysSession)return void c.emit("error",new Error("invalid state"));this.onKeyStatusChange(e);const r=e.keyStatus;c.emit("keyStatus",r),"expired"===r&&(this.warn("".concat(e.keySystem," expired for key ").concat(l)),this.renewKeySession(e))};e.mediaKeysSession.addEventListener("message",u),e.mediaKeysSession.addEventListener("keystatuseschange",d);const f=new Promise(((e,t)=>{c.on("error",t),c.on("keyStatus",(r=>{r.startsWith("usable")?e():"output-restricted"===r?t(new Hl({type:Sr.KEY_SYSTEM_ERROR,details:Ar.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):"internal-error"===r?t(new Hl({type:Sr.KEY_SYSTEM_ERROR,details:Ar.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},'key status changed to "'.concat(r,'"'))):"expired"===r?t(new Error("key expired while generating request")):this.warn('unhandled key status change "'.concat(r,'"'))}))}));return e.mediaKeysSession.generateRequest(t,r).then((()=>{var t;this.log('Request generated for key-session "'.concat(null==(t=e.mediaKeysSession)?void 0:t.sessionId,'" keyId: ').concat(l))})).catch((e=>{throw new Hl({type:Sr.KEY_SYSTEM_ERROR,details:Ar.KEY_SYSTEM_NO_SESSION,error:e,fatal:!1},"Error generating key-session request: ".concat(e))})).then((()=>f)).catch((t=>{throw c.removeAllListeners(),this.removeSession(e),t})).then((()=>(c.removeAllListeners(),e)))}onKeyStatusChange(e){e.mediaKeysSession.keyStatuses.forEach(((t,r)=>{this.log('key status change "'.concat(t,'" for keyStatuses keyId: ').concat(Cn.hexDump("buffer"in r?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):new Uint8Array(r))," session keyId: ").concat(Cn.hexDump(new Uint8Array(e.decryptdata.keyId||[]))," uri: ").concat(e.decryptdata.uri)),e.keyStatus=t}))}fetchServerCertificate(e){const t=this.config,r=new(0,t.loader)(t),n=this.getServerCertificateUrl(e);return n?(this.log('Fetching server certificate for "'.concat(e,'"')),new Promise(((i,s)=>{const a={responseType:"arraybuffer",url:n},o=t.certLoadPolicy.default,l={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},c={onSuccess:(e,t,r,n)=>{i(e.data)},onError:(t,r,i,o)=>{s(new Hl({type:Sr.KEY_SYSTEM_ERROR,details:Ar.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:i,response:mr({url:a.url,data:void 0},t)},'"'.concat(e,'" certificate request failed (').concat(n,"). Status: ").concat(t.code," (").concat(t.text,")")))},onTimeout:(t,r,i)=>{s(new Hl({type:Sr.KEY_SYSTEM_ERROR,details:Ar.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:i,response:{url:a.url,data:void 0}},'"'.concat(e,'" certificate request timed out (').concat(n,")")))},onAbort:(e,t,r)=>{s(new Error("aborted"))}};r.load(a,l,c)}))):Promise.resolve()}setMediaKeysServerCertificate(e,t,r){return new Promise(((n,i)=>{e.setServerCertificate(r).then((i=>{this.log("setServerCertificate ".concat(i?"success":"not supported by CDM"," (").concat(null==r?void 0:r.byteLength,') on "').concat(t,'"')),n(e)})).catch((e=>{i(new Hl({type:Sr.KEY_SYSTEM_ERROR,details:Ar.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:e,fatal:!0},e.message))}))}))}renewLicense(e,t){return this.requestLicense(e,new Uint8Array(t)).then((t=>this.updateKeySession(e,new Uint8Array(t)).catch((e=>{throw new Hl({type:Sr.KEY_SYSTEM_ERROR,details:Ar.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:e,fatal:!0},e.message)}))))}unpackPlayReadyKeyMessage(e,t){const r=String.fromCharCode.apply(null,new Uint16Array(t.buffer));if(!r.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),t;const n=(new DOMParser).parseFromString(r,"application/xml"),i=n.querySelectorAll("HttpHeader");if(i.length>0){let t;for(let r=0,n=i.length;r<n;r++){var s,a;t=i[r];const n=null==(s=t.querySelector("name"))?void 0:s.textContent,o=null==(a=t.querySelector("value"))?void 0:a.textContent;n&&o&&e.setRequestHeader(n,o)}}const o=n.querySelector("Challenge"),l=null==o?void 0:o.textContent;if(!l)throw new Error("Cannot find <Challenge> in key message");return Hr(atob(l))}setupLicenseXHR(e,t,r,n){const i=this.config.licenseXhrSetup;return i?Promise.resolve().then((()=>{if(!r.decryptdata)throw new Error("Key removed");return i.call(this.hls,e,t,r,n)})).catch((s=>{if(!r.decryptdata)throw s;return e.open("POST",t,!0),i.call(this.hls,e,t,r,n)})).then((r=>{e.readyState||e.open("POST",t,!0);return{xhr:e,licenseChallenge:r||n}})):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:n}))}requestLicense(e,t){const r=this.config.keyLoadPolicy.default;return new Promise(((n,i)=>{const s=this.getLicenseServerUrl(e.keySystem);this.log("Sending license request to URL: ".concat(s));const a=new XMLHttpRequest;a.responseType="arraybuffer",a.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return i(new Error("invalid state"));if(4===a.readyState)if(200===a.status){this._requestLicenseFailureCount=0;let t=a.response;this.log("License received ".concat(t instanceof ArrayBuffer?t.byteLength:t));const r=this.config.licenseResponseCallback;if(r)try{t=r.call(this.hls,a,s,e)}catch(o){this.error(o)}n(t)}else{const o=r.errorRetry,l=o?o.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>l||a.status>=400&&a.status<500)i(new Hl({type:Sr.KEY_SYSTEM_ERROR,details:Ar.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:a,response:{url:s,data:void 0,code:a.status,text:a.statusText}},"License Request XHR failed (".concat(s,"). Status: ").concat(a.status," (").concat(a.statusText,")")));else{const r=l-this._requestLicenseFailureCount+1;this.warn("Retrying license request, ".concat(r," attempts left")),this.requestLicense(e,t).then(n,i)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=a,this.setupLicenseXHR(a,s,e,t).then((t=>{let{xhr:r,licenseChallenge:n}=t;e.keySystem==zr.PLAYREADY&&(n=this.unpackPlayReadyKeyMessage(r,n)),r.send(n)}))}))}onMediaAttached(e,t){if(!this.config.emeEnabled)return;const r=t.media;this.media=r,r.addEventListener("encrypted",this.onMediaEncrypted),r.addEventListener("waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media,t=this.mediaKeySessions;e&&(e.removeEventListener("encrypted",this.onMediaEncrypted),e.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},ei.clearKeyUriToKeyIdMap();const r=t.length;ql.CDMCleanupPromise=Promise.all(t.map((e=>this.removeSession(e))).concat(null==e?void 0:e.setMediaKeys(null).catch((e=>{this.log("Could not clear media keys: ".concat(e))})))).then((()=>{r&&(this.log("finished closing key sessions and clearing media keys"),t.length=0)})).catch((e=>{this.log("Could not close sessions and clear media keys: ".concat(e))}))}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(e,t){let{sessionKeys:r}=t;if(r&&this.config.emeEnabled&&!this.keyFormatPromise){const e=r.reduce(((e,t)=>(-1===e.indexOf(t.keyFormat)&&e.push(t.keyFormat),e)),[]);this.log("Selecting key-system from session-keys ".concat(e.join(", "))),this.keyFormatPromise=this.getKeyFormatPromise(e)}}removeSession(e){const{mediaKeysSession:t,licenseXhr:r}=e;if(t){this.log("Remove licenses and keys and close session ".concat(t.sessionId)),e._onmessage&&(t.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(t.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),r&&r.readyState!==XMLHttpRequest.DONE&&r.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const n=this.mediaKeySessions.indexOf(e);return n>-1&&this.mediaKeySessions.splice(n,1),t.remove().catch((e=>{this.log("Could not remove session: ".concat(e))})).then((()=>t.close())).catch((e=>{this.log("Could not close session: ".concat(e))}))}}}ql.CDMCleanupPromise=void 0;class Hl extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=new Error(t)),this.data=e,e.err=e.error}}var Xl,zl,$l;!function(e){e.MANIFEST="m",e.AUDIO="a",e.VIDEO="v",e.MUXED="av",e.INIT="i",e.CAPTION="c",e.TIMED_TEXT="tt",e.KEY="k",e.OTHER="o"}(Xl||(Xl={})),function(e){e.DASH="d",e.HLS="h",e.SMOOTH="s",e.OTHER="o"}(zl||(zl={})),function(e){e.OBJECT="CMCD-Object",e.REQUEST="CMCD-Request",e.SESSION="CMCD-Session",e.STATUS="CMCD-Status"}($l||($l={}));const Wl={[$l.OBJECT]:["br","d","ot","tb"],[$l.REQUEST]:["bl","dl","mtp","nor","nrr","su"],[$l.SESSION]:["cid","pr","sf","sid","st","v"],[$l.STATUS]:["bs","rtp"]};class Yl{constructor(e,t){this.value=void 0,this.params=void 0,Array.isArray(e)&&(e=e.map((e=>e instanceof Yl?e:new Yl(e)))),this.value=e,this.params=t}}class Zl{constructor(e){this.description=void 0,this.description=e}}const Ql="Dict";function Jl(e,t,r,n){return new Error("failed to ".concat(e,' "').concat((i=t,Array.isArray(i)?JSON.stringify(i):i instanceof Map?"Map{}":i instanceof Set?"Set{}":"object"===typeof i?JSON.stringify(i):String(i)),'" as ').concat(r),{cause:n});var i}const ec="Bare Item",tc="Boolean",rc="Byte Sequence",nc="Decimal",ic="Integer";const sc=/[\x00-\x1f\x7f]+/,ac="Token",oc="Key";function lc(e,t,r){return Jl("serialize",e,t,r)}function cc(e){if(!1===ArrayBuffer.isView(e))throw lc(e,rc);return":".concat((t=e,btoa(String.fromCharCode(...t))),":");var t}function uc(e){if(function(e){return e<-999999999999999||999999999999999<e}(e))throw lc(e,ic);return e.toString()}function dc(e,t){if(e<0)return-dc(-e,t);const r=Math.pow(10,t);if(Math.abs(e*r%1-.5)<Number.EPSILON){const t=Math.floor(e*r);return(t%2===0?t:t+1)/r}return Math.round(e*r)/r}function fc(e){const t=dc(e,3);if(Math.floor(Math.abs(t)).toString().length>12)throw lc(e,nc);const r=t.toString();return r.includes(".")?r:"".concat(r,".0")}const pc="String";function hc(e){const t=(r=e).description||r.toString().slice(7,-1);var r;if(!1===/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(t))throw lc(t,ac);return t}function mc(e){switch(typeof e){case"number":if(!Er(e))throw lc(e,ec);return Number.isInteger(e)?uc(e):fc(e);case"string":return function(e){if(sc.test(e))throw lc(e,pc);return'"'.concat(e.replace(/\\/g,"\\\\").replace(/"/g,'\\"'),'"')}(e);case"symbol":return hc(e);case"boolean":return function(e){if("boolean"!==typeof e)throw lc(e,tc);return e?"?1":"?0"}(e);case"object":if(e instanceof Date)return function(e){return"@".concat(uc(e.getTime()/1e3))}(e);if(e instanceof Uint8Array)return cc(e);if(e instanceof Zl)return hc(e);default:throw lc(e,ec)}}function gc(e){if(!1===/^[a-z*][a-z0-9\-_.*]*$/.test(e))throw lc(e,oc);return e}function yc(e){return null==e?"":Object.entries(e).map((e=>{let[t,r]=e;return!0===r?";".concat(gc(t)):";".concat(gc(t),"=").concat(mc(r))})).join("")}function vc(e){return e instanceof Yl?"".concat(mc(e.value)).concat(yc(e.params)):mc(e)}function Ec(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{whitespace:!0};if("object"!==typeof e)throw lc(e,Ql);const r=e instanceof Map?e.entries():Object.entries(e),n=null!=t&&t.whitespace?" ":"";return Array.from(r).map((e=>{let[t,r]=e;r instanceof Yl===!1&&(r=new Yl(r));let n=gc(t);var i;return!0===r.value?n+=yc(r.params):(n+="=",Array.isArray(r.value)?n+="(".concat((i=r).value.map(vc).join(" "),")").concat(yc(i.params)):n+=vc(r)),n})).join(",".concat(n))}const bc=e=>"ot"===e||"sf"===e||"st"===e,Tc=e=>"number"===typeof e?Er(e):null!=e&&""!==e&&!1!==e;const Rc=e=>Math.round(e),Sc=e=>100*Rc(e/100),Ac={br:Rc,d:Rc,bl:Sc,dl:Sc,mtp:Sc,nor:(e,t)=>(null!=t&&t.baseUrl&&(e=function(e,t){const r=new URL(e),n=new URL(t);if(r.origin!==n.origin)return e;const i=r.pathname.split("/").slice(1),s=n.pathname.split("/").slice(1,-1);for(;i[0]===s[0];)i.shift(),s.shift();for(;s.length;)s.shift(),i.unshift("..");return i.join("/")}(e,t.baseUrl)),encodeURIComponent(e)),rtp:Sc,tb:Rc};function Lc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e?function(e,t){return Ec(e,t)}(function(e,t){const r={};if(null==e||"object"!==typeof e)return r;const n=Object.keys(e).sort(),i=vr({},Ac,null==t?void 0:t.formatters),s=null==t?void 0:t.filter;return n.forEach((n=>{if(null!=s&&s(n))return;let a=e[n];const o=i[n];o&&(a=o(a,t)),"v"===n&&1===a||"pr"==n&&1===a||Tc(a)&&(bc(n)&&"string"===typeof a&&(a=new Zl(a)),r[n]=a)})),r}(e,t),vr({whitespace:!1},t)):""}function wc(e,t,r){return vr(e,function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return{};const r=Object.entries(e),n=Object.entries(Wl).concat(Object.entries((null==t?void 0:t.customHeaderMap)||{})),i=r.reduce(((e,t)=>{var r;const[i,s]=t,a=(null==(r=n.find((e=>e[1].includes(i))))?void 0:r[0])||$l.REQUEST;return null!=e[a]||(e[a]={}),e[a][i]=s,e}),{});return Object.entries(i).reduce(((e,r)=>{let[n,i]=r;return e[n]=Lc(i,t),e}),{})}(t,r))}const Cc="CMCD";const kc=/CMCD=[^&#]+/;function xc(e,t,r){const n=function(e){if(!e)return"";const t=Lc(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});return"".concat(Cc,"=").concat(encodeURIComponent(t))}(t,r);if(!n)return e;if(kc.test(e))return e.replace(kc,n);const i=e.includes("?")?"&":"?";return"".concat(e).concat(i).concat(n)}function _c(e,t,r,n){e&&Object.keys(t).forEach((i=>{const s=e.filter((e=>e.groupId===i)).map((e=>{const s=vr({},e);return s.details=void 0,s.attrs=new Ir(s.attrs),s.url=s.attrs.URI=Dc(e.url,e.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",r),s.groupId=s.attrs["GROUP-ID"]=t[i],s.attrs["PATHWAY-ID"]=n,s}));e.push(...s)}))}function Dc(e,t,r,n){const{HOST:i,PARAMS:s,[r]:a}=n;let o;t&&(o=null==a?void 0:a[t],o&&(e=o));const l=new self.URL(e);return i&&!o&&(l.host=i),s&&Object.keys(s).sort().forEach((e=>{e&&l.searchParams.set(e,s[e])})),l.href}const Ic=/^age:\s*[\d.]+\s*$/im;class Bc{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new Ur,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,4!==e.readyState&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,r){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=r,this.loadInternal()}loadInternal(){const{config:e,context:t}=this;if(!e||!t)return;const r=this.loader=new self.XMLHttpRequest,n=this.stats;n.loading.first=0,n.loaded=0,n.aborted=!1;const i=this.xhrSetup;i?Promise.resolve().then((()=>{if(this.loader===r&&!this.stats.aborted)return i(r,t.url)})).catch((e=>{if(this.loader===r&&!this.stats.aborted)return r.open("GET",t.url,!0),i(r,t.url)})).then((()=>{this.loader!==r||this.stats.aborted||this.openAndSendXhr(r,t,e)})).catch((e=>{this.callbacks.onError({code:r.status,text:e.message},t,r,n)})):this.openAndSendXhr(r,t,e)}openAndSendXhr(e,t,r){e.readyState||e.open("GET",t.url,!0);const n=t.headers,{maxTimeToFirstByteMs:i,maxLoadTimeMs:s}=r.loadPolicy;if(n)for(const a in n)e.setRequestHeader(a,n[a]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),r.timeout=i&&Er(i)?i:s,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),r.timeout),e.send()}readystatechange(){const{context:e,loader:t,stats:r}=this;if(!e||!t)return;const n=t.readyState,i=this.config;if(!r.aborted&&n>=2&&(0===r.loading.first&&(r.loading.first=Math.max(self.performance.now(),r.loading.start),i.timeout!==i.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),i.timeout=i.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),i.loadPolicy.maxLoadTimeMs-(r.loading.first-r.loading.start)))),4===n)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const n=t.status,s="text"!==t.responseType;if(n>=200&&n<300&&(s&&t.response||null!==t.responseText)){r.loading.end=Math.max(self.performance.now(),r.loading.first);const i=s?t.response:t.responseText,a="arraybuffer"===t.responseType?i.byteLength:i.length;if(r.loaded=r.total=a,r.bwEstimate=8e3*r.total/(r.loading.end-r.loading.first),!this.callbacks)return;const o=this.callbacks.onProgress;if(o&&o(r,e,i,t),!this.callbacks)return;const l={url:t.responseURL,data:i,code:n};this.callbacks.onSuccess(l,r,e,t)}else{const s=i.loadPolicy.errorRetry;Rs(s,r.retry,!1,{url:e.url,data:void 0,code:n})?this.retry(s):(xr.error("".concat(n," while loading ").concat(e.url)),this.callbacks.onError({code:n,text:t.statusText},e,t,r))}}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry;if(Rs(e,this.stats.retry,!0))this.retry(e);else{var t;xr.warn("timeout while loading ".concat(null==(t=this.context)?void 0:t.url));const e=this.callbacks;e&&(this.abortInternal(),e.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:t,stats:r}=this;this.retryDelay=bs(e,r.retry),r.retry++,xr.warn("".concat(status?"HTTP Status "+status:"Timeout"," while loading ").concat(null==t?void 0:t.url,", retrying ").concat(r.retry,"/").concat(e.maxNumRetry," in ").concat(this.retryDelay,"ms")),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&Ic.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&new RegExp("^".concat(e,":\\s*[\\d.]+\\s*$"),"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const Pc=/(\d+)-(\d+)\/(\d+)/;class Uc{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||Nc,this.controller=new self.AbortController,this.stats=new Ur}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,t,r){const n=this.stats;if(n.loading.start)throw new Error("Loader can only be used once.");n.loading.start=self.performance.now();const i=function(e,t){const r={method:"GET",mode:"cors",credentials:"same-origin",signal:t,headers:new self.Headers(vr({},e.headers))};e.rangeEnd&&r.headers.set("Range","bytes="+e.rangeStart+"-"+String(e.rangeEnd-1));return r}(e,this.controller.signal),s=r.onProgress,a="arraybuffer"===e.responseType,o=a?"byteLength":"length",{maxTimeToFirstByteMs:l,maxLoadTimeMs:c}=t.loadPolicy;this.context=e,this.config=t,this.callbacks=r,this.request=this.fetchSetup(e,i),self.clearTimeout(this.requestTimeout),t.timeout=l&&Er(l)?l:c,this.requestTimeout=self.setTimeout((()=>{this.abortInternal(),r.onTimeout(n,e,this.response)}),t.timeout),self.fetch(this.request).then((i=>{this.response=this.loader=i;const o=Math.max(self.performance.now(),n.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=c,this.requestTimeout=self.setTimeout((()=>{this.abortInternal(),r.onTimeout(n,e,this.response)}),c-(o-n.loading.start)),!i.ok){const{status:e,statusText:t}=i;throw new Oc(t||"fetch, bad network response",e,i)}return n.loading.first=o,n.total=function(e){const t=e.get("Content-Range");if(t){const e=function(e){const t=Pc.exec(e);if(t)return parseInt(t[2])-parseInt(t[1])+1}(t);if(Er(e))return e}const r=e.get("Content-Length");if(r)return parseInt(r)}(i.headers)||n.total,s&&Er(t.highWaterMark)?this.loadProgressively(i,n,e,t.highWaterMark,s):a?i.arrayBuffer():"json"===e.responseType?i.json():i.text()})).then((i=>{const a=this.response;if(!a)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),n.loading.end=Math.max(self.performance.now(),n.loading.first);const l=i[o];l&&(n.loaded=n.total=l);const c={url:a.url,data:i,code:a.status};s&&!Er(t.highWaterMark)&&s(n,e,i,a),r.onSuccess(c,n,e,a)})).catch((t=>{if(self.clearTimeout(this.requestTimeout),n.aborted)return;const i=t&&t.code||0,s=t?t.message:null;r.onError({code:i,text:s},e,t?t.details:null,n)}))}getCacheAge(){let e=null;if(this.response){const t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0;const s=new Ia,a=e.body.getReader(),o=()=>a.read().then((a=>{if(a.done)return s.dataLength&&i(t,r,s.flush(),e),Promise.resolve(new ArrayBuffer(0));const l=a.value,c=l.length;return t.loaded+=c,c<n||s.dataLength?(s.push(l),s.dataLength>=n&&i(t,r,s.flush(),e)):i(t,r,l,e),o()})).catch((()=>Promise.reject()));return o()}}function Nc(e,t){return new self.Request(e.url,t)}class Oc extends Error{constructor(e,t,r){super(e),this.code=void 0,this.details=void 0,this.code=t,this.details=r}}const Kc=/\s/,Fc={newCue(e,t,r,n){const i=[];let s,a,o,l,c;const u=self.VTTCue||self.TextTrackCue;for(let f=0;f<n.rows.length;f++)if(s=n.rows[f],o=!0,l=0,c="",!s.isEmpty()){var d;for(let e=0;e<s.chars.length;e++)Kc.test(s.chars[e].uchar)&&o?l++:(c+=s.chars[e].uchar,o=!1);s.cueStartTime=t,t===r&&(r+=1e-4),l>=16?l--:l++;const n=Rl(c.trim()),p=Cl(t,r,n);null!=e&&null!=(d=e.cues)&&d.getCueById(p)||(a=new u(t,r,n),a.id=p,a.line=f+1,a.align="left",a.position=10+Math.min(80,10*Math.floor(8*l/32)),i.push(a))}return e&&i.length&&(i.sort(((e,t)=>"auto"===e.line||"auto"===t.line?0:e.line>8&&t.line>8?t.line-e.line:e.line-t.line)),i.forEach((t=>ji(e,t)))),i}},Mc=mr(mr({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:Bc,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:class{constructor(e){this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this._abandonRulesCheck=()=>{const{fragCurrent:e,partCurrent:t,hls:r}=this,{autoLevelEnabled:n,media:i}=r;if(!e||!i)return;const s=performance.now(),a=t?t.stats:e.stats,o=t?t.duration:e.duration,l=s-a.loading.start,c=r.minAutoLevel;if(a.aborted||a.loaded&&a.loaded===a.total||e.level<=c)return this.clearTimer(),void(this._nextAutoLevel=-1);if(!n||i.paused||!i.playbackRate||!i.readyState)return;const u=r.mainForwardBufferInfo;if(null===u)return;const d=this.bwEstimator.getEstimateTTFB(),f=Math.abs(i.playbackRate);if(l<=Math.max(d,o/(2*f)*1e3))return;const p=u.len/f,h=a.loading.first?a.loading.first-a.loading.start:-1,m=a.loaded&&h>-1,g=this.getBwEstimate(),y=r.levels,v=y[e.level],E=a.total||Math.max(a.loaded,Math.round(o*v.averageBitrate/8));let b=m?l-h:l;b<1&&m&&(b=Math.min(l,8*a.loaded/g));const T=m?1e3*a.loaded/b:0,R=T?(E-a.loaded)/T:8*E/g+d/1e3;if(R<=p)return;const S=T?8*T:g;let A,L=Number.POSITIVE_INFINITY;for(A=e.level-1;A>c;A--){const e=y[A].maxBitrate;if(L=this.getTimeToLoadFrag(d/1e3,S,o*e,!y[A].details),L<p)break}if(L>=R)return;if(L>10*o)return;r.nextLoadLevel=r.nextAutoLevel=A,m?this.bwEstimator.sample(l-Math.min(d,h),a.loaded):this.bwEstimator.sampleTTFB(l);const w=y[A].maxBitrate;this.getBwEstimate()*this.hls.config.abrBandWidthUpFactor>w&&this.resetEstimator(w),this.clearTimer(),xr.warn("[abr] Fragment ".concat(e.sn).concat(t?" part "+t.index:""," of level ").concat(e.level," is loading too slowly;\n      Time to underbuffer: ").concat(p.toFixed(3)," s\n      Estimated load time for current fragment: ").concat(R.toFixed(3)," s\n      Estimated load time for down switch fragment: ").concat(L.toFixed(3)," s\n      TTFB estimate: ").concat(0|h," ms\n      Current BW estimate: ").concat(Er(g)?0|g:"Unknown"," bps\n      New BW estimate: ").concat(0|this.getBwEstimate()," bps\n      Switching to level ").concat(A," @ ").concat(0|w," bps")),r.trigger(Rr.FRAG_LOAD_EMERGENCY_ABORTED,{frag:e,part:t,stats:a})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(xr.log("setting initial bwe to ".concat(e)),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new Ns(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(Rr.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Rr.FRAG_LOADING,this.onFragLoading,this),e.on(Rr.FRAG_LOADED,this.onFragLoaded,this),e.on(Rr.FRAG_BUFFERED,this.onFragBuffered,this),e.on(Rr.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(Rr.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Rr.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(Rr.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(Rr.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(Rr.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Rr.FRAG_LOADING,this.onFragLoading,this),e.off(Rr.FRAG_LOADED,this.onFragLoaded,this),e.off(Rr.FRAG_BUFFERED,this.onFragBuffered,this),e.off(Rr.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(Rr.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Rr.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(Rr.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(Rr.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,t){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,t){const r=t.frag;if(!this.ignoreFragment(r)){var n;if(!r.bitrateTest)this.fragCurrent=r,this.partCurrent=null!=(n=t.part)?n:null;this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,t){this.clearTimer()}onError(e,t){if(!t.fatal)switch(t.details){case Ar.BUFFER_ADD_CODEC_ERROR:case Ar.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case Ar.FRAG_LOAD_TIMEOUT:{const e=t.frag,{fragCurrent:r,partCurrent:n}=this;if(e&&r&&e.sn===r.sn&&e.level===r.level){const t=performance.now(),r=n?n.stats:e.stats,i=t-r.loading.start,s=r.loading.first?r.loading.first-r.loading.start:-1;if(r.loaded&&s>-1){const e=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(i-Math.min(e,s),r.loaded)}else this.bwEstimator.sampleTTFB(i)}break}}}getTimeToLoadFrag(e,t,r,n){return e+r/t+(n?this.lastLevelLoadSec:0)}onLevelLoaded(e,t){const r=this.hls.config,{loading:n}=t.stats,i=n.end-n.start;Er(i)&&(this.lastLevelLoadSec=i/1e3),t.details.live?this.bwEstimator.update(r.abrEwmaSlowLive,r.abrEwmaFastLive):this.bwEstimator.update(r.abrEwmaSlowVoD,r.abrEwmaFastVoD)}onFragLoaded(e,t){let{frag:r,part:n}=t;const i=n?n.stats:r.stats;if(r.type===Ui&&this.bwEstimator.sampleTTFB(i.loading.first-i.loading.start),!this.ignoreFragment(r)){if(this.clearTimer(),r.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const e=n?n.duration:r.duration,t=this.hls.levels[r.level],s=(t.loaded?t.loaded.bytes:0)+i.loaded,a=(t.loaded?t.loaded.duration:0)+e;t.loaded={bytes:s,duration:a},t.realBitrate=Math.round(8*s/a)}if(r.bitrateTest){const e={stats:i,frag:r,part:n,id:r.type};this.onFragBuffered(Rr.FRAG_BUFFERED,e),r.bitrateTest=!1}else this.lastLoadedFragLevel=r.level}}onFragBuffered(e,t){const{frag:r,part:n}=t,i=null!=n&&n.stats.loaded?n.stats:r.stats;if(i.aborted)return;if(this.ignoreFragment(r))return;const s=i.parsing.end-i.loading.start-Math.min(i.loading.first-i.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(s,i.loaded),i.bwEstimate=this.getBwEstimate(),r.bitrateTest?this.bitrateTestDelay=s/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==Ui||"initSegment"===e.sn}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:t}=this.hls,r=this.getBwEstimate(),n=this.hls.config.maxStarvationDelay,i=this.findBestLevel(r,t,e,0,n,1,1);if(i>-1)return i;const s=this.hls.firstLevel,a=Math.min(Math.max(s,t),e);return xr.warn("[abr] Could not find best starting auto level. Defaulting to first in playlist ".concat(s," clamped to ").concat(a)),a}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,t=this.bwEstimator.canEstimate(),r=this.lastLoadedFragLevel>-1;if(-1!==e&&(!t||!r||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const n=t&&r?this.getNextABRAutoLevel():this.firstAutoLevel;if(-1!==e){const t=this.hls.levels;if(t.length>Math.max(e,n)&&t[e].loadError<=t[n].loadError)return e}return this._nextAutoLevel=n,this.nextAutoLevelKey=this.getAutoLevelKey(),n}getAutoLevelKey(){return"".concat(this.getBwEstimate(),"_").concat(this.getStarvationDelay().toFixed(2))}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:t,hls:r}=this,{maxAutoLevel:n,config:i,minAutoLevel:s}=r,a=t?t.duration:e?e.duration:0,o=this.getBwEstimate(),l=this.getStarvationDelay();let c=i.abrBandWidthFactor,u=i.abrBandWidthUpFactor;if(l){const e=this.findBestLevel(o,s,n,l,0,c,u);if(e>=0)return e}let d=a?Math.min(a,i.maxStarvationDelay):i.maxStarvationDelay;if(!l){const e=this.bitrateTestDelay;if(e){d=(a?Math.min(a,i.maxLoadingDelay):i.maxLoadingDelay)-e,xr.info("[abr] bitrate test took ".concat(Math.round(1e3*e),"ms, set first fragment max fetchDuration to ").concat(Math.round(1e3*d)," ms")),c=u=1}}const f=this.findBestLevel(o,s,n,l,d,c,u);if(xr.info("[abr] ".concat(l?"rebuffering expected":"buffer is empty",", optimal quality level ").concat(f)),f>-1)return f;const p=r.levels[s],h=r.levels[r.loadLevel];return(null==p?void 0:p.bitrate)<(null==h?void 0:h.bitrate)?s:r.loadLevel}getStarvationDelay(){const e=this.hls,t=e.media;if(!t)return 1/0;const r=t&&0!==t.playbackRate?Math.abs(t.playbackRate):1,n=e.mainForwardBufferInfo;return(n?n.len:0)/r}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,t,r,n,i,s,a){var o;const l=n+i,c=this.lastLoadedFragLevel,u=-1===c?this.hls.firstLevel:c,{fragCurrent:d,partCurrent:f}=this,{levels:p,allAudioTracks:h,loadLevel:m,config:g}=this.hls;if(1===p.length)return 0;const y=p[u],v=!(null==y||null==(o=y.details)||!o.live),E=-1===m||-1===c;let b,T="SDR",R=(null==y?void 0:y.frameRate)||0;const{audioPreference:S,videoPreference:A}=g,L=this.audioTracksByGroup||(this.audioTracksByGroup=function(e){return e.reduce(((e,t)=>{let r=e.groups[t.groupId];r||(r=e.groups[t.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),r.tracks.push(t);const n=t.channels||"2";return r.channels[n]=(r.channels[n]||0)+1,r.hasDefault=r.hasDefault||t.default,r.hasAutoSelect=r.hasAutoSelect||t.autoselect,r.hasDefault&&(e.hasDefaultAudio=!0),r.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e}),{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}(h));if(E){if(-1!==this.firstSelection)return this.firstSelection;const n=this.codecTiers||(this.codecTiers=function(e,t,r,n){return e.slice(r,n+1).reduce(((e,r)=>{if(!r.codecSet)return e;const n=r.audioGroups;let i=e[r.codecSet];i||(e[r.codecSet]=i={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!n,fragmentError:0}),i.minBitrate=Math.min(i.minBitrate,r.bitrate);const s=Math.min(r.height,r.width);return i.minHeight=Math.min(i.minHeight,s),i.minFramerate=Math.min(i.minFramerate,r.frameRate),i.maxScore=Math.max(i.maxScore,r.score),i.fragmentError+=r.fragmentError,i.videoRanges[r.videoRange]=(i.videoRanges[r.videoRange]||0)+1,n&&n.forEach((e=>{if(!e)return;const r=t.groups[e];r&&(i.hasDefaultAudio=i.hasDefaultAudio||t.hasDefaultAudio?r.hasDefault:r.hasAutoSelect||!t.hasDefaultAudio&&!t.hasAutoSelectAudio,Object.keys(r.channels).forEach((e=>{i.channels[e]=(i.channels[e]||0)+r.channels[e]})))})),e}),{})}(p,L,t,r)),i=function(e,t,r,n,i){const s=Object.keys(e),a=null==n?void 0:n.channels,o=null==n?void 0:n.audioCodec,l=a&&2===parseInt(a);let c=!0,u=!1,d=1/0,f=1/0,p=1/0,h=0,m=[];const{preferHDR:g,allowedVideoRanges:y}=Vs(t,i);for(let b=s.length;b--;){const t=e[s[b]];c=t.channels[2]>0,d=Math.min(d,t.minHeight),f=Math.min(f,t.minFramerate),p=Math.min(p,t.minBitrate);const r=y.filter((e=>t.videoRanges[e]>0));r.length>0&&(u=!0,m=r)}d=Er(d)?d:0,f=Er(f)?f:0;const v=Math.max(1080,d),E=Math.max(30,f);return p=Er(p)?p:r,r=Math.max(p,r),u||(t=void 0,m=[]),{codecSet:s.reduce(((t,n)=>{const i=e[n];if(n===t)return t;if(i.minBitrate>r)return js(n,"min bitrate of ".concat(i.minBitrate," > current estimate of ").concat(r)),t;if(!i.hasDefaultAudio)return js(n,"no renditions with default or auto-select sound found"),t;if(o&&n.indexOf(o.substring(0,4))%5!==0)return js(n,'audio codec preference "'.concat(o,'" not found')),t;if(a&&!l){if(!i.channels[a])return js(n,"no renditions with ".concat(a," channel sound found (channels options: ").concat(Object.keys(i.channels),")")),t}else if((!o||l)&&c&&0===i.channels[2])return js(n,"no renditions with stereo sound found"),t;return i.minHeight>v?(js(n,"min resolution of ".concat(i.minHeight," > maximum of ").concat(v)),t):i.minFramerate>E?(js(n,"min framerate of ".concat(i.minFramerate," > maximum of ").concat(E)),t):m.some((e=>i.videoRanges[e]>0))?i.maxScore<h?(js(n,"max score of ".concat(i.maxScore," < selected max of ").concat(h)),t):t&&(pi(n)>=pi(t)||i.fragmentError>e[t].fragmentError)?t:(h=i.maxScore,n):(js(n,"no variants with VIDEO-RANGE of ".concat(JSON.stringify(m)," found")),t)}),void 0),videoRanges:m,preferHDR:g,minFramerate:f,minBitrate:p}}(n,T,e,S,A),{codecSet:s,videoRanges:a,minFramerate:o,minBitrate:l,preferHDR:c}=i;b=s,T=c?a[a.length-1]:a[0],R=o,e=Math.max(e,l),xr.log("[abr] picked start tier ".concat(JSON.stringify(i)))}else b=null==y?void 0:y.codecSet,T=null==y?void 0:y.videoRange;const w=f?f.duration:d?d.duration:0,C=this.bwEstimator.getEstimateTTFB()/1e3,k=[];for(let _=r;_>=t;_--){var x;const t=p[_],o=_>u;if(!t)continue;if(g.useMediaCapabilities&&!t.supportedResult&&!t.supportedPromise){const r=navigator.mediaCapabilities;"function"===typeof(null==r?void 0:r.decodingInfo)&&Fs(t,L,T,R,e,S)?(t.supportedPromise=Ms(t,L,r),t.supportedPromise.then((e=>{if(!this.hls)return;t.supportedResult=e;const r=this.hls.levels,n=r.indexOf(t);e.error?xr.warn('[abr] MediaCapabilities decodingInfo error: "'.concat(e.error,'" for level ').concat(n," ").concat(JSON.stringify(e))):e.supported||(xr.warn("[abr] Unsupported MediaCapabilities decodingInfo result for level ".concat(n," ").concat(JSON.stringify(e))),n>-1&&r.length>1&&(xr.log("[abr] Removing unsupported level ".concat(n)),this.hls.removeLevel(n)))}))):t.supportedResult=Os}if(b&&t.codecSet!==b||T&&t.videoRange!==T||o&&R>t.frameRate||!o&&R>0&&R<t.frameRate||t.supportedResult&&(null==(x=t.supportedResult.decodingInfoResults)||!x[0].smooth)){k.push(_);continue}const d=t.details,h=(f?null==d?void 0:d.partTarget:null==d?void 0:d.averagetargetduration)||w;let A;A=o?a*e:s*e;const D=w&&n>=2*w&&0===i?p[_].averageBitrate:p[_].maxBitrate,I=this.getTimeToLoadFrag(C,A,D*h,void 0===d);if(A>=D&&(_===c||0===t.loadError&&0===t.fragmentError)&&(I<=C||!Er(I)||v&&!this.bitrateTestDelay||I<l)){const e=this.forcedAutoLevel;return _===m||-1!==e&&e===m||(k.length&&xr.trace("[abr] Skipped level(s) ".concat(k.join(",")," of ").concat(r,' max with CODECS and VIDEO-RANGE:"').concat(p[k[0]].codecs,'" ').concat(p[k[0]].videoRange,'; not compatible with "').concat(y.codecs,'" ').concat(T)),xr.info("[abr] switch candidate:".concat(u,"->").concat(_," adjustedbw(").concat(Math.round(A),")-bitrate=").concat(Math.round(A-D)," ttfb:").concat(C.toFixed(1)," avgDuration:").concat(h.toFixed(1)," maxFetchDuration:").concat(l.toFixed(1)," fetchDuration:").concat(I.toFixed(1)," firstSelection:").concat(E," codecSet:").concat(b," videoRange:").concat(T," hls.loadLevel:").concat(m))),E&&(this.firstSelection=_),_}}return-1}set nextAutoLevel(e){const{maxAutoLevel:t,minAutoLevel:r}=this.hls,n=Math.min(Math.max(e,r),t);this._nextAutoLevel!==n&&(this.nextAutoLevelKey="",this._nextAutoLevel=n)}},bufferController:class{constructor(e){this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendSource=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this.log=void 0,this.warn=void 0,this.error=void 0,this._onEndStreaming=e=>{this.hls&&this.hls.pauseBuffering()},this._onStartStreaming=e=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=()=>{const{media:e,mediaSource:t}=this;this.log("Media source opened"),e&&(e.removeEventListener("emptied",this._onMediaEmptied),this.updateMediaElementDuration(),this.hls.trigger(Rr.MEDIA_ATTACHED,{media:e,mediaSource:t})),t&&t.removeEventListener("sourceopen",this._onMediaSourceOpen),this.checkPendingTracks()},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:e,_objectUrl:t}=this;e!==t&&xr.error("Media element src was set while attaching MediaSource (".concat(t," > ").concat(e,")"))},this.hls=e;const t="[buffer-controller]";var r;this.appendSource=(r=oi(e.config.preferManagedMediaSource),"undefined"!==typeof self&&r===self.ManagedMediaSource),this.log=xr.log.bind(xr,t),this.warn=xr.warn.bind(xr,t),this.error=xr.error.bind(xr,t),this._initSourceBuffer(),this.registerListeners()}hasSourceTypes(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null,this.hls=null}registerListeners(){const{hls:e}=this;e.on(Rr.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(Rr.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Rr.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Rr.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Rr.BUFFER_RESET,this.onBufferReset,this),e.on(Rr.BUFFER_APPENDING,this.onBufferAppending,this),e.on(Rr.BUFFER_CODECS,this.onBufferCodecs,this),e.on(Rr.BUFFER_EOS,this.onBufferEos,this),e.on(Rr.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(Rr.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(Rr.FRAG_PARSED,this.onFragParsed,this),e.on(Rr.FRAG_CHANGED,this.onFragChanged,this)}unregisterListeners(){const{hls:e}=this;e.off(Rr.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(Rr.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Rr.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Rr.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Rr.BUFFER_RESET,this.onBufferReset,this),e.off(Rr.BUFFER_APPENDING,this.onBufferAppending,this),e.off(Rr.BUFFER_CODECS,this.onBufferCodecs,this),e.off(Rr.BUFFER_EOS,this.onBufferEos,this),e.off(Rr.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(Rr.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(Rr.FRAG_PARSED,this.onFragParsed,this),e.off(Rr.FRAG_CHANGED,this.onFragChanged,this)}_initSourceBuffer(){this.sourceBuffer={},this.operationQueue=new Ho(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.appendErrors={audio:0,video:0,audiovideo:0},this.lastMpegAudioChunk=null}onManifestLoading(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){let r=2;(t.audio&&!t.video||!t.altAudio)&&(r=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=r,this.log("".concat(this.bufferCodecEventsExpected," bufferCodec event(s) expected"))}onMediaAttaching(e,t){const r=this.media=t.media,n=oi(this.appendSource);if(r&&n){var i;const e=this.mediaSource=new n;this.log("created media source: ".concat(null==(i=e.constructor)?void 0:i.name)),e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.addEventListener("startstreaming",this._onStartStreaming),e.addEventListener("endstreaming",this._onEndStreaming));const t=this._objectUrl=self.URL.createObjectURL(e);if(this.appendSource)try{r.removeAttribute("src");const n=self.ManagedMediaSource;r.disableRemotePlayback=r.disableRemotePlayback||n&&e instanceof n,zo(r),function(e,t){const r=self.document.createElement("source");r.type="video/mp4",r.src=t,e.appendChild(r)}(r,t),r.load()}catch(s){r.src=t}else r.src=t;r.addEventListener("emptied",this._onMediaEmptied)}}onMediaDetaching(){const{media:e,mediaSource:t,_objectUrl:r}=this;if(t){if(this.log("media source detaching"),"open"===t.readyState)try{t.endOfStream()}catch(pu){this.warn("onMediaDetaching: ".concat(pu.message," while calling endOfStream"))}this.onBufferReset(),t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(t.removeEventListener("startstreaming",this._onStartStreaming),t.removeEventListener("endstreaming",this._onEndStreaming)),e&&(e.removeEventListener("emptied",this._onMediaEmptied),r&&self.URL.revokeObjectURL(r),this.mediaSrc===r?(e.removeAttribute("src"),this.appendSource&&zo(e),e.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(Rr.MEDIA_DETACHED,void 0)}onBufferReset(){this.getSourceBufferTypes().forEach((e=>{this.resetBuffer(e)})),this._initSourceBuffer()}resetBuffer(e){const t=this.sourceBuffer[e];try{var r;if(t)this.removeBufferListeners(e),this.sourceBuffer[e]=void 0,null!=(r=this.mediaSource)&&r.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(t)}catch(pu){this.warn("onBufferReset ".concat(e),pu)}}onBufferCodecs(e,t){const r=this.getSourceBufferTypes().length,n=Object.keys(t);if(n.forEach((e=>{if(r){const r=this.tracks[e];if(r&&"function"===typeof r.buffer.changeType){var n;const{id:i,codec:s,levelCodec:a,container:o,metadata:l}=t[e],c=yi(r.codec,r.levelCodec),u=null==c?void 0:c.replace(Xo,"$1");let d=yi(s,a);const f=null==(n=d)?void 0:n.replace(Xo,"$1");if(d&&u!==f){"audio"===e.slice(0,5)&&(d=gi(d,this.appendSource));const t="".concat(o,";codecs=").concat(d);this.appendChangeType(e,t),this.log("switching codec ".concat(c," to ").concat(d)),this.tracks[e]={buffer:r.buffer,codec:s,container:o,levelCodec:a,metadata:l,id:i}}}}else this.pendingTracks[e]=t[e]})),r)return;const i=Math.max(this.bufferCodecEventsExpected-1,0);this.bufferCodecEventsExpected!==i&&(this.log("".concat(i," bufferCodec event(s) expected ").concat(n.join(","))),this.bufferCodecEventsExpected=i),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks()}appendChangeType(e,t){const{operationQueue:r}=this,n={execute:()=>{const n=this.sourceBuffer[e];n&&(this.log("changing ".concat(e," sourceBuffer type to ").concat(t)),n.changeType(t)),r.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:t=>{this.warn("Failed to change ".concat(e," SourceBuffer type"),t)}};r.append(n,e,!!this.pendingTracks[e])}onBufferAppending(e,t){const{hls:r,operationQueue:n,tracks:i}=this,{data:s,type:a,frag:o,part:l,chunkMeta:c}=t,u=c.buffering[a],d=self.performance.now();u.start=d;const f=o.stats.buffering,p=l?l.stats.buffering:null;0===f.start&&(f.start=d),p&&0===p.start&&(p.start=d);const h=i.audio;let m=!1;"audio"===a&&"audio/mpeg"===(null==h?void 0:h.container)&&(m=!this.lastMpegAudioChunk||1===c.id||this.lastMpegAudioChunk.sn!==c.sn,this.lastMpegAudioChunk=c);const g=o.start,y={execute:()=>{if(u.executeStart=self.performance.now(),m){const e=this.sourceBuffer[a];if(e){const t=g-e.timestampOffset;Math.abs(t)>=.1&&(this.log("Updating audio SourceBuffer timestampOffset to ".concat(g," (delta: ").concat(t,") sn: ").concat(o.sn,")")),e.timestampOffset=g)}}this.appendExecutor(s,a)},onStart:()=>{},onComplete:()=>{const e=self.performance.now();u.executeEnd=u.end=e,0===f.first&&(f.first=e),p&&0===p.first&&(p.first=e);const{sourceBuffer:t}=this,r={};for(const n in t)r[n]=ra.getBuffered(t[n]);this.appendErrors[a]=0,"audio"===a||"video"===a?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(Rr.BUFFER_APPENDED,{type:a,frag:o,part:l,chunkMeta:c,parent:o.type,timeRanges:r})},onError:e=>{const t={type:Sr.MEDIA_ERROR,parent:o.type,details:Ar.BUFFER_APPEND_ERROR,sourceBufferName:a,frag:o,part:l,chunkMeta:c,error:e,err:e,fatal:!1};if(e.code===DOMException.QUOTA_EXCEEDED_ERR)t.details=Ar.BUFFER_FULL_ERROR;else{const e=++this.appendErrors[a];t.details=Ar.BUFFER_APPEND_ERROR,this.warn("Failed ".concat(e,"/").concat(r.config.appendErrorMaxRetry,' times to append segment in "').concat(a,'" sourceBuffer')),e>=r.config.appendErrorMaxRetry&&(t.fatal=!0)}r.trigger(Rr.ERROR,t)}};n.append(y,a,!!this.pendingTracks[a])}onBufferFlushing(e,t){const{operationQueue:r}=this,n=e=>({execute:this.removeExecutor.bind(this,e,t.startOffset,t.endOffset),onStart:()=>{},onComplete:()=>{this.hls.trigger(Rr.BUFFER_FLUSHED,{type:e})},onError:t=>{this.warn("Failed to remove from ".concat(e," SourceBuffer"),t)}});t.type?r.append(n(t.type),t.type):this.getSourceBufferTypes().forEach((e=>{r.append(n(e),e)}))}onFragParsed(e,t){const{frag:r,part:n}=t,i=[],s=n?n.elementaryStreams:r.elementaryStreams;s[Kr]?i.push("audiovideo"):(s[Nr]&&i.push("audio"),s[Or]&&i.push("video"));0===i.length&&this.warn("Fragments must have at least one ElementaryStreamType set. type: ".concat(r.type," level: ").concat(r.level," sn: ").concat(r.sn)),this.blockBuffers((()=>{const e=self.performance.now();r.stats.buffering.end=e,n&&(n.stats.buffering.end=e);const t=n?n.stats:r.stats;this.hls.trigger(Rr.FRAG_BUFFERED,{frag:r,part:n,stats:t,id:r.type})}),i)}onFragChanged(e,t){this.trimBuffers()}onBufferEos(e,t){this.getSourceBufferTypes().reduce(((e,r)=>{const n=this.sourceBuffer[r];return!n||t.type&&t.type!==r||(n.ending=!0,n.ended||(n.ended=!0,this.log("".concat(r," sourceBuffer now EOS")))),e&&!(n&&!n.ended)}),!0)&&(this.log("Queueing mediaSource.endOfStream()"),this.blockBuffers((()=>{this.getSourceBufferTypes().forEach((e=>{const t=this.sourceBuffer[e];t&&(t.ending=!1)}));const{mediaSource:e}=this;e&&"open"===e.readyState?(this.log("Calling mediaSource.endOfStream()"),e.endOfStream()):e&&this.log("Could not call mediaSource.endOfStream(). mediaSource.readyState: ".concat(e.readyState))})))}onLevelUpdated(e,t){let{details:r}=t;r.fragments.length&&(this.details=r,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())}trimBuffers(){const{hls:e,details:t,media:r}=this;if(!r||null===t)return;if(!this.getSourceBufferTypes().length)return;const n=e.config,i=r.currentTime,s=t.levelTargetDuration,a=t.live&&null!==n.liveBackBufferLength?n.liveBackBufferLength:n.backBufferLength;if(Er(a)&&a>0){const e=Math.max(a,s),t=Math.floor(i/s)*s-e;this.flushBackBuffer(i,s,t)}if(Er(n.frontBufferFlushThreshold)&&n.frontBufferFlushThreshold>0){const e=Math.max(n.maxBufferLength,n.frontBufferFlushThreshold),t=Math.max(e,s),r=Math.floor(i/s)*s+t;this.flushFrontBuffer(i,s,r)}}flushBackBuffer(e,t,r){const{details:n,sourceBuffer:i}=this;this.getSourceBufferTypes().forEach((s=>{const a=i[s];if(a){const i=ra.getBuffered(a);if(i.length>0&&r>i.start(0)){if(this.hls.trigger(Rr.BACK_BUFFER_REACHED,{bufferEnd:r}),null!=n&&n.live)this.hls.trigger(Rr.LIVE_BACK_BUFFER_REACHED,{bufferEnd:r});else if(a.ended&&i.end(i.length-1)-e<2*t)return void this.log("Cannot flush ".concat(s," back buffer while SourceBuffer is in ended state"));this.hls.trigger(Rr.BUFFER_FLUSHING,{startOffset:0,endOffset:r,type:s})}}}))}flushFrontBuffer(e,t,r){const{sourceBuffer:n}=this;this.getSourceBufferTypes().forEach((i=>{const s=n[i];if(s){const n=ra.getBuffered(s),a=n.length;if(a<2)return;const o=n.start(a-1),l=n.end(a-1);if(r>o||e>=o&&e<=l)return;if(s.ended&&e-l<2*t)return void this.log("Cannot flush ".concat(i," front buffer while SourceBuffer is in ended state"));this.hls.trigger(Rr.BUFFER_FLUSHING,{startOffset:o,endOffset:1/0,type:i})}}))}updateMediaElementDuration(){if(!this.details||!this.media||!this.mediaSource||"open"!==this.mediaSource.readyState)return;const{details:e,hls:t,media:r,mediaSource:n}=this,i=e.fragments[0].start+e.totalduration,s=r.duration,a=Er(n.duration)?n.duration:0;e.live&&t.config.liveDurationInfinity?(n.duration=1/0,this.updateSeekableRange(e)):(i>a&&i>s||!Er(s))&&(this.log("Updating Media Source duration to ".concat(i.toFixed(3))),n.duration=i)}updateSeekableRange(e){const t=this.mediaSource,r=e.fragments;if(r.length&&e.live&&null!=t&&t.setLiveSeekableRange){const n=Math.max(0,r[0].start),i=Math.max(n,n+e.totalduration);this.log("Media Source duration is set to ".concat(t.duration,". Setting seekable range to ").concat(n,"-").concat(i,".")),t.setLiveSeekableRange(n,i)}}checkPendingTracks(){const{bufferCodecEventsExpected:e,operationQueue:t,pendingTracks:r}=this,n=Object.keys(r).length;if(n&&(!e||2===n||"audiovideo"in r)){this.createSourceBuffers(r),this.pendingTracks={};const e=this.getSourceBufferTypes();if(e.length)this.hls.trigger(Rr.BUFFER_CREATED,{tracks:this.tracks}),e.forEach((e=>{t.executeNext(e)}));else{const e=new Error("could not create source buffer for media codec(s)");this.hls.trigger(Rr.ERROR,{type:Sr.MEDIA_ERROR,details:Ar.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}}createSourceBuffers(e){const{sourceBuffer:t,mediaSource:r}=this;if(!r)throw Error("createSourceBuffers called when mediaSource was null");for(const i in e)if(!t[i]){var n;const s=e[i];if(!s)throw Error("source buffer exists for track ".concat(i,", however track does not"));let a=-1===(null==(n=s.levelCodec)?void 0:n.indexOf(","))?s.levelCodec:s.codec;a&&"audio"===i.slice(0,5)&&(a=gi(a,this.appendSource));const o="".concat(s.container,";codecs=").concat(a);this.log("creating sourceBuffer(".concat(o,")"));try{const e=t[i]=r.addSourceBuffer(o),n=i;this.addBufferListener(n,"updatestart",this._onSBUpdateStart),this.addBufferListener(n,"updateend",this._onSBUpdateEnd),this.addBufferListener(n,"error",this._onSBUpdateError),this.appendSource&&this.addBufferListener(n,"bufferedchange",((e,t)=>{const r=t.removedRanges;null!=r&&r.length&&this.hls.trigger(Rr.BUFFER_FLUSHED,{type:i})})),this.tracks[i]={buffer:e,codec:a,container:s.container,levelCodec:s.levelCodec,metadata:s.metadata,id:s.id}}catch(pu){this.error("error while trying to add sourceBuffer: ".concat(pu.message)),this.hls.trigger(Rr.ERROR,{type:Sr.MEDIA_ERROR,details:Ar.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:pu,sourceBufferName:i,mimeType:o})}}}get mediaSrc(){var e,t;const r=(null==(e=this.media)||null==(t=e.querySelector)?void 0:t.call(e,"source"))||this.media;return null==r?void 0:r.src}_onSBUpdateStart(e){const{operationQueue:t}=this;t.current(e).onStart()}_onSBUpdateEnd(e){var t;if("closed"===(null==(t=this.mediaSource)?void 0:t.readyState))return void this.resetBuffer(e);const{operationQueue:r}=this;r.current(e).onComplete(),r.shiftAndExecuteNext(e)}_onSBUpdateError(e,t){var r;const n=new Error("".concat(e," SourceBuffer error. MediaSource readyState: ").concat(null==(r=this.mediaSource)?void 0:r.readyState));this.error("".concat(n),t),this.hls.trigger(Rr.ERROR,{type:Sr.MEDIA_ERROR,details:Ar.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:n,fatal:!1});const i=this.operationQueue.current(e);i&&i.onError(n)}removeExecutor(e,t,r){const{media:n,mediaSource:i,operationQueue:s,sourceBuffer:a}=this,o=a[e];if(!n||!i||!o)return this.warn("Attempting to remove from the ".concat(e," SourceBuffer, but it does not exist")),void s.shiftAndExecuteNext(e);const l=Er(n.duration)?n.duration:1/0,c=Er(i.duration)?i.duration:1/0,u=Math.max(0,t),d=Math.min(r,l,c);d>u&&(!o.ending||o.ended)?(o.ended=!1,this.log("Removing [".concat(u,",").concat(d,"] from the ").concat(e," SourceBuffer")),o.remove(u,d)):s.shiftAndExecuteNext(e)}appendExecutor(e,t){const r=this.sourceBuffer[t];if(r)r.ended=!1,r.appendBuffer(e);else if(!this.pendingTracks[t])throw new Error("Attempting to append to the ".concat(t," SourceBuffer, but it does not exist"))}blockBuffers(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getSourceBufferTypes();if(!t.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve().then(e);const{operationQueue:r}=this,n=t.map((e=>r.appendBlocker(e)));Promise.all(n).then((()=>{e(),t.forEach((e=>{const t=this.sourceBuffer[e];null!=t&&t.updating||r.shiftAndExecuteNext(e)}))}))}getSourceBufferTypes(){return Object.keys(this.sourceBuffer)}addBufferListener(e,t,r){const n=this.sourceBuffer[e];if(!n)return;const i=r.bind(this,e);this.listeners[e].push({event:t,listener:i}),n.addEventListener(t,i)}removeBufferListeners(e){const t=this.sourceBuffer[e];t&&this.listeners[e].forEach((e=>{t.removeEventListener(e.event,e.listener)}))}},capLevelController:jl,errorController:class{constructor(e){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=e,this.log=xr.log.bind(xr,"[info]:"),this.warn=xr.warn.bind(xr,"[warning]:"),this.error=xr.error.bind(xr,"[error]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(Rr.ERROR,this.onError,this),e.on(Rr.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Rr.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(Rr.ERROR,this.onError,this),e.off(Rr.ERROR,this.onErrorOut,this),e.off(Rr.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Rr.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return(null==e?void 0:e.type)===Ui?e.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(e,t){var r,n;if(t.fatal)return;const i=this.hls,s=t.context;switch(t.details){case Ar.FRAG_LOAD_ERROR:case Ar.FRAG_LOAD_TIMEOUT:case Ar.KEY_LOAD_ERROR:case Ar.KEY_LOAD_TIMEOUT:return void(t.errorAction=this.getFragRetryOrSwitchAction(t));case Ar.FRAG_PARSING_ERROR:if(null!=(r=t.frag)&&r.gap)return void(t.errorAction={action:Cs,flags:Ds});case Ar.FRAG_GAP:case Ar.FRAG_DECRYPT_ERROR:return t.errorAction=this.getFragRetryOrSwitchAction(t),void(t.errorAction.action=ks);case Ar.LEVEL_EMPTY_ERROR:case Ar.LEVEL_PARSING_ERROR:{var a,o;const e=t.parent===Ui?t.level:i.loadLevel;t.details===Ar.LEVEL_EMPTY_ERROR&&null!=(a=t.context)&&null!=(o=a.levelDetails)&&o.live?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,e):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,e))}return;case Ar.LEVEL_LOAD_ERROR:case Ar.LEVEL_LOAD_TIMEOUT:return void("number"===typeof(null==s?void 0:s.level)&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,s.level)));case Ar.AUDIO_TRACK_LOAD_ERROR:case Ar.AUDIO_TRACK_LOAD_TIMEOUT:case Ar.SUBTITLE_LOAD_ERROR:case Ar.SUBTITLE_TRACK_LOAD_TIMEOUT:if(s){const e=i.levels[i.loadLevel];if(e&&(s.type===Bi&&e.hasAudioGroup(s.groupId)||s.type===Pi&&e.hasSubtitleGroup(s.groupId)))return t.errorAction=this.getPlaylistRetryOrSwitchAction(t,i.loadLevel),t.errorAction.action=ks,void(t.errorAction.flags=Is)}return;case Ar.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const e=i.levels[i.loadLevel],r=null==e?void 0:e.attrs["HDCP-LEVEL"];r?t.errorAction={action:ks,flags:Bs,hdcpLevel:r}:this.keySystemError(t)}return;case Ar.BUFFER_ADD_CODEC_ERROR:case Ar.REMUX_ALLOC_ERROR:case Ar.BUFFER_APPEND_ERROR:return void(t.errorAction=this.getLevelSwitchAction(t,null!=(n=t.level)?n:i.loadLevel));case Ar.INTERNAL_EXCEPTION:case Ar.BUFFER_APPENDING_ERROR:case Ar.BUFFER_FULL_ERROR:case Ar.LEVEL_SWITCH_ERROR:case Ar.BUFFER_STALLED_ERROR:case Ar.BUFFER_SEEK_OVER_HOLE:case Ar.BUFFER_NUDGE_ON_STALL:return void(t.errorAction={action:Cs,flags:Ds})}t.type===Sr.KEY_SYSTEM_ERROR&&this.keySystemError(t)}keySystemError(e){const t=this.getVariantLevelIndex(e.frag);e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,t)}getPlaylistRetryOrSwitchAction(e,t){const r=Es(this.hls.config.playlistLoadPolicy,e),n=this.playlistError++;if(Rs(r,n,vs(e),e.response))return{action:_s,flags:Ds,retryConfig:r,retryCount:n};const i=this.getLevelSwitchAction(e,t);return r&&(i.retryConfig=r,i.retryCount=n),i}getFragRetryOrSwitchAction(e){const t=this.hls,r=this.getVariantLevelIndex(e.frag),n=t.levels[r],{fragLoadPolicy:i,keyLoadPolicy:s}=t.config,a=Es(e.details.startsWith("key")?s:i,e),o=t.levels.reduce(((e,t)=>e+t.fragmentError),0);if(n){e.details!==Ar.FRAG_GAP&&n.fragmentError++;if(Rs(a,o,vs(e),e.response))return{action:_s,flags:Ds,retryConfig:a,retryCount:o}}const l=this.getLevelSwitchAction(e,r);return a&&(l.retryConfig=a,l.retryCount=o),l}getLevelSwitchAction(e,t){const r=this.hls;null!==t&&void 0!==t||(t=r.loadLevel);const n=this.hls.levels[t];if(n){var i,s;const t=e.details;n.loadError++,t===Ar.BUFFER_APPEND_ERROR&&n.fragmentError++;let l=-1;const{levels:c,loadLevel:u,minAutoLevel:d,maxAutoLevel:f}=r;r.autoLevelEnabled||(r.loadLevel=-1);const p=null==(i=e.frag)?void 0:i.type,h=(p===Ni&&t===Ar.FRAG_PARSING_ERROR||"audio"===e.sourceBufferName&&(t===Ar.BUFFER_ADD_CODEC_ERROR||t===Ar.BUFFER_APPEND_ERROR))&&c.some((e=>{let{audioCodec:t}=e;return n.audioCodec!==t})),m="video"===e.sourceBufferName&&(t===Ar.BUFFER_ADD_CODEC_ERROR||t===Ar.BUFFER_APPEND_ERROR)&&c.some((e=>{let{codecSet:t,audioCodec:r}=e;return n.codecSet!==t&&n.audioCodec===r})),{type:g,groupId:y}=null!=(s=e.context)?s:{};for(let r=c.length;r--;){const i=(r+u)%c.length;if(i!==u&&i>=d&&i<=f&&0===c[i].loadError){var a,o;const r=c[i];if(t===Ar.FRAG_GAP&&p===Ui&&e.frag){const t=c[i].details;if(t){const r=As(e.frag,t.fragments,e.frag.start);if(null!=r&&r.gap)continue}}else{if(g===Bi&&r.hasAudioGroup(y)||g===Pi&&r.hasSubtitleGroup(y))continue;if(p===Ni&&null!=(a=n.audioGroups)&&a.some((e=>r.hasAudioGroup(e)))||p===Oi&&null!=(o=n.subtitleGroups)&&o.some((e=>r.hasSubtitleGroup(e)))||h&&n.audioCodec===r.audioCodec||!h&&n.audioCodec!==r.audioCodec||m&&n.codecSet===r.codecSet)continue}l=i;break}}if(l>-1&&r.loadLevel!==l)return e.levelRetry=!0,this.playlistError=0,{action:ks,flags:Ds,nextAutoLevel:l}}return{action:ks,flags:Is}}onErrorOut(e,t){var r;switch(null==(r=t.errorAction)?void 0:r.action){case Cs:break;case ks:this.sendAlternateToPenaltyBox(t),t.errorAction.resolved||t.details===Ar.FRAG_GAP?/MediaSource readyState: ended/.test(t.error.message)&&(this.warn('MediaSource ended after "'.concat(t.sourceBufferName,'" sourceBuffer append error. Attempting to recover from media error.')),this.hls.recoverMediaError()):t.fatal=!0}t.fatal&&this.hls.stopLoad()}sendAlternateToPenaltyBox(e){const t=this.hls,r=e.errorAction;if(!r)return;const{flags:n,hdcpLevel:i,nextAutoLevel:s}=r;switch(n){case Ds:this.switchLevel(e,s);break;case Bs:i&&(t.maxHdcpLevel=ts[ts.indexOf(i)-1],r.resolved=!0),this.warn('Restricting playback to HDCP-LEVEL of "'.concat(t.maxHdcpLevel,'" or lower'))}r.resolved||this.switchLevel(e,s)}switchLevel(e,t){void 0!==t&&e.errorAction&&(this.warn("switching to level ".concat(t," after ").concat(e.details)),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)}},fpsController:class{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(Rr.MEDIA_ATTACHING,this.onMediaAttaching,this)}unregisterListeners(){this.hls.off(Rr.MEDIA_ATTACHING,this.onMediaAttaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){const r=this.hls.config;if(r.capLevelOnFPSDrop){const e=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=e,e&&"function"===typeof e.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),r.fpsDroppedMonitoringPeriod)}}checkFPS(e,t,r){const n=performance.now();if(t){if(this.lastTime){const e=n-this.lastTime,i=r-this.lastDroppedFrames,s=t-this.lastDecodedFrames,a=1e3*i/e,o=this.hls;if(o.trigger(Rr.FPS_DROP,{currentDropped:i,currentDecoded:s,totalDroppedFrames:r}),a>0&&i>o.config.fpsDroppedMonitoringThreshold*s){let e=o.currentLevel;xr.warn("drop FPS ratio greater than max allowed value for currentLevel: "+e),e>0&&(-1===o.autoLevelCapping||o.autoLevelCapping>=e)&&(e-=1,o.trigger(Rr.FPS_DROP_LEVEL_CAPPING,{level:e,droppedLevel:o.currentLevel}),o.autoLevelCapping=e,this.streamController.nextLevelSwitch())}}this.lastTime=n,this.lastDroppedFrames=r,this.lastDecodedFrames=t}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}},stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:on,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,useMediaCapabilities:!0,certLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null}},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},{cueHandler:Fc,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:class extends Da{constructor(e,t,r){super(e,t,r,"[subtitle-stream-controller]",Oi),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}_registerListeners(){const{hls:e}=this;e.on(Rr.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Rr.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Rr.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Rr.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Rr.ERROR,this.onError,this),e.on(Rr.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(Rr.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(Rr.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(Rr.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(Rr.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(Rr.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(Rr.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Rr.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Rr.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Rr.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Rr.ERROR,this.onError,this),e.off(Rr.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(Rr.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(Rr.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(Rr.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(Rr.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(Rr.FRAG_BUFFERED,this.onFragBuffered,this)}startLoad(e){this.stopLoad(),this.state=ba,this.setInterval(500),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}onManifestLoading(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()}onMediaDetaching(){this.tracksBuffered=[],super.onMediaDetaching()}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){const{frag:r,success:n}=t;if(this.fragPrevious=r,this.state=ba,!n)return;const i=this.tracksBuffered[this.currentTrackId];if(!i)return;let s;const a=r.start;for(let l=0;l<i.length;l++)if(a>=i[l].start&&a<=i[l].end){s=i[l];break}const o=r.start+r.duration;s?s.end=o:(s={start:a,end:o},i.push(s)),this.fragmentTracker.fragBuffered(r),this.fragBufferedComplete(r,null)}onBufferFlushing(e,t){const{startOffset:r,endOffset:n}=t;if(0===r&&n!==Number.POSITIVE_INFINITY){const e=n-1;if(e<=0)return;t.endOffsetSubtitles=Math.max(0,e),this.tracksBuffered.forEach((t=>{for(let r=0;r<t.length;)if(t[r].end<=e)t.shift();else{if(!(t[r].start<e))break;t[r].start=e,r++}})),this.fragmentTracker.removeFragmentsInRange(r,e,Oi)}}onFragBuffered(e,t){var r;this.loadedmetadata||t.frag.type!==Ui||null!=(r=this.media)&&r.buffered.length&&(this.loadedmetadata=!0)}onError(e,t){const r=t.frag;(null==r?void 0:r.type)===Oi&&(t.details===Ar.FRAG_GAP&&this.fragmentTracker.fragBuffered(r,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==Ea&&(this.state=ba))}onSubtitleTracksUpdated(e,t){let{subtitleTracks:r}=t;this.levels&&Vo(this.levels,r)?this.levels=r.map((e=>new ls(e))):(this.tracksBuffered=[],this.levels=r.map((e=>{const t=new ls(e);return this.tracksBuffered[t.id]=[],t})),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,Oi),this.fragPrevious=null,this.mediaBuffer=null)}onSubtitleTrackSwitch(e,t){var r;if(this.currentTrackId=t.id,null==(r=this.levels)||!r.length||-1===this.currentTrackId)return void this.clearInterval();const n=this.levels[this.currentTrackId];null!=n&&n.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,n&&this.setInterval(500)}onSubtitleTrackLoaded(e,t){var r;const{currentTrackId:n,levels:i}=this,{details:s,id:a}=t;if(!i)return void this.warn("Subtitle tracks were reset while loading level ".concat(a));const o=i[a];if(a>=i.length||!o)return;this.log("Subtitle track ".concat(a," loaded [").concat(s.startSN,",").concat(s.endSN,"]").concat(s.lastPartSn?"[part-".concat(s.lastPartSn,"-").concat(s.lastPartIndex,"]"):"",",duration:").concat(s.totalduration)),this.mediaBuffer=this.mediaBufferTimeRanges;let l=0;if(s.live||null!=(r=o.details)&&r.live){const e=this.mainDetails;if(s.deltaUpdateFailed||!e)return;const t=e.fragments[0];var c;if(o.details)l=this.alignPlaylists(s,o.details,null==(c=this.levelLastLoaded)?void 0:c.details),0===l&&t&&(l=t.start,hs(s,l));else s.hasProgramDateTime&&e.hasProgramDateTime?(la(s,e),l=s.fragments[0].start):t&&(l=t.start,hs(s,l))}if(o.details=s,this.levelLastLoaded=o,a===n&&(this.startFragRequested||!this.mainDetails&&s.live||this.setStartPosition(this.mainDetails||s,l),this.tick(),s.live&&!this.fragCurrent&&this.media&&this.state===ba)){As(null,s.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),o.details=void 0)}}_handleFragmentLoadComplete(e){const{frag:t,payload:r}=e,n=t.decryptdata,i=this.hls;if(!this.fragContextChanged(t)&&r&&r.byteLength>0&&null!=n&&n.key&&n.iv&&"AES-128"===n.method){const e=performance.now();this.decrypter.decrypt(new Uint8Array(r),n.key.buffer,n.iv.buffer).catch((e=>{throw i.trigger(Rr.ERROR,{type:Sr.MEDIA_ERROR,details:Ar.FRAG_DECRYPT_ERROR,fatal:!1,error:e,reason:e.message,frag:t}),e})).then((r=>{const n=performance.now();i.trigger(Rr.FRAG_DECRYPTED,{frag:t,payload:r,stats:{tstart:e,tdecrypt:n}})})).catch((e=>{this.warn("".concat(e.name,": ").concat(e.message)),this.state=ba}))}}doTick(){if(this.media){if(this.state===ba){const{currentTrackId:e,levels:t}=this,r=null==t?void 0:t[e];if(!r||!t.length||!r.details)return;const{config:n}=this,i=this.getLoadPosition(),s=ra.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],i,n.maxBufferHole),{end:a,len:o}=s,l=this.getFwdBufferInfo(this.media,Ui),c=r.details;if(o>this.getMaxBufferLength(null==l?void 0:l.len)+c.levelTargetDuration)return;const u=c.fragments,d=u.length,f=c.edge;let p=null;const h=this.fragPrevious;if(a<f){const e=n.maxFragLookUpTolerance,t=a>f-e?0:e;p=As(h,u,Math.max(u[0].start,a),t),!p&&h&&h.start<u[0].start&&(p=u[0])}else p=u[d-1];if(!p)return;if(p=this.mapToInitFragWhenRequired(p),"initSegment"!==p.sn){const e=u[p.sn-c.startSN-1];e&&e.cc===p.cc&&this.fragmentTracker.getState(e)===$s&&(p=e)}this.fragmentTracker.getState(p)===$s&&this.loadFragment(p,r,a)}}else this.state=ba}getMaxBufferLength(e){const t=super.getMaxBufferLength();return e?Math.max(t,e):t}loadFragment(e,t,r){this.fragCurrent=e,"initSegment"===e.sn?this._loadInitSegment(e,t):(this.startFragRequested=!0,super.loadFragment(e,t,r))}get mediaBufferTimeRanges(){return new qo(this.tracksBuffered[this.currentTrackId]||[])}},subtitleTrackController:class extends Ps{constructor(e){super(e,"[subtitle-track-controller]"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let e=null;const t=Hi(this.media.textTracks);for(let n=0;n<t.length;n++)if("hidden"===t[n].mode)e=t[n];else if("showing"===t[n].mode){e=t[n];break}const r=this.findTrackForTextTrack(e);this.subtitleTrack!==r&&this.setSubtitleTrack(r)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(Rr.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Rr.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Rr.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Rr.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Rr.LEVEL_LOADING,this.onLevelLoading,this),e.on(Rr.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(Rr.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(Rr.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(Rr.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Rr.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Rr.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Rr.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Rr.LEVEL_LOADING,this.onLevelLoading,this),e.off(Rr.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(Rr.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(Rr.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(){if(!this.media)return;self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId);Hi(this.media.textTracks).forEach((e=>{Gi(e)})),this.subtitleTrack=-1,this.media=null}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){const{id:r,groupId:n,details:i}=t,s=this.tracksInGroup[r];if(!s||s.groupId!==n)return void this.warn("Subtitle track with id:".concat(r," and group:").concat(n," not found in active group ").concat(null==s?void 0:s.groupId));const a=s.details;s.details=t.details,this.log("Subtitle track ".concat(r,' "').concat(s.name,'" lang:').concat(s.lang," group:").concat(n," loaded [").concat(i.startSN,"-").concat(i.endSN,"]")),r===this.trackId&&this.playlistLoaded(r,t,a)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const r=t.subtitleGroups||null,n=this.groupIds;let i=this.currentTrack;if(!r||(null==n?void 0:n.length)!==(null==r?void 0:r.length)||null!=r&&r.some((e=>-1===(null==n?void 0:n.indexOf(e))))){this.groupIds=r,this.trackId=-1,this.currentTrack=null;const e=this.tracks.filter((e=>!r||-1!==r.indexOf(e.groupId)));if(e.length)this.selectDefaultTrack&&!e.some((e=>e.default))&&(this.selectDefaultTrack=!1),e.forEach(((e,t)=>{e.id=t}));else if(!i&&!this.tracksInGroup.length)return;this.tracksInGroup=e;const t=this.hls.config.subtitlePreference;if(!i&&t){this.selectDefaultTrack=!1;const r=Gs(t,e);if(r>-1)i=e[r];else{const e=Gs(t,this.tracks);i=this.tracks[e]}}let n=this.findTrackId(i);-1===n&&i&&(n=this.findTrackId(null));const s={subtitleTracks:e};this.log("Updating subtitle tracks, ".concat(e.length,' track(s) found in "').concat(null==r?void 0:r.join(","),'" group-id')),this.hls.trigger(Rr.SUBTITLE_TRACKS_UPDATED,s),-1!==n&&-1===this.trackId&&this.setSubtitleTrack(n)}else this.shouldReloadPlaylist(i)&&this.setSubtitleTrack(this.trackId)}findTrackId(e){const t=this.tracksInGroup,r=this.selectDefaultTrack;for(let n=0;n<t.length;n++){const i=t[n];if((!r||i.default)&&(r||e)&&(!e||qs(i,e)))return n}if(e){for(let r=0;r<t.length;r++){const n=t[r];if(jo(e.attrs,n.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return r}for(let r=0;r<t.length;r++){const n=t[r];if(jo(e.attrs,n.attrs,["LANGUAGE"]))return r}}return-1}findTrackForTextTrack(e){if(e){const t=this.tracksInGroup;for(let r=0;r<t.length;r++){if(Go(t[r],e))return r}}return-1}onError(e,t){!t.fatal&&t.context&&(t.context.type!==Pi||t.context.id!==this.trackId||this.groupIds&&-1===this.groupIds.indexOf(t.context.groupId)||this.checkRetry(t))}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){const t=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,t.length){const r=this.currentTrack;if(r&&qs(e,r))return r;const n=Gs(e,this.tracksInGroup);if(n>-1){const e=this.tracksInGroup[n];return this.setSubtitleTrack(n),e}if(r)return null;{const r=Gs(e,t);if(r>-1)return t[r]}}}return null}loadPlaylist(e){super.loadPlaylist();const t=this.currentTrack;if(this.shouldLoadPlaylist(t)&&t){const n=t.id,i=t.groupId;let s=t.url;if(e)try{s=e.addDirectives(s)}catch(r){this.warn("Could not construct new URL with HLS Delivery Directives: ".concat(r))}this.log("Loading subtitle playlist for id ".concat(n)),this.hls.trigger(Rr.SUBTITLE_TRACK_LOADING,{url:s,id:n,groupId:i,deliveryDirectives:e||null})}}toggleTrackModes(){const{media:e}=this;if(!e)return;const t=Hi(e.textTracks),r=this.currentTrack;let n;if(r&&(n=t.filter((e=>Go(r,e)))[0],n||this.warn('Unable to find subtitle TextTrack with name "'.concat(r.name,'" and language "').concat(r.lang,'"'))),[].slice.call(t).forEach((e=>{"disabled"!==e.mode&&e!==n&&(e.mode="disabled")})),n){const e=this.subtitleDisplay?"showing":"hidden";n.mode!==e&&(n.mode=e)}}setSubtitleTrack(e){const t=this.tracksInGroup;if(!this.media)return void(this.queuedDefaultTrack=e);if(e<-1||e>=t.length||!Er(e))return void this.warn("Invalid subtitle track id: ".concat(e));this.clearTimer(),this.selectDefaultTrack=!1;const r=this.currentTrack,n=t[e]||null;if(this.trackId=e,this.currentTrack=n,this.toggleTrackModes(),!n)return void this.hls.trigger(Rr.SUBTITLE_TRACK_SWITCH,{id:e});const i=!!n.details&&!n.details.live;if(e===this.trackId&&n===r&&i)return;this.log("Switching to subtitle-track ".concat(e)+(n?' "'.concat(n.name,'" lang:').concat(n.lang," group:").concat(n.groupId):""));const{id:s,groupId:a="",name:o,type:l,url:c}=n;this.hls.trigger(Rr.SUBTITLE_TRACK_SWITCH,{id:s,groupId:a,name:o,type:l,url:c});const u=this.switchParams(n.url,null==r?void 0:r.details,n.details);this.loadPlaylist(u)}},timelineController:class{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(Rr.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(Rr.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Rr.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Rr.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(Rr.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(Rr.FRAG_LOADING,this.onFragLoading,this),e.on(Rr.FRAG_LOADED,this.onFragLoaded,this),e.on(Rr.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(Rr.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(Rr.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(Rr.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(Rr.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(Rr.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(Rr.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Rr.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Rr.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(Rr.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(Rr.FRAG_LOADING,this.onFragLoading,this),e.off(Rr.FRAG_LOADED,this.onFragLoaded,this),e.off(Rr.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(Rr.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(Rr.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(Rr.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(Rr.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){if(this.config.enableCEA708Captions&&(!this.cea608Parser1||!this.cea608Parser2)){const e=new pl(this,"textTrack1"),t=new pl(this,"textTrack2"),r=new pl(this,"textTrack3"),n=new pl(this,"textTrack4");this.cea608Parser1=new ul(1,e,t),this.cea608Parser2=new ul(3,r,n)}}addCues(e,t,r,n,i){let s=!1;for(let u=i.length;u--;){const e=i[u],n=(a=e[0],o=e[1],l=t,c=r,Math.min(o,c)-Math.max(a,l));if(n>=0&&(e[0]=Math.min(e[0],t),e[1]=Math.max(e[1],r),s=!0,n/(r-t)>.5))return}var a,o,l,c;if(s||i.push([t,r]),this.config.renderTextTracksNatively){const i=this.captionsTracks[e];this.Cues.newCue(i,t,r,n)}else{const i=this.Cues.newCue(null,t,r,n);this.hls.trigger(Rr.CUES_PARSED,{type:"captions",cues:i,track:e})}}onInitPtsFound(e,t){let{frag:r,id:n,initPTS:i,timescale:s}=t;const{unparsedVttFrags:a}=this;"main"===n&&(this.initPTS[r.cc]={baseTime:i,timescale:s}),a.length&&(this.unparsedVttFrags=[],a.forEach((e=>{this.onFragLoaded(Rr.FRAG_LOADED,e)})))}getExistingTrack(e,t){const{media:r}=this;if(r)for(let n=0;n<r.textTracks.length;n++){const i=r.textTracks[n];if(Vl(i,{name:e,lang:t,attrs:{}}))return i}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:t,captionsTracks:r,media:n}=this,{label:i,languageCode:s}=t[e],a=this.getExistingTrack(i,s);if(a)r[e]=a,Gi(r[e]),Vi(r[e],n);else{const t=this.createTextTrack("captions",i,s);t&&(t[e]=!0,r[e]=t)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const t=this.captionsProperties[e];if(!t)return;const r={_id:e,label:t.label,kind:"captions",default:!!t.media&&!!t.media.default,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=r,this.hls.trigger(Rr.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[r]})}createTextTrack(e,t,r){const n=this.media;if(n)return n.addTextTrack(e,t,r)}onMediaAttaching(e,t){this.media=t.media,this._cleanTracks()}onMediaDetaching(){const{captionsTracks:e}=this;Object.keys(e).forEach((t=>{Gi(e[t]),delete e[t]})),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const t=e.textTracks;if(t)for(let r=0;r<t.length;r++)Gi(t[r])}onSubtitleTracksUpdated(e,t){const r=t.subtitleTracks||[],n=r.some((e=>e.textCodec===xl));if(this.config.enableWebVTT||n&&this.config.enableIMSC1){if(Vo(this.tracks,r))return void(this.tracks=r);if(this.textTracks=[],this.tracks=r,this.config.renderTextTracksNatively){const e=this.media,t=e?Hi(e.textTracks):null;if(this.tracks.forEach(((e,r)=>{let n;if(t){let r=null;for(let n=0;n<t.length;n++)if(t[n]&&Vl(t[n],e)){r=t[n],t[n]=null;break}r&&(n=r)}if(n)Gi(n);else{const t=Ml(e);n=this.createTextTrack(t,e.name,e.lang),n&&(n.mode="disabled")}n&&this.textTracks.push(n)})),null!=t&&t.length){const e=t.filter((e=>null!==e)).map((e=>e.label));e.length&&xr.warn("Media element contains unused subtitle tracks: ".concat(e.join(", "),". Replace media element for each source to clear TextTracks and captions menu."))}}else if(this.tracks.length){const e=this.tracks.map((e=>({label:e.name,kind:e.type.toLowerCase(),default:e.default,subtitleTrack:e})));this.hls.trigger(Rr.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:e})}}}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach((e=>{const t=/(?:CC|SERVICE)([1-4])/.exec(e.instreamId);if(!t)return;const r="textTrack".concat(t[1]),n=this.captionsProperties[r];n&&(n.label=e.name,e.lang&&(n.languageCode=e.lang),n.media=e)}))}closedCaptionsForLevel(e){const t=this.hls.levels[e.level];return null==t?void 0:t.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){if(this.enabled&&t.frag.type===Ui){var r,n;const{cea608Parser1:e,cea608Parser2:i,lastSn:s}=this,{cc:a,sn:o}=t.frag,l=null!=(r=null==(n=t.part)?void 0:n.index)?r:-1;e&&i&&(o!==s+1||o===s&&l!==this.lastPartIndex+1||a!==this.lastCc)&&(e.reset(),i.reset()),this.lastCc=a,this.lastSn=o,this.lastPartIndex=l}}onFragLoaded(e,t){const{frag:r,payload:n}=t;if(r.type===Oi)if(n.byteLength){const e=r.decryptdata,i="stats"in t;if(null==e||!e.encrypted||i){const e=this.tracks[r.level],i=this.vttCCs;i[r.cc]||(i[r.cc]={start:r.start,prevCC:this.prevCC,new:!0},this.prevCC=r.cc),e&&e.textCodec===xl?this._parseIMSC1(r,n):this._parseVTTs(t)}}else this.hls.trigger(Rr.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,t){const r=this.hls;Bl(t,this.initPTS[e.cc],(t=>{this._appendCues(t,e.level),r.trigger(Rr.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})}),(t=>{xr.log("Failed to parse IMSC1: ".concat(t)),r.trigger(Rr.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:t})}))}_parseVTTs(e){var t;const{frag:r,payload:n}=e,{initPTS:i,unparsedVttFrags:s}=this,a=i.length-1;if(!i[r.cc]&&-1===a)return void s.push(e);const o=this.hls;kl(null!=(t=r.initSegment)&&t.data?Xn(r.initSegment.data,new Uint8Array(n)):n,this.initPTS[r.cc],this.vttCCs,r.cc,r.start,(e=>{this._appendCues(e,r.level),o.trigger(Rr.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:r})}),(t=>{const i="Missing initPTS for VTT MPEGTS"===t.message;i?s.push(e):this._fallbackToIMSC1(r,n),xr.log("Failed to parse VTT cue: ".concat(t)),i&&a>r.cc||o.trigger(Rr.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:t})}))}_fallbackToIMSC1(e,t){const r=this.tracks[e.level];r.textCodec||Bl(t,this.initPTS[e.cc],(()=>{r.textCodec=xl,this._parseIMSC1(e,t)}),(()=>{r.textCodec="wvtt"}))}_appendCues(e,t){const r=this.hls;if(this.config.renderTextTracksNatively){const r=this.textTracks[t];if(!r||"disabled"===r.mode)return;e.forEach((e=>ji(r,e)))}else{const n=this.tracks[t];if(!n)return;const i=n.default?"default":"subtitles"+t;r.trigger(Rr.CUES_PARSED,{type:"subtitles",cues:e,track:i})}}onFragDecrypted(e,t){const{frag:r}=t;r.type===Oi&&this.onFragLoaded(Rr.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){this.initCea608Parsers();const{cea608Parser1:r,cea608Parser2:n}=this;if(!this.enabled||!r||!n)return;const{frag:i,samples:s}=t;if(i.type!==Ui||"NONE"!==this.closedCaptionsForLevel(i))for(let a=0;a<s.length;a++){const e=s[a].bytes;if(e){const t=this.extractCea608Data(e);r.addData(s[a].pts,t[0]),n.addData(s[a].pts,t[1])}}}onBufferFlushing(e,t){let{startOffset:r,endOffset:n,endOffsetSubtitles:i,type:s}=t;const{media:a}=this;if(a&&!(a.currentTime<n)){if(!s||"video"===s){const{captionsTracks:e}=this;Object.keys(e).forEach((t=>qi(e[t],r,n)))}if(this.config.renderTextTracksNatively&&0===r&&void 0!==i){const{textTracks:e}=this;Object.keys(e).forEach((t=>qi(e[t],r,i)))}}}extractCea608Data(e){const t=[[],[]],r=31&e[0];let n=2;for(let i=0;i<r;i++){const r=e[n++],i=127&e[n++],s=127&e[n++];if(0===i&&0===s)continue;if(0!==(4&r)){const e=3&r;0!==e&&1!==e||(t[e].push(i),t[e].push(s))}}return t}},audioStreamController:class extends Da{constructor(e,t,r){super(e,t,r,"[audio-stream-controller]",Ni),this.videoBuffer=null,this.videoTrackCC=-1,this.waitingVideoCC=-1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null}_registerListeners(){const{hls:e}=this;e.on(Rr.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Rr.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Rr.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Rr.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Rr.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(Rr.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(Rr.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(Rr.ERROR,this.onError,this),e.on(Rr.BUFFER_RESET,this.onBufferReset,this),e.on(Rr.BUFFER_CREATED,this.onBufferCreated,this),e.on(Rr.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(Rr.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(Rr.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(Rr.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(Rr.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Rr.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Rr.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Rr.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Rr.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(Rr.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(Rr.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(Rr.ERROR,this.onError,this),e.off(Rr.BUFFER_RESET,this.onBufferReset,this),e.off(Rr.BUFFER_CREATED,this.onBufferCreated,this),e.off(Rr.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(Rr.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(Rr.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(Rr.FRAG_BUFFERED,this.onFragBuffered,this)}onInitPtsFound(e,t){let{frag:r,id:n,initPTS:i,timescale:s}=t;if("main"===n){const e=r.cc;this.initPTS[r.cc]={baseTime:i,timescale:s},this.log("InitPTS for cc: ".concat(e," found from main: ").concat(i)),this.videoTrackCC=e,this.state===xa&&this.tick()}}startLoad(e){if(!this.levels)return this.startPosition=e,void(this.state=Ea);const t=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),t>0&&-1===e?(this.log("Override startPosition with lastCurrentTime @".concat(t.toFixed(3))),e=t,this.state=ba):(this.loadedmetadata=!1,this.state=Aa),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}doTick(){switch(this.state){case ba:this.doTickIdle();break;case Aa:{var e;const{levels:t,trackId:r}=this,n=null==t||null==(e=t[r])?void 0:e.details;if(n){if(this.waitForCdnTuneIn(n))break;this.state=xa}break}case Sa:{var t;const e=performance.now(),r=this.retryDate;if(!r||e>=r||null!=(t=this.media)&&t.seeking){const{levels:e,trackId:t}=this;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded((null==e?void 0:e[t])||null),this.state=ba}break}case xa:{const e=this.waitingData;if(e){const{frag:t,part:r,cache:n,complete:i}=e;if(void 0!==this.initPTS[t.cc]){this.waitingData=null,this.waitingVideoCC=-1,this.state=Ra;const e={frag:t,part:r,payload:n.flush(),networkDetails:null};this._handleFragmentLoadProgress(e),i&&super._handleFragmentLoadComplete(e)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log("Waiting fragment cc (".concat(t.cc,") cancelled because video is at cc ").concat(this.videoTrackCC)),this.clearWaitingFragment();else{const e=this.getLoadPosition(),r=ra.bufferInfo(this.mediaBuffer,e,this.config.maxBufferHole);Ls(r.end,this.config.maxFragLookUpTolerance,t)<0&&(this.log("Waiting fragment cc (".concat(t.cc,") @ ").concat(t.start," cancelled because another fragment at ").concat(r.end," is needed")),this.clearWaitingFragment())}}else this.state=ba}}this.onTickEnd()}clearWaitingFragment(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=ba)}resetLoadingState(){this.clearWaitingFragment(),super.resetLoadingState()}onTickEnd(){const{media:e}=this;null!=e&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){const{hls:e,levels:t,media:r,trackId:n}=this,i=e.config;if(!r&&(this.startFragRequested||!i.startFragPrefetch)||null==t||!t[n])return;const s=t[n],a=s.details;if(!a||a.live&&this.levelLastLoaded!==s||this.waitForCdnTuneIn(a))return void(this.state=Aa);const o=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&o&&(this.bufferFlushed=!1,this.afterBufferFlushed(o,Nr,Ni));const l=this.getFwdBufferInfo(o,Ni);if(null===l)return;const{bufferedTrack:c,switchingTrack:u}=this;if(!u&&this._streamEnded(l,a))return e.trigger(Rr.BUFFER_EOS,{type:"audio"}),void(this.state=Ca);const d=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,Ui),f=l.len,p=this.getMaxBufferLength(null==d?void 0:d.len),h=a.fragments,m=h[0].start;let g=this.flushing?this.getLoadPosition():l.end;if(u&&r){const e=this.getLoadPosition();c&&!jo(u.attrs,c.attrs)&&(g=e),a.PTSKnown&&e<m&&(l.end>m||l.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),r.currentTime=m+.05)}if(f>=p&&!u&&g<h[h.length-1].start)return;let y=this.getNextFragment(g,a),v=!1;if(y&&this.isLoopLoading(y,g)&&(v=!!y.gap,y=this.getNextFragmentLoopLoading(y,a,l,Ui,p)),!y)return void(this.bufferFlushed=!0);const E=d&&y.start>d.end+a.targetduration;if(E||(null==d||!d.len)&&l.len){const e=this.getAppendedFrag(y.start,Ui);if(null===e)return;if(v||(v=!!e.gap||!!E&&0===d.len),E&&!v||v&&l.nextStart&&l.nextStart<e.end)return}this.loadFragment(y,s,g)}getMaxBufferLength(e){const t=super.getMaxBufferLength();return e?Math.min(Math.max(t,e),this.config.maxMaxBufferLength):t}onMediaDetaching(){this.videoBuffer=null,this.bufferFlushed=this.flushing=!1,super.onMediaDetaching()}onAudioTracksUpdated(e,t){let{audioTracks:r}=t;this.resetTransmuxer(),this.levels=r.map((e=>new ls(e)))}onAudioTrackSwitching(e,t){const r=!!t.url;this.trackId=t.id;const{fragCurrent:n}=this;n&&(n.abortRequests(),this.removeUnbufferedFrags(n.start)),this.resetLoadingState(),r?this.setInterval(100):this.resetTransmuxer(),r?(this.switchingTrack=t,this.state=ba,this.flushAudioIfNeeded(t)):(this.switchingTrack=null,this.bufferedTrack=t,this.state=Ea),this.tick()}onManifestLoading(){this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=this.flushing=!1,this.levels=this.mainDetails=this.waitingData=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.startFragRequested=!1,this.trackId=this.videoTrackCC=this.waitingVideoCC=-1}onLevelLoaded(e,t){this.mainDetails=t.details,null!==this.cachedTrackLoadedData&&(this.hls.trigger(Rr.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)}onAudioTrackLoaded(e,t){var r;if(null==this.mainDetails)return void(this.cachedTrackLoadedData=t);const{levels:n}=this,{details:i,id:s}=t;if(!n)return void this.warn("Audio tracks were reset while loading level ".concat(s));this.log("Audio track ".concat(s," loaded [").concat(i.startSN,",").concat(i.endSN,"]").concat(i.lastPartSn?"[part-".concat(i.lastPartSn,"-").concat(i.lastPartIndex,"]"):"",",duration:").concat(i.totalduration));const a=n[s];let o=0;if(i.live||null!=(r=a.details)&&r.live){this.checkLiveUpdate(i);const e=this.mainDetails;if(i.deltaUpdateFailed||!e)return;var l;if(!a.details&&i.hasProgramDateTime&&e.hasProgramDateTime)la(i,e),o=i.fragments[0].start;else o=this.alignPlaylists(i,a.details,null==(l=this.levelLastLoaded)?void 0:l.details)}a.details=i,this.levelLastLoaded=a,this.startFragRequested||!this.mainDetails&&i.live||this.setStartPosition(this.mainDetails||i,o),this.state!==Aa||this.waitForCdnTuneIn(i)||(this.state=ba),this.tick()}_handleFragmentLoadProgress(e){var t;const{frag:r,part:n,payload:i}=e,{config:s,trackId:a,levels:o}=this;if(!o)return void this.warn("Audio tracks were reset while fragment load was in progress. Fragment ".concat(r.sn," of level ").concat(r.level," will not be buffered"));const l=o[a];if(!l)return void this.warn("Audio track is undefined on fragment load progress");const c=l.details;if(!c)return this.warn("Audio track details undefined on fragment load progress"),void this.removeUnbufferedFrags(r.start);const u=s.defaultAudioCodec||l.audioCodec||"mp4a.40.2";let d=this.transmuxer;d||(d=this.transmuxer=new Mo(this.hls,Ni,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const f=this.initPTS[r.cc],p=null==(t=r.initSegment)?void 0:t.data;if(void 0!==f){const e=!1,t=n?n.index:-1,s=-1!==t,a=new na(r.level,r.sn,r.stats.chunkCount,i.byteLength,t,s);d.push(i,p,u,"",r,n,c.totalduration,e,a,f)}else{this.log("Unknown video PTS for cc ".concat(r.cc,", waiting for video PTS before demuxing audio frag ").concat(r.sn," of [").concat(c.startSN," ,").concat(c.endSN,"],track ").concat(a));const{cache:e}=this.waitingData=this.waitingData||{frag:r,part:n,cache:new Ia,complete:!1};e.push(new Uint8Array(i)),this.waitingVideoCC=this.videoTrackCC,this.state=xa}}_handleFragmentLoadComplete(e){this.waitingData?this.waitingData.complete=!0:super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1}onBufferCreated(e,t){const r=t.tracks.audio;r&&(this.mediaBuffer=r.buffer||null),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer||null)}onFragBuffered(e,t){const{frag:r,part:n}=t;if(r.type===Ni)if(this.fragContextChanged(r))this.warn("Fragment ".concat(r.sn).concat(n?" p: "+n.index:""," of level ").concat(r.level," finished buffering, but was aborted. state: ").concat(this.state,", audioSwitch: ").concat(this.switchingTrack?this.switchingTrack.name:"false"));else{if("initSegment"!==r.sn){this.fragPrevious=r;const e=this.switchingTrack;e&&(this.bufferedTrack=e,this.switchingTrack=null,this.hls.trigger(Rr.AUDIO_TRACK_SWITCHED,mr({},e)))}this.fragBufferedComplete(r,n)}else if(!this.loadedmetadata&&r.type===Ui){const e=this.videoBuffer||this.media;if(e){ra.getBuffered(e).length&&(this.loadedmetadata=!0)}}}onError(e,t){var r;if(t.fatal)this.state=ka;else switch(t.details){case Ar.FRAG_GAP:case Ar.FRAG_PARSING_ERROR:case Ar.FRAG_DECRYPT_ERROR:case Ar.FRAG_LOAD_ERROR:case Ar.FRAG_LOAD_TIMEOUT:case Ar.KEY_LOAD_ERROR:case Ar.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Ni,t);break;case Ar.AUDIO_TRACK_LOAD_ERROR:case Ar.AUDIO_TRACK_LOAD_TIMEOUT:case Ar.LEVEL_PARSING_ERROR:t.levelRetry||this.state!==Aa||(null==(r=t.context)?void 0:r.type)!==Bi||(this.state=ba);break;case Ar.BUFFER_APPEND_ERROR:case Ar.BUFFER_FULL_ERROR:if(!t.parent||"audio"!==t.parent)return;if(t.details===Ar.BUFFER_APPEND_ERROR)return void this.resetLoadingState();this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case Ar.INTERNAL_EXCEPTION:this.recoverWorkerError(t)}}onBufferFlushing(e,t){let{type:r}=t;r!==Or&&(this.flushing=!0)}onBufferFlushed(e,t){let{type:r}=t;if(r!==Or){this.flushing=!1,this.bufferFlushed=!0,this.state===Ca&&(this.state=ba);const e=this.mediaBuffer||this.media;e&&(this.afterBufferFlushed(e,r,Ni),this.tick())}}_handleTransmuxComplete(e){var t;const r="audio",{hls:n}=this,{remuxResult:i,chunkMeta:s}=e,a=this.getCurrentContext(s);if(!a)return void this.resetWhenMissingContext(s);const{frag:o,part:l,level:c}=a,{details:u}=c,{audio:d,text:f,id3:p,initSegment:h}=i;if(!this.fragContextChanged(o)&&u){if(this.state=La,this.switchingTrack&&d&&this.completeAudioSwitch(this.switchingTrack),null!=h&&h.tracks){const e=o.initSegment||o;this._bufferInitSegment(c,h.tracks,e,s),n.trigger(Rr.FRAG_PARSING_INIT_SEGMENT,{frag:e,id:r,tracks:h.tracks})}if(d){const{startPTS:e,endPTS:t,startDTS:r,endDTS:n}=d;l&&(l.elementaryStreams[Nr]={startPTS:e,endPTS:t,startDTS:r,endDTS:n}),o.setElementaryStreamInfo(Nr,e,t,r,n),this.bufferFragmentData(d,o,l,s)}if(null!=p&&null!=(t=p.samples)&&t.length){const e=vr({id:r,frag:o,details:u},p);n.trigger(Rr.FRAG_PARSING_METADATA,e)}if(f){const e=vr({id:r,frag:o,details:u},f);n.trigger(Rr.FRAG_PARSING_USERDATA,e)}}else this.fragmentTracker.removeFragment(o)}_bufferInitSegment(e,t,r,n){if(this.state!==La)return;t.video&&delete t.video;const i=t.audio;if(!i)return;i.id="audio";const s=e.audioCodec;this.log("Init audio buffer, container:".concat(i.container,", codecs[level/parsed]=[").concat(s,"/").concat(i.codec,"]")),s&&1===s.split(",").length&&(i.levelCodec=s),this.hls.trigger(Rr.BUFFER_CODECS,t);const a=i.initSegment;if(null!=a&&a.byteLength){const e={type:"audio",frag:r,part:null,chunkMeta:n,parent:r.type,data:a};this.hls.trigger(Rr.BUFFER_APPENDING,e)}this.tickImmediate()}loadFragment(e,t,r){const n=this.fragmentTracker.getState(e);var i;if(this.fragCurrent=e,this.switchingTrack||n===$s||n===Ys)if("initSegment"===e.sn)this._loadInitSegment(e,t);else if(null!=(i=t.details)&&i.live&&!this.initPTS[e.cc]){this.log("Waiting for video PTS in continuity counter ".concat(e.cc," of live stream before loading audio fragment ").concat(e.sn," of level ").concat(this.trackId)),this.state=xa;const r=this.mainDetails;r&&r.fragments[0].start!==t.details.fragments[0].start&&la(t.details,r)}else this.startFragRequested=!0,super.loadFragment(e,t,r);else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){const{media:t,bufferedTrack:r}=this,n=null==r?void 0:r.attrs,i=e.attrs;t&&n&&(n.CHANNELS!==i.CHANNELS||r.name!==e.name||r.lang!==e.lang)&&(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null)}completeAudioSwitch(e){const{hls:t}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(Rr.AUDIO_TRACK_SWITCHED,mr({},e))}},audioTrackController:class extends Ps{constructor(e){super(e,"[audio-track-controller]"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(Rr.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Rr.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Rr.LEVEL_LOADING,this.onLevelLoading,this),e.on(Rr.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(Rr.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(Rr.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(Rr.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Rr.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Rr.LEVEL_LOADING,this.onLevelLoading,this),e.off(Rr.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(Rr.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(Rr.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){const{id:r,groupId:n,details:i}=t,s=this.tracksInGroup[r];if(!s||s.groupId!==n)return void this.warn("Audio track with id:".concat(r," and group:").concat(n," not found in active group ").concat(null==s?void 0:s.groupId));const a=s.details;s.details=t.details,this.log("Audio track ".concat(r,' "').concat(s.name,'" lang:').concat(s.lang," group:").concat(n," loaded [").concat(i.startSN,"-").concat(i.endSN,"]")),r===this.trackId&&this.playlistLoaded(r,t,a)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const r=t.audioGroups||null,n=this.groupIds;let i=this.currentTrack;if(!r||(null==n?void 0:n.length)!==(null==r?void 0:r.length)||null!=r&&r.some((e=>-1===(null==n?void 0:n.indexOf(e))))){this.groupIds=r,this.trackId=-1,this.currentTrack=null;const e=this.tracks.filter((e=>!r||-1!==r.indexOf(e.groupId)));if(e.length)this.selectDefaultTrack&&!e.some((e=>e.default))&&(this.selectDefaultTrack=!1),e.forEach(((e,t)=>{e.id=t}));else if(!i&&!this.tracksInGroup.length)return;this.tracksInGroup=e;const t=this.hls.config.audioPreference;if(!i&&t){const r=Gs(t,e,Hs);if(r>-1)i=e[r];else{const e=Gs(t,this.tracks);i=this.tracks[e]}}let n=this.findTrackId(i);-1===n&&i&&(n=this.findTrackId(null));const a={audioTracks:e};this.log("Updating audio tracks, ".concat(e.length," track(s) found in group(s): ").concat(null==r?void 0:r.join(","))),this.hls.trigger(Rr.AUDIO_TRACKS_UPDATED,a);const o=this.trackId;if(-1!==n&&-1===o)this.setAudioTrack(n);else if(e.length&&-1===o){var s;const t=new Error("No audio track selected for current audio group-ID(s): ".concat(null==(s=this.groupIds)?void 0:s.join(",")," track count: ").concat(e.length));this.warn(t.message),this.hls.trigger(Rr.ERROR,{type:Sr.MEDIA_ERROR,details:Ar.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:t})}}else this.shouldReloadPlaylist(i)&&this.setAudioTrack(this.trackId)}onError(e,t){!t.fatal&&t.context&&(t.context.type!==Bi||t.context.id!==this.trackId||this.groupIds&&-1===this.groupIds.indexOf(t.context.groupId)||(this.requestScheduled=-1,this.checkRetry(t)))}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const t=this.hls;if(t.config.audioPreference=e,e){const r=this.allAudioTracks;if(this.selectDefaultTrack=!1,r.length){const n=this.currentTrack;if(n&&qs(e,n,Hs))return n;const i=Gs(e,this.tracksInGroup,Hs);if(i>-1){const e=this.tracksInGroup[i];return this.setAudioTrack(i),e}if(n){let n=t.loadLevel;-1===n&&(n=t.firstAutoLevel);const i=function(e,t,r,n,i){const s=t[n],a=t.reduce(((e,t,r)=>{const n=t.uri;return(e[n]||(e[n]=[])).push(r),e}),{})[s.uri];a.length>1&&(n=Math.max.apply(Math,a));const o=s.videoRange,l=s.frameRate,c=s.codecSet.substring(0,4),u=Xs(t,n,(t=>{if(t.videoRange!==o||t.frameRate!==l||t.codecSet.substring(0,4)!==c)return!1;const n=t.audioGroups,s=r.filter((e=>!n||-1!==n.indexOf(e.groupId)));return Gs(e,s,i)>-1}));return u>-1?u:Xs(t,n,(t=>{const n=t.audioGroups,s=r.filter((e=>!n||-1!==n.indexOf(e.groupId)));return Gs(e,s,i)>-1}))}(e,t.levels,r,n,Hs);if(-1===i)return null;t.nextLoadLevel=i}if(e.channels||e.audioCodec){const t=Gs(e,r);if(t>-1)return r[t]}}}return null}setAudioTrack(e){const t=this.tracksInGroup;if(e<0||e>=t.length)return void this.warn("Invalid audio track id: ".concat(e));this.clearTimer(),this.selectDefaultTrack=!1;const r=this.currentTrack,n=t[e],i=n.details&&!n.details.live;if(e===this.trackId&&n===r&&i)return;if(this.log("Switching to audio-track ".concat(e,' "').concat(n.name,'" lang:').concat(n.lang," group:").concat(n.groupId," channels:").concat(n.channels)),this.trackId=e,this.currentTrack=n,this.hls.trigger(Rr.AUDIO_TRACK_SWITCHING,mr({},n)),i)return;const s=this.switchParams(n.url,null==r?void 0:r.details,n.details);this.loadPlaylist(s)}findTrackId(e){const t=this.tracksInGroup;for(let r=0;r<t.length;r++){const n=t[r];if((!this.selectDefaultTrack||n.default)&&(!e||qs(e,n,Hs)))return r}if(e){const{name:r,lang:n,assocLang:i,characteristics:s,audioCodec:a,channels:o}=e;for(let e=0;e<t.length;e++){if(qs({name:r,lang:n,assocLang:i,characteristics:s,audioCodec:a,channels:o},t[e],Hs))return e}for(let l=0;l<t.length;l++){const r=t[l];if(jo(e.attrs,r.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return l}for(let l=0;l<t.length;l++){const r=t[l];if(jo(e.attrs,r.attrs,["LANGUAGE"]))return l}}return-1}loadPlaylist(e){const t=this.currentTrack;if(this.shouldLoadPlaylist(t)&&t){super.loadPlaylist();const n=t.id,i=t.groupId;let s=t.url;if(e)try{s=e.addDirectives(s)}catch(r){this.warn("Could not construct new URL with HLS Delivery Directives: ".concat(r))}this.log("loading audio-track playlist ".concat(n,' "').concat(t.name,'" lang:').concat(t.lang," group:").concat(i)),this.clearTimer(),this.hls.trigger(Rr.AUDIO_TRACK_LOADING,{url:s,id:n,groupId:i,deliveryDirectives:e||null})}}},emeController:ql,cmcdController:class{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=e=>{try{this.apply(e,{ot:Xl.MANIFEST,su:!this.initialized})}catch(t){xr.warn("Could not generate manifest CMCD data.",t)}},this.applyFragmentData=e=>{try{const t=e.frag,r=this.hls.levels[t.level],n=this.getObjectType(t),i={d:1e3*t.duration,ot:n};n!==Xl.VIDEO&&n!==Xl.AUDIO&&n!=Xl.MUXED||(i.br=r.bitrate/1e3,i.tb=this.getTopBandwidth(n)/1e3,i.bl=this.getBufferLength(n)),this.apply(e,i)}catch(t){xr.warn("Could not generate segment CMCD data.",t)}},this.hls=e;const t=this.config=e.config,{cmcd:r}=t;null!=r&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=r.sessionId||function(){try{return crypto.randomUUID()}catch(e){try{const e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}catch(e){let t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const r=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?r:3&r|8).toString(16)}))}}}(),this.cid=r.contentId,this.useHeaders=!0===r.useHeaders,this.includeKeys=r.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(Rr.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Rr.MEDIA_DETACHED,this.onMediaDetached,this),e.on(Rr.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(Rr.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Rr.MEDIA_DETACHED,this.onMediaDetached,this),e.off(Rr.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var r,n;this.audioBuffer=null==(r=t.tracks.audio)?void 0:r.buffer,this.videoBuffer=null==(n=t.tracks.video)?void 0:n.buffer}createData(){var e;return{v:1,sf:zl.HLS,sid:this.sid,cid:this.cid,pr:null==(e=this.media)?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};vr(t,this.createData());const r=t.ot===Xl.INIT||t.ot===Xl.VIDEO||t.ot===Xl.MUXED;this.starved&&r&&(t.bs=!0,t.su=!0,this.starved=!1),null==t.su&&(t.su=this.buffering);const{includeKeys:n}=this;n&&(t=Object.keys(t).reduce(((e,r)=>(n.includes(r)&&(e[r]=t[r]),e)),{})),this.useHeaders?(e.headers||(e.headers={}),wc(e.headers,t)):e.url=xc(e.url,t)}getObjectType(e){const{type:t}=e;return"subtitle"===t?Xl.TIMED_TEXT:"initSegment"===e.sn?Xl.INIT:"audio"===t?Xl.AUDIO:"main"===t?this.hls.audioTracks.length?Xl.VIDEO:Xl.MUXED:void 0}getTopBandwidth(e){let t,r=0;const n=this.hls;if(e===Xl.AUDIO)t=n.audioTracks;else{const e=n.maxAutoLevel,r=e>-1?e+1:n.levels.length;t=n.levels.slice(0,r)}for(const i of t)i.bitrate>r&&(r=i.bitrate);return r>0?r:NaN}getBufferLength(e){const t=this.hls.media,r=e===Xl.AUDIO?this.audioBuffer:this.videoBuffer;if(!r||!t)return NaN;return 1e3*ra.bufferInfo(r,t.currentTime,this.config.maxBufferHole).len}createPlaylistLoader(){const{pLoader:e}=this.config,t=this.applyPlaylistData,r=e||this.config.loader;return class{constructor(e){this.loader=void 0,this.loader=new r(e)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(e,r,n){t(e),this.loader.load(e,r,n)}}}createFragmentLoader(){const{fLoader:e}=this.config,t=this.applyFragmentData,r=e||this.config.loader;return class{constructor(e){this.loader=void 0,this.loader=new r(e)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(e,r,n){t(e),this.loader.load(e,r,n)}}}},contentSteeringController:class{constructor(e){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.log=xr.log.bind(xr,"[content-steering]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(Rr.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Rr.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(Rr.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Rr.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(Rr.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Rr.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(Rr.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Rr.ERROR,this.onError,this))}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=1e3*this.timeToLoad-(performance.now()-this.updated);if(e>0)return void this.scheduleRefresh(this.uri,e)}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){-1!==this.reloadTimer&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const t=this.levels;t&&(this.levels=t.filter((t=>t!==e)))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){const{contentSteering:r}=t;null!==r&&(this.pathwayId=r.pathwayId,this.uri=r.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){const{errorAction:r}=t;if((null==r?void 0:r.action)===ks&&r.flags===Is){const e=this.levels;let n=this.pathwayPriority,i=this.pathwayId;if(t.context){const{groupId:r,pathwayId:n,type:s}=t.context;r&&e?i=this.getPathwayForGroupId(r,s,i):n&&(i=n)}i in this.penalizedPathways||(this.penalizedPathways[i]=performance.now()),!n&&e&&(n=e.reduce(((e,t)=>(-1===e.indexOf(t.pathwayId)&&e.push(t.pathwayId),e)),[])),n&&n.length>1&&(this.updatePathwayPriority(n),r.resolved=this.pathwayId!==i),r.resolved||xr.warn("Could not resolve ".concat(t.details,' ("').concat(t.error.message,'") with content-steering for Pathway: ').concat(i," levels: ").concat(e?e.length:e," priorities: ").concat(JSON.stringify(n)," penalized: ").concat(JSON.stringify(this.penalizedPathways)))}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(0===t.length){const r=e[0].pathwayId;this.log("No levels found in Pathway ".concat(this.pathwayId,'. Setting initial Pathway to "').concat(r,'"')),t=this.getLevelsForPathway(r),this.pathwayId=r}return t.length!==e.length?(this.log("Found ".concat(t.length,"/").concat(e.length,' levels in Pathway "').concat(this.pathwayId,'"')),t):e}getLevelsForPathway(e){return null===this.levels?[]:this.levels.filter((t=>e===t.pathwayId))}updatePathwayPriority(e){let t;this.pathwayPriority=e;const r=this.penalizedPathways,n=performance.now();Object.keys(r).forEach((e=>{n-r[e]>3e5&&delete r[e]}));for(let i=0;i<e.length;i++){const n=e[i];if(n in r)continue;if(n===this.pathwayId)return;const s=this.hls.nextLoadLevel,a=this.hls.levels[s];if(t=this.getLevelsForPathway(n),t.length>0){this.log('Setting Pathway to "'.concat(n,'"')),this.pathwayId=n,ys(t),this.hls.trigger(Rr.LEVELS_UPDATED,{levels:t});const e=this.hls.levels[s];a&&e&&this.levels&&(e.attrs["STABLE-VARIANT-ID"]!==a.attrs["STABLE-VARIANT-ID"]&&e.bitrate!==a.bitrate&&this.log("Unstable Pathways change from bitrate ".concat(a.bitrate," to ").concat(e.bitrate)),this.hls.nextLoadLevel=s);break}}}getPathwayForGroupId(e,t,r){const n=this.getLevelsForPathway(r).concat(this.levels||[]);for(let i=0;i<n.length;i++)if(t===Bi&&n[i].hasAudioGroup(e)||t===Pi&&n[i].hasSubtitleGroup(e))return n[i].pathwayId;return r}clonePathways(e){const t=this.levels;if(!t)return;const r={},n={};e.forEach((e=>{const{ID:i,"BASE-ID":s,"URI-REPLACEMENT":a}=e;if(t.some((e=>e.pathwayId===i)))return;const o=this.getLevelsForPathway(s).map((e=>{const t=new Ir(e.attrs);t["PATHWAY-ID"]=i;const s=t.AUDIO&&"".concat(t.AUDIO,"_clone_").concat(i),o=t.SUBTITLES&&"".concat(t.SUBTITLES,"_clone_").concat(i);s&&(r[t.AUDIO]=s,t.AUDIO=s),o&&(n[t.SUBTITLES]=o,t.SUBTITLES=o);const l=Dc(e.uri,t["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",a),c=new ls({attrs:t,audioCodec:e.audioCodec,bitrate:e.bitrate,height:e.height,name:e.name,url:l,videoCodec:e.videoCodec,width:e.width});if(e.audioGroups)for(let r=1;r<e.audioGroups.length;r++)c.addGroupId("audio","".concat(e.audioGroups[r],"_clone_").concat(i));if(e.subtitleGroups)for(let r=1;r<e.subtitleGroups.length;r++)c.addGroupId("text","".concat(e.subtitleGroups[r],"_clone_").concat(i));return c}));t.push(...o),_c(this.audioTracks,r,a,i),_c(this.subtitleTracks,n,a,i)}))}loadSteeringManifest(e){const t=this.hls.config,r=t.loader;let n;this.loader&&this.loader.destroy(),this.loader=new r(t);try{n=new self.URL(e)}catch(c){return this.enabled=!1,void this.log("Failed to parse Steering Manifest URI: ".concat(e))}if("data:"!==n.protocol){const e=0|(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate);n.searchParams.set("_HLS_pathway",this.pathwayId),n.searchParams.set("_HLS_throughput",""+e)}const i={responseType:"json",url:n.href},s=t.steeringManifestLoadPolicy.default,a=s.errorRetry||s.timeoutRetry||{},o={loadPolicy:s,timeout:s.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},l={onSuccess:(e,t,r,i)=>{this.log('Loaded steering manifest: "'.concat(n,'"'));const s=e.data;if(1!==s.VERSION)return void this.log("Steering VERSION ".concat(s.VERSION," not supported!"));this.updated=performance.now(),this.timeToLoad=s.TTL;const{"RELOAD-URI":a,"PATHWAY-CLONES":o,"PATHWAY-PRIORITY":l}=s;if(a)try{this.uri=new self.URL(a,n).href}catch(c){return this.enabled=!1,void this.log("Failed to parse Steering Manifest RELOAD-URI: ".concat(a))}this.scheduleRefresh(this.uri||r.url),o&&this.clonePathways(o);const u={steeringManifest:s,url:n.toString()};this.hls.trigger(Rr.STEERING_MANIFEST_LOADED,u),l&&this.updatePathwayPriority(l)},onError:(e,t,r,n)=>{if(this.log("Error loading steering manifest: ".concat(e.code," ").concat(e.text," (").concat(t.url,")")),this.stopLoad(),410===e.code)return this.enabled=!1,void this.log("Steering manifest ".concat(t.url," no longer available"));let i=1e3*this.timeToLoad;if(429!==e.code)this.scheduleRefresh(this.uri||t.url,i);else{const e=this.loader;if("function"===typeof(null==e?void 0:e.getResponseHeader)){const t=e.getResponseHeader("Retry-After");t&&(i=1e3*parseFloat(t))}this.log("Steering manifest ".concat(t.url," rate limited"))}},onTimeout:(e,t,r)=>{this.log("Timeout loading steering manifest (".concat(t.url,")")),this.scheduleRefresh(this.uri||t.url)}};this.log("Requesting steering manifest: ".concat(n)),this.loader.load(i,o,l)}scheduleRefresh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3*this.timeToLoad;this.clearTimeout(),this.reloadTimer=self.setTimeout((()=>{var t;const r=null==(t=this.hls)?void 0:t.media;!r||r.ended?this.scheduleRefresh(e,1e3*this.timeToLoad):this.loadSteeringManifest(e)}),t)}}});function Vc(e){return e&&"object"===typeof e?Array.isArray(e)?e.map(Vc):Object.keys(e).reduce(((t,r)=>(t[r]=Vc(e[r]),t)),{}):e}function jc(e){const t=e.loader;if(t!==Uc&&t!==Bc)xr.log("[config]: Custom loader detected, cannot enable progressive streaming"),e.progressive=!1;else{(function(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(Pt){}return!1})()&&(e.loader=Uc,e.progressive=!0,e.enableSoftwareAES=!0,xr.log("[config]: Progressive streaming enabled, using FetchLoader"))}}let Gc;class qc extends Ps{constructor(e,t){super(e,"[level-controller]"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(Rr.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Rr.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(Rr.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Rr.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(Rr.FRAG_BUFFERED,this.onFragBuffered,this),e.on(Rr.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(Rr.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Rr.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(Rr.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Rr.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(Rr.FRAG_BUFFERED,this.onFragBuffered,this),e.off(Rr.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach((e=>{e.loadError=0,e.fragmentError=0})),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,t){this.resetLevels()}onManifestLoaded(e,t){const r=this.hls.config.preferManagedMediaSource,n=[],i={},s={};let a=!1,o=!1,l=!1;t.levels.forEach((e=>{var t,c;const u=e.attrs;let{audioCodec:d,videoCodec:f}=e;-1!==(null==(t=d)?void 0:t.indexOf("mp4a.40.34"))&&(Gc||(Gc=/chrome|firefox/i.test(navigator.userAgent)),Gc&&(e.audioCodec=d=void 0)),d&&(e.audioCodec=d=gi(d,r)),0===(null==(c=f)?void 0:c.indexOf("avc1"))&&(f=e.videoCodec=function(e){const t=e.split(",");for(let r=0;r<t.length;r++){const e=t[r].split(".");if(e.length>2){let n=e.shift()+".";n+=parseInt(e.shift()).toString(16),n+=("000"+parseInt(e.shift()).toString(16)).slice(-4),t[r]=n}}return t.join(",")}(f));const{width:p,height:h,unknownCodecs:m}=e;if(a||(a=!(!p||!h)),o||(o=!!f),l||(l=!!d),null!=m&&m.length||d&&!ci(d,"audio",r)||f&&!ci(f,"video",r))return;const{CODECS:g,"FRAME-RATE":y,"HDCP-LEVEL":v,"PATHWAY-ID":E,RESOLUTION:b,"VIDEO-RANGE":T}=u,R="".concat(E||".","-"),S="".concat(R).concat(e.bitrate,"-").concat(b,"-").concat(y,"-").concat(g,"-").concat(T,"-").concat(v);if(i[S])if(i[S].uri===e.url||e.attrs["PATHWAY-ID"])i[S].addGroupId("audio",u.AUDIO),i[S].addGroupId("text",u.SUBTITLES);else{const t=s[S]+=1;e.attrs["PATHWAY-ID"]=new Array(t+1).join(".");const r=new ls(e);i[S]=r,n.push(r)}else{const t=new ls(e);i[S]=t,s[S]=1,n.push(t)}})),this.filterAndSortMediaOptions(n,t,a,o,l)}filterAndSortMediaOptions(e,t,r,n,i){let s=[],a=[],o=e;if((r||n)&&i&&(o=o.filter((e=>{let{videoCodec:t,videoRange:r,width:n,height:i}=e;return(!!t||!(!n||!i))&&(!!(s=r)&&rs.indexOf(s)>-1);var s}))),0===o.length)return void Promise.resolve().then((()=>{if(this.hls){t.levels.length&&this.warn("One or more CODECS in variant not supported: ".concat(JSON.stringify(t.levels[0].attrs)));const e=new Error("no level with compatible codecs found in manifest");this.hls.trigger(Rr.ERROR,{type:Sr.MEDIA_ERROR,details:Ar.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:e,reason:e.message})}}));if(t.audioTracks){const{preferManagedMediaSource:e}=this.hls.config;s=t.audioTracks.filter((t=>!t.audioCodec||ci(t.audioCodec,"audio",e))),Hc(s)}t.subtitles&&(a=t.subtitles,Hc(a));const l=o.slice(0);o.sort(((e,t)=>{if(e.attrs["HDCP-LEVEL"]!==t.attrs["HDCP-LEVEL"])return(e.attrs["HDCP-LEVEL"]||"")>(t.attrs["HDCP-LEVEL"]||"")?1:-1;if(r&&e.height!==t.height)return e.height-t.height;if(e.frameRate!==t.frameRate)return e.frameRate-t.frameRate;if(e.videoRange!==t.videoRange)return rs.indexOf(e.videoRange)-rs.indexOf(t.videoRange);if(e.videoCodec!==t.videoCodec){const r=fi(e.videoCodec),n=fi(t.videoCodec);if(r!==n)return n-r}if(e.uri===t.uri&&e.codecSet!==t.codecSet){const r=pi(e.codecSet),n=pi(t.codecSet);if(r!==n)return n-r}return e.averageBitrate!==t.averageBitrate?e.averageBitrate-t.averageBitrate:0}));let c=l[0];if(this.steering&&(o=this.steering.filterParsedLevels(o),o.length!==l.length))for(let p=0;p<l.length;p++)if(l[p].pathwayId===o[0].pathwayId){c=l[p];break}this._levels=o;for(let p=0;p<o.length;p++)if(o[p]===c){var u;this._firstLevel=p;const e=c.bitrate,t=this.hls.bandwidthEstimate;if(this.log("manifest loaded, ".concat(o.length," level(s) found, first bitrate: ").concat(e)),void 0===(null==(u=this.hls.userConfig)?void 0:u.abrEwmaDefaultEstimate)){const r=Math.min(e,this.hls.config.abrEwmaDefaultEstimateMax);r>t&&t===Mc.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=r)}break}const d=i&&!n,f={levels:o,audioTracks:s,subtitleTracks:a,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:i,video:n,altAudio:!d&&s.some((e=>!!e.url))};this.hls.trigger(Rr.MANIFEST_PARSED,f),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}get levels(){return 0===this._levels.length?null:this._levels}get level(){return this.currentLevelIndex}set level(e){const t=this._levels;if(0===t.length)return;if(e<0||e>=t.length){const r=new Error("invalid level idx"),n=e<0;if(this.hls.trigger(Rr.ERROR,{type:Sr.OTHER_ERROR,details:Ar.LEVEL_SWITCH_ERROR,level:e,fatal:n,error:r,reason:r.message}),n)return;e=Math.min(e,t.length-1)}const r=this.currentLevelIndex,n=this.currentLevel,i=n?n.attrs["PATHWAY-ID"]:void 0,s=t[e],a=s.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=s,r===e&&s.details&&n&&i===a)return;this.log("Switching to level ".concat(e," (").concat(s.height?s.height+"p ":"").concat(s.videoRange?s.videoRange+" ":"").concat(s.codecSet?s.codecSet+" ":"","@").concat(s.bitrate,")").concat(a?" with Pathway "+a:""," from level ").concat(r).concat(i?" with Pathway "+i:""));const o={level:e,attrs:s.attrs,details:s.details,bitrate:s.bitrate,averageBitrate:s.averageBitrate,maxBitrate:s.maxBitrate,realBitrate:s.realBitrate,width:s.width,height:s.height,codecSet:s.codecSet,audioCodec:s.audioCodec,videoCodec:s.videoCodec,audioGroups:s.audioGroups,subtitleGroups:s.subtitleGroups,loaded:s.loaded,loadError:s.loadError,fragmentError:s.fragmentError,name:s.name,id:s.id,uri:s.uri,url:s.url,urlId:0,audioGroupIds:s.audioGroupIds,textGroupIds:s.textGroupIds};this.hls.trigger(Rr.LEVEL_SWITCHING,o);const l=s.details;if(!l||l.live){const e=this.switchParams(s.uri,null==n?void 0:n.details,l);this.loadPlaylist(e)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(void 0===this._startLevel){const e=this.hls.config.startLevel;return void 0!==e?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}onError(e,t){!t.fatal&&t.context&&t.context.type===Ii&&t.context.level===this.level&&this.checkRetry(t)}onFragBuffered(e,t){let{frag:r}=t;if(void 0!==r&&r.type===Ui){const e=r.elementaryStreams;if(!Object.keys(e).some((t=>!!e[t])))return;const t=this._levels[r.level];null!=t&&t.loadError&&(this.log("Resetting level error count of ".concat(t.loadError," on frag buffered")),t.loadError=0)}}onLevelLoaded(e,t){var r;const{level:n,details:i}=t,s=this._levels[n];var a;if(!s)return this.warn("Invalid level index ".concat(n)),void(null!=(a=t.deliveryDirectives)&&a.skip&&(i.deltaUpdateFailed=!0));n===this.currentLevelIndex?(0===s.fragmentError&&(s.loadError=0),this.playlistLoaded(n,t,s.details)):null!=(r=t.deliveryDirectives)&&r.skip&&(i.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist();const t=this.currentLevelIndex,r=this.currentLevel;if(r&&this.shouldLoadPlaylist(r)){let i=r.uri;if(e)try{i=e.addDirectives(i)}catch(n){this.warn("Could not construct new URL with HLS Delivery Directives: ".concat(n))}const s=r.attrs["PATHWAY-ID"];this.log("Loading level index ".concat(t).concat(void 0!==(null==e?void 0:e.msn)?" at sn "+e.msn+" part "+e.part:""," with").concat(s?" Pathway "+s:""," ").concat(i)),this.clearTimer(),this.hls.trigger(Rr.LEVEL_LOADING,{url:i,level:t,pathwayId:r.attrs["PATHWAY-ID"],id:0,deliveryDirectives:e||null})}}get nextLoadLevel(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}removeLevel(e){var t;const r=this._levels.filter(((t,r)=>r!==e||(this.steering&&this.steering.removeLevel(t),t===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,t.details&&t.details.fragments.forEach((e=>e.level=-1))),!1)));ys(r),this._levels=r,this.currentLevelIndex>-1&&null!=(t=this.currentLevel)&&t.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.hls.trigger(Rr.LEVELS_UPDATED,{levels:r})}onLevelsUpdated(e,t){let{levels:r}=t;this._levels=r}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:t,maxHdcpLevel:r}=this.hls;this._maxAutoLevel!==t&&(this._maxAutoLevel=t,this.hls.trigger(Rr.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:t,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:r}))}}function Hc(e){const t={};e.forEach((e=>{const r=e.groupId||"";e.id=t[r]=t[r]||0,t[r]++}))}class Xc{constructor(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const r in this.keyUriToKeyInfo){const n=this.keyUriToKeyInfo[r].loader;if(n){var t;if(e&&e!==(null==(t=n.context)?void 0:t.frag.type))return;n.abort()}}}detach(){for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e].loader;t&&t.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ar.KEY_LOAD_ERROR,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;return new pa({type:Sr.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:i,error:r,networkDetails:n})}loadClear(e,t){if(this.emeController&&this.config.emeEnabled){const{sn:r,cc:n}=e;for(let e=0;e<t.length;e++){const i=t[e];if(n<=i.cc&&("initSegment"===r||"initSegment"===i.sn||r<i.sn)){this.emeController.selectKeySystemFormat(i).then((e=>{i.setKeyFormat(e)}));break}}}}load(e){return!e.decryptdata&&e.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(e).then((t=>this.loadInternal(e,t))):this.loadInternal(e)}loadInternal(e,t){var r,n;t&&e.setKeyFormat(t);const i=e.decryptdata;if(!i){const r=new Error(t?"Expected frag.decryptdata to be defined after setting format ".concat(t):"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,Ar.KEY_LOAD_ERROR,r))}const s=i.uri;if(!s)return Promise.reject(this.createKeyLoadError(e,Ar.KEY_LOAD_ERROR,new Error('Invalid key URI: "'.concat(s,'"'))));let a=this.keyUriToKeyInfo[s];if(null!=(r=a)&&r.decryptdata.key)return i.key=a.decryptdata.key,Promise.resolve({frag:e,keyInfo:a});var o;if(null!=(n=a)&&n.keyLoadPromise)switch(null==(o=a.mediaKeySessionContext)?void 0:o.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return a.keyLoadPromise.then((t=>(i.key=t.keyInfo.decryptdata.key,{frag:e,keyInfo:a})))}switch(a=this.keyUriToKeyInfo[s]={decryptdata:i,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},i.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return"identity"===i.keyFormat?this.loadKeyHTTP(a,e):this.loadKeyEME(a,e);case"AES-128":return this.loadKeyHTTP(a,e);default:return Promise.reject(this.createKeyLoadError(e,Ar.KEY_LOAD_ERROR,new Error('Key supplied with unsupported METHOD: "'.concat(i.method,'"'))))}}loadKeyEME(e,t){const r={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){const t=this.emeController.loadKey(r);if(t)return(e.keyLoadPromise=t.then((t=>(e.mediaKeySessionContext=t,r)))).catch((t=>{throw e.keyLoadPromise=null,t}))}return Promise.resolve(r)}loadKeyHTTP(e,t){const r=this.config,n=new(0,r.loader)(r);return t.keyLoader=e.loader=n,e.keyLoadPromise=new Promise(((i,s)=>{const a={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},o=r.keyLoadPolicy.default,l={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},c={onSuccess:(e,t,r,n)=>{const{frag:a,keyInfo:o,url:l}=r;if(!a.decryptdata||o!==this.keyUriToKeyInfo[l])return s(this.createKeyLoadError(a,Ar.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),n));o.decryptdata.key=a.decryptdata.key=new Uint8Array(e.data),a.keyLoader=null,o.loader=null,i({frag:a,keyInfo:o})},onError:(e,r,n,i)=>{this.resetLoader(r),s(this.createKeyLoadError(t,Ar.KEY_LOAD_ERROR,new Error("HTTP Error ".concat(e.code," loading key ").concat(e.text)),n,mr({url:a.url,data:void 0},e)))},onTimeout:(e,r,n)=>{this.resetLoader(r),s(this.createKeyLoadError(t,Ar.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),n))},onAbort:(e,r,n)=>{this.resetLoader(r),s(this.createKeyLoadError(t,Ar.INTERNAL_ABORTED,new Error("key loading aborted"),n))}};n.load(a,l,c)}))}resetLoader(e){const{frag:t,keyInfo:r,url:n}=e,i=r.loader;t.keyLoader===i&&(t.keyLoader=null,r.loader=null),delete this.keyUriToKeyInfo[n],i&&i.destroy()}}function zc(){return self.SourceBuffer||self.WebKitSourceBuffer}function $c(){if(!oi())return!1;const e=zc();return!e||e.prototype&&"function"===typeof e.prototype.appendBuffer&&"function"===typeof e.prototype.remove}class Wc{constructor(e,t,r,n){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=e,this.media=t,this.fragmentTracker=r,this.hls=n}destroy(){this.media=null,this.hls=this.fragmentTracker=null}poll(e,t){const{config:r,media:n,stalled:i}=this;if(null===n)return;const{currentTime:s,seeking:a}=n,o=this.seeking&&!a,l=!this.seeking&&a;if(this.seeking=a,s!==e){if(this.moved=!0,a||(this.nudgeRetry=0),null!==i){if(this.stallReported){const e=self.performance.now()-i;xr.warn("playback not stuck anymore @".concat(s,", after ").concat(Math.round(e),"ms")),this.stallReported=!1}this.stalled=null}return}if(l||o)return void(this.stalled=null);if(n.paused&&!a||n.ended||0===n.playbackRate||!ra.getBuffered(n).length)return void(this.nudgeRetry=0);const c=ra.bufferInfo(n,s,0),u=c.nextStart||0;if(a){const e=c.len>2,r=!u||t&&t.start<=s||u-s>2&&!this.fragmentTracker.getPartialFragment(s);if(e||r)return;this.moved=!1}if(!this.moved&&null!==this.stalled){var d;if(!(c.len>0)&&!u)return;const e=Math.max(u,c.start||0)-s,t=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,r=(null==t||null==(d=t.details)?void 0:d.live)?2*t.details.targetduration:2,i=this.fragmentTracker.getPartialFragment(s);if(e>0&&(e<=r||i))return void(n.paused||this._trySkipBufferHole(i))}const f=self.performance.now();if(null===i)return void(this.stalled=f);const p=f-i;if(!a&&p>=250&&(this._reportStall(c),!this.media))return;const h=ra.bufferInfo(n,s,r.maxBufferHole);this._tryFixBufferStall(h,p)}_tryFixBufferStall(e,t){const{config:r,fragmentTracker:n,media:i}=this;if(null===i)return;const s=i.currentTime,a=n.getPartialFragment(s);if(a){if(this._trySkipBufferHole(a)||!this.media)return}(e.len>r.maxBufferHole||e.nextStart&&e.nextStart-s<r.maxBufferHole)&&t>1e3*r.highBufferWatchdogPeriod&&(xr.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}_reportStall(e){const{hls:t,media:r,stallReported:n}=this;if(!n&&r){this.stallReported=!0;const n=new Error("Playback stalling at @".concat(r.currentTime," due to low buffer (").concat(JSON.stringify(e),")"));xr.warn(n.message),t.trigger(Rr.ERROR,{type:Sr.MEDIA_ERROR,details:Ar.BUFFER_STALLED_ERROR,fatal:!1,error:n,buffer:e.len})}}_trySkipBufferHole(e){const{config:t,hls:r,media:n}=this;if(null===n)return 0;const i=n.currentTime,s=ra.bufferInfo(n,i,0),a=i<s.start?s.start:s.nextStart;if(a){const o=s.len<=t.maxBufferHole,l=s.len>0&&s.len<1&&n.readyState<3,c=a-i;if(c>0&&(o||l)){if(c>t.maxBufferHole){const{fragmentTracker:t}=this;let r=!1;if(0===i){const e=t.getAppendedFrag(0,Ui);e&&a<e.end&&(r=!0)}if(!r){const r=e||t.getAppendedFrag(i,Ui);if(r){let e=!1,n=r.end;for(;n<a;){const r=t.getPartialFragment(n);if(!r){e=!0;break}n+=r.duration}if(e)return 0}}}const s=Math.max(a+.05,i+.1);if(xr.warn("skipping hole, adjusting currentTime from ".concat(i," to ").concat(s)),this.moved=!0,this.stalled=null,n.currentTime=s,e&&!e.gap){const t=new Error("fragment loaded with buffer holes, seeking from ".concat(i," to ").concat(s));r.trigger(Rr.ERROR,{type:Sr.MEDIA_ERROR,details:Ar.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:t,reason:t.message,frag:e})}return s}}return 0}_tryNudgeBuffer(){const{config:e,hls:t,media:r,nudgeRetry:n}=this;if(null===r)return;const i=r.currentTime;if(this.nudgeRetry++,n<e.nudgeMaxRetry){const s=i+(n+1)*e.nudgeOffset,a=new Error("Nudging 'currentTime' from ".concat(i," to ").concat(s));xr.warn(a.message),r.currentTime=s,t.trigger(Rr.ERROR,{type:Sr.MEDIA_ERROR,details:Ar.BUFFER_NUDGE_ON_STALL,error:a,fatal:!1})}else{const r=new Error("Playhead still not moving while enough data buffered @".concat(i," after ").concat(e.nudgeMaxRetry," nudges"));xr.error(r.message),t.trigger(Rr.ERROR,{type:Sr.MEDIA_ERROR,details:Ar.BUFFER_STALLED_ERROR,error:r,fatal:!0})}}}class Yc extends Da{constructor(e,t,r){super(e,t,r,"[stream-controller]",Ui),this.audioCodecSwap=!1,this.gapController=null,this.level=-1,this._forceStartLoad=!1,this.altAudio=!1,this.audioOnly=!1,this.fragPlaying=null,this.onvplaying=null,this.onvseeked=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(Rr.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Rr.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Rr.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Rr.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Rr.LEVEL_LOADING,this.onLevelLoading,this),e.on(Rr.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Rr.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(Rr.ERROR,this.onError,this),e.on(Rr.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(Rr.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(Rr.BUFFER_CREATED,this.onBufferCreated,this),e.on(Rr.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(Rr.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(Rr.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(Rr.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Rr.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Rr.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Rr.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Rr.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Rr.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(Rr.ERROR,this.onError,this),e.off(Rr.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(Rr.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(Rr.BUFFER_CREATED,this.onBufferCreated,this),e.off(Rr.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(Rr.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(Rr.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying()}startLoad(e){if(this.levels){const{lastCurrentTime:t,hls:r}=this;if(this.stopLoad(),this.setInterval(100),this.level=-1,!this.startFragRequested){let e=r.startLevel;-1===e&&(r.config.testBandwidth&&this.levels.length>1?(e=0,this.bitrateTest=!0):e=r.firstAutoLevel),r.nextLoadLevel=e,this.level=r.loadLevel,this.loadedmetadata=!1}t>0&&-1===e&&(this.log("Override startPosition with lastCurrentTime @".concat(t.toFixed(3))),e=t),this.state=ba,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this._forceStartLoad=!0,this.state=Ea}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case _a:{const{levels:e,level:t}=this,r=null==e?void 0:e[t],n=null==r?void 0:r.details;if(n&&(!n.live||this.levelLastLoaded===r)){if(this.waitForCdnTuneIn(n))break;this.state=ba;break}if(this.hls.nextLoadLevel!==this.level){this.state=ba;break}break}case Sa:{var e;const t=self.performance.now(),r=this.retryDate;if(!r||t>=r||null!=(e=this.media)&&e.seeking){const{levels:e,level:t}=this,r=null==e?void 0:e[t];this.resetStartWhenNotLoaded(r||null),this.state=ba}}}this.state===ba&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){super.onTickEnd(),this.checkBuffer(),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:t,levels:r,media:n}=this;if(null===t||!n&&(this.startFragRequested||!e.config.startFragPrefetch))return;if(this.altAudio&&this.audioOnly)return;const i=e.nextLoadLevel;if(null==r||!r[i])return;const s=r[i],a=this.getMainFwdBufferInfo();if(null===a)return;const o=this.getLevelDetails();if(o&&this._streamEnded(a,o)){const e={};return this.altAudio&&(e.type="video"),this.hls.trigger(Rr.BUFFER_EOS,e),void(this.state=Ca)}e.loadLevel!==i&&-1===e.manualLevel&&this.log("Adapting to level ".concat(i," from level ").concat(this.level)),this.level=e.nextLoadLevel=i;const l=s.details;if(!l||this.state===_a||l.live&&this.levelLastLoaded!==s)return this.level=i,void(this.state=_a);const c=a.len,u=this.getMaxBufferLength(s.maxBitrate);if(c>=u)return;this.backtrackFragment&&this.backtrackFragment.start>a.end&&(this.backtrackFragment=null);const d=this.backtrackFragment?this.backtrackFragment.start:a.end;let f=this.getNextFragment(d,l);if(this.couldBacktrack&&!this.fragPrevious&&f&&"initSegment"!==f.sn&&this.fragmentTracker.getState(f)!==Zs){var p;const e=(null!=(p=this.backtrackFragment)?p:f).sn-l.startSN,t=l.fragments[e-1];t&&f.cc===t.cc&&(f=t,this.fragmentTracker.removeFragment(t))}else this.backtrackFragment&&a.len&&(this.backtrackFragment=null);if(f&&this.isLoopLoading(f,d)){if(!f.gap){const e=this.audioOnly&&!this.altAudio?Nr:Or,t=(e===Or?this.videoBuffer:this.mediaBuffer)||this.media;t&&this.afterBufferFlushed(t,e,Ui)}f=this.getNextFragmentLoopLoading(f,l,a,Ui,u)}f&&(!f.initSegment||f.initSegment.data||this.bitrateTest||(f=f.initSegment),this.loadFragment(f,s,d))}loadFragment(e,t,r){const n=this.fragmentTracker.getState(e);this.fragCurrent=e,n===$s||n===Ys?"initSegment"===e.sn?this._loadInitSegment(e,t):this.bitrateTest?(this.log("Fragment ".concat(e.sn," of level ").concat(e.level," is being downloaded to test bitrate and will not be buffered")),this._loadBitrateTestFrag(e,t)):(this.startFragRequested=!0,super.loadFragment(e,t,r)):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,Ui)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:t}=this;if(null!=t&&t.readyState){let r;const n=this.getAppendedFrag(t.currentTime);n&&n.start>1&&this.flushMainBuffer(0,n.start-1);const i=this.getLevelDetails();if(null!=i&&i.live){const e=this.getMainFwdBufferInfo();if(!e||e.len<2*i.targetduration)return}if(!t.paused&&e){const t=e[this.hls.nextLoadLevel],n=this.fragLastKbps;r=n&&this.fragCurrent?this.fragCurrent.duration*t.maxBitrate/(1e3*n)+1:0}else r=0;const s=this.getBufferedFrag(t.currentTime+r);if(s){const e=this.followingBufferedFrag(s);if(e){this.abortCurrentFrag();const t=e.maxStartPTS?e.maxStartPTS:e.start,r=e.duration,n=Math.max(s.end,t+Math.min(Math.max(r-this.config.maxFragLookUpTolerance,r*(this.couldBacktrack?.5:.125)),r*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(n,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case Ta:case Ra:case Sa:case La:case wa:this.state=ba}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,t){super.flushMainBuffer(e,t,this.altAudio?"video":null)}onMediaAttached(e,t){super.onMediaAttached(e,t);const r=t.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),r.addEventListener("playing",this.onvplaying),r.addEventListener("seeked",this.onvseeked),this.gapController=new Wc(this.config,r,this.fragmentTracker,this.hls)}onMediaDetaching(){const{media:e}=this;e&&this.onvplaying&&this.onvseeked&&(e.removeEventListener("playing",this.onvplaying),e.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),super.onMediaDetaching()}onMediaPlaying(){this.tick()}onMediaSeeked(){const e=this.media,t=e?e.currentTime:null;Er(t)&&this.log("Media seeked to ".concat(t.toFixed(3)));const r=this.getMainFwdBufferInfo();null!==r&&0!==r.len?this.tick():this.warn('Main forward buffer length on "seeked" event '.concat(r?r.len:"empty",")"))}onManifestLoading(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(Rr.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=this.fragLastKbps=0,this.levels=this.fragPlaying=this.backtrackFragment=this.levelLastLoaded=null,this.altAudio=this.audioOnly=this.startFragRequested=!1}onManifestParsed(e,t){let r=!1,n=!1;t.levels.forEach((e=>{const t=e.audioCodec;t&&(r=r||-1!==t.indexOf("mp4a.40.2"),n=n||-1!==t.indexOf("mp4a.40.5"))})),this.audioCodecSwitch=r&&n&&!function(){var e;const t=zc();return"function"===typeof(null==t||null==(e=t.prototype)?void 0:e.changeType)}(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(e,t){const{levels:r}=this;if(!r||this.state!==ba)return;const n=r[t.level];(!n.details||n.details.live&&this.levelLastLoaded!==n||this.waitForCdnTuneIn(n.details))&&(this.state=_a)}onLevelLoaded(e,t){var r;const{levels:n}=this,i=t.level,s=t.details,a=s.totalduration;if(!n)return void this.warn("Levels were reset while loading level ".concat(i));this.log("Level ".concat(i," loaded [").concat(s.startSN,",").concat(s.endSN,"]").concat(s.lastPartSn?"[part-".concat(s.lastPartSn,"-").concat(s.lastPartIndex,"]"):"",", cc [").concat(s.startCC,", ").concat(s.endCC,"] duration:").concat(a));const o=n[i],l=this.fragCurrent;!l||this.state!==Ra&&this.state!==Sa||l.level!==t.level&&l.loader&&this.abortCurrentFrag();let c=0;if(s.live||null!=(r=o.details)&&r.live){var u;if(this.checkLiveUpdate(s),s.deltaUpdateFailed)return;c=this.alignPlaylists(s,o.details,null==(u=this.levelLastLoaded)?void 0:u.details)}if(o.details=s,this.levelLastLoaded=o,this.hls.trigger(Rr.LEVEL_UPDATED,{details:s,level:i}),this.state===_a){if(this.waitForCdnTuneIn(s))return;this.state=ba}this.startFragRequested?s.live&&this.synchronizeToLiveEdge(s):this.setStartPosition(s,c),this.tick()}_handleFragmentLoadProgress(e){var t;const{frag:r,part:n,payload:i}=e,{levels:s}=this;if(!s)return void this.warn("Levels were reset while fragment load was in progress. Fragment ".concat(r.sn," of level ").concat(r.level," will not be buffered"));const a=s[r.level],o=a.details;if(!o)return this.warn("Dropping fragment ".concat(r.sn," of level ").concat(r.level," after level details were reset")),void this.fragmentTracker.removeFragment(r);const l=a.videoCodec,c=o.PTSKnown||!o.live,u=null==(t=r.initSegment)?void 0:t.data,d=this._getAudioCodec(a),f=this.transmuxer=this.transmuxer||new Mo(this.hls,Ui,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),p=n?n.index:-1,h=-1!==p,m=new na(r.level,r.sn,r.stats.chunkCount,i.byteLength,p,h),g=this.initPTS[r.cc];f.push(i,u,d,l,r,n,o.totalduration,c,m,g)}onAudioTrackSwitching(e,t){const r=this.altAudio;if(!t.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const e=this.fragCurrent;e&&(this.log("Switching to main audio track, cancel main fragment load"),e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();const e=this.hls;r&&(e.trigger(Rr.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),e.trigger(Rr.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(e,t){const r=t.id,n=!!this.hls.audioTracks[r].url;if(n){const e=this.videoBuffer;e&&this.mediaBuffer!==e&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=e)}this.altAudio=n,this.tick()}onBufferCreated(e,t){const r=t.tracks;let n,i,s=!1;for(const a in r){const e=r[a];if("main"===e.id){if(i=a,n=e,"video"===a){const e=r[a];e&&(this.videoBuffer=e.buffer)}}else s=!0}s&&n?(this.log("Alternate track found, use ".concat(i,".buffered to schedule main fragment loading")),this.mediaBuffer=n.buffer):this.mediaBuffer=this.media}onFragBuffered(e,t){const{frag:r,part:n}=t;if(r&&r.type!==Ui)return;if(this.fragContextChanged(r))return this.warn("Fragment ".concat(r.sn).concat(n?" p: "+n.index:""," of level ").concat(r.level," finished buffering, but was aborted. state: ").concat(this.state)),void(this.state===wa&&(this.state=ba));const i=n?n.stats:r.stats;this.fragLastKbps=Math.round(8*i.total/(i.buffering.end-i.loading.first)),"initSegment"!==r.sn&&(this.fragPrevious=r),this.fragBufferedComplete(r,n)}onError(e,t){var r;if(t.fatal)this.state=ka;else switch(t.details){case Ar.FRAG_GAP:case Ar.FRAG_PARSING_ERROR:case Ar.FRAG_DECRYPT_ERROR:case Ar.FRAG_LOAD_ERROR:case Ar.FRAG_LOAD_TIMEOUT:case Ar.KEY_LOAD_ERROR:case Ar.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Ui,t);break;case Ar.LEVEL_LOAD_ERROR:case Ar.LEVEL_LOAD_TIMEOUT:case Ar.LEVEL_PARSING_ERROR:t.levelRetry||this.state!==_a||(null==(r=t.context)?void 0:r.type)!==Ii||(this.state=ba);break;case Ar.BUFFER_APPEND_ERROR:case Ar.BUFFER_FULL_ERROR:if(!t.parent||"main"!==t.parent)return;if(t.details===Ar.BUFFER_APPEND_ERROR)return void this.resetLoadingState();this.reduceLengthAndFlushBuffer(t)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case Ar.INTERNAL_EXCEPTION:this.recoverWorkerError(t)}}checkBuffer(){const{media:e,gapController:t}=this;if(e&&t&&e.readyState){if(this.loadedmetadata||!ra.getBuffered(e).length){const e=this.state!==ba?this.fragCurrent:null;t.poll(this.lastCurrentTime,e)}this.lastCurrentTime=e.currentTime}}onFragLoadEmergencyAborted(){this.state=ba,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()}onBufferFlushed(e,t){let{type:r}=t;if(r!==Nr||this.audioOnly&&!this.altAudio){const e=(r===Or?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(e,r,Ui),this.tick()}}onLevelsUpdated(e,t){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level),this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const t=e.currentTime;let r=this.startPosition;if(r>=0&&t<r){if(e.seeking)return void this.log("could not seek to ".concat(r,", already seeking at ").concat(t));const n=ra.getBuffered(e),i=(n.length?n.start(0):0)-r;i>0&&(i<this.config.maxBufferHole||i<this.config.maxFragLookUpTolerance)&&(this.log("adjusting start position by ".concat(i," to match buffer start")),r+=i,this.startPosition=r),this.log("seek to target start position ".concat(r," from current time ").concat(t)),e.currentTime=r}}_getAudioCodec(e){let t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),t}_loadBitrateTestFrag(e,t){e.bitrateTest=!0,this._doFragLoad(e,t).then((r=>{const{hls:n}=this;if(!r||this.fragContextChanged(e))return;t.fragmentError=0,this.state=ba,this.startFragRequested=!1,this.bitrateTest=!1;const i=e.stats;i.parsing.start=i.parsing.end=i.buffering.start=i.buffering.end=self.performance.now(),n.trigger(Rr.FRAG_LOADED,r),e.bitrateTest=!1}))}_handleTransmuxComplete(e){var t;const r="main",{hls:n}=this,{remuxResult:i,chunkMeta:s}=e,a=this.getCurrentContext(s);if(!a)return void this.resetWhenMissingContext(s);const{frag:o,part:l,level:c}=a,{video:u,text:d,id3:f,initSegment:p}=i,{details:h}=c,m=this.altAudio?void 0:i.audio;if(this.fragContextChanged(o))this.fragmentTracker.removeFragment(o);else{if(this.state=La,p){if(null!=p&&p.tracks){const e=o.initSegment||o;this._bufferInitSegment(c,p.tracks,e,s),n.trigger(Rr.FRAG_PARSING_INIT_SEGMENT,{frag:e,id:r,tracks:p.tracks})}const e=p.initPTS,t=p.timescale;Er(e)&&(this.initPTS[o.cc]={baseTime:e,timescale:t},n.trigger(Rr.INIT_PTS_FOUND,{frag:o,id:r,initPTS:e,timescale:t}))}if(u&&h&&"initSegment"!==o.sn){const e=h.fragments[o.sn-1-h.startSN],t=o.sn===h.startSN,r=!e||o.cc>e.cc;if(!1!==i.independent){const{startPTS:e,endPTS:n,startDTS:i,endDTS:a}=u;if(l)l.elementaryStreams[u.type]={startPTS:e,endPTS:n,startDTS:i,endDTS:a};else if(u.firstKeyFrame&&u.independent&&1===s.id&&!r&&(this.couldBacktrack=!0),u.dropped&&u.independent){const i=this.getMainFwdBufferInfo(),s=(i?i.end:this.getLoadPosition())+this.config.maxBufferHole,l=u.firstKeyFramePTS?u.firstKeyFramePTS:e;if(!t&&s<l-this.config.maxBufferHole&&!r)return void this.backtrack(o);r&&(o.gap=!0),o.setElementaryStreamInfo(u.type,o.start,n,o.start,a,!0)}else t&&e>2&&(o.gap=!0);o.setElementaryStreamInfo(u.type,e,n,i,a),this.backtrackFragment&&(this.backtrackFragment=o),this.bufferFragmentData(u,o,l,s,t||r)}else{if(!t&&!r)return void this.backtrack(o);o.gap=!0}}if(m){const{startPTS:e,endPTS:t,startDTS:r,endDTS:n}=m;l&&(l.elementaryStreams[Nr]={startPTS:e,endPTS:t,startDTS:r,endDTS:n}),o.setElementaryStreamInfo(Nr,e,t,r,n),this.bufferFragmentData(m,o,l,s)}if(h&&null!=f&&null!=(t=f.samples)&&t.length){const e={id:r,frag:o,details:h,samples:f.samples};n.trigger(Rr.FRAG_PARSING_METADATA,e)}if(h&&d){const e={id:r,frag:o,details:h,samples:d.samples};n.trigger(Rr.FRAG_PARSING_USERDATA,e)}}}_bufferInitSegment(e,t,r,n){if(this.state!==La)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&delete t.audio;const{audio:i,video:s,audiovideo:a}=t;if(i){let t=e.audioCodec;const r=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){t&&(t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5");const e=i.metadata;e&&"channelCount"in e&&1!==(e.channelCount||1)&&-1===r.indexOf("firefox")&&(t="mp4a.40.5")}t&&-1!==t.indexOf("mp4a.40.5")&&-1!==r.indexOf("android")&&"audio/mpeg"!==i.container&&(t="mp4a.40.2",this.log("Android: force audio codec to ".concat(t))),e.audioCodec&&e.audioCodec!==t&&this.log('Swapping manifest audio codec "'.concat(e.audioCodec,'" for "').concat(t,'"')),i.levelCodec=t,i.id="main",this.log("Init audio buffer, container:".concat(i.container,", codecs[selected/level/parsed]=[").concat(t||"","/").concat(e.audioCodec||"","/").concat(i.codec,"]"))}s&&(s.levelCodec=e.videoCodec,s.id="main",this.log("Init video buffer, container:".concat(s.container,", codecs[level/parsed]=[").concat(e.videoCodec||"","/").concat(s.codec,"]"))),a&&this.log("Init audiovideo buffer, container:".concat(a.container,", codecs[level/parsed]=[").concat(e.codecs,"/").concat(a.codec,"]")),this.hls.trigger(Rr.BUFFER_CODECS,t),Object.keys(t).forEach((e=>{const i=t[e].initSegment;null!=i&&i.byteLength&&this.hls.trigger(Rr.BUFFER_APPENDING,{type:e,data:i,frag:r,part:null,chunkMeta:n,parent:r.type})})),this.tickImmediate()}getMainFwdBufferInfo(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,Ui)}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=ba}checkFragmentChanged(){const e=this.media;let t=null;if(e&&e.readyState>1&&!1===e.seeking){const r=e.currentTime;if(ra.isBuffered(e,r)?t=this.getAppendedFrag(r):ra.isBuffered(e,r+.1)&&(t=this.getAppendedFrag(r+.1)),t){this.backtrackFragment=null;const e=this.fragPlaying,r=t.level;e&&t.sn===e.sn&&e.level===r||(this.fragPlaying=t,this.hls.trigger(Rr.FRAG_CHANGED,{frag:t}),e&&e.level===r||this.hls.trigger(Rr.LEVEL_SWITCHED,{level:r}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){const e=this.media;return e?this.fragPlaying||this.getAppendedFrag(e.currentTime):null}get currentProgramDateTime(){const e=this.media;if(e){const t=e.currentTime,r=this.currentFrag;if(r&&Er(t)&&Er(r.programDateTime)){const e=r.programDateTime+1e3*(t-r.start);return new Date(e)}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class Zc{static get version(){return"1.5.15"}static isMSESupported(){return $c()}static isSupported(){return function(){if(!$c())return!1;const e=oi();return"function"===typeof(null==e?void 0:e.isTypeSupported)&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some((t=>e.isTypeSupported(di(t,"video"))))||["mp4a.40.2","fLaC"].some((t=>e.isTypeSupported(di(t,"audio")))))}()}static getMediaSource(){return oi()}static get Events(){return Rr}static get ErrorTypes(){return Sr}static get ErrorDetails(){return Ar}static get DefaultConfig(){return Zc.defaultConfig?Zc.defaultConfig:Mc}static set DefaultConfig(e){Zc.defaultConfig=e}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this.started=!1,this._emitter=new Fo,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,this.triggeringException=void 0,function(e,t){if("object"===typeof console&&!0===e||"object"===typeof e){kr(e,"debug","log","info","warn","error");try{Cr.log('Debug logs enabled for "'.concat(t,'" in hls.js version ',"1.5.15"))}catch(Pt){Cr=wr}}else Cr=wr}(e.debug||!1,"Hls instance");const t=this.config=function(e,t){if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==t.liveMaxLatencyDurationCount&&(void 0===t.liveSyncDurationCount||t.liveMaxLatencyDurationCount<=t.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==t.liveMaxLatencyDuration&&(void 0===t.liveSyncDuration||t.liveMaxLatencyDuration<=t.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const r=Vc(e),n=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return["manifest","level","frag"].forEach((e=>{const i="".concat("level"===e?"playlist":e,"LoadPolicy"),s=void 0===t[i],a=[];n.forEach((n=>{const o="".concat(e,"Loading").concat(n),l=t[o];if(void 0!==l&&s){a.push(o);const e=r[i].default;switch(t[i]={default:e},n){case"TimeOut":e.maxLoadTimeMs=l,e.maxTimeToFirstByteMs=l;break;case"MaxRetry":e.errorRetry.maxNumRetry=l,e.timeoutRetry.maxNumRetry=l;break;case"RetryDelay":e.errorRetry.retryDelayMs=l,e.timeoutRetry.retryDelayMs=l;break;case"MaxRetryTimeout":e.errorRetry.maxRetryDelayMs=l,e.timeoutRetry.maxRetryDelayMs=l}}})),a.length&&xr.warn('hls.js config: "'.concat(a.join('", "'),'" setting(s) are deprecated, use "').concat(i,'": ').concat(JSON.stringify(t[i])))})),mr(mr({},r),t)}(Zc.DefaultConfig,e);this.userConfig=e,t.progressive&&jc(t);const{abrController:r,bufferController:n,capLevelController:i,errorController:s,fpsController:a}=t,o=new s(this),l=this.abrController=new r(this),c=this.bufferController=new n(this),u=this.capLevelController=new i(this),d=new a(this),f=new Mi(this),p=new Ji(this),h=t.contentSteeringController,m=h?new h(this):null,g=this.levelController=new qc(this,m),y=new Qs(this),v=new Xc(this.config),E=this.streamController=new Yc(this,y,v);u.setStreamController(E),d.setStreamController(E);const b=[f,g,E];m&&b.splice(1,0,m),this.networkControllers=b;const T=[l,c,u,d,p,y];this.audioTrackController=this.createController(t.audioTrackController,b);const R=t.audioStreamController;R&&b.push(new R(this,y,v)),this.subtitleTrackController=this.createController(t.subtitleTrackController,b);const S=t.subtitleStreamController;S&&b.push(new S(this,y,v)),this.createController(t.timelineController,T),v.emeController=this.emeController=this.createController(t.emeController,T),this.cmcdController=this.createController(t.cmcdController,T),this.latencyController=this.createController(es,T),this.coreComponents=T,b.push(o);const A=o.onErrorOut;"function"===typeof A&&this.on(Rr.ERROR,A,o)}createController(e,t){if(e){const r=new e(this);return t&&t.push(r),r}return null}on(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this;this._emitter.on(e,t,r)}once(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this;this._emitter.once(e,t,r)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this,n=arguments.length>3?arguments[3]:void 0;this._emitter.off(e,t,r,n)}listeners(e){return this._emitter.listeners(e)}emit(e,t,r){return this._emitter.emit(e,t,r)}trigger(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(r){if(xr.error("An internal error happened while handling event "+e+'. Error message: "'+r.message+'". Here is a stacktrace:',r),!this.triggeringException){this.triggeringException=!0;const t=e===Rr.ERROR;this.trigger(Rr.ERROR,{type:Sr.OTHER_ERROR,details:Ar.INTERNAL_EXCEPTION,fatal:t,event:e,error:r}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){xr.log("destroy"),this.trigger(Rr.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach((e=>e.destroy())),this.networkControllers.length=0,this.coreComponents.forEach((e=>e.destroy())),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){xr.log("attachMedia"),this._media=e,this.trigger(Rr.MEDIA_ATTACHING,{media:e})}detachMedia(){xr.log("detachMedia"),this.trigger(Rr.MEDIA_DETACHING,void 0),this._media=null}loadSource(e){this.stopLoad();const t=this.media,r=this.url,n=this.url=pr.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,xr.log("loadSource:".concat(n)),t&&r&&(r!==n||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(Rr.MANIFEST_LOADING,{url:e})}startLoad(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;xr.log("startLoad(".concat(e,")")),this.started=!0,this.networkControllers.forEach((t=>{t.startLoad(e)}))}stopLoad(){xr.log("stopLoad"),this.started=!1,this.networkControllers.forEach((e=>{e.stopLoad()}))}resumeBuffering(){this.started&&this.networkControllers.forEach((e=>{"fragmentLoader"in e&&e.startLoad(-1)}))}pauseBuffering(){this.networkControllers.forEach((e=>{"fragmentLoader"in e&&e.stopLoad()}))}swapAudioCodec(){xr.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){xr.log("recoverMediaError");const e=this._media;this.detachMedia(),e&&this.attachMedia(e)}removeLevel(e){this.levelController.removeLevel(e)}get levels(){const e=this.levelController.levels;return e||[]}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){xr.log("set currentLevel:".concat(e)),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){xr.log("set nextLevel:".concat(e)),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){xr.log("set loadLevel:".concat(e)),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){xr.log("set firstLevel:".concat(e)),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return-1===e&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){xr.log("set startLevel:".concat(e)),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(xr.log("set autoLevelCapping:".concat(e)),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){(function(e){return ts.indexOf(e)>-1})(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return-1===this.levelController.manualLevel}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:t}}=this;if(!e)return 0;const r=e.length;for(let n=0;n<r;n++)if(e[n].maxBitrate>=t)return n;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:t,maxHdcpLevel:r}=this;let n;if(n=-1===t&&null!=e&&e.length?e.length-1:t,r)for(let i=n;i--;){const t=e[i].attrs["HDCP-LEVEL"];if(t&&t<=r)return i}return n}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}setAudioOption(e){var t;return null==(t=this.audioTrackController)?void 0:t.setAudioOption(e)}setSubtitleOption(e){var t;return null==(t=this.subtitleTrackController)||t.setSubtitleOption(e),null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const t=this.audioTrackController;t&&(t.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return!!e&&e.subtitleDisplay}set subtitleDisplay(e){const t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}}Zc.defaultConfig=void 0;const Qc=t=>{let{src:r,poster:n,aspectRatio:i}=t;const s=(0,e.useRef)(null);(0,e.useEffect)((()=>{const e=s.current;if(e)if(Zc.isSupported()){const t=new Zc;t.loadSource(r),t.attachMedia(e)}else e.canPlayType("application/vnd.apple.mpegurl")&&(e.src=r)}),[r]);const a=i&&i.width&&i.height?"".concat(i.width," / ").concat(i.height):"16 / 9";return(0,Ft.jsx)("video",{ref:s,controls:!0,poster:n,style:{width:"100%",height:"auto",aspectRatio:a},children:"Your browser does not support the video tag."})},Jc=e=>{let t="";if(e.includes("youtube.com/watch")){t=new URLSearchParams(new URL(e).search).get("v")}else e.includes("youtu.be")?t=e.split("youtu.be/")[1].split("?")[0]:e.includes("youtube.com/shorts")&&(t=e.split("youtube.com/shorts/")[1].split("?")[0]);return t};function eu(e){let t=200*e.likeCount+300*e.replyCount+500*e.repostCount;t+=700*Math.floor(e.likeCount/10),t+=2500*Math.floor(e.replyCount/25),t+=2e3*Math.floor(e.repostCount/5);let r=!1;if(e.replyCount>=25&&e.replyCount>.95*e.likeCount){t-=500*Math.round(.95*e.replyCount/(e.likeCount||1)),r=!0}return{score:t,ratioPenalty:r}}const tu=t=>ru(t).flatMap(((t,r)=>{if("string"===typeof t){return t.split(/([\u3000-\u30FF\uFF00-\uFFEF\u4E00-\u9FAF\u3400-\u4DBF]+)/).filter(Boolean).map(((e,t)=>/[\u3000-\u30FF\uFF00-\uFFEF\u4E00-\u9FAF\u3400-\u4DBF]+/.test(e)?(0,Ft.jsx)("span",{lang:"ja",style:{fontFamily:"DotGothic16",fontSize:"16px",lineHeight:"2rem"},children:e},"".concat(r,"-").concat(t)):e))}return(0,Ft.jsx)(e.Fragment,{children:t},r)})),ru=e=>{if(!e)return[];const t=/@(\w+(?:\.\w+)*)(?=[^\w.@]|$)/g,r=[];let n,i=0;for(;null!==(n=t.exec(e));){n.index>i&&r.push(e.substring(i,n.index));const s=n[1];r.push((0,Ft.jsxs)("a",{href:"https://bsky.app/profile/".concat(s),target:"_blank",rel:"noreferrer",children:["@",s]})),i=t.lastIndex}return i<e.length&&r.push(e.substring(i)),r},nu=e=>{if(!e||!e.$type.startsWith("app.bsky.embed.video"))return null;const t=e.aspectRatio||{width:16,height:9};return(0,Ft.jsx)(Qc,{src:e.playlist,poster:e.thumbnail,aspectRatio:t})},iu=()=>{var t,r,n,i,s,a,o,l,c,u,d,f,p,h,m,g,y,v,E,b,T,R,S,A,L,w,C,k,x,_,D,I,B,P,U,N,O,K,F,M,V,j,G,q,H,X,z,$,W,Y,Z,Q,J,ee,te,re,ne,ie,se,ae,oe,le,ce,ue,de,fe,pe,he,me,ge,ye,ve,Ee,be,Te,Re,Se,Ae,Le,we,Ce,ke,xe,_e,De,Ie,Be,Pe,Ue,Ne,Oe,Ke,Fe,Me,Ve,je,Ge,qe,He,Xe,ze,$e,We,Ye,Ze,Qe,Je,et,tt,rt,nt,it,st,at,ot,lt,ct,ut,dt,ft,pt,ht,mt,gt,yt,vt,Et,bt,Tt,Rt,St,At,Lt,wt,Ct,kt,xt,_t,Dt,It,Bt,Pt,Ut,Nt,Ot,Kt,Mt,Vt,jt,Gt,Ht,Xt,zt,$t,Wt,Yt,Zt,Qt,Jt,er,tr,rr,nr,ir,sr,ar,or,ur,dr,fr,pr,hr,mr,gr,yr,vr,Er,br,Tr,Rr,Sr,Ar,Lr,wr,Cr,kr,xr,_r,Dr,Ir,Br,Pr,Ur,Nr,Or,Kr,Fr,Mr,Vr,jr,Gr,qr,Hr,Xr,zr,$r,Wr,Yr,Zr,Qr,Jr,en,tn,rn,nn,sn,an,on,ln,cn,un,dn,fn,pn,hn,mn,gn,yn,vn,En,bn,Tn,Rn,Sn,An,Ln,wn,Cn,kn,xn,_n,Dn,In,Bn,Pn,Un,Nn,On,Kn,Fn,Mn,Vn,jn,Gn,qn,Hn,Xn,zn,$n,Wn,Yn,Zn,Qn,Jn,ei,ti,ri,ni,ii,si,ai,oi,li,ci,ui,di,fi,pi,hi,mi,gi,yi,vi,Ei,bi,Ti,Ri,Si,Ai,Li,wi,Ci,ki,xi,_i,Di,Ii,Bi,Pi,Ui,Ni,Oi,Ki,Fi,Mi,Vi,ji,Gi,qi,Hi,Xi,zi,$i,Wi,Yi,Zi,Qi,Ji,es,ts,rs,ns,is,ss,as,os,ls,cs,us,ds,fs,ps,hs,ms,gs,ys,vs,Es,bs,Ts,Rs,Ss,As,Ls,ws,Cs,ks,xs,_s,Ds,Is,Bs,Ps,Us,Ns,Os,Ks,Fs,Ms,Vs,js,Gs,qs,Hs,Xs,zs,$s,Ws,Ys,Zs,Qs,Js,ea,ta,ra,na,ia,sa,aa,oa,la,ca,ua,da,fa,pa,ha,ma,ga,ya,va,Ea,ba,Ta,Ra,Sa,Aa,La,wa,Ca,ka,xa,_a,Da,Ia,Ba,Pa,Ua,Na,Oa,Ka,Fa,Ma,Va,ja,Ga,qa,Ha,Xa,za,$a,Wa,Ya,Za,Qa,Ja,eo,to,ro,no,io,so,ao,oo,lo,co,uo,fo,po,ho,mo,go,yo,vo,Eo,bo,To,Ro,So,Ao,Lo,wo,Co,ko,xo,_o,Do,Io,Bo,Po,Uo,No,Oo,Ko,Fo,Mo,Vo,jo,Go,qo,Ho,Xo,zo,$o,Wo,Yo,Zo,Qo,Jo,el,tl,rl,nl,il,sl,al,ol,ll,cl,ul,dl,fl,pl,hl,ml,gl,yl,vl,El,bl,Tl,Rl,Sl,Al;const Ll="reverendcrush.com",wl="ikj4-v76d-w3ib-y3kg",Cl="https://bsky.social",[kl,xl]=(0,e.useState)([]),[_l,Dl]=(0,e.useState)(0),[Il,Bl]=(0,e.useState)(null),[Pl,Ul]=(0,e.useState)(!1),[Nl,Ol]=(0,e.useState)([]);(0,e.useEffect)((()=>{!async function(){try{const e=new qt.BskyAgent({service:Cl}),{data:{did:t}}=await e.resolveHandle({handle:Ll});await e.login({identifier:t,password:wl});const{data:r}=await e.getAuthorFeed({actor:t,filter:"posts_and_author_threads",limit:100});if(Array.isArray(r.feed)){xl(r.feed);const e=[...r.feed.map((e=>({...e,scoreDetails:eu(e.post)})))].sort(((e,t)=>t.scoreDetails.score-e.scoreDetails.score)).slice(0,25);Ol(e)}else console.error("Invalid feed data format:",r.feed),Bl("Error fetching data")}catch(Il){console.error("Error fetching data:",Il),Bl("Error fetching data")}}()}),[]);const Kl=async()=>{Ul(!Pl)};if(Il)return(0,Ft.jsxs)("div",{className:"bsky-home skeet-text",children:["BlueSky Error: ",Il]});if(Pl)return(0,Ft.jsxs)("div",{className:"bsky-home",children:[(0,Ft.jsxs)("div",{className:"bsky-latest",children:[(0,Ft.jsx)("h2",{children:"SKEET LEADERBOARD"}),(0,Ft.jsx)("p",{className:"bsky-text",children:"TOP 25 BSKY BANGERS VIA @REVERENDCRUSH.COM"}),(0,Ft.jsx)("button",{className:"bsky-lb-button",onClick:Kl,children:"GO BACK"})]}),(0,Ft.jsx)("div",{className:"bsky-lb",children:(0,Ft.jsx)("ul",{className:"bsky-lb-list",children:Nl.map(((e,t)=>{var r,n,i,s,a,o,l,c,u,d,f,p,h,m,g,y,v,E,b,T,R,S,A,L,w,C,k,x,_,D,I,B,P,U,N,O,K,F,M,V,j,G,q,H,X,z,$,W,Y,Z,Q,J,ee,te,re,ne,ie,se,ae,oe,le,ce,ue,de,fe,pe,he,me,ge,ye,ve,Ee,be,Te,Re,Se,Ae,Le,we,Ce,ke,xe,_e,De,Ie,Be,Pe,Ue,Ne,Oe,Ke,Fe,Me;return(0,Ft.jsxs)("li",{className:"".concat(0===t?"first-place-li":1===t||2===t?"runnerup-li":t>=3&&t<=9?"bottom10-li":""),children:[(0,Ft.jsx)("img",{src:null===(r=e.post)||void 0===r||null===(n=r.author)||void 0===n?void 0:n.avatar,alt:"".concat(null===(i=e.post)||void 0===i||null===(s=i.author)||void 0===s?void 0:s.handle,"'s avatar"),className:"author-avatar ".concat(0===t?"first-author-avatar":1===t||2===t?"runnerup-author-avatar":t>=3&&t<=9?"bottom10-author-avatar":"")}),(null===(a=e.post)||void 0===a||null===(o=a.embed)||void 0===o?void 0:o.record)&&(0,Ft.jsx)("img",{src:(null===(l=e.post)||void 0===l||null===(c=l.embed)||void 0===c||null===(u=c.record)||void 0===u||null===(d=u.author)||void 0===d?void 0:d.avatar)||(null===(f=e.post)||void 0===f||null===(p=f.embed)||void 0===p||null===(h=p.record)||void 0===h||null===(m=h.record)||void 0===m||null===(g=m.author)||void 0===g?void 0:g.avatar),alt:"".concat((null===(y=e.post)||void 0===y||null===(v=y.embed)||void 0===v||null===(E=v.record)||void 0===E||null===(b=E.author)||void 0===b?void 0:b.handle)||(null===(T=e.post)||void 0===T||null===(R=T.embed)||void 0===R||null===(S=R.record)||void 0===S||null===(A=S.record)||void 0===A||null===(L=A.author)||void 0===L?void 0:L.handle),"'s avatar"),className:"author-avatar ".concat(0===t?"first-author-avatar":1===t||2===t?"runnerup-author-avatar":t>=3&&t<=9?"bottom10-author-avatar":"")}),(0,Ft.jsx)("span",{className:"bsky-lb-date",children:new Date(null===(w=e.post)||void 0===w||null===(C=w.record)||void 0===C?void 0:C.createdAt).toLocaleDateString()}),(0,Ft.jsxs)("div",{className:"bsky-lb-entry-wrapper",children:[(0,Ft.jsxs)("div",{className:"bsky-lb-user-deets",children:[(0,Ft.jsx)("p",{className:"bsky-lb-handle ".concat(0===t?"first-handle":1===t||2===t?"runnerup-handle":t>=3&&t<=9?"bottom10-handle":""),children:(0,Ft.jsxs)("a",{href:"https://bsky.app/profile/".concat(null===(k=e.post)||void 0===k||null===(x=k.author)||void 0===x?void 0:x.handle),target:"_blank",rel:"noreferrer",children:["@",null===(_=e.post)||void 0===_||null===(D=_.author)||void 0===D?void 0:D.handle]})}),(null===(I=e.post)||void 0===I||null===(B=I.embed)||void 0===B?void 0:B.record)&&((null===(P=e.post)||void 0===P||null===(U=P.embed)||void 0===U||null===(N=U.record)||void 0===N||null===(O=N.author)||void 0===O?void 0:O.handle)||(null===(K=e.post)||void 0===K||null===(F=K.embed)||void 0===F||null===(M=F.record)||void 0===M||null===(V=M.record)||void 0===V||null===(j=V.author)||void 0===j?void 0:j.handle))!==(null===(G=e.post)||void 0===G||null===(q=G.author)||void 0===q?void 0:q.handle)&&(0,Ft.jsx)("p",{className:"bsky-lb-handle ".concat(0===t?"first-handle":1===t||2===t?"runnerup-handle":t>=3&&t<=9?"bottom10-handle":""),children:(0,Ft.jsxs)("a",{href:"https://bsky.app/profile/".concat((null===(H=e.post)||void 0===H||null===(X=H.embed)||void 0===X||null===(z=X.record)||void 0===z||null===($=z.author)||void 0===$?void 0:$.handle)||(null===(W=e.post)||void 0===W||null===(Y=W.embed)||void 0===Y||null===(Z=Y.record)||void 0===Z||null===(Q=Z.record)||void 0===Q||null===(J=Q.author)||void 0===J?void 0:J.handle)),target:"_blank",rel:"noreferrer",children:["@",(null===(ee=e.post)||void 0===ee||null===(te=ee.embed)||void 0===te||null===(re=te.record)||void 0===re||null===(ne=re.author)||void 0===ne?void 0:ne.handle)||(null===(ie=e.post)||void 0===ie||null===(se=ie.embed)||void 0===se||null===(ae=se.record)||void 0===ae||null===(oe=ae.record)||void 0===oe||null===(le=oe.author)||void 0===le?void 0:le.handle)]})}),null!==(ce=e.post)&&void 0!==ce&&null!==(ue=ce.record)&&void 0!==ue&&ue.text?(0,Ft.jsx)("a",{className:"bsky-lb-postsnip",href:"https://bsky.app/profile/".concat(null===(de=e.post)||void 0===de||null===(fe=de.author)||void 0===fe?void 0:fe.handle,"/post/").concat(null===(pe=e.post)||void 0===pe?void 0:pe.uri.split("/").pop()),target:"_blank",rel:"noreferrer",children:null===(he=e.post)||void 0===he||null===(me=he.record)||void 0===me?void 0:me.text.slice(0,120)}):null!==(ge=e.post)&&void 0!==ge&&null!==(ye=ge.embed)&&void 0!==ye&&null!==(ve=ye.images)&&void 0!==ve&&null!==(Ee=ve[0])&&void 0!==Ee&&Ee.alt||null!==(be=e.post)&&void 0!==be&&null!==(Te=be.embed)&&void 0!==Te&&null!==(Re=Te.media)&&void 0!==Re&&null!==(Se=Re.images)&&void 0!==Se&&null!==(Ae=Se[0])&&void 0!==Ae&&Ae.alt?(0,Ft.jsxs)("a",{className:"bsky-lb-postsnip",href:"https://bsky.app/profile/".concat(null===(Le=e.post)||void 0===Le||null===(we=Le.author)||void 0===we?void 0:we.handle,"/post/").concat(null===(Ce=e.post)||void 0===Ce?void 0:Ce.uri.split("/").pop()),target:"_blank",rel:"noreferrer",children:["//IMG ALT TEXT: ",((null===(ke=e.post)||void 0===ke||null===(xe=ke.embed)||void 0===xe||null===(_e=xe.images)||void 0===_e||null===(De=_e[0])||void 0===De?void 0:De.alt)||(null===(Ie=e.post)||void 0===Ie||null===(Be=Ie.embed)||void 0===Be||null===(Pe=Be.media)||void 0===Pe||null===(Ue=Pe.images)||void 0===Ue||null===(Ne=Ue[0])||void 0===Ne?void 0:Ne.alt)).slice(0,120)]}):(0,Ft.jsx)("a",{className:"bsky-lb-postsnip",href:"https://bsky.app/profile/".concat(null===(Oe=e.post)||void 0===Oe||null===(Ke=Oe.author)||void 0===Ke?void 0:Ke.handle,"/post/").concat(null===(Fe=e.post)||void 0===Fe?void 0:Fe.uri.split("/").pop()),target:"_blank",rel:"noreferrer",children:"[THIS POST CONTAINS NO TEXT]"})]}),(0,Ft.jsx)("div",{className:"bsky-lb-score-area",children:(0,Ft.jsxs)("p",{className:"bsky-lb-score ".concat(0===t?"first-score":1===t||2===t?"runnerup-score":t>=3&&t<=9?"bottom10-score":""),children:["SCORE: ",null===(Me=e.scoreDetails)||void 0===Me?void 0:Me.score]})})]})]},t)}))})}),(0,Ft.jsxs)("div",{className:"bsky-lb-bottom bsky-text",children:[(0,Ft.jsx)("p",{children:"Entries for this leaderboard are pulled from the last 100 posts made by @ReverendCrush.com on BlueSky Social, including reskeets and quote reskeets. Banger Scores are calculated based on engagement on Bsky. The more likes, comments, and reskeets a skeet gets, the higher the score!"}),(0,Ft.jsxs)("p",{children:["Sounds weird? IT IS! Especially considering it's just my posts along with much more popular people than I really care to be! But if for some reason you want engage in this weird experiment, be sure to follow ",(0,Ft.jsx)("a",{href:"https://bsky.app/profile/reverendcrush.com",target:"_blank",rel:"noreferrer",children:"@ReverendCrush.com"})," on Bsky."]}),(0,Ft.jsx)("div",{className:"flex-center",children:(0,Ft.jsx)("button",{className:"bsky-lb-button",onClick:Kl,href:"bsky-top",children:" GO BACK TO SKEETS"})})]})]});if(0===kl.length)return(0,Ft.jsx)("div",{className:"bsky-home skeet-text",children:"Loading some skeets, dude..."});const Fl=kl[_l],Ml=(e=>{var t,r,n,i,s,a,o;const l=[null===(t=e.post)||void 0===t||null===(r=t.embed)||void 0===r||null===(n=r.media)||void 0===n||null===(i=n.external)||void 0===i?void 0:i.uri,null===(s=e.post)||void 0===s||null===(a=s.embed)||void 0===a||null===(o=a.external)||void 0===o?void 0:o.uri];for(const c of l)if("string"===typeof c)return c;return null})(Fl),Vl=null!==Ml&&(Ml.includes("youtube.com")||Ml.includes("youtu.be")),jl=Vl?Jc(Ml):null;if(console.log("currentPost:",Fl),console.log("Images:",null===(t=Fl.post.embed)||void 0===t||null===(r=t.media)||void 0===r?void 0:r.images),console.log("Main post embed type:",null===(n=Fl.post.embed)||void 0===n?void 0:n.$type),!Fl||!Fl.post||!Fl.post.record)return console.error("Current post is undefined or missing the record property:",Fl),(0,Ft.jsx)("div",{className:"bsky-home skeet-text",children:"Error loading skeet..."});const Gl=(null===(i=Fl.post)||void 0===i||null===(s=i.labels)||void 0===s?void 0:s.length)>0||(null===(a=Fl.post)||void 0===a||null===(o=a.record)||void 0===o||null===(l=o.labels)||void 0===l?void 0:l.length)>0,ql=(null===(c=Fl.post)||void 0===c||null===(u=c.embed)||void 0===u||null===(d=u.record)||void 0===d||null===(f=d.labels)||void 0===f?void 0:f.length)>0||(null===(p=Fl.post)||void 0===p||null===(h=p.embed)||void 0===h||null===(m=h.record)||void 0===m||null===(g=m.record)||void 0===g||null===(y=g.labels)||void 0===y?void 0:y.length)>0,{score:Hl,ratioPenalty:Xl}=eu(Fl.post),zl=function(e){return e<400?"Welp, this doesn't seem like a banger, now does it?":e>=400&&e<800?"Engagement exists, but this isn't a banger.":e>=800&&e<3e3?"A few folks appreciate this, it seems...":e>=3e3&&e<4200?"It's a banger by small account standards, but it's still a banger!":4200===e?"420 x 10 BANGER!":e>4200&&e<6900?"Now THIS is a hell of a BANGER!":6900===e?"69-hundred BANGER! NICE!":e>6900&&e<9e3?"Not a SUPER Banger, but almost...":e>9e3&&e<2e4?"THIS BANGER IS OVER 9000!!!!!":e>=2e4&&e<35e3?"THIS QUALITY SUPER BANGER IS GOING PLACES!!!!":e>=35e3&&e<42e3?"IT'S A SUPER BANGER LEVEL 3!!!! ":42e3===e?"DANK 420 x 100 SUPER BANGER LEVEL 3!":e>42e3&&e<66600?"ALL THE HOT PEOPLE ARE GETTING WET OVER THIS SUPER BANGER LEVEL 3!!!":66600===e?"SATANIC 666 x 100 SUPER BANGER LEVEL 3! HAIL LUCIFER THE MORNING STAR!":e>66600&&e<69e3?"ALL THE HOT PEOPLE ARE GETTING WET OVER THIS SUPER BANGER LEVEL 3!!!":69e3===e?"69 thousand SUPER BANGER LEVEL 3! NICE!":e>69e3&&e<75e3?"THIS QUALITY SUPER BANGER LEVEL 3 IS STARTING TO GLOW OF ELECTRIC SEX! Could we see GOLD here!?":e>=75e3&&e<125e3?"PURE GOLDEN SUPER BANGER!!! FUCKING RADICAL!":e>=125e3&&e<25e4?"I can't believe this... A PLATINUM BANGER!!!!":e>=25e4&&e<42e4?"HOLY SHIT!! DOUBLE PLATINUM BANGER!!!!":42e4===e?"SUPER DANK 420 x 100 DOUBLE PLATINUM BANGER!!!! BLAZE IT!!! AND SCREENSHOT THIS!":e>42e4&&e<5e5?"HOLY SHIT!! DOUBLE PLATINUM BANGER!!!!":e>=5e5&&e<69e4?"A TRIPLE PLATINUM BANGER!!!!??? THESE ARE LIKE THE NUMBERS FROM AN OLD EVERGREEN DRIL TWEET MARINATING IN TWELVE YEARS OF CIRCULATION!!":69e4===e?"69 hundred-thousand TRIPLE PLATINUM! NICE! SCREENSHOT THIS AFTER YOU JIZZ!":e>69e4&&e<15e5?"A TRIPLE PLATINUM BANGER!!!!??? THESE ARE LIKE THE NUMBERS FROM AN OLD EVERGREEN DRIL TWEET MARINATING IN TWELVE YEARS OF CIRCULATION!!":e>=25e5?"EVERYONE MUST BE IN HEAT AND EXPOSING THEIR WET CROTCHES IN THE PRESENCE OF THIS SKEET, BECAUSE THIS IS LIKE A COSMIC LEVEL BANGER!":"Engagement exists? We might have an error."}(Hl);return(0,Ft.jsxs)("section",{className:"bsky-home",id:"bsky-top",children:[(0,Ft.jsx)("div",{className:"bsky-latest",children:(0,Ft.jsx)("h2",{children:"Latest from the Bsky"})}),(0,Ft.jsxs)("div",{className:"skeet-header",children:[(0,Ft.jsx)("img",{src:null===(v=Fl.post.author)||void 0===v?void 0:v.avatar,alt:"".concat(null===(E=Fl.post)||void 0===E||null===(b=E.author)||void 0===b?void 0:b.handle,"'s Bluesky avatar."),className:"author-avatar"}),(0,Ft.jsxs)("span",{className:"skeet-date",children:["Via ",(0,Ft.jsxs)("a",{className:"skeet-author",href:"https://bsky.app/profile/".concat(Fl.post.author.handle),target:"_blank",rel:"noreferrer",children:["@",Fl.post.author.handle]}),(0,Ft.jsx)("br",{}),"Post: ",(0,Ft.jsx)("a",{className:"skeet-author",href:"https://bsky.app/profile/".concat(Fl.post.author.handle,"/post/").concat(Fl.post.uri.split("/").pop()),target:"_blank",rel:"noreferrer",children:(0,Ft.jsx)("u",{children:new Date(Fl.post.record.createdAt).toLocaleString()})})]})]}),(0,Ft.jsxs)("div",{className:"skeet-text",children:[Fl.reply?(0,Ft.jsxs)("div",{className:"skeet-metatext skeet-reply-status",children:["Replying to @",Fl.reply.parent.author.handle,"..."]}):null,(0,Ft.jsx)("div",{style:{whiteSpace:"pre-line"},children:tu(Fl.post.record.text).map(((t,r)=>(0,Ft.jsx)(e.Fragment,{children:t},r)))}),Gl?(0,Ft.jsxs)("div",{className:"skeet-cw",children:[(0,Ft.jsxs)("p",{children:["CONTENT WARNING: MY GOODNESS! It would appear the dude is either being horny on main, or reskeeted something that's just otherwise too hot for the website. This particular content was flagged for the following: ",((null===(T=Fl.post)||void 0===T?void 0:T.labels)||(null===(R=Fl.post)||void 0===R||null===(S=R.record)||void 0===S?void 0:S.labels)||[]).map(((e,t)=>(0,Ft.jsxs)("span",{className:"skeet-label",children:[e.val," "]},t)))]}),(0,Ft.jsxs)("p",{children:["So ReverendCrush.com fans, if you want to see the good stuff, or at the very least think you can handle it, you'll need to visit ",(0,Ft.jsx)("a",{href:"https://bsky.app/profile/".concat(Fl.post.author.handle,"/post/").concat(Fl.post.uri.split("/").pop()),target:"_blank",rel:"noreferrer",children:"the actual post on Bsky."})," While you're there, you might as well follow Rev, drop a like and comment, then reskeet whatever deviant imagery it is that we refuse to show you here."]})]}):(0,Ft.jsx)("div",{className:"skeet-media-group",children:"app.bsky.embed.images#view"===(null===(A=Fl.post.embed)||void 0===A?void 0:A.$type)?((null===(L=Fl.post.embed)||void 0===L?void 0:L.images)||[]).map(((e,t)=>(0,Ft.jsxs)("div",{children:[(0,Ft.jsx)("img",{src:e.fullsize,alt:e.alt||"No ALT Text provided for this image.",loading:"lazy",className:"skeet-img-file"}),(0,Ft.jsx)("br",{}),(0,Ft.jsxs)("p",{className:"skeet-metatext",children:[["//ALT TEXT: "],e.alt||"<ALERT: NO ALT TEXT PROVIDED!>"]})]},"post-img-".concat(t)))):"app.bsky.embed.recordWithMedia#view"===(null===(w=Fl.post.embed)||void 0===w?void 0:w.$type)?(0,Ft.jsxs)(Ft.Fragment,{children:["app.bsky.embed.images#view"===(null===(C=Fl.post.embed.media)||void 0===C?void 0:C.$type)&&((null===(k=Fl.post.embed.media)||void 0===k?void 0:k.images)||[]).map(((e,t)=>(0,Ft.jsxs)("div",{children:[(0,Ft.jsx)("img",{src:e.fullsize,alt:e.alt||"Default ALT text is missing",loading:"lazy",className:"skeet-img-file"}),(0,Ft.jsx)("br",{}),(0,Ft.jsxs)("p",{className:"skeet-metatext",children:[["//ALT TEXT: "],e.alt||"<ALERT: NO ALT TEXT PROVIDED!>"]})]},"post-img-".concat(t)))),"app.bsky.embed.video#view"===(null===(x=Fl.post.embed.media)||void 0===x?void 0:x.$type)&&nu(Fl.post.embed.media),"app.bsky.embed.video#view"===(null===(_=Fl.post.embed.record)||void 0===_||null===(D=_.record)||void 0===D||null===(I=D.embed)||void 0===I?void 0:I.$type)&&nu(Fl.post.embed.record.record.embed)]}):null!==(B=Fl.post.embed)&&void 0!==B&&B.$type.startsWith("app.bsky.embed.video")?nu(Fl.post.embed):null}),Vl&&jl&&(0,Ft.jsxs)("div",{children:[(0,Ft.jsx)("div",{className:"skeet-youtube",children:(0,Ft.jsx)(lr,{videoId:jl})}),(0,Ft.jsxs)("div",{className:"web-deets",children:[(0,Ft.jsx)("h3",{children:(null===(P=Fl.post)||void 0===P||null===(U=P.embed)||void 0===U||null===(N=U.external)||void 0===N?void 0:N.title)||(null===(O=Fl.post)||void 0===O||null===(K=O.embed)||void 0===K||null===(F=K.media)||void 0===F||null===(M=F.external)||void 0===M?void 0:M.title)}),(0,Ft.jsx)("p",{className:"skeet-metatext",children:(null===(V=Fl.post)||void 0===V||null===(j=V.embed)||void 0===j||null===(G=j.external)||void 0===G?void 0:G.description)||(null===(q=Fl.post)||void 0===q||null===(H=q.embed)||void 0===H||null===(X=H.media)||void 0===X||null===(z=X.external)||void 0===z?void 0:z.description)})]})]}),((null===($=Fl.post.embed)||void 0===$||null===(W=$.external)||void 0===W?void 0:W.uri)||(null===(Y=Fl.post.embed)||void 0===Y||null===(Z=Y.media)||void 0===Z||null===(Q=Z.external)||void 0===Q?void 0:Q.uri))&&!(null!==(J=Fl.post.embed)&&void 0!==J&&null!==(ee=J.external)&&void 0!==ee&&ee.uri.includes("youtube.com")||null!==(te=Fl.post.embed)&&void 0!==te&&null!==(re=te.external)&&void 0!==re&&re.uri.includes("youtu.be")||null!==(ne=Fl.post.embed)&&void 0!==ne&&null!==(ie=ne.media)&&void 0!==ie&&null!==(se=ie.external)&&void 0!==se&&se.uri.includes("youtube.com")||null!==(ae=Fl.post.embed)&&void 0!==ae&&null!==(oe=ae.media)&&void 0!==oe&&null!==(le=oe.external)&&void 0!==le&&le.uri.includes("youtu.be"))&&(0,Ft.jsxs)("div",{className:"skeet-web-media",children:[(0,Ft.jsx)("a",{href:(null===(ce=Fl.post.embed)||void 0===ce||null===(ue=ce.external)||void 0===ue?void 0:ue.uri)||(null===(de=Fl.post.embed)||void 0===de||null===(fe=de.media)||void 0===fe||null===(pe=fe.external)||void 0===pe?void 0:pe.uri),children:(0,Ft.jsx)("img",{className:"webcard-img",src:(null===(he=Fl.post)||void 0===he||null===(me=he.embed)||void 0===me||null===(ge=me.external)||void 0===ge?void 0:ge.thumb)||(null===(ye=Fl.post.embed)||void 0===ye||null===(ve=ye.media)||void 0===ve||null===(Ee=ve.external)||void 0===Ee?void 0:Ee.thumb),alt:(null===(be=Fl.post)||void 0===be||null===(Te=be.embed)||void 0===Te||null===(Re=Te.external)||void 0===Re?void 0:Re.title)||(null===(Se=Fl.post.embed)||void 0===Se||null===(Ae=Se.media)||void 0===Ae||null===(Le=Ae.external)||void 0===Le?void 0:Le.title)||"Alt Text not available for some reason...",loading:"lazy"})}),(0,Ft.jsxs)("div",{className:"web-deets",children:[(0,Ft.jsx)("h3",{children:(null===(we=Fl.post.embed)||void 0===we||null===(Ce=we.external)||void 0===Ce?void 0:Ce.title)||(null===(ke=Fl.post.embed)||void 0===ke||null===(xe=ke.media)||void 0===xe||null===(_e=xe.external)||void 0===_e?void 0:_e.title)}),(0,Ft.jsx)("p",{className:"skeet-metatext",children:(null===(De=Fl.post.embed)||void 0===De||null===(Ie=De.external)||void 0===Ie?void 0:Ie.description)||(null===(Be=Fl.post.embed)||void 0===Be||null===(Pe=Be.media)||void 0===Pe||null===(Ue=Pe.external)||void 0===Ue?void 0:Ue.description)})]})]}),(null===(Ne=Fl.post)||void 0===Ne||null===(Oe=Ne.embed)||void 0===Oe?void 0:Oe.record)&&(0,Ft.jsxs)("div",{className:"quote-reskeet-box",children:[(0,Ft.jsxs)("div",{className:"skeet-header",children:[(0,Ft.jsx)("img",{src:(null===(Ke=Fl.post.embed.record.author)||void 0===Ke?void 0:Ke.avatar)||(null===(Fe=Fl.post.embed.record.record)||void 0===Fe||null===(Me=Fe.author)||void 0===Me?void 0:Me.avatar),alt:"".concat((null===(Ve=Fl.post.embed.record.author)||void 0===Ve?void 0:Ve.name)||(null===(je=Fl.post.embed.record.record)||void 0===je||null===(Ge=je.author)||void 0===Ge?void 0:Ge.name),"'s Bluesky avatar!")||0,className:"author-avatar"}),(0,Ft.jsxs)("span",{className:"skeet-quote-author",children:["Now Reskeeting...",(0,Ft.jsx)("br",{}),(0,Ft.jsxs)("a",{href:"https://bsky.app/profile/".concat((null===(qe=Fl.post.embed.record.author)||void 0===qe?void 0:qe.handle)||(null===(He=Fl.post.embed.record.record)||void 0===He||null===(Xe=He.author)||void 0===Xe?void 0:Xe.handle)),target:"_blank",rel:"noreferrer",children:["@",(null===(ze=Fl.post.embed.record.author)||void 0===ze?void 0:ze.handle)||(null===($e=Fl.post.embed.record.record)||void 0===$e||null===(We=$e.author)||void 0===We?void 0:We.handle)]})]})]}),(0,Ft.jsx)("div",{className:"skeet-text",children:tu((null===(Ye=Fl.post.embed.record.value)||void 0===Ye?void 0:Ye.text)||(null===(Ze=Fl.post.embed.record.record)||void 0===Ze||null===(Qe=Ze.value)||void 0===Qe?void 0:Qe.text)).map(((t,r)=>(0,Ft.jsx)(e.Fragment,{children:t},r)))}),ql?(0,Ft.jsxs)("div",{className:"skeet-cw",children:[(0,Ft.jsxs)("p",{children:["CONTENT WARNING: JEEPERS, MR. WILSON! It would appear good ol' ReverendCrush (or whoever he reskeeted is quoting) wants you ALL to see something that, well, we're just not going to show here. Specifically, the content being quoted has been flagged for the following: ",((null===Fl||void 0===Fl||null===(Je=Fl.post)||void 0===Je||null===(et=Je.embed)||void 0===et||null===(tt=et.record)||void 0===tt?void 0:tt.labels)||(null===Fl||void 0===Fl||null===(rt=Fl.post)||void 0===rt||null===(nt=rt.embed)||void 0===nt||null===(it=nt.record)||void 0===it||null===(st=it.record)||void 0===st?void 0:st.labels)||[]).map(((e,t)=>(0,Ft.jsxs)("span",{className:"skeet-label",children:[e.val," "]},t)))]}),(0,Ft.jsxs)("p",{children:["If you little achievers want to see ALL the goods (or horror; this is someone ReverendCrush is quoting after all, so it's not impossible), you'll need to visit ",(0,Ft.jsx)("a",{href:"https://bsky.app/profile/".concat(Fl.post.author.handle,"/post/").concat(Fl.post.uri.split("/").pop()),target:"_blank",rel:"noreferrer",children:"the post on Bsky"}),", and while you're at it, be sure to follow Rev, drop a like and comment, and reskeet this explosion of sin if that's your thing because we won't show it."]})]}):(0,Ft.jsx)("div",{className:"skeet-image-group",children:null===(at=(null===(ot=Fl.post.embed)||void 0===ot||null===(lt=ot.record)||void 0===lt?void 0:lt.embeds)||(null===(ct=Fl.post.embed)||void 0===ct||null===(ut=ct.record)||void 0===ut||null===(dt=ut.record)||void 0===dt?void 0:dt.embeds))||void 0===at?void 0:at.map(((e,t)=>{if("app.bsky.embed.images#view"===e.$type||"app.bsky.embed.recordWithMedia#view"===e.$type){var r;const n="app.bsky.embed.images#view"===e.$type?e.images:null===(r=e.media)||void 0===r?void 0:r.images;return null===n||void 0===n?void 0:n.map(((e,r)=>(0,Ft.jsxs)("div",{className:"skeet-image-group",children:[(0,Ft.jsx)("img",{src:e.fullsize,alt:e.alt||"No Alt Text Provided from Quote Skeet.",loading:"lazy",className:"skeet-img-file"}),(0,Ft.jsx)("br",{}),(0,Ft.jsxs)("p",{className:"skeet-metatext",children:[["//ALT TEXT:"]," ",e.alt||"<ALERT: NO ALT TEXT PROVIDED!>"]})]},"quote-".concat(t,"-img-").concat(r))))}return"app.bsky.embed.video#view"===e.$type?nu(e):null}))}),((null===(ft=Fl.embed)||void 0===ft||null===(pt=ft.record)||void 0===pt||null===(ht=pt.value)||void 0===ht||null===(mt=ht.embed)||void 0===mt||null===(gt=mt.external)||void 0===gt?void 0:gt.uri)||(null===(yt=Fl.post.embed)||void 0===yt||null===(vt=yt.record)||void 0===vt||null===(Et=vt.embeds)||void 0===Et||null===(bt=Et[0])||void 0===bt||null===(Tt=bt.external)||void 0===Tt?void 0:Tt.uri)||(null===(Rt=Fl.post.embed)||void 0===Rt||null===(St=Rt.media)||void 0===St||null===(At=St.external)||void 0===At?void 0:At.uri)||(null===(Lt=Fl.post)||void 0===Lt||null===(wt=Lt.embed)||void 0===wt||null===(Ct=wt.record)||void 0===Ct||null===(kt=Ct.embeds)||void 0===kt||null===(xt=kt[0])||void 0===xt||null===(_t=xt.media)||void 0===_t||null===(Dt=_t.external)||void 0===Dt?void 0:Dt.uri)||(null===(It=Fl.post)||void 0===It||null===(Bt=It.embed)||void 0===Bt||null===(Pt=Bt.record)||void 0===Pt||null===(Ut=Pt.record)||void 0===Ut||null===(Nt=Ut.embeds)||void 0===Nt||null===(Ot=Nt[0])||void 0===Ot||null===(Kt=Ot.media)||void 0===Kt||null===(Mt=Kt.external)||void 0===Mt?void 0:Mt.uri))&&((null===(Vt=Fl.embed)||void 0===Vt||null===(jt=Vt.record)||void 0===jt||null===(Gt=jt.value)||void 0===Gt||null===(Ht=Gt.embed)||void 0===Ht||null===(Xt=Ht.external)||void 0===Xt?void 0:Xt.uri.includes("youtube.com"))||(null===(zt=Fl.embed)||void 0===zt||null===($t=zt.record)||void 0===$t||null===(Wt=$t.value)||void 0===Wt||null===(Yt=Wt.embed)||void 0===Yt||null===(Zt=Yt.external)||void 0===Zt?void 0:Zt.uri.includes("youtu.be"))||(null===(Qt=Fl.post)||void 0===Qt||null===(Jt=Qt.embed)||void 0===Jt||null===(er=Jt.record)||void 0===er||null===(tr=er.embeds)||void 0===tr||null===(rr=tr[0])||void 0===rr||null===(nr=rr.external)||void 0===nr?void 0:nr.uri.includes("youtube.com"))||(null===(ir=Fl.post)||void 0===ir||null===(sr=ir.embed)||void 0===sr||null===(ar=sr.record)||void 0===ar||null===(or=ar.embeds)||void 0===or||null===(ur=or[0])||void 0===ur||null===(dr=ur.external)||void 0===dr?void 0:dr.uri.includes("youtu.be"))||(null===(fr=Fl.post)||void 0===fr||null===(pr=fr.embed)||void 0===pr||null===(hr=pr.record)||void 0===hr||null===(mr=hr.embeds)||void 0===mr||null===(gr=mr[0])||void 0===gr||null===(yr=gr.media)||void 0===yr||null===(vr=yr.external)||void 0===vr?void 0:vr.uri.includes("youtube.com"))||(null===(Er=Fl.post)||void 0===Er||null===(br=Er.embed)||void 0===br||null===(Tr=br.record)||void 0===Tr||null===(Rr=Tr.embeds)||void 0===Rr||null===(Sr=Rr[0])||void 0===Sr||null===(Ar=Sr.media)||void 0===Ar||null===(Lr=Ar.external)||void 0===Lr?void 0:Lr.uri.includes("youtu.be"))||(null===(wr=Fl.post)||void 0===wr||null===(Cr=wr.embed)||void 0===Cr||null===(kr=Cr.record)||void 0===kr||null===(xr=kr.record)||void 0===xr||null===(_r=xr.embeds)||void 0===_r||null===(Dr=_r[0])||void 0===Dr||null===(Ir=Dr.media)||void 0===Ir||null===(Br=Ir.external)||void 0===Br?void 0:Br.uri.includes("youtube.com"))||(null===(Pr=Fl.post)||void 0===Pr||null===(Ur=Pr.embed)||void 0===Ur||null===(Nr=Ur.record)||void 0===Nr||null===(Or=Nr.record)||void 0===Or||null===(Kr=Or.embeds)||void 0===Kr||null===(Fr=Kr[0])||void 0===Fr||null===(Mr=Fr.media)||void 0===Mr||null===(Vr=Mr.external)||void 0===Vr?void 0:Vr.uri.includes("youtu.be")))&&(0,Ft.jsxs)("div",{children:[(0,Ft.jsx)("div",{className:"skeet-youtube",children:(0,Ft.jsx)(lr,{videoId:Jc((null===(jr=Fl.embed)||void 0===jr||null===(Gr=jr.record)||void 0===Gr||null===(qr=Gr.value)||void 0===qr||null===(Hr=qr.embed)||void 0===Hr||null===(Xr=Hr.external)||void 0===Xr?void 0:Xr.uri)||(null===(zr=Fl.post)||void 0===zr||null===($r=zr.embed)||void 0===$r||null===(Wr=$r.record)||void 0===Wr||null===(Yr=Wr.embeds)||void 0===Yr||null===(Zr=Yr[0])||void 0===Zr||null===(Qr=Zr.external)||void 0===Qr?void 0:Qr.uri)||(null===(Jr=Fl.post)||void 0===Jr||null===(en=Jr.embed)||void 0===en||null===(tn=en.record)||void 0===tn||null===(rn=tn.embeds)||void 0===rn||null===(nn=rn[0])||void 0===nn||null===(sn=nn.media)||void 0===sn||null===(an=sn.external)||void 0===an?void 0:an.uri)||(null===(on=Fl.post)||void 0===on||null===(ln=on.embed)||void 0===ln||null===(cn=ln.record)||void 0===cn||null===(un=cn.record)||void 0===un||null===(dn=un.embeds)||void 0===dn||null===(fn=dn[0])||void 0===fn||null===(pn=fn.media)||void 0===pn||null===(hn=pn.external)||void 0===hn?void 0:hn.uri))})}),(0,Ft.jsxs)("div",{className:"web-deets",children:[(0,Ft.jsx)("h3",{children:(null===(mn=Fl.embed)||void 0===mn||null===(gn=mn.record)||void 0===gn||null===(yn=gn.value)||void 0===yn||null===(vn=yn.embed)||void 0===vn||null===(En=vn.external)||void 0===En?void 0:En.title)||(null===(bn=Fl.post)||void 0===bn||null===(Tn=bn.embed)||void 0===Tn||null===(Rn=Tn.record)||void 0===Rn||null===(Sn=Rn.embeds)||void 0===Sn||null===(An=Sn[0])||void 0===An||null===(Ln=An.external)||void 0===Ln?void 0:Ln.title)||(null===(wn=Fl.post)||void 0===wn||null===(Cn=wn.embed)||void 0===Cn||null===(kn=Cn.record)||void 0===kn||null===(xn=kn.embeds)||void 0===xn||null===(_n=xn[0])||void 0===_n||null===(Dn=_n.media)||void 0===Dn||null===(In=Dn.external)||void 0===In?void 0:In.title)||(null===(Bn=Fl.post)||void 0===Bn||null===(Pn=Bn.embed)||void 0===Pn||null===(Un=Pn.record)||void 0===Un||null===(Nn=Un.record)||void 0===Nn||null===(On=Nn.embeds)||void 0===On||null===(Kn=On[0])||void 0===Kn||null===(Fn=Kn.media)||void 0===Fn||null===(Mn=Fn.external)||void 0===Mn?void 0:Mn.title)}),(0,Ft.jsx)("p",{className:"skeet-metatext",children:(null===(Vn=Fl.embed)||void 0===Vn||null===(jn=Vn.record)||void 0===jn||null===(Gn=jn.value)||void 0===Gn||null===(qn=Gn.embed)||void 0===qn||null===(Hn=qn.external)||void 0===Hn?void 0:Hn.description)||(null===(Xn=Fl.post)||void 0===Xn||null===(zn=Xn.embed)||void 0===zn||null===($n=zn.record)||void 0===$n||null===(Wn=$n.embeds)||void 0===Wn||null===(Yn=Wn[0])||void 0===Yn||null===(Zn=Yn.external)||void 0===Zn?void 0:Zn.description)||(null===(Qn=Fl.post)||void 0===Qn||null===(Jn=Qn.embed)||void 0===Jn||null===(ei=Jn.record)||void 0===ei||null===(ti=ei.embeds)||void 0===ti||null===(ri=ti[0])||void 0===ri||null===(ni=ri.media)||void 0===ni||null===(ii=ni.external)||void 0===ii?void 0:ii.description)||(null===(si=Fl.post)||void 0===si||null===(ai=si.embed)||void 0===ai||null===(oi=ai.record)||void 0===oi||null===(li=oi.record)||void 0===li||null===(ci=li.embeds)||void 0===ci||null===(ui=ci[0])||void 0===ui||null===(di=ui.media)||void 0===di||null===(fi=di.external)||void 0===fi?void 0:fi.description)})]})]}),((null===(pi=Fl.embed)||void 0===pi||null===(hi=pi.record)||void 0===hi||null===(mi=hi.value)||void 0===mi||null===(gi=mi.embed)||void 0===gi||null===(yi=gi.external)||void 0===yi?void 0:yi.uri)||(null===(vi=Fl.post.embed)||void 0===vi||null===(Ei=vi.record)||void 0===Ei||null===(bi=Ei.embeds)||void 0===bi||null===(Ti=bi[0])||void 0===Ti||null===(Ri=Ti.external)||void 0===Ri?void 0:Ri.uri)||(null===(Si=Fl.post)||void 0===Si||null===(Ai=Si.embed)||void 0===Ai||null===(Li=Ai.record)||void 0===Li||null===(wi=Li.record)||void 0===wi||null===(Ci=wi.embeds)||void 0===Ci||null===(ki=Ci[0])||void 0===ki||null===(xi=ki.media)||void 0===xi||null===(_i=xi.external)||void 0===_i?void 0:_i.uri)||(null===(Di=Fl.post)||void 0===Di||null===(Ii=Di.embed)||void 0===Ii||null===(Bi=Ii.record)||void 0===Bi||null===(Pi=Bi.record)||void 0===Pi||null===(Ui=Pi.embeds[0])||void 0===Ui||null===(Ni=Ui.external)||void 0===Ni?void 0:Ni.uri))&&!(null!==(Oi=Fl.embed)&&void 0!==Oi&&null!==(Ki=Oi.record)&&void 0!==Ki&&null!==(Fi=Ki.value)&&void 0!==Fi&&null!==(Mi=Fi.embed)&&void 0!==Mi&&null!==(Vi=Mi.external)&&void 0!==Vi&&Vi.uri.includes("youtube.com")||null!==(ji=Fl.embed)&&void 0!==ji&&null!==(Gi=ji.record)&&void 0!==Gi&&null!==(qi=Gi.value)&&void 0!==qi&&null!==(Hi=qi.embed)&&void 0!==Hi&&null!==(Xi=Hi.external)&&void 0!==Xi&&Xi.uri.includes("youtu.be")||null!==(zi=Fl.post)&&void 0!==zi&&null!==($i=zi.embed)&&void 0!==$i&&null!==(Wi=$i.record)&&void 0!==Wi&&null!==(Yi=Wi.embeds)&&void 0!==Yi&&null!==(Zi=Yi[0])&&void 0!==Zi&&null!==(Qi=Zi.external)&&void 0!==Qi&&Qi.uri.includes("youtube.com")||null!==(Ji=Fl.post)&&void 0!==Ji&&null!==(es=Ji.embed)&&void 0!==es&&null!==(ts=es.record)&&void 0!==ts&&null!==(rs=ts.embeds)&&void 0!==rs&&null!==(ns=rs[0])&&void 0!==ns&&null!==(is=ns.external)&&void 0!==is&&is.uri.includes("youtu.be")||null!==(ss=Fl.post)&&void 0!==ss&&null!==(as=ss.embed)&&void 0!==as&&null!==(os=as.record)&&void 0!==os&&null!==(ls=os.record)&&void 0!==ls&&null!==(cs=ls.embeds)&&void 0!==cs&&null!==(us=cs[0])&&void 0!==us&&null!==(ds=us.media)&&void 0!==ds&&null!==(fs=ds.external)&&void 0!==fs&&fs.uri.includes("youtube.com")||null!==(ps=Fl.post)&&void 0!==ps&&null!==(hs=ps.embed)&&void 0!==hs&&null!==(ms=hs.record)&&void 0!==ms&&null!==(gs=ms.record)&&void 0!==gs&&null!==(ys=gs.embeds)&&void 0!==ys&&null!==(vs=ys[0])&&void 0!==vs&&null!==(Es=vs.media)&&void 0!==Es&&null!==(bs=Es.external)&&void 0!==bs&&bs.uri.includes("youtu.be")||null!==(Ts=Fl.post)&&void 0!==Ts&&null!==(Rs=Ts.embed)&&void 0!==Rs&&null!==(Ss=Rs.record)&&void 0!==Ss&&null!==(As=Ss.record)&&void 0!==As&&null!==(Ls=As.embeds[0])&&void 0!==Ls&&null!==(ws=Ls.external)&&void 0!==ws&&ws.uri.includes("youtube.com")||null!==(Cs=Fl.post)&&void 0!==Cs&&null!==(ks=Cs.embed)&&void 0!==ks&&null!==(xs=ks.record)&&void 0!==xs&&null!==(_s=xs.record)&&void 0!==_s&&null!==(Ds=_s.embeds[0])&&void 0!==Ds&&null!==(Is=Ds.external)&&void 0!==Is&&Is.uri.includes("youtu.be"))&&(0,Ft.jsxs)("div",{children:[(0,Ft.jsx)("div",{className:"skeet-web-media",children:(0,Ft.jsx)("a",{href:(null===(Bs=Fl.embed)||void 0===Bs||null===(Ps=Bs.record)||void 0===Ps||null===(Us=Ps.value)||void 0===Us||null===(Ns=Us.embed)||void 0===Ns||null===(Os=Ns.external)||void 0===Os?void 0:Os.uri)||(null===(Ks=Fl.post)||void 0===Ks||null===(Fs=Ks.embed)||void 0===Fs||null===(Ms=Fs.record)||void 0===Ms||null===(Vs=Ms.embeds)||void 0===Vs||null===(js=Vs[0])||void 0===js||null===(Gs=js.external)||void 0===Gs?void 0:Gs.uri)||(null===(qs=Fl.post)||void 0===qs||null===(Hs=qs.embed)||void 0===Hs||null===(Xs=Hs.record)||void 0===Xs||null===(zs=Xs.record)||void 0===zs||null===($s=zs.embeds)||void 0===$s||null===(Ws=$s[0])||void 0===Ws||null===(Ys=Ws.media)||void 0===Ys||null===(Zs=Ys.external)||void 0===Zs?void 0:Zs.uri)||(null===(Qs=Fl.post)||void 0===Qs||null===(Js=Qs.embed)||void 0===Js||null===(ea=Js.record)||void 0===ea||null===(ta=ea.record)||void 0===ta||null===(ra=ta.embeds[0])||void 0===ra||null===(na=ra.external)||void 0===na?void 0:na.uri),children:(0,Ft.jsx)("img",{className:"webcard-img",src:(null===(ia=Fl.embed)||void 0===ia||null===(sa=ia.record)||void 0===sa||null===(aa=sa.value)||void 0===aa||null===(oa=aa.embed)||void 0===oa||null===(la=oa.external)||void 0===la?void 0:la.thumb)||(null===(ca=Fl.post)||void 0===ca||null===(ua=ca.embed)||void 0===ua||null===(da=ua.record)||void 0===da||null===(fa=da.embeds)||void 0===fa||null===(pa=fa[0])||void 0===pa||null===(ha=pa.external)||void 0===ha?void 0:ha.thumb)||(null===(ma=Fl.post)||void 0===ma||null===(ga=ma.embed)||void 0===ga||null===(ya=ga.record)||void 0===ya||null===(va=ya.embeds)||void 0===va||null===(Ea=va[0])||void 0===Ea||null===(ba=Ea.media)||void 0===ba||null===(Ta=ba.external)||void 0===Ta?void 0:Ta.thumb)||(null===(Ra=Fl.post)||void 0===Ra||null===(Sa=Ra.embed)||void 0===Sa||null===(Aa=Sa.record)||void 0===Aa||null===(La=Aa.record)||void 0===La||null===(wa=La.embeds)||void 0===wa||null===(Ca=wa[0])||void 0===Ca||null===(ka=Ca.media)||void 0===ka||null===(xa=ka.external)||void 0===xa?void 0:xa.thumb)||(null===(_a=Fl.post)||void 0===_a||null===(Da=_a.embed)||void 0===Da||null===(Ia=Da.record)||void 0===Ia||null===(Ba=Ia.record)||void 0===Ba||null===(Pa=Ba.embeds[0])||void 0===Pa||null===(Ua=Pa.external)||void 0===Ua?void 0:Ua.thumb)||{noMediaImg:cr},alt:(null===(Na=Fl.embed)||void 0===Na||null===(Oa=Na.record)||void 0===Oa||null===(Ka=Oa.value)||void 0===Ka||null===(Fa=Ka.embed)||void 0===Fa||null===(Ma=Fa.external)||void 0===Ma?void 0:Ma.title)||(null===(Va=Fl.post)||void 0===Va||null===(ja=Va.embed)||void 0===ja||null===(Ga=ja.record)||void 0===Ga||null===(qa=Ga.embeds)||void 0===qa||null===(Ha=qa[0])||void 0===Ha||null===(Xa=Ha.external)||void 0===Xa?void 0:Xa.title)||(null===(za=Fl.post)||void 0===za||null===($a=za.embed)||void 0===$a||null===(Wa=$a.record)||void 0===Wa||null===(Ya=Wa.embeds)||void 0===Ya||null===(Za=Ya[0])||void 0===Za||null===(Qa=Za.media)||void 0===Qa||null===(Ja=Qa.external)||void 0===Ja?void 0:Ja.title)||(null===(eo=Fl.post)||void 0===eo||null===(to=eo.embed)||void 0===to||null===(ro=to.record)||void 0===ro||null===(no=ro.record)||void 0===no||null===(io=no.embeds)||void 0===io||null===(so=io[0])||void 0===so||null===(ao=so.media)||void 0===ao||null===(oo=ao.external)||void 0===oo?void 0:oo.title)||(null===(lo=Fl.post)||void 0===lo||null===(co=lo.embed)||void 0===co||null===(uo=co.record)||void 0===uo||null===(fo=uo.record)||void 0===fo||null===(po=fo.embeds[0])||void 0===po||null===(ho=po.external)||void 0===ho?void 0:ho.title)||"Title not available. WEIRD..."})})}),(0,Ft.jsxs)("div",{className:"web-deets",children:[(0,Ft.jsx)("h3",{children:(null===(mo=Fl.embed)||void 0===mo||null===(go=mo.record)||void 0===go||null===(yo=go.value)||void 0===yo||null===(vo=yo.embed)||void 0===vo||null===(Eo=vo.external)||void 0===Eo?void 0:Eo.title)||(null===(bo=Fl.post)||void 0===bo||null===(To=bo.embed)||void 0===To||null===(Ro=To.record)||void 0===Ro||null===(So=Ro.embeds)||void 0===So||null===(Ao=So[0])||void 0===Ao||null===(Lo=Ao.external)||void 0===Lo?void 0:Lo.title)||(null===(wo=Fl.post)||void 0===wo||null===(Co=wo.embed)||void 0===Co||null===(ko=Co.record)||void 0===ko||null===(xo=ko.embeds)||void 0===xo||null===(_o=xo[0])||void 0===_o||null===(Do=_o.media)||void 0===Do||null===(Io=Do.external)||void 0===Io?void 0:Io.title)||(null===(Bo=Fl.post)||void 0===Bo||null===(Po=Bo.embed)||void 0===Po||null===(Uo=Po.record)||void 0===Uo||null===(No=Uo.record)||void 0===No||null===(Oo=No.embeds)||void 0===Oo||null===(Ko=Oo[0])||void 0===Ko||null===(Fo=Ko.media)||void 0===Fo||null===(Mo=Fo.external)||void 0===Mo?void 0:Mo.title)||(null===(Vo=Fl.post)||void 0===Vo||null===(jo=Vo.embed)||void 0===jo||null===(Go=jo.record)||void 0===Go||null===(qo=Go.record)||void 0===qo||null===(Ho=qo.embeds[0])||void 0===Ho||null===(Xo=Ho.external)||void 0===Xo?void 0:Xo.title)}),(0,Ft.jsx)("p",{className:"skeet-metatext",children:(null===(zo=Fl.embed)||void 0===zo||null===($o=zo.record)||void 0===$o||null===(Wo=$o.value)||void 0===Wo||null===(Yo=Wo.embed)||void 0===Yo||null===(Zo=Yo.external)||void 0===Zo?void 0:Zo.description)||(null===(Qo=Fl.post)||void 0===Qo||null===(Jo=Qo.embed)||void 0===Jo||null===(el=Jo.record)||void 0===el||null===(tl=el.embeds)||void 0===tl||null===(rl=tl[0])||void 0===rl||null===(nl=rl.external)||void 0===nl?void 0:nl.description)||(null===(il=Fl.post)||void 0===il||null===(sl=il.embed)||void 0===sl||null===(al=sl.record)||void 0===al||null===(ol=al.embeds)||void 0===ol||null===(ll=ol[0])||void 0===ll||null===(cl=ll.media)||void 0===cl||null===(ul=cl.external)||void 0===ul?void 0:ul.description)||(null===(dl=Fl.post)||void 0===dl||null===(fl=dl.embed)||void 0===fl||null===(pl=fl.record)||void 0===pl||null===(hl=pl.record)||void 0===hl||null===(ml=hl.embeds)||void 0===ml||null===(gl=ml[0])||void 0===gl||null===(yl=gl.media)||void 0===yl||null===(vl=yl.external)||void 0===vl?void 0:vl.description)||(null===(El=Fl.post)||void 0===El||null===(bl=El.embed)||void 0===bl||null===(Tl=bl.record)||void 0===Tl||null===(Rl=Tl.record)||void 0===Rl||null===(Sl=Rl.embeds[0])||void 0===Sl||null===(Al=Sl.external)||void 0===Al?void 0:Al.description)})]})]})]}),(0,Ft.jsxs)("div",{className:"skeet-banger-score",children:[(0,Ft.jsxs)("p",{children:["BANGER SCORE: ",(0,Ft.jsx)("br",{}),(0,Ft.jsx)("span",{className:"glow",children:Hl})]}),Xl&&(0,Ft.jsx)("p",{className:"skeet-metatext",children:"WARNING: RATIO PENALTY!!"}),(0,Ft.jsx)("p",{className:"banger-score-text",children:zl}),(0,Ft.jsx)("div",{className:"flex-center",children:(0,Ft.jsx)("button",{className:"bsky-lb-button",onClick:Kl,children:"VIEW LEADERBOARD"})})]})]}),(0,Ft.jsxs)("div",{className:"pagination-controls",children:[(0,Ft.jsx)("button",{className:"bsky-pag-button",onClick:()=>{Dl((e=>Math.min(e+1,kl.length-1))),document.getElementById("bsky-top").scrollIntoView({behavior:"smooth"})},disabled:_l>=kl.length-1,children:"\u2190 PRV."}),(0,Ft.jsx)("button",{className:"bsky-pag-button",onClick:()=>{Dl((e=>Math.max(e-1,0))),document.getElementById("bsky-top").scrollIntoView({behavior:"smooth"})},disabled:0===_l,children:"NXT. \u2192"})]}),(0,Ft.jsx)("div",{children:(0,Ft.jsxs)("p",{className:"skeet-text",children:["FOLLOW ",(0,Ft.jsx)("a",{href:"https://bsky.app/profile/reverendcrush.com",target:"_blank",rel:"noreferrer",children:"@REVERENDCRUSH.COM"})," ON BLUESKY SOCIAL!!"]})})]})};const su=function(){return(0,Ft.jsxs)(e.Fragment,{children:[(0,Ft.jsxs)("header",{children:[(0,Ft.jsx)("p",{className:"h1-mini",children:"Hey kids! It's"}),(0,Ft.jsxs)("h1",{className:"brand",children:["ReverendCrush",(0,Ft.jsx)("span",{className:"h1-mini",children:".com"}),"!"]})]}),(0,Ft.jsxs)("div",{className:"home-links",children:[(0,Ft.jsx)(iu,{}),(0,Ft.jsxs)("section",{className:"link-list",children:[(0,Ft.jsx)("h2",{children:"Site Attractions"}),(0,Ft.jsxs)(xt,{to:"/contact",children:["SO",(0,Ft.jsx)("span",{className:"flicker",children:"CIA"}),(0,Ft.jsx)("span",{className:"fast-flicker",children:"LS"})]}),(0,Ft.jsx)("br",{}),(0,Ft.jsxs)(xt,{to:"/projects",children:["FO",(0,Ft.jsx)("span",{className:"fast-flicker",children:"R "}),(0,Ft.jsxs)("span",{className:"flicker",children:["F",(0,Ft.jsx)("span",{className:"about_U flicker",children:"u"})]}),"N"]}),(0,Ft.jsx)("br",{}),(0,Ft.jsxs)(xt,{to:"/about",children:["B",(0,Ft.jsx)("span",{className:"fast-flicker",children:"I"}),(0,Ft.jsx)("span",{className:"flicker",children:"O"})]}),(0,Ft.jsx)("br",{})]})]})]})};const au=function(){return(0,Ft.jsx)(e.Fragment,{children:(0,Ft.jsxs)("section",{className:"for-fun",children:[(0,Ft.jsx)("h1",{children:"FOR FUN - Under Construction"}),(0,Ft.jsx)("p",{children:"Hey duders, sorry to get your hopes up, but this section is currently under construction. Technically, it wasn't even supposed to be a part of the soft launch, but the code was already there, so I didn't want to just go through the trouble of excluding the page because that would have been a bigger pain in the ass."}),(0,Ft.jsxs)("p",{children:["I do have plans for this page, but we're talking really far... Far... FAR... ",(0,Ft.jsx)("i",{children:"FAR"})," down the pipeline, as everyone involved in this project either have dayjobs or are making looking for work a dayjob. But I don't want to leave you all empty handed until I can pump some ",(0,Ft.jsx)("i",{children:"actually fun"})," little projects that I have planned."]}),(0,Ft.jsxs)("p",{children:["In the meantime, feel free to take a look at this old Brutal Retrogaming Quiz I cobbled together some years ago. The actual work that went into it is pretty boilerplate, but the actual quiz is aimed to be insanely difficult, even for the most grizzled hardcore, Kusoge/Bakage-loving, PCB-collecting, ",(0,Ft.jsx)("a",{href:"https://tcrf.net",target:"_blank",rel:"noopener noreferrer",children:"TCRF.net"})," article-binging Retrogaming Enthusiast."]}),(0,Ft.jsx)("p",{children:"It's not much, but it's something to do while you wait for me to get my act together. "}),(0,Ft.jsx)("br",{}),(0,Ft.jsxs)("div",{className:"text-center",children:[(0,Ft.jsx)("p",{children:(0,Ft.jsx)("a",{href:"https://reverendcrush.com/retroquiz/",target:"_blank",rel:"noopener noreferrer",className:"funBtn",children:"Brutal Retrogaming Quiz"})}),(0,Ft.jsx)("br",{}),(0,Ft.jsx)("p",{children:(0,Ft.jsx)(xt,{to:"/",children:"BACK TO MAIN"})})]})]})})};const ou=function(){return(0,e.useEffect)((()=>(document.body.classList.add("socials-page"),()=>{document.body.classList.remove("socials-page")})),[]),(0,Ft.jsx)(e.Fragment,{children:(0,Ft.jsxs)("section",{className:"sm-plus-list",children:[(0,Ft.jsx)("h1",{children:"All Socials!"}),(0,Ft.jsx)("h2",{children:"Bluesky Social (Bsky)"}),(0,Ft.jsx)("a",{className:"sm-link",href:"https://bsky.app/profile/reverendcrush.com",target:"_blank",rel:"noreferrer",children:"@reverendcrush.com"}),(0,Ft.jsx)("p",{children:"In case you missed the two or five links to it on the front page. This one is currently the Social Media platform I use the most. I do follow back, but I have a whole vetting process... so don't take it personally if I don't follow right away. That pretty much applies to any of the other social media platforms."}),(0,Ft.jsx)("h2",{children:"Mastodon"}),(0,Ft.jsx)("a",{className:"sm-link",href:"https://mastodon.sdf.org/@ReverendCrush",target:"_blank",rel:"noreferrer",children:"@ReverendCrush@mastodon.sdf.org"}),(0,Ft.jsx)("p",{children:"Occaisionally updated, and when I do, I can usually provide more context. If Bsky is down, you'll find me here (and MAYBE TwiX if I feel like I hate myself enough.)"}),(0,Ft.jsxs)("p",{children:["The folks who run this instance, the ",(0,Ft.jsx)("a",{href:"https://sdf.org/",target:"_blank",rel:"noreferrer",children:"Super Dimensional Fortress"}),', have been around the Internet since 1987; WELL before Al Gore uttered the words "World Wide Web". If you\'re looking for a chill Mast instance filled with ',(0,Ft.jsx)("i",{children:"legitimate"})," internet elders (seriously, I bet these some of these folks were arguing over Usenet as to who Yoda teased \"there's is another\" to Obi-Wan's force ghost in Jedi WAY back in the 1980's), give them a visit. And give me a follow if you do. Or just follow me if you're into that whole federated thing but don't want to change Mast instances."]}),(0,Ft.jsx)("h2",{children:"Discord (DM)"}),(0,Ft.jsx)("p",{children:"I'm usually idle on here, but the best way to privately reach out to me is just \"reverendcrush\". I'm choosing not to link directly to it is to avoid randos clicking. You should be able to figure out how to contact me with just that if you know your way around Discord and aren't a bot. Note that I am usually idle, but I'm always on, and will respond to most DMs within a day or two. Might want to ask me via Bsky before adding me, unless I already know you well enough that I'm not going to refuse your request."}),(0,Ft.jsx)("p",{children:"I have a few hangout spots, but... I'm not super active in any of them. Maybe that'll change once I'm allowed to have a break..."}),(0,Ft.jsx)("h2",{children:"Reddit"}),(0,Ft.jsx)("a",{className:"sm-link",href:"https://www.reddit.com/user/ReverendCrush/",children:"u/ReverendCrush"}),(0,Ft.jsx)("p",{children:"I'm active-ish. You'll probably see me pipe in on r/NES, r/SNES, and r/Retrogaming once in a blue moon. Honestly not a huge redditor."}),(0,Ft.jsx)("p",{children:'Do they still call them "redditors"?'}),(0,Ft.jsxs)("h2",{children:["Twi",(0,Ft.jsx)("span",{className:"get-bent-elon",children:"X"})]}),(0,Ft.jsxs)("p",{children:[(0,Ft.jsx)("strike",{children:"It's @ReverendCrush"}),' oh, whoopsie-doodle, I deactivated. You might see some stuff from the "Twitter" archives pop up on other social media platforms down the road. Stay tuned...']}),(0,Ft.jsx)("h2",{children:"Anything by Meta"}),(0,Ft.jsx)("p",{children:"Don't bother..."}),(0,Ft.jsx)("h2",{children:"Snapchat?"}),(0,Ft.jsx)("p",{children:"Nope. I'm a middle-aged hermit who plays old video games, codes, subscribes to a denomination of Taoism/Buddhism that takes The Big Lebowski literally, but somehow manages to have a busy schedule. What am I supposed to do with Snapchat?"}),(0,Ft.jsx)("h2",{children:"TikTok!?"}),(0,Ft.jsx)("p",{children:"Same situation as Snapchat. I'm not their demographic. I'm not even sure what their demographic is, but I'm pretty sure it's not me."}),(0,Ft.jsx)("h2",{children:"We don't know why we're bothering to ask, but LinkedIn?"}),(0,Ft.jsx)("p",{children:"The LinkedIn crowd isn't exactly my cup of yerba mate, and I don't think I'm their's. I'm the kind of person who, when asked by his boss \"Who's your role model?\" in a company meeting, I answer \"dril\" right before they learn who that is, and I'm required to point out how many professional accounts follow dril and then blow the boss' mind while probably saving my job. You really don't want me anywhere near LinkedIn, despite my workaholism."}),(0,Ft.jsxs)("p",{children:["However, my buddy who coded a huge chunk of this webpage plus the BlueSky section on the front page, MCT630 (formerly mctworks) is somewhere on there. If you're looking for a web dev and like what you see here, he's the one to speak to. He's requested I not link directly to his LinkedIn, but it's on ",(0,Ft.jsx)("a",{href:"https://mct630.com",target:"_blank",rel:"noreferrer",children:"his website"}),"."]}),(0,Ft.jsx)("h2",{children:"Something Awful Forums?"}),(0,Ft.jsx)("p",{children:(0,Ft.jsx)("i",{children:"(no comment)"})}),(0,Ft.jsx)(xt,{to:"/",children:"RETURN TO MAIN"})]})})},lu=()=>{const t=et();(0,e.useEffect)((()=>{window.scrollTo(0,0)}),[t])};function cu(){return lu(),(0,Ft.jsxs)(e.Fragment,{children:[(0,Ft.jsx)(Mt,{}),(0,Ft.jsxs)("div",{id:"page-wrap",className:"page-wrap",children:[(0,Ft.jsxs)(vt,{children:[(0,Ft.jsx)(gt,{exact:!0,path:"/",element:(0,Ft.jsx)(su,{})}),(0,Ft.jsx)(gt,{path:"/about",element:(0,Ft.jsx)(Gt,{})}),(0,Ft.jsx)(gt,{path:"/projects",element:(0,Ft.jsx)(au,{})}),(0,Ft.jsx)(gt,{path:"/contact",element:(0,Ft.jsx)(ou,{})})]}),(0,Ft.jsx)(Vt,{})]})]})}const uu=function(){return(0,Ft.jsxs)("div",{className:"App",id:"outer-container",children:[(0,Ft.jsxs)(le,{children:[(0,Ft.jsx)("meta",{charset:"UTF-8"}),(0,Ft.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),(0,Ft.jsx)("meta",{"http-equiv":"X-UA-Compatible",content:"ie=edge"}),(0,Ft.jsx)("meta",{name:"description",content:"Home of Dr. Reverend Crush, Dudeist Gamer and Retrogaming Enthusiast."}),(0,Ft.jsx)("meta",{name:"keywords",content:"reverendcrush, reverend crush, ichibancrush, ichiban crush, retrogaming, gaming, bluesky, bluesky social, bluesky social media"}),(0,Ft.jsx)("meta",{property:"og:type",content:"website"}),(0,Ft.jsx)("meta",{property:"og:title",content:"ReverendCrush.com"}),(0,Ft.jsx)("meta",{property:"og:description",content:"Home of Dr. Reverend Crush, Dudeist Gamer and Retrogaming Enthusiast."}),(0,Ft.jsx)("meta",{property:"og:image",content:"https://reverendcrush.com/img/og_img.png"}),(0,Ft.jsx)("meta",{property:"og:url",content:"https://reverendcrush.com"}),(0,Ft.jsx)("meta",{property:"og:site_name",content:"ReverendCrush.com"}),(0,Ft.jsx)("meta",{name:"twitter:title",content:"ReverendCrush.com"}),(0,Ft.jsx)("meta",{name:"twitter:description",content:"Home of Reverend Crush, Dudeist Gamer/Retrogaming Enthusiast. More entertaining than reading Elon's horrible posts."}),(0,Ft.jsx)("meta",{name:"twitter:image",content:"https://reverendcrush.com/img/x_img.png"}),(0,Ft.jsx)("meta",{name:"twitter:site",content:"@reverendcrush"}),(0,Ft.jsx)("meta",{name:"twitter:creator",content:"@reverendcrush"}),(0,Ft.jsx)("meta",{name:"robots",content:"index, follow"})]}),(0,Ft.jsx)(wt,{children:(0,Ft.jsx)(cu,{})})]})},du=e=>{e&&e instanceof Function&&r.e(453).then(r.bind(r,6453)).then((t=>{let{getCLS:r,getFID:n,getFCP:i,getLCP:s,getTTFB:a}=t;r(e),n(e),i(e),s(e),a(e)}))},fu=document.getElementById("root");(0,n.H)(fu).render((0,Ft.jsx)(uu,{tab:"home"})),du()})()})();
//# sourceMappingURL=main.ffa232eb.js.map